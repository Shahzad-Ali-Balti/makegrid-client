exports.id=438,exports.ids=[438],exports.modules={73269:(e,t,n)=>{"use strict";n.d(t,{c:()=>d});var r=n(58009),i=n(29),a=n(7592),o=function(e){return e[e.NONE=0]="NONE",e[e.START=1]="START",e[e.ACTIVE=2]="ACTIVE",e}(o||{});let s=e=>e&&e.isOrthographicCamera,l=e=>e&&e.isBox3,u=e=>1-Math.exp(-5*e)+.007*e,c=r.createContext(null);function d({children:e,maxDuration:t=1,margin:n=1.2,observe:d,fit:h,clip:f,interpolateFunc:p=u,onFit:m}){let g=r.useRef(null),{camera:v,size:y,invalidate:b}=(0,a.A)(),x=(0,a.A)(e=>e.controls),_=r.useRef(m);_.current=m;let S=r.useRef({camPos:new i.Pq0,camRot:new i.PTz,camZoom:1}),A=r.useRef({camPos:void 0,camRot:void 0,camZoom:void 0,camUp:void 0,target:void 0}),w=r.useRef(o.NONE),E=r.useRef(0),[M]=r.useState(()=>new i.NRn),C=r.useMemo(()=>{function e(){let e=M.getSize(new i.Pq0),t=M.getCenter(new i.Pq0),r=Math.max(e.x,e.y,e.z),a=s(v)?4*r:r/(2*Math.atan(Math.PI*v.fov/360)),o=s(v)?4*r:a/v.aspect;return{box:M,size:e,center:t,distance:n*Math.max(a,o)}}return{getSize:e,refresh(e){if(l(e))M.copy(e);else{let t=e||g.current;if(!t)return this;t.updateWorldMatrix(!0,!0),M.setFromObject(t)}if(M.isEmpty()){let e=v.position.length()||10;M.setFromCenterAndSize(new i.Pq0,new i.Pq0(e,e,e))}return S.current.camPos.copy(v.position),S.current.camRot.copy(v.quaternion),s(v)&&(S.current.camZoom=v.zoom),A.current.camPos=void 0,A.current.camRot=void 0,A.current.camZoom=void 0,A.current.camUp=void 0,A.current.target=void 0,this},reset(){let{center:t,distance:n}=e(),r=v.position.clone().sub(t).normalize();A.current.camPos=t.clone().addScaledVector(r,n),A.current.target=t.clone();let a=new i.kn4().lookAt(A.current.camPos,A.current.target,v.up);return A.current.camRot=new i.PTz().setFromRotationMatrix(a),w.current=o.START,E.current=0,this},moveTo(e){return A.current.camPos=Array.isArray(e)?new i.Pq0(...e):e.clone(),w.current=o.START,E.current=0,this},lookAt({target:e,up:t}){A.current.target=Array.isArray(e)?new i.Pq0(...e):e.clone(),t?A.current.camUp=Array.isArray(t)?new i.Pq0(...t):t.clone():A.current.camUp=v.up.clone();let n=new i.kn4().lookAt(A.current.camPos||v.position,A.current.target,A.current.camUp);return A.current.camRot=new i.PTz().setFromRotationMatrix(n),w.current=o.START,E.current=0,this},to({position:e,target:t}){return this.moveTo(e).lookAt({target:t})},fit(){if(!s(v))return this.reset();let e=0,t=0,r=[new i.Pq0(M.min.x,M.min.y,M.min.z),new i.Pq0(M.min.x,M.max.y,M.min.z),new i.Pq0(M.min.x,M.min.y,M.max.z),new i.Pq0(M.min.x,M.max.y,M.max.z),new i.Pq0(M.max.x,M.max.y,M.max.z),new i.Pq0(M.max.x,M.max.y,M.min.z),new i.Pq0(M.max.x,M.min.y,M.max.z),new i.Pq0(M.max.x,M.min.y,M.min.z)],a=A.current.camPos||v.position,l=A.current.target||(null==x?void 0:x.target),u=A.current.camUp||v.up,c=l?new i.kn4().lookAt(a,l,u).setPosition(a).invert():v.matrixWorldInverse;for(let n of r)n.applyMatrix4(c),e=Math.max(e,Math.abs(n.y)),t=Math.max(t,Math.abs(n.x));e*=2,t*=2;let d=(v.top-v.bottom)/e,h=(v.right-v.left)/t;return A.current.camZoom=Math.min(d,h)/n,w.current=o.START,E.current=0,_.current&&_.current(this.getSize()),this},clip(){let{distance:t}=e();return v.near=t/100,v.far=100*t,v.updateProjectionMatrix(),x&&(x.maxDistance=10*t,x.update()),b(),this}}},[M,v,x,n,b]);r.useLayoutEffect(()=>{if(x){let e=()=>{if(x&&A.current.target&&w.current!==o.NONE){let e=new i.Pq0().setFromMatrixColumn(v.matrix,2),t=S.current.camPos.distanceTo(x.target),n=(A.current.camPos||S.current.camPos).distanceTo(A.current.target),r=(1-E.current)*t+E.current*n;x.target.copy(v.position).addScaledVector(e,-r),x.update()}w.current=o.NONE};return x.addEventListener("start",e),()=>x.removeEventListener("start",e)}},[x]);let T=r.useRef(0);return r.useLayoutEffect(()=>{(d||0==T.current++)&&(C.refresh(),h&&C.reset().fit(),f&&C.clip())},[y,f,h,d,v,x]),(0,a.C)((e,n)=>{if(w.current===o.START)w.current=o.ACTIVE,b();else if(w.current===o.ACTIVE){if(E.current+=n/t,E.current>=1)A.current.camPos&&v.position.copy(A.current.camPos),A.current.camRot&&v.quaternion.copy(A.current.camRot),A.current.camUp&&v.up.copy(A.current.camUp),A.current.camZoom&&s(v)&&(v.zoom=A.current.camZoom),v.updateMatrixWorld(),v.updateProjectionMatrix(),x&&A.current.target&&(x.target.copy(A.current.target),x.update()),w.current=o.NONE;else{let e=p(E.current);A.current.camPos&&v.position.lerpVectors(S.current.camPos,A.current.camPos,e),A.current.camRot&&v.quaternion.slerpQuaternions(S.current.camRot,A.current.camRot,e),A.current.camUp&&v.up.set(0,1,0).applyQuaternion(v.quaternion),A.current.camZoom&&s(v)&&(v.zoom=(1-e)*S.current.camZoom+e*A.current.camZoom),v.updateMatrixWorld(),v.updateProjectionMatrix()}b()}}),r.createElement("group",{ref:g},r.createElement(c.Provider,{value:C},e))}},64385:(e,t,n)=>{"use strict";n.d(t,{_:()=>u});var r=n(11855),i=n(58009),a=n(29),o=n(7592);let s={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},l={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},u=i.forwardRef(({scale:e=10,frames:t=1/0,opacity:n=1,width:u=1,height:c=1,blur:d=1,near:h=0,far:f=10,resolution:p=512,smooth:m=!0,color:g="#000000",depthWrite:v=!1,renderOrder:y,...b},x)=>{let _,S;let A=i.useRef(null),w=(0,o.A)(e=>e.scene),E=(0,o.A)(e=>e.gl),M=i.useRef(null);u*=Array.isArray(e)?e[0]:e||1,c*=Array.isArray(e)?e[1]:e||1;let[C,T,R,P,I,B,L]=i.useMemo(()=>{let e=new a.nWS(p,p),t=new a.nWS(p,p);t.texture.generateMipmaps=e.texture.generateMipmaps=!1;let n=new a.bdM(u,c).rotateX(Math.PI/2),r=new a.eaF(n),i=new a.CSG;i.depthTest=i.depthWrite=!1,i.onBeforeCompile=e=>{e.uniforms={...e.uniforms,ucolor:{value:new a.Q1f(g)}},e.fragmentShader=e.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),e.fragmentShader=e.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};let o=new a.BKk(s),d=new a.BKk(l);return d.depthTest=o.depthTest=!1,[e,n,i,r,o,d,t]},[p,u,c,e,g]),D=e=>{P.visible=!0,P.material=I,I.uniforms.tDiffuse.value=C.texture,I.uniforms.h.value=1*e/256,E.setRenderTarget(L),E.render(P,M.current),P.material=B,B.uniforms.tDiffuse.value=L.texture,B.uniforms.v.value=1*e/256,E.setRenderTarget(C),E.render(P,M.current),P.visible=!1},k=0;return(0,o.C)(()=>{M.current&&(t===1/0||k<t)&&(k++,_=w.background,S=w.overrideMaterial,A.current.visible=!1,w.background=null,w.overrideMaterial=R,E.setRenderTarget(C),E.render(w,M.current),D(d),m&&D(.4*d),E.setRenderTarget(null),A.current.visible=!0,w.overrideMaterial=S,w.background=_)}),i.useImperativeHandle(x,()=>A.current,[]),i.createElement("group",(0,r.A)({"rotation-x":Math.PI/2},b,{ref:A}),i.createElement("mesh",{renderOrder:y,geometry:T,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},i.createElement("meshBasicMaterial",{transparent:!0,map:C.texture,opacity:n,depthWrite:v})),i.createElement("orthographicCamera",{ref:M,args:[-u/2,u/2,c/2,-c/2,h,f]}))})},72559:(e,t,n)=>{"use strict";let r;n.d(t,{OH:()=>eJ});var i=n(11855),a=n(58009),o=n(7592),s=n(29),l=n(90780);let u=e=>e&&e.isCubeTexture;class c extends s.eaF{constructor(e,t){var n,r;let i=u(e),a=Math.floor(Math.log2((null!=(r=i?null==(n=e.image[0])?void 0:n.width:e.image.width)?r:1024)/4)),o=Math.pow(2,a),c=3*Math.max(o,112),d=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,h=[i?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/c}`,`#define CUBEUV_TEXEL_HEIGHT ${1/(4*o)}`,`#define CUBEUV_MAX_MIP ${a}.0`].join("\n")+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${l.r>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `;super(new s.WBB(1,16),new s.BKk({uniforms:{map:{value:e},height:{value:(null==t?void 0:t.height)||15},radius:{value:(null==t?void 0:t.radius)||100}},fragmentShader:h,vertexShader:d,side:s.$EB}))}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class d extends s.BRH{constructor(e){super(e),this.type=s.ix0}parse(e){let t,n,r;let i=function(e,t){switch(e){case 1:throw Error("THREE.RGBELoader: Read Error: "+(t||""));case 2:throw Error("THREE.RGBELoader: Write Error: "+(t||""));case 3:throw Error("THREE.RGBELoader: Bad File Format: "+(t||""));default:throw Error("THREE.RGBELoader: Memory Error: "+(t||""))}},a=function(e,t,n){t=t||1024;let r=e.pos,i=-1,a=0,o="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));for(;0>(i=s.indexOf("\n"))&&a<t&&r<e.byteLength;)o+=s,a+=s.length,r+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return -1<i&&(!1!==n&&(e.pos+=a+i+1),o+s.slice(0,i))},o=new Uint8Array(e);o.pos=0;let l=function(e){let t,n;let r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,u={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};for(!(e.pos>=e.byteLength)&&(t=a(e))||i(1,"no header found"),(n=t.match(/^#\?(\S+)/))||i(3,"bad initial token"),u.valid|=1,u.programtype=n[1],u.string+=t+"\n";!1!==(t=a(e));){if(u.string+=t+"\n","#"===t.charAt(0)){u.comments+=t+"\n";continue}if((n=t.match(r))&&(u.gamma=parseFloat(n[1])),(n=t.match(o))&&(u.exposure=parseFloat(n[1])),(n=t.match(s))&&(u.valid|=2,u.format=n[1]),(n=t.match(l))&&(u.valid|=4,u.height=parseInt(n[1],10),u.width=parseInt(n[2],10)),2&u.valid&&4&u.valid)break}return 2&u.valid||i(3,"missing format specifier"),4&u.valid||i(3,"missing image size specifier"),u}(o),u=l.width,c=l.height,d=function(e,t,n){if(t<8||t>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);t!==(e[2]<<8|e[3])&&i(3,"wrong scanline width");let r=new Uint8Array(4*t*n);r.length||i(4,"unable to allocate buffer space");let a=0,o=0,s=4*t,l=new Uint8Array(4),u=new Uint8Array(s),c=n;for(;c>0&&o<e.byteLength;){o+4>e.byteLength&&i(1),l[0]=e[o++],l[1]=e[o++],l[2]=e[o++],l[3]=e[o++],(2!=l[0]||2!=l[1]||(l[2]<<8|l[3])!=t)&&i(3,"bad rgbe scanline format");let n=0,d;for(;n<s&&o<e.byteLength;){let t=(d=e[o++])>128;if(t&&(d-=128),(0===d||n+d>s)&&i(3,"bad scanline data"),t){let t=e[o++];for(let e=0;e<d;e++)u[n++]=t}else u.set(e.subarray(o,o+d),n),n+=d,o+=d}for(let e=0;e<t;e++){let n=0;r[a]=u[e+n],n+=t,r[a+1]=u[e+n],n+=t,r[a+2]=u[e+n],n+=t,r[a+3]=u[e+n],a+=4}c--}return r}(o.subarray(o.pos),u,c);switch(this.type){case s.RQf:let h=new Float32Array(4*(r=d.length/4));for(let e=0;e<r;e++)!function(e,t,n,r){let i=Math.pow(2,e[t+3]-128)/255;n[r+0]=e[t+0]*i,n[r+1]=e[t+1]*i,n[r+2]=e[t+2]*i,n[r+3]=1}(d,4*e,h,4*e);t=h,n=s.RQf;break;case s.ix0:let f=new Uint16Array(4*(r=d.length/4));for(let e=0;e<r;e++)!function(e,t,n,r){let i=Math.pow(2,e[t+3]-128)/255;n[r+0]=s.GxU.toHalfFloat(Math.min(e[t+0]*i,65504)),n[r+1]=s.GxU.toHalfFloat(Math.min(e[t+1]*i,65504)),n[r+2]=s.GxU.toHalfFloat(Math.min(e[t+2]*i,65504)),n[r+3]=s.GxU.toHalfFloat(1)}(d,4*e,f,4*e);t=f,n=s.ix0;break;default:throw Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:u,height:c,data:t,header:l.string,gamma:l.gamma,exposure:l.exposure,type:n}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,function(e,n){switch(e.type){case s.RQf:case s.ix0:"colorSpace"in e?e.colorSpace="srgb-linear":e.encoding=3e3,e.minFilter=s.k6q,e.magFilter=s.k6q,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)},n,r)}}var h=(0,n(8086).createRequire)("/");try{h("worker_threads").Worker}catch(e){}var f=Uint8Array,p=Uint16Array,m=Uint32Array,g=new f([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),v=new f([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),y=new f([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),b=function(e,t){for(var n=new p(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new m(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return[n,i]},x=b(g,2),_=x[0],S=x[1];_[28]=258,S[258]=28;for(var A=b(v,0),w=A[0],E=A[1],M=new p(32768),C=0;C<32768;++C){var T=(43690&C)>>>1|(21845&C)<<1;T=(61680&(T=(52428&T)>>>2|(13107&T)<<2))>>>4|(3855&T)<<4,M[C]=((65280&T)>>>8|(255&T)<<8)>>>1}for(var R=function(e,t,n){for(var r,i=e.length,a=0,o=new p(t);a<i;++a)++o[e[a]-1];var s=new p(t);for(a=0;a<t;++a)s[a]=s[a-1]+o[a-1]<<1;if(n){r=new p(1<<t);var l=15-t;for(a=0;a<i;++a)if(e[a])for(var u=a<<4|e[a],c=t-e[a],d=s[e[a]-1]++<<c,h=d|(1<<c)-1;d<=h;++d)r[M[d]>>>l]=u}else for(a=0,r=new p(i);a<i;++a)e[a]&&(r[a]=M[s[e[a]-1]++]>>>15-e[a]);return r},P=new f(288),C=0;C<144;++C)P[C]=8;for(var C=144;C<256;++C)P[C]=9;for(var C=256;C<280;++C)P[C]=7;for(var C=280;C<288;++C)P[C]=8;for(var I=new f(32),C=0;C<32;++C)I[C]=5;var B=R(P,9,1),L=R(I,5,1),D=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},k=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},O=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},N=function(e){return(e/8|0)+(7&e&&1)},F=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof p?p:e instanceof m?m:f)(n-t);return r.set(e.subarray(t,n)),r},U=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new f(0);var i=!t||n,a=!n||n.i;n||(n={}),t||(t=new f(3*r));var o=function(e){var n=t.length;if(e>n){var r=new f(Math.max(2*n,e));r.set(t),t=r}},s=n.f||0,l=n.p||0,u=n.b||0,c=n.l,d=n.d,h=n.m,p=n.n,m=8*r;do{if(!c){n.f=s=k(e,l,1);var b=k(e,l+1,3);if(l+=3,b){if(1==b)c=B,d=L,h=9,p=5;else if(2==b){var x=k(e,l,31)+257,S=k(e,l+10,15)+4,A=x+k(e,l+5,31)+1;l+=14;for(var E=new f(A),M=new f(19),C=0;C<S;++C)M[y[C]]=k(e,l+3*C,7);l+=3*S;for(var T=D(M),P=(1<<T)-1,I=R(M,T,1),C=0;C<A;){var U=I[k(e,l,P)];l+=15&U;var z=U>>>4;if(z<16)E[C++]=z;else{var H=0,G=0;for(16==z?(G=3+k(e,l,3),l+=2,H=E[C-1]):17==z?(G=3+k(e,l,7),l+=3):18==z&&(G=11+k(e,l,127),l+=7);G--;)E[C++]=H}}var V=E.subarray(0,x),j=E.subarray(x);h=D(V),p=D(j),c=R(V,h,1),d=R(j,p,1)}else throw"invalid block type"}else{var z=N(l)+4,W=e[z-4]|e[z-3]<<8,X=z+W;if(X>r){if(a)throw"unexpected EOF";break}i&&o(u+W),t.set(e.subarray(z,X),u),n.b=u+=W,n.p=l=8*X;continue}if(l>m){if(a)throw"unexpected EOF";break}}i&&o(u+131072);for(var J=(1<<h)-1,Y=(1<<p)-1,K=l;;K=l){var H=c[O(e,l)&J],q=H>>>4;if((l+=15&H)>m){if(a)throw"unexpected EOF";break}if(!H)throw"invalid length/literal";if(q<256)t[u++]=q;else if(256==q){K=l,c=null;break}else{var $=q-254;if(q>264){var C=q-257,Q=g[C];$=k(e,l,(1<<Q)-1)+_[C],l+=Q}var Z=d[O(e,l)&Y],ee=Z>>>4;if(!Z)throw"invalid distance";l+=15&Z;var j=w[ee];if(ee>3){var Q=v[ee];j+=O(e,l)&(1<<Q)-1,l+=Q}if(l>m){if(a)throw"unexpected EOF";break}i&&o(u+131072);for(var et=u+$;u<et;u+=4)t[u]=t[u-j],t[u+1]=t[u+1-j],t[u+2]=t[u+2-j],t[u+3]=t[u+3-j];u=et}}n.l=c,n.p=K,n.b=u,c&&(s=1,n.m=h,n.d=d,n.n=p)}while(!s);return u==t.length?t:F(t,0,u)},z=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},H=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},G=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,a=n.slice();if(!i)return[K,0];if(1==i){var o=new f(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var s=n[0],l=n[1],u=0,c=1,d=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};c!=i-1;)s=n[n[u].f<n[d].f?u++:d++],l=n[u!=c&&n[u].f<n[d].f?u++:d++],n[c++]={s:-1,f:s.f+l.f,l:s,r:l};for(var h=a[0].s,r=1;r<i;++r)a[r].s>h&&(h=a[r].s);var m=new p(h+1),g=V(n[c-1],m,0);if(g>t){var r=0,v=0,y=g-t,b=1<<y;for(a.sort(function(e,t){return m[t.s]-m[e.s]||e.f-t.f});r<i;++r){var x=a[r].s;if(m[x]>t)v+=b-(1<<g-m[x]),m[x]=t;else break}for(v>>>=y;v>0;){var _=a[r].s;m[_]<t?v-=1<<t-m[_]++-1:++r}for(;r>=0&&v;--r){var S=a[r].s;m[S]==t&&(--m[S],++v)}g=t}return[new f(m),g]},V=function(e,t,n){return -1==e.s?Math.max(V(e.l,t,n+1),V(e.r,t,n+1)):t[e.s]=n},j=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new p(++t),r=0,i=e[0],a=1,o=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==i&&s!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=e[s]}return[n.subarray(0,r),t]},W=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},X=function(e,t,n){var r=n.length,i=N(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var a=0;a<r;++a)e[i+a+4]=n[a];return(i+4+r)*8},J=function(e,t,n,r,i,a,o,s,l,u,c){z(t,c++,n),++i[256];for(var d,h,f,m,b=G(i,15),x=b[0],_=b[1],S=G(a,15),A=S[0],w=S[1],E=j(x),M=E[0],C=E[1],T=j(A),B=T[0],L=T[1],D=new p(19),k=0;k<M.length;++k)D[31&M[k]]++;for(var k=0;k<B.length;++k)D[31&B[k]]++;for(var O=G(D,7),N=O[0],F=O[1],U=19;U>4&&!N[y[U-1]];--U);var V=u+5<<3,J=W(i,P)+W(a,I)+o,Y=W(i,x)+W(a,A)+o+14+3*U+W(D,N)+(2*D[16]+3*D[17]+7*D[18]);if(V<=J&&V<=Y)return X(t,c,e.subarray(l,l+u));if(z(t,c,1+(Y<J)),c+=2,Y<J){d=R(x,_,0),h=x,f=R(A,w,0),m=A;var K=R(N,F,0);z(t,c,C-257),z(t,c+5,L-1),z(t,c+10,U-4),c+=14;for(var k=0;k<U;++k)z(t,c+3*k,N[y[k]]);c+=3*U;for(var q=[M,B],$=0;$<2;++$)for(var Q=q[$],k=0;k<Q.length;++k){var Z=31&Q[k];z(t,c,K[Z]),c+=N[Z],Z>15&&(z(t,c,Q[k]>>>5&127),c+=Q[k]>>>12)}}else d=null,h=P,f=null,m=I;for(var k=0;k<s;++k)if(r[k]>255){var Z=r[k]>>>18&31;H(t,c,d[Z+257]),c+=h[Z+257],Z>7&&(z(t,c,r[k]>>>23&31),c+=g[Z]);var ee=31&r[k];H(t,c,f[ee]),c+=m[ee],ee>3&&(H(t,c,r[k]>>>5&8191),c+=v[ee])}else H(t,c,d[r[k]]),c+=h[r[k]];return H(t,c,d[256]),c+h[256]},Y=new m([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),K=new f(0),q=function(e,t,n,r,i,a){var o=e.length,s=new f(r+o+5*(1+Math.ceil(o/7e3))+i),l=s.subarray(r,s.length-i),u=0;if(!t||o<8)for(var c=0;c<=o;c+=65535){var d=c+65535;d<o?u=X(l,u,e.subarray(c,d)):(l[c]=a,u=X(l,u,e.subarray(c,o)))}else{for(var h=Y[t-1],y=h>>>13,b=8191&h,x=(1<<n)-1,_=new p(32768),A=new p(x+1),w=Math.ceil(n/3),M=2*w,C=function(t){return(e[t]^e[t+1]<<w^e[t+2]<<M)&x},T=new m(25e3),R=new p(288),P=new p(32),I=0,B=0,c=0,L=0,D=0,k=0;c<o;++c){var O=C(c),U=32767&c,z=A[O];if(_[U]=z,A[O]=U,D<=c){var H=o-c;if((I>7e3||L>24576)&&H>423){u=J(e,l,0,T,R,P,B,L,k,c-k,u),L=I=B=0,k=c;for(var G=0;G<286;++G)R[G]=0;for(var G=0;G<30;++G)P[G]=0}var V=2,j=0,W=b,q=U-z&32767;if(H>2&&O==C(c-q))for(var $=Math.min(y,H)-1,Q=Math.min(32767,c),Z=Math.min(258,H);q<=Q&&--W&&U!=z;){if(e[c+V]==e[c+V-q]){for(var ee=0;ee<Z&&e[c+ee]==e[c+ee-q];++ee);if(ee>V){if(V=ee,j=q,ee>$)break;for(var et=Math.min(q,ee-2),en=0,G=0;G<et;++G){var er=c-q+G+32768&32767,ei=_[er],ea=er-ei+32768&32767;ea>en&&(en=ea,z=er)}}}z=_[U=z],q+=U-z+32768&32767}if(j){T[L++]=0x10000000|S[V]<<18|E[j];var eo=31&S[V],es=31&E[j];B+=g[eo]+v[es],++R[257+eo],++P[es],D=c+V,++I}else T[L++]=e[c],++R[e[c]]}}u=J(e,l,a,T,R,P,B,L,k,c-k,u),!a&&7&u&&(u=X(l,u+1,K))}return F(s,0,r+N(u)+i)},$=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},Q=function(e,t,n){for(var r=e(),i=e.toString(),a=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/ /g,"").split(","),o=0;o<r.length;++o){var s=r[o],l=a[o];if("function"==typeof s){t+=";"+l+"=";var u=s.toString();if(s.prototype){if(-1!=u.indexOf("[native code]")){var c=u.indexOf(" ",8)+1;t+=u.slice(c,u.indexOf("(",c))}else for(var d in t+=u,s.prototype)t+=";"+l+".prototype."+d+"="+s.prototype[d].toString()}else t+=u}else n[l]=s}return[t,n]},Z=function(e){var t=[];for(var n in e)(e[n]instanceof f||e[n]instanceof p||e[n]instanceof m)&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t},ee=function(e,t,n,r){if(!null[n]){for(var i,a="",o={},s=e.length-1,l=0;l<s;++l)a=(i=Q(e[l],a,o))[0],o=i[1];null[n]=Q(e[s],a,o)}var u=$({},null[n][1]);return(null)(null[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,u,Z(u),r)},et=function(e){return postMessage(e,[e.buffer])},en=function(e){return e&&e.size&&new f(e.size)},er=function(e,t){return e[t]|e[t+1]<<8},ei=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},ea=function(e,t){return ei(e,t)+0x100000000*ei(e,t+4)},eo=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},es=function(e){if((15&e[0])!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function el(e,t){return U(e,t)}function eu(e,t){return U((es(e),e.subarray(2,-4)),t)}var ec="undefined"!=typeof TextDecoder&&new TextDecoder;try{ec.decode(K,{stream:!0})}catch(e){}let ed=l.r>=152;class eh extends s.BRH{constructor(e){super(e),this.type=s.ix0}parse(e){let t={l:0,c:0,lc:0};function n(e,n,r,i,a){for(;r<e;)n=n<<8|M(i,a),r+=8;r-=e,t.l=n>>r&(1<<e)-1,t.c=n,t.lc=r}let r=Array(59),i={c:0,lc:0};function a(e,t,n,r){e=e<<8|M(n,r),t+=8,i.c=e,i.lc=t}let o={c:0,lc:0};function l(e,t,n,r,s,l,u,c,d,h){if(e==t){r<8&&(a(n,r,s,u),n=i.c,r=i.lc);var f=n>>(r-=8),f=new Uint8Array([f])[0];if(d.value+f>h)return!1;for(var p=c[d.value-1];f-- >0;)c[d.value++]=p}else{if(!(d.value<h))return!1;c[d.value++]=e}o.c=n,o.lc=r}function u(e){var t=65535&e;return t>32767?t-65536:t}let c={a:0,b:0};function d(e,t){var n=u(e),r=u(t),i=n+(1&r)+(r>>1),a=i-r;c.a=i,c.b=a}function h(e,t){var n=65535&t,r=(65535&e)-(n>>1)&65535;c.a=n+r-32768&65535,c.b=r}function f(e,s,u,c,d,h){var f=u.value,p=E(s,u),m=E(s,u);u.value+=4;var g=E(s,u);if(u.value+=4,p<0||p>=65537||m<0||m>=65537)throw"Something wrong with HUF_ENCSIZE";var v=Array(65537),y=Array(16384);!function(e){for(var t=0;t<16384;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(y);var b=c-(u.value-f);if(function(e,i,a,o,s,l,u){for(var c=0,d=0;s<=l;s++){if(a.value-a.value>o)return!1;n(6,c,d,e,a);var h=t.l;if(c=t.c,d=t.lc,u[s]=h,63==h){if(a.value-a.value>o)throw"Something wrong with hufUnpackEncTable";n(8,c,d,e,a);var f=t.l+6;if(c=t.c,d=t.lc,s+f>l+1)throw"Something wrong with hufUnpackEncTable";for(;f--;)u[s++]=0;s--}else if(h>=59){var f=h-59+2;if(s+f>l+1)throw"Something wrong with hufUnpackEncTable";for(;f--;)u[s++]=0;s--}}!function(e){for(var t=0;t<=58;++t)r[t]=0;for(var t=0;t<65537;++t)r[e[t]]+=1;for(var n=0,t=58;t>0;--t){var i=n+r[t]>>1;r[t]=n,n=i}for(var t=0;t<65537;++t){var a=e[t];a>0&&(e[t]=a|r[a]++<<6)}}(u)}(e,0,u,b,p,m,v),g>8*(c-(u.value-f)))throw"Something wrong with hufUncompress";(function(e,t,n,r){for(;t<=n;t++){var i=e[t]>>6,a=63&e[t];if(i>>a)throw"Invalid table entry";if(a>14){var o=r[i>>a-14];if(o.len)throw"Invalid table entry";if(o.lit++,o.p){var s=o.p;o.p=Array(o.lit);for(var l=0;l<o.lit-1;++l)o.p[l]=s[l]}else o.p=[,];o.p[o.lit-1]=t}else if(a)for(var u=0,l=1<<14-a;l>0;l--){var o=r[(i<<14-a)+u];if(o.len||o.p)throw"Invalid table entry";o.len=a,o.lit=t,u++}}})(v,p,m,y),function(e,t,n,r,s,u,c,d,h,f){for(var p=0,m=0,g=Math.trunc(s.value+(u+7)/8);s.value<g;)for(a(p,m,n,s),p=i.c,m=i.lc;m>=14;){var v=t[p>>m-14&16383];if(v.len)m-=v.len,l(v.lit,c,p,m,n,r,s,h,f,d),p=o.c,m=o.lc;else{if(!v.p)throw"hufDecode issues";for(y=0;y<v.lit;y++){for(var y,b=63&e[v.p[y]];m<b&&s.value<g;)a(p,m,n,s),p=i.c,m=i.lc;if(m>=b&&e[v.p[y]]>>6==(p>>m-b&(1<<b)-1)){m-=b,l(v.p[y],c,p,m,n,r,s,h,f,d),p=o.c,m=o.lc;break}}if(y==v.lit)throw"hufDecode issues"}}var x=8-u&7;for(p>>=x,m-=x;m>0;){var v=t[p<<14-m&16383];if(v.len)m-=v.len,l(v.lit,c,p,m,n,r,s,h,f,d),p=o.c,m=o.lc;else throw"hufDecode issues"}}(v,y,e,s,u,g,m,h,d,{value:0})}function p(e){for(var t=1;t<e.length;t++){var n=e[t-1]+e[t]-128;e[t]=n}}function m(e,t){for(var n=0,r=Math.floor((e.length+1)/2),i=0,a=e.length-1;!(i>a)&&(t[i++]=e[n++],!(i>a));)t[i++]=e[r++]}function g(e){for(var t=e.byteLength,n=[],r=0,i=new DataView(e);t>0;){var a=i.getInt8(r++);if(a<0){var o=-a;t-=o+1;for(var s=0;s<o;s++)n.push(i.getUint8(r++))}else{var o=a;t-=2;for(var l=i.getUint8(r++),s=0;s<o+1;s++)n.push(l)}}return n}function v(e){return new DataView(e.array.buffer,e.offset.value,e.size)}function y(e){var t=new Uint8Array(g(e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size))),n=new Uint8Array(t.length);return p(t),m(t,n),new DataView(n.buffer)}function b(e){var t=eu(e.array.slice(e.offset.value,e.offset.value+e.size)),n=new Uint8Array(t.length);return p(t),m(t,n),new DataView(n.buffer)}function x(e){for(var t=e.viewer,n={value:e.offset.value},r=new Uint16Array(e.width*e.scanlineBlockSize*(e.channels*e.type)),i=new Uint8Array(8192),a=0,o=Array(e.channels),s=0;s<e.channels;s++)o[s]={},o[s].start=a,o[s].end=o[s].start,o[s].nx=e.width,o[s].ny=e.lines,o[s].size=e.type,a+=o[s].nx*o[s].ny*o[s].size;var l=B(t,n),u=B(t,n);if(u>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(l<=u)for(var s=0;s<u-l+1;s++)i[s+l]=C(t,n);var p=new Uint16Array(65536),m=function(e,t){for(var n=0,r=0;r<65536;++r)(0==r||e[r>>3]&1<<(7&r))&&(t[n++]=r);for(var i=n-1;n<65536;)t[n++]=0;return i}(i,p),g=E(t,n);f(e.array,t,n,g,r,a);for(var s=0;s<e.channels;++s)for(var v=o[s],y=0;y<o[s].size;++y)!function(e,t,n,r,i,a,o){for(var s=o<16384,l=n>i?i:n,u=1;u<=l;)u<<=1;for(u>>=1,f=u,u>>=1;u>=1;){for(var f,p,m,g,v,y=0,b=0+a*(i-f),x=a*u,_=a*f,S=r*u,A=r*f;y<=b;y+=_){for(var w=y,E=y+r*(n-f);w<=E;w+=A){var M=w+S,C=w+x,T=C+S;s?(d(e[w+t],e[C+t]),p=c.a,g=c.b,d(e[M+t],e[T+t]),m=c.a,v=c.b,d(p,m),e[w+t]=c.a,e[M+t]=c.b,d(g,v)):(h(e[w+t],e[C+t]),p=c.a,g=c.b,h(e[M+t],e[T+t]),m=c.a,v=c.b,h(p,m),e[w+t]=c.a,e[M+t]=c.b,h(g,v)),e[C+t]=c.a,e[T+t]=c.b}if(n&u){var C=w+x;s?d(e[w+t],e[C+t]):h(e[w+t],e[C+t]),p=c.a,e[C+t]=c.b,e[w+t]=p}}if(i&u)for(var w=y,E=y+r*(n-f);w<=E;w+=A){var M=w+S;s?d(e[w+t],e[M+t]):h(e[w+t],e[M+t]),p=c.a,e[M+t]=c.b,e[w+t]=p}f=u,u>>=1}}(r,v.start+y,v.nx,v.size,v.ny,v.nx*v.size,m);!function(e,t,n){for(var r=0;r<n;++r)t[r]=e[t[r]]}(p,r,a);for(var b=0,x=new Uint8Array(r.buffer.byteLength),_=0;_<e.lines;_++)for(var S=0;S<e.channels;S++){var v=o[S],A=v.nx*v.size,w=new Uint8Array(r.buffer,2*v.end,2*A);x.set(w,b),b+=2*A,v.end+=A}return new DataView(x.buffer)}function _(e){var t=eu(e.array.slice(e.offset.value,e.offset.value+e.size));let n=e.lines*e.channels*e.width,r=1==e.type?new Uint16Array(n):new Uint32Array(n),i=0,a=0,o=[,,,,];for(let n=0;n<e.lines;n++)for(let n=0;n<e.channels;n++){let n=0;switch(e.type){case 1:o[0]=i,o[1]=o[0]+e.width,i=o[1]+e.width;for(let i=0;i<e.width;++i)n+=t[o[0]++]<<8|t[o[1]++],r[a]=n,a++;break;case 2:o[0]=i,o[1]=o[0]+e.width,o[2]=o[1]+e.width,i=o[2]+e.width;for(let i=0;i<e.width;++i)n+=t[o[0]++]<<24|t[o[1]++]<<16|t[o[2]++]<<8,r[a]=n,a++}}return new DataView(r.buffer)}function S(e){var t=e.viewer,n={value:e.offset.value},r=new Uint8Array(e.width*e.lines*(e.channels*e.type*2)),i={version:T(t,n),unknownUncompressedSize:T(t,n),unknownCompressedSize:T(t,n),acCompressedSize:T(t,n),dcCompressedSize:T(t,n),rleCompressedSize:T(t,n),rleUncompressedSize:T(t,n),rleRawSize:T(t,n),totalAcUncompressedCount:T(t,n),totalDcUncompressedCount:T(t,n),acCompression:T(t,n)};if(i.version<2)throw"EXRLoader.parse: "+N.compression+" version "+i.version+" is unsupported";for(var a=[],o=B(t,n)-2;o>0;){var l=A(t.buffer,n),u=C(t,n),c=u>>2&3,d=new Int8Array([(u>>4)-1])[0],h=C(t,n);a.push({name:l,index:d,type:h,compression:c}),o-=l.length+3}for(var p=N.channels,m=Array(e.channels),v=0;v<e.channels;++v){var y=m[v]={},x=p[v];y.name=x.name,y.compression=0,y.decoded=!1,y.type=x.pixelType,y.pLinear=x.pLinear,y.width=e.width,y.height=e.lines}for(var _={idx:[,,,]},S=0;S<e.channels;++S)for(var y=m[S],v=0;v<a.length;++v){var w=a[v];y.name==w.name&&(y.compression=w.compression,w.index>=0&&(_.idx[w.index]=S),y.offset=S)}if(i.acCompressedSize>0)switch(i.acCompression){case 0:var E=new Uint16Array(i.totalAcUncompressedCount);f(e.array,t,n,i.acCompressedSize,E,i.totalAcUncompressedCount);break;case 1:var M=e.array.slice(n.value,n.value+i.totalAcUncompressedCount),R=eu(M),E=new Uint16Array(R.buffer);n.value+=i.totalAcUncompressedCount}if(i.dcCompressedSize>0){var P=new Uint16Array(b({array:e.array,offset:n,size:i.dcCompressedSize}).buffer);n.value+=i.dcCompressedSize}if(i.rleRawSize>0){var M=e.array.slice(n.value,n.value+i.rleCompressedSize),R=eu(M),L=g(R.buffer);n.value+=i.rleCompressedSize}for(var D=0,k=Array(m.length),v=0;v<k.length;++v)k[v]=[];for(var O=0;O<e.lines;++O)for(var F=0;F<m.length;++F)k[F].push(D),D+=m[F].width*e.type*2;!function(e,t,n,r,i,a){var o=new DataView(a.buffer),l=n[e.idx[0]].width,u=n[e.idx[0]].height,c=Math.floor(l/8),d=Math.ceil(l/8),h=Math.ceil(u/8),f=l-(d-1)*8,p=u-(h-1)*8,m={value:0},g=[,,,],v=[,,,],y=[,,,],b=[,,,],x=[,,,];for(let n=0;n<3;++n)x[n]=t[e.idx[n]],g[n]=n<1?0:g[n-1]+d*h,v[n]=new Float32Array(64),y[n]=new Uint16Array(64),b[n]=new Uint16Array(64*d);for(let t=0;t<h;++t){var _,S,A=8;t==h-1&&(A=p);var w=8;for(let e=0;e<d;++e){e==d-1&&(w=f);for(let e=0;e<3;++e)y[e].fill(0),y[e][0]=i[g[e]++],function(e,t,n){for(var r,i=1;i<64;)65280==(r=t[e.value])?i=64:r>>8==255?i+=255&r:(n[i]=r,i++),e.value++}(m,r,y[e]),_=y[e],(S=v[e])[0]=I(_[0]),S[1]=I(_[1]),S[2]=I(_[5]),S[3]=I(_[6]),S[4]=I(_[14]),S[5]=I(_[15]),S[6]=I(_[27]),S[7]=I(_[28]),S[8]=I(_[2]),S[9]=I(_[4]),S[10]=I(_[7]),S[11]=I(_[13]),S[12]=I(_[16]),S[13]=I(_[26]),S[14]=I(_[29]),S[15]=I(_[42]),S[16]=I(_[3]),S[17]=I(_[8]),S[18]=I(_[12]),S[19]=I(_[17]),S[20]=I(_[25]),S[21]=I(_[30]),S[22]=I(_[41]),S[23]=I(_[43]),S[24]=I(_[9]),S[25]=I(_[11]),S[26]=I(_[18]),S[27]=I(_[24]),S[28]=I(_[31]),S[29]=I(_[40]),S[30]=I(_[44]),S[31]=I(_[53]),S[32]=I(_[10]),S[33]=I(_[19]),S[34]=I(_[23]),S[35]=I(_[32]),S[36]=I(_[39]),S[37]=I(_[45]),S[38]=I(_[52]),S[39]=I(_[54]),S[40]=I(_[20]),S[41]=I(_[22]),S[42]=I(_[33]),S[43]=I(_[38]),S[44]=I(_[46]),S[45]=I(_[51]),S[46]=I(_[55]),S[47]=I(_[60]),S[48]=I(_[21]),S[49]=I(_[34]),S[50]=I(_[37]),S[51]=I(_[47]),S[52]=I(_[50]),S[53]=I(_[56]),S[54]=I(_[59]),S[55]=I(_[61]),S[56]=I(_[35]),S[57]=I(_[36]),S[58]=I(_[48]),S[59]=I(_[49]),S[60]=I(_[57]),S[61]=I(_[58]),S[62]=I(_[62]),S[63]=I(_[63]),function(e){let t=.5*Math.cos(3.14159/16),n=.5*Math.cos(3.14159/8),r=.5*Math.cos(3*3.14159/16),i=.5*Math.cos(3*3.14159/8);for(var a=[,,,,],o=[,,,,],s=[,,,,],l=[,,,,],u=0;u<8;++u){var c=8*u;a[0]=n*e[c+2],a[1]=i*e[c+2],a[2]=n*e[c+6],a[3]=i*e[c+6],o[0]=t*e[c+1]+r*e[c+3]+.2777854612564676*e[c+5]+.09754573032714427*e[c+7],o[1]=r*e[c+1]-.09754573032714427*e[c+3]-t*e[c+5]-.2777854612564676*e[c+7],o[2]=.2777854612564676*e[c+1]-t*e[c+3]+.09754573032714427*e[c+5]+r*e[c+7],o[3]=.09754573032714427*e[c+1]-.2777854612564676*e[c+3]+r*e[c+5]-t*e[c+7],s[0]=.35355362513961314*(e[c+0]+e[c+4]),s[3]=.35355362513961314*(e[c+0]-e[c+4]),s[1]=a[0]+a[3],s[2]=a[1]-a[2],l[0]=s[0]+s[1],l[1]=s[3]+s[2],l[2]=s[3]-s[2],l[3]=s[0]-s[1],e[c+0]=l[0]+o[0],e[c+1]=l[1]+o[1],e[c+2]=l[2]+o[2],e[c+3]=l[3]+o[3],e[c+4]=l[3]-o[3],e[c+5]=l[2]-o[2],e[c+6]=l[1]-o[1],e[c+7]=l[0]-o[0]}for(var d=0;d<8;++d)a[0]=n*e[16+d],a[1]=i*e[16+d],a[2]=n*e[48+d],a[3]=i*e[48+d],o[0]=t*e[8+d]+r*e[24+d]+.2777854612564676*e[40+d]+.09754573032714427*e[56+d],o[1]=r*e[8+d]-.09754573032714427*e[24+d]-t*e[40+d]-.2777854612564676*e[56+d],o[2]=.2777854612564676*e[8+d]-t*e[24+d]+.09754573032714427*e[40+d]+r*e[56+d],o[3]=.09754573032714427*e[8+d]-.2777854612564676*e[24+d]+r*e[40+d]-t*e[56+d],s[0]=.35355362513961314*(e[d]+e[32+d]),s[3]=.35355362513961314*(e[d]-e[32+d]),s[1]=a[0]+a[3],s[2]=a[1]-a[2],l[0]=s[0]+s[1],l[1]=s[3]+s[2],l[2]=s[3]-s[2],l[3]=s[0]-s[1],e[0+d]=l[0]+o[0],e[8+d]=l[1]+o[1],e[16+d]=l[2]+o[2],e[24+d]=l[3]+o[3],e[32+d]=l[3]-o[3],e[40+d]=l[2]-o[2],e[48+d]=l[1]-o[1],e[56+d]=l[0]-o[0]}(v[e]);(function(e){for(var t=0;t<64;++t){var n=e[0][t],r=e[1][t],i=e[2][t];e[0][t]=n+1.5747*i,e[1][t]=n-.1873*r-.4682*i,e[2][t]=n+1.8556*r}})(v);for(let t=0;t<3;++t)(function(e,t,n){for(var r,i=0;i<64;++i)t[n+i]=s.GxU.toHalfFloat((r=e[i])<=1?Math.sign(r)*Math.pow(Math.abs(r),2.2):Math.sign(r)*Math.pow(9.025013291561939,Math.abs(r)-1))})(v[t],b[t],64*e)}let a=0;for(let r=0;r<3;++r){let i=n[e.idx[r]].type;for(let e=8*t;e<8*t+A;++e){a=x[r][e];for(let t=0;t<c;++t){let n=64*t+(7&e)*8;o.setUint16(a+0*i,b[r][n+0],!0),o.setUint16(a+2*i,b[r][n+1],!0),o.setUint16(a+4*i,b[r][n+2],!0),o.setUint16(a+6*i,b[r][n+3],!0),o.setUint16(a+8*i,b[r][n+4],!0),o.setUint16(a+10*i,b[r][n+5],!0),o.setUint16(a+12*i,b[r][n+6],!0),o.setUint16(a+14*i,b[r][n+7],!0),a+=16*i}}if(c!=d)for(let e=8*t;e<8*t+A;++e){let t=x[r][e]+8*c*2*i,n=64*c+(7&e)*8;for(let e=0;e<w;++e)o.setUint16(t+2*e*i,b[r][n+e],!0)}}}for(var E=new Uint16Array(l),o=new DataView(a.buffer),M=0;M<3;++M){n[e.idx[M]].decoded=!0;var C=n[e.idx[M]].type;if(2==n[M].type)for(var T=0;T<u;++T){let e=x[M][T];for(var R=0;R<l;++R)E[R]=o.getUint16(e+2*R*C,!0);for(var R=0;R<l;++R)o.setFloat32(e+2*R*C,I(E[R]),!0)}}}(_,k,m,E,P,r);for(var v=0;v<m.length;++v){var y=m[v];if(!y.decoded){if(2===y.compression)for(var U=0,z=0,O=0;O<e.lines;++O){for(var H=k[v][U],G=0;G<y.width;++G){for(var V=0;V<2*y.type;++V)r[H++]=L[z+V*y.width*y.height];z++}U++}else throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(r.buffer)}function A(e,t){for(var n=new Uint8Array(e),r=0;0!=n[t.value+r];)r+=1;var i=new TextDecoder().decode(n.slice(t.value,t.value+r));return t.value=t.value+r+1,i}function w(e,t){var n=e.getInt32(t.value,!0);return t.value=t.value+4,n}function E(e,t){var n=e.getUint32(t.value,!0);return t.value=t.value+4,n}function M(e,t){var n=e[t.value];return t.value=t.value+1,n}function C(e,t){var n=e.getUint8(t.value);return t.value=t.value+1,n}let T=function(e,t){let n;return"getBigInt64"in DataView.prototype?n=Number(e.getBigInt64(t.value,!0)):n=e.getUint32(t.value+4,!0)+Number(e.getUint32(t.value,!0)<<32),t.value+=8,n};function R(e,t){var n=e.getFloat32(t.value,!0);return t.value+=4,n}function P(e,t){return s.GxU.toHalfFloat(R(e,t))}function I(e){var t=(31744&e)>>10,n=1023&e;return(e>>15?-1:1)*(t?31===t?n?NaN:1/0:Math.pow(2,t-15)*(1+n/1024):n/1024*6103515625e-14)}function B(e,t){var n=e.getUint16(t.value,!0);return t.value+=2,n}function L(e,t){return I(B(e,t))}let D=new DataView(e),k=new Uint8Array(e),O={value:0},N=function(e,t,n){let r={};if(0x1312f76!=e.getUint32(0,!0))throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";r.version=e.getUint8(4);let i=e.getUint8(5);r.spec={singleTile:!!(2&i),longName:!!(4&i),deepFormat:!!(8&i),multiPart:!!(16&i)},n.value=8;for(var a=!0;a;){var o=A(t,n);if(0==o)a=!1;else{var s=A(t,n),l=E(e,n),u=function(e,t,n,r,i){var a,o,s,l,u;if("string"===r||"stringvector"===r||"iccProfile"===r)return a=new TextDecoder().decode(new Uint8Array(t).slice(n.value,n.value+i)),n.value=n.value+i,a;if("chlist"===r)return function(e,t,n,r){for(var i=n.value,a=[];n.value<i+r-1;){var o=A(t,n),s=w(e,n),l=C(e,n);n.value+=3;var u=w(e,n),c=w(e,n);a.push({name:o,pixelType:s,pLinear:l,xSampling:u,ySampling:c})}return n.value+=1,a}(e,t,n,i);if("chromaticities"===r)return o=R(e,n),s=R(e,n),l=R(e,n),u=R(e,n),{redX:o,redY:s,greenX:l,greenY:u,blueX:R(e,n),blueY:R(e,n),whiteX:R(e,n),whiteY:R(e,n)};if("compression"===r)return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][C(e,n)];if("box2i"===r)return{xMin:E(e,n),yMin:E(e,n),xMax:E(e,n),yMax:E(e,n)};if("lineOrder"===r)return["INCREASING_Y"][C(e,n)];if("float"===r)return R(e,n);else if("v2f"===r)return[R(e,n),R(e,n)];else if("v3f"===r)return[R(e,n),R(e,n),R(e,n)];else if("int"===r)return w(e,n);else if("rational"===r)return[w(e,n),E(e,n)];else if("timecode"===r)return[E(e,n),E(e,n)];else return"preview"===r?(n.value+=i,"skipped"):void(n.value+=i)}(e,t,n,s,l);void 0===u?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${s}'.`):r[o]=u}}if((-5&i)!=0)throw console.error("EXRHeader:",r),"THREE.EXRLoader: provided file is currently unsupported.";return r}(D,e,O),F=function(e,t,n,r,i){let a={size:0,viewer:t,array:n,offset:r,width:e.dataWindow.xMax-e.dataWindow.xMin+1,height:e.dataWindow.yMax-e.dataWindow.yMin+1,channels:e.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:e.channels[0].pixelType,uncompress:null,getter:null,format:null,[ed?"colorSpace":"encoding"]:null};switch(e.compression){case"NO_COMPRESSION":a.lines=1,a.uncompress=v;break;case"RLE_COMPRESSION":a.lines=1,a.uncompress=y;break;case"ZIPS_COMPRESSION":a.lines=1,a.uncompress=b;break;case"ZIP_COMPRESSION":a.lines=16,a.uncompress=b;break;case"PIZ_COMPRESSION":a.lines=32,a.uncompress=x;break;case"PXR24_COMPRESSION":a.lines=16,a.uncompress=_;break;case"DWAA_COMPRESSION":a.lines=32,a.uncompress=S;break;case"DWAB_COMPRESSION":a.lines=256,a.uncompress=S;break;default:throw"EXRLoader.parse: "+e.compression+" is unsupported"}if(a.scanlineBlockSize=a.lines,1==a.type)switch(i){case s.RQf:a.getter=L,a.inputSize=2;break;case s.ix0:a.getter=B,a.inputSize=2}else if(2==a.type)switch(i){case s.RQf:a.getter=R,a.inputSize=4;break;case s.ix0:a.getter=P,a.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+a.type+" for "+e.compression+".";a.blockCount=(e.dataWindow.yMax+1)/a.scanlineBlockSize;for(var o=0;o<a.blockCount;o++)T(t,r);a.outputChannels=3==a.channels?4:a.channels;let l=a.width*a.height*a.outputChannels;switch(i){case s.RQf:a.byteArray=new Float32Array(l),a.channels<a.outputChannels&&a.byteArray.fill(1,0,l);break;case s.ix0:a.byteArray=new Uint16Array(l),a.channels<a.outputChannels&&a.byteArray.fill(15360,0,l);break;default:console.error("THREE.EXRLoader: unsupported type: ",i)}return a.bytesPerLine=a.width*a.inputSize*a.channels,4==a.outputChannels?a.format=s.GWd:a.format=s.VT0,ed?a.colorSpace="srgb-linear":a.encoding=3e3,a}(N,D,k,O,this.type),U={value:0},z={R:0,G:1,B:2,A:3,Y:0};for(let e=0;e<F.height/F.scanlineBlockSize;e++){let t=E(D,O);F.size=E(D,O),F.lines=t+F.scanlineBlockSize>F.height?F.height-t:F.scanlineBlockSize;let n=F.size<F.lines*F.bytesPerLine?F.uncompress(F):v(F);O.value+=F.size;for(let t=0;t<F.scanlineBlockSize;t++){let r=t+e*F.scanlineBlockSize;if(r>=F.height)break;for(let e=0;e<F.channels;e++){let i=z[N.channels[e].name];for(let a=0;a<F.width;a++){U.value=(t*(F.channels*F.width)+e*F.width+a)*F.inputSize;let o=(F.height-1-r)*(F.width*F.outputChannels)+a*F.outputChannels+i;F.byteArray[o]=F.getter(n,U)}}}}return{header:N,width:F.width,height:F.height,data:F.byteArray,format:F.format,[ed?"colorSpace":"encoding"]:F[ed?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,function(e,n){ed?e.colorSpace=n.colorSpace:e.encoding=n.encoding,e.minFilter=s.k6q,e.magFilter=s.k6q,e.generateMipmaps=!1,e.flipY=!1,t&&t(e,n)},n,r)}}var ef=n(46206);let ep=(e,t,n)=>{let r;switch(e){case s.OUM:r=new Uint8ClampedArray(t*n*4);break;case s.ix0:r=new Uint16Array(t*n*4);break;case s.bkx:r=new Uint32Array(t*n*4);break;case s.tJf:r=new Int8Array(t*n*4);break;case s.fBL:r=new Int16Array(t*n*4);break;case s.Yuy:r=new Int32Array(t*n*4);break;case s.RQf:r=new Float32Array(t*n*4);break;default:throw Error("Unsupported data type")}return r},em=(e,t,n,i)=>{if(void 0!==r)return r;let a=new s.nWS(1,1,i);t.setRenderTarget(a);let o=new s.eaF(new s.bdM,new s.V9B({color:0xffffff}));t.render(o,n),t.setRenderTarget(null);let l=ep(e,a.width,a.height);return t.readRenderTargetPixels(a,0,0,a.width,a.height,l),a.dispose(),o.geometry.dispose(),o.material.dispose(),r=0!==l[0]};class eg{constructor(e){var t,n,r,i,a,o,l,u,c,d,h,f,p,m,g,v;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;let y={format:s.GWd,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:(null===(t=e.renderTargetOptions)||void 0===t?void 0:t.anisotropy)!==void 0?null===(n=e.renderTargetOptions)||void 0===n?void 0:n.anisotropy:1,generateMipmaps:(null===(r=e.renderTargetOptions)||void 0===r?void 0:r.generateMipmaps)!==void 0&&(null===(i=e.renderTargetOptions)||void 0===i?void 0:i.generateMipmaps),magFilter:(null===(a=e.renderTargetOptions)||void 0===a?void 0:a.magFilter)!==void 0?null===(o=e.renderTargetOptions)||void 0===o?void 0:o.magFilter:s.k6q,minFilter:(null===(l=e.renderTargetOptions)||void 0===l?void 0:l.minFilter)!==void 0?null===(u=e.renderTargetOptions)||void 0===u?void 0:u.minFilter:s.k6q,samples:(null===(c=e.renderTargetOptions)||void 0===c?void 0:c.samples)!==void 0?null===(d=e.renderTargetOptions)||void 0===d?void 0:d.samples:void 0,wrapS:(null===(h=e.renderTargetOptions)||void 0===h?void 0:h.wrapS)!==void 0?null===(f=e.renderTargetOptions)||void 0===f?void 0:f.wrapS:s.ghU,wrapT:(null===(p=e.renderTargetOptions)||void 0===p?void 0:p.wrapT)!==void 0?null===(m=e.renderTargetOptions)||void 0===m?void 0:m.wrapT:s.ghU};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=eg.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new s.Z58,this._camera=new s.qUd,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!em(this._type,this._renderer,this._camera,y)){let e;this._type===s.ix0&&(e=this._renderer.extensions.has("EXT_color_buffer_float")?s.RQf:void 0),void 0!==e?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${s.RQf}`),this._type=e):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new s.eaF(new s.bdM,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new s.nWS(this.width,this.height,y),this._renderTarget.texture.mapping=(null===(g=e.renderTargetOptions)||void 0===g?void 0:g.mapping)!==void 0?null===(v=e.renderTargetOptions)||void 0===v?void 0:v.mapping:s.UTZ}static instantiateRenderer(){let e=new ef.WebGLRenderer;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw Error("Can't read pixels in this browser");let e=ep(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){let t=new s.GYF(this.toArray(),this.width,this.height,s.GWd,this._type,(null==e?void 0:e.mapping)||s.UTZ,(null==e?void 0:e.wrapS)||s.ghU,(null==e?void 0:e.wrapT)||s.ghU,(null==e?void 0:e.magFilter)||s.k6q,(null==e?void 0:e.minFilter)||s.k6q,(null==e?void 0:e.anisotropy)||1,s.Zr2);return t.generateMipmaps=(null==e?void 0:e.generateMipmaps)!==void 0&&(null==e?void 0:e.generateMipmaps),t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof s.BKk&&Object.values(this.material.uniforms).forEach(e=>{e.value instanceof s.gPd&&e.value.dispose()}),Object.values(this.material).forEach(e=>{e instanceof s.gPd&&e.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}let ev=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,ey=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class eb extends s.BKk{constructor({gamma:e,offsetHdr:t,offsetSdr:n,gainMapMin:r,gainMapMax:i,maxDisplayBoost:a,hdrCapacityMin:o,hdrCapacityMax:l,sdr:u,gainMap:c}){super({name:"GainMapDecoderMaterial",vertexShader:ev,fragmentShader:ey,uniforms:{sdr:{value:u},gainMap:{value:c},gamma:{value:new s.Pq0(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new s.Pq0().fromArray(t)},offsetSdr:{value:new s.Pq0().fromArray(n)},gainMapMin:{value:new s.Pq0().fromArray(r)},gainMapMax:{value:new s.Pq0().fromArray(i)},weightFactor:{value:(Math.log2(a)-o)/(l-o)}},blending:s.XIg,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=o,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){let e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){let t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){let e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class ex extends Error{}class e_ extends Error{}let eS=(e,t,n)=>{let r=RegExp(`${t}="([^"]*)"`,"i").exec(e);if(r)return r[1];let i=RegExp(`<${t}[^>]*>([\\s\\S]*?)</${t}>`,"i").exec(e);if(i){let e=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return e&&3===e.length?e.map(e=>e.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(void 0!==n)return n;throw Error(`Can't find ${t} in gainmap metadata`)},eA=e=>{let t;"undefined"!=typeof TextDecoder?t=new TextDecoder().decode(e):t=e.toString();let n=t.indexOf("<x:xmpmeta");for(;-1!==n;){let e=t.indexOf("x:xmpmeta>",n),r=t.slice(n,e+10);try{let e=eS(r,"hdrgm:GainMapMin","0"),t=eS(r,"hdrgm:GainMapMax"),n=eS(r,"hdrgm:Gamma","1"),i=eS(r,"hdrgm:OffsetSDR","0.015625"),a=eS(r,"hdrgm:OffsetHDR","0.015625"),o=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),s=o?o[1]:"0",l=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!l)throw Error("Incomplete gainmap metadata");let u=l[1];return{gainMapMin:Array.isArray(e)?e.map(e=>parseFloat(e)):[parseFloat(e),parseFloat(e),parseFloat(e)],gainMapMax:Array.isArray(t)?t.map(e=>parseFloat(e)):[parseFloat(t),parseFloat(t),parseFloat(t)],gamma:Array.isArray(n)?n.map(e=>parseFloat(e)):[parseFloat(n),parseFloat(n),parseFloat(n)],offsetSdr:Array.isArray(i)?i.map(e=>parseFloat(e)):[parseFloat(i),parseFloat(i),parseFloat(i)],offsetHdr:Array.isArray(a)?a.map(e=>parseFloat(e)):[parseFloat(a),parseFloat(a),parseFloat(a)],hdrCapacityMin:parseFloat(s),hdrCapacityMax:parseFloat(u)}}catch(e){}n=t.indexOf("<x:xmpmeta",e)}};class ew{constructor(e){this.options={debug:!!e&&void 0!==e.debug&&e.debug,extractFII:!e||void 0===e.extractFII||e.extractFII,extractNonFII:!e||void 0===e.extractNonFII||e.extractNonFII}}extract(e){return new Promise((t,n)=>{let r;let i=this.options.debug,a=new DataView(e.buffer);if(65496!==a.getUint16(0)){n(Error("Not a valid jpeg"));return}let o=a.byteLength,s=2,l=0;for(;s<o;){if(++l>250){n(Error(`Found no marker after ${l} loops 😵`));return}if(255!==a.getUint8(s)){n(Error(`Not a valid marker at offset 0x${s.toString(16)}, found: 0x${a.getUint8(s).toString(16)}`));return}if(r=a.getUint8(s+1),i&&console.log(`Marker: ${r.toString(16)}`),226===r){i&&console.log("Found APP2 marker (0xffe2)");let e=s+4;if(0x4d504600===a.getUint32(e)){let r;let i=e+4;if(18761===a.getUint16(i))r=!1;else if(19789===a.getUint16(i))r=!0;else{n(Error("No valid endianness marker found in TIFF header"));return}if(42!==a.getUint16(i+2,!r)){n(Error("Not valid TIFF data! (no 0x002A marker)"));return}let o=a.getUint32(i+4,!r);if(o<8){n(Error("Not valid TIFF data! (First offset less than 8)"));return}let s=i+o,l=a.getUint16(s,!r),u=s+2,c=0;for(let e=u;e<u+12*l;e+=12)45057===a.getUint16(e,!r)&&(c=a.getUint32(e+8,!r));let d=s+2+12*l+4,h=[];for(let e=d;e<d+16*c;e+=16){let t={MPType:a.getUint32(e,!r),size:a.getUint32(e+4,!r),dataOffset:a.getUint32(e+8,!r),dependantImages:a.getUint32(e+12,!r),start:-1,end:-1,isFII:!1};t.dataOffset?(t.start=i+t.dataOffset,t.isFII=!1):(t.start=0,t.isFII=!0),t.end=t.start+t.size,h.push(t)}if(this.options.extractNonFII&&h.length){let e=new Blob([a]),n=[];for(let t of h){if(t.isFII&&!this.options.extractFII)continue;let r=e.slice(t.start,t.end+1,"image/jpeg");n.push(r)}t(n)}}}s+=2+a.getUint16(s+2)}})}}let eE=async e=>{let t=eA(e);if(!t)throw new e_("Gain map XMP metadata not found");let n=new ew({extractFII:!0,extractNonFII:!0}),r=await n.extract(e);if(2!==r.length)throw new ex("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:t}},eM=e=>new Promise((t,n)=>{let r=document.createElement("img");r.onload=()=>{t(r)},r.onerror=e=>{n(e)},r.src=URL.createObjectURL(e)});class eC extends s.aHM{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new s.KPJ}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");let e=new eb({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new s.gPd,sdr:new s.gPd});return new eg({width:16,height:16,type:s.ix0,colorSpace:s.Zr2,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,n,r){let i,a;let o=r?new Blob([r],{type:"image/jpeg"}):void 0,l=new Blob([n],{type:"image/jpeg"}),u=!1;if("undefined"==typeof createImageBitmap){let e=await Promise.all([o?eM(o):Promise.resolve(void 0),eM(l)]);a=e[0],i=e[1],u=!0}else{let e=await Promise.all([o?createImageBitmap(o,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(l,{imageOrientation:"flipY"})]);a=e[0],i=e[1]}let c=new s.gPd(a||new ImageData(2,2),s.UTZ,s.ghU,s.ghU,s.k6q,s.NZq,s.GWd,s.OUM,1,s.Zr2);c.flipY=u,c.needsUpdate=!0;let d=new s.gPd(i,s.UTZ,s.ghU,s.ghU,s.k6q,s.NZq,s.GWd,s.OUM,1,s.er$);d.flipY=u,d.needsUpdate=!0,e.width=i.width,e.height=i.height,e.material.gainMap=c,e.material.sdr=d,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class eT extends eC{load([e,t,n],r,i,a){let o,l,u;let c=this.prepareQuadRenderer(),d=async()=>{if(o&&l&&u){try{await this.render(c,u,o,l)}catch(r){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),"function"==typeof a&&a(r),c.disposeOnDemandRenderer();return}"function"==typeof r&&r(c),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),c.disposeOnDemandRenderer()}},h=!0,f=0,p=0,m=!0,g=0,v=0,y=!0,b=0,x=0,_=()=>{"function"==typeof i&&i(new ProgressEvent("progress",{lengthComputable:h&&m&&y,loaded:p+v+x,total:f+g+b}))};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);let S=new s.Y9S(this._internalLoadingManager);S.setResponseType("arraybuffer"),S.setRequestHeader(this.requestHeader),S.setPath(this.path),S.setWithCredentials(this.withCredentials),S.load(e,async e=>{if("string"==typeof e)throw Error("Invalid sdr buffer");o=e,await d()},e=>{h=e.lengthComputable,p=e.loaded,f=e.total,_()},t=>{this.manager.itemError(e),"function"==typeof a&&a(t)});let A=new s.Y9S(this._internalLoadingManager);A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setPath(this.path),A.setWithCredentials(this.withCredentials),A.load(t,async e=>{if("string"==typeof e)throw Error("Invalid gainmap buffer");l=e,await d()},e=>{m=e.lengthComputable,v=e.loaded,g=e.total,_()},e=>{this.manager.itemError(t),"function"==typeof a&&a(e)});let w=new s.Y9S(this._internalLoadingManager);return w.setRequestHeader(this.requestHeader),w.setPath(this.path),w.setWithCredentials(this.withCredentials),w.load(n,async e=>{if("string"!=typeof e)throw Error("Invalid metadata string");u=JSON.parse(e),await d()},e=>{y=e.lengthComputable,x=e.loaded,b=e.total,_()},e=>{this.manager.itemError(n),"function"==typeof a&&a(e)}),c}}class eR extends eC{load(e,t,n,r){let i=this.prepareQuadRenderer(),a=new s.Y9S(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async n=>{let a,o,s;if("string"==typeof n)throw Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");let l=new Uint8Array(n);try{let e=await eE(l);a=e.sdr,o=e.gainMap,s=e.metadata}catch(t){if(t instanceof e_||t instanceof ex)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),s={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},a=l;else throw t}try{await this.render(i,s,a,o)}catch(t){this.manager.itemError(e),"function"==typeof r&&r(t),i.disposeOnDemandRenderer();return}"function"==typeof t&&t(i),this.manager.itemEnd(e),i.disposeOnDemandRenderer()},n,t=>{this.manager.itemError(e),"function"==typeof r&&r(t)}),i}}let eP={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},eI="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",eB=e=>Array.isArray(e),eL=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function eD({files:e=eL,path:t="",preset:n,colorSpace:r,extensions:i}={}){n&&(eN(n),e=eP[n],t=eI);let l=eB(e),{extension:u,isCubemap:c}=eF(e),d=eU(u);if(!d)throw Error("useEnvironment: Unrecognized file extension: "+e);let h=(0,o.A)(e=>e.gl);(0,a.useLayoutEffect)(()=>{("webp"===u||"jpg"===u||"jpeg"===u)&&h.domElement.addEventListener("webglcontextlost",function(){o.F.clear(d,l?[e]:e)},{once:!0})},[e,h.domElement]);let f=(0,o.F)(d,l?[e]:e,e=>{("webp"===u||"jpg"===u||"jpeg"===u)&&e.setRenderer(h),null==e.setPath||e.setPath(t),i&&i(e)}),p=l?f[0]:f;if("jpg"===u||"jpeg"===u||"webp"===u){var m;p=null==(m=p.renderTarget)?void 0:m.texture}return p.mapping=c?s.hy7:s.wfO,p.colorSpace=null!=r?r:c?"srgb":"srgb-linear",p}let ek={files:eL,path:"",preset:void 0,extensions:void 0};eD.preload=e=>{let t={...ek,...e},{files:n,path:r=""}=t,{preset:i,extensions:a}=t;i&&(eN(i),n=eP[i],r=eI);let{extension:s}=eF(n);if("webp"===s||"jpg"===s||"jpeg"===s)throw Error("useEnvironment: Preloading gainmaps is not supported");let l=eU(s);if(!l)throw Error("useEnvironment: Unrecognized file extension: "+n);o.F.preload(l,eB(n)?[n]:n,e=>{null==e.setPath||e.setPath(r),a&&a(e)})};let eO={files:eL,preset:void 0};function eN(e){if(!(e in eP))throw Error("Preset must be one of: "+Object.keys(eP).join(", "))}function eF(e){var t;let n=eB(e)&&6===e.length,r=eB(e)&&3===e.length&&e.some(e=>e.endsWith("json")),i=eB(e)?e[0]:e;return{extension:n?"cube":r?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":null==(t=i.split(".").pop())||null==(t=t.split("?"))||null==(t=t.shift())?void 0:t.toLowerCase(),isCubemap:n,isGainmap:r}}function eU(e){return"cube"===e?s.ScU:"hdr"===e?d:"exr"===e?eh:"jpg"===e||"jpeg"===e?eR:"webp"===e?eT:null}eD.clear=e=>{let t={...eO,...e},{files:n}=t,{preset:r}=t;r&&(eN(r),n=eP[r]);let{extension:i}=eF(n),a=eU(i);if(!a)throw Error("useEnvironment: Unrecognized file extension: "+n);o.F.clear(a,eB(n)?[n]:n)};let ez=e=>e.current&&e.current.isScene,eH=e=>ez(e)?e.current:e;function eG(e,t,n,r,i={}){var a,s,l,u;i={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};let c=eH(t||n),d=c.background,h=c.environment,f={backgroundBlurriness:c.backgroundBlurriness,backgroundIntensity:c.backgroundIntensity,backgroundRotation:null!==(a=null==(s=c.backgroundRotation)||null==s.clone?void 0:s.clone())&&void 0!==a?a:[0,0,0],environmentIntensity:c.environmentIntensity,environmentRotation:null!==(l=null==(u=c.environmentRotation)||null==u.clone?void 0:u.clone())&&void 0!==l?l:[0,0,0]};return"only"!==e&&(c.environment=r),e&&(c.background=r),(0,o.q)(c,i),()=>{"only"!==e&&(c.environment=h),e&&(c.background=d),(0,o.q)(c,f)}}function eV({scene:e,background:t=!1,map:n,...r}){let i=(0,o.A)(e=>e.scene);return a.useLayoutEffect(()=>{if(n)return eG(t,e,i,n,r)}),null}function ej({background:e=!1,scene:t,blur:n,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:l,environmentRotation:u,...c}){let d=eD(c),h=(0,o.A)(e=>e.scene);return a.useLayoutEffect(()=>eG(e,t,h,d,{backgroundBlurriness:null!=n?n:r,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:l,environmentRotation:u})),a.useEffect(()=>()=>{d.dispose()},[d]),null}function eW({children:e,near:t=.1,far:n=1e3,resolution:r=256,frames:i=1,map:l,background:u=!1,blur:c,backgroundBlurriness:d,backgroundIntensity:h,backgroundRotation:f,environmentIntensity:p,environmentRotation:m,scene:g,files:v,path:y,preset:b,extensions:x}){let _=(0,o.A)(e=>e.gl),S=(0,o.A)(e=>e.scene),A=a.useRef(null),[w]=a.useState(()=>new s.Z58),E=a.useMemo(()=>{let e=new s.o6l(r);return e.texture.type=s.ix0,e},[r]);a.useEffect(()=>()=>{E.dispose()},[E]),a.useLayoutEffect(()=>{if(1===i){let e=_.autoClear;_.autoClear=!0,A.current.update(_,w),_.autoClear=e}return eG(u,g,S,E.texture,{backgroundBlurriness:null!=c?c:d,backgroundIntensity:h,backgroundRotation:f,environmentIntensity:p,environmentRotation:m})},[e,w,E.texture,g,S,u,i,_]);let M=1;return(0,o.C)(()=>{if(i===1/0||M<i){let e=_.autoClear;_.autoClear=!0,A.current.update(_,w),_.autoClear=e,M++}}),a.createElement(a.Fragment,null,(0,o.o)(a.createElement(a.Fragment,null,e,a.createElement("cubeCamera",{ref:A,args:[t,n,E]}),v||b?a.createElement(ej,{background:!0,files:v,preset:b,path:y,extensions:x}):l?a.createElement(eV,{background:!0,map:l,extensions:x}):null),w))}function eX(e){var t,n,r,s;let l=eD(e),u=e.map||l;a.useMemo(()=>(0,o.e)({GroundProjectedEnvImpl:c}),[]),a.useEffect(()=>()=>{l.dispose()},[l]);let d=a.useMemo(()=>[u],[u]),h=null==(t=e.ground)?void 0:t.height,f=null==(n=e.ground)?void 0:n.radius,p=null!==(r=null==(s=e.ground)?void 0:s.scale)&&void 0!==r?r:1e3;return a.createElement(a.Fragment,null,a.createElement(eV,(0,i.A)({},e,{map:u})),a.createElement("groundProjectedEnvImpl",{args:d,scale:p,height:h,radius:f}))}function eJ(e){return e.ground?a.createElement(eX,e):e.map?a.createElement(eV,e):e.children?a.createElement(eW,e):a.createElement(ej,e)}},16141:(e,t,n)=>{"use strict";let r;n.d(t,{p:()=>ec}),n(58009);var i=n(29);let a=new WeakMap;class o extends i.aHM{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){let a=new i.Y9S(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,e=>{let n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(r)},n,r)}decodeDracoFile(e,t,n,r){let i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){let n;for(let e in t.attributeTypes){let n=t.attributeTypes[e];void 0!==n.BYTES_PER_ELEMENT&&(t.attributeTypes[e]=n.name)}let r=JSON.stringify(t);if(a.has(e)){let t=a.get(e);if(t.key===r)return t.promise;if(0===e.byteLength)throw Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i=this.workerNextTaskID++,o=e.byteLength,s=this._getWorker(i,o).then(r=>(n=r,new Promise((r,a)=>{n._callbacks[i]={resolve:r,reject:a},n.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return s.catch(()=>!0).then(()=>{n&&i&&this._releaseTask(n,i)}),a.set(e,{key:r,promise:s}),s}_createGeometry(e){let t=new i.LoY;e.index&&t.setIndex(new i.THS(e.index.array,1));for(let n=0;n<e.attributes.length;n++){let r=e.attributes[n],a=r.name,o=r.array,s=r.itemSize;t.setAttribute(a,new i.THS(o,s))}return t}_loadLibrary(e,t){let n=new i.Y9S(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((t,r)=>{n.load(e,t,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{let n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);let r=s.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){let n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});let n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function s(){let e,t;onmessage=function(n){let r=n.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise(function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":let i=r.buffer,a=r.taskConfig;t.then(e=>{let t=e.draco,n=new t.Decoder,o=new t.DecoderBuffer;o.Init(new Int8Array(i),i.byteLength);try{let e=function(e,t,n,r){let i,a;let o=r.attributeIDs,s=r.attributeTypes,l=t.GetEncodedGeometryType(n);if(l===e.TRIANGULAR_MESH)i=new e.Mesh,a=t.DecodeBufferToMesh(n,i);else if(l===e.POINT_CLOUD)i=new e.PointCloud,a=t.DecodeBufferToPointCloud(n,i);else throw Error("THREE.DRACOLoader: Unexpected geometry type.");if(!a.ok()||0===i.ptr)throw Error("THREE.DRACOLoader: Decoding failed: "+a.error_msg());let u={index:null,attributes:[]};for(let n in o){let a,l;let c=self[s[n]];if(r.useUniqueIDs)l=o[n],a=t.GetAttributeByUniqueId(i,l);else{if(-1===(l=t.GetAttributeId(i,e[o[n]])))continue;a=t.GetAttribute(i,l)}u.attributes.push(function(e,t,n,r,i,a){let o=a.num_components(),s=n.num_points()*o,l=s*i.BYTES_PER_ELEMENT,u=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),c=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,a,u,l,c);let d=new i(e.HEAPF32.buffer,c,s).slice();return e._free(c),{name:r,array:d,itemSize:o}}(e,t,i,n,c,a))}return l===e.TRIANGULAR_MESH&&(u.index=function(e,t,n){let r=3*n.num_faces(),i=4*r,a=e._malloc(i);t.GetTrianglesUInt32Array(n,i,a);let o=new Uint32Array(e.HEAPF32.buffer,a,r).slice();return e._free(a),{array:o,itemSize:1}}(e,t,i)),e.destroy(i),u}(t,n,o,a),i=e.attributes.map(e=>e.array.buffer);e.index&&i.push(e.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:e},i)}catch(e){console.error(e),self.postMessage({type:"error",id:r.id,error:e.message})}finally{t.destroy(o),t.destroy(n)}})}}}let l=()=>{let e;if(r)return r;let t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!=typeof WebAssembly)return{supported:!1};let i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(t)&&(i="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");let a=WebAssembly.instantiate(function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;++n){let r=e.charCodeAt(n);t[n]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let r=0;for(let i=0;i<e.length;++i)t[r++]=t[i]<60?n[t[i]]:(t[i]-60)*64+t[++i];return t.buffer.slice(0,r)}(i),{}).then(t=>{(e=t.instance).exports.__wasm_call_ctors()});function o(t,n,r,i,a,o){let s=e.exports.sbrk,l=r+3&-4,u=s(l*i),c=s(a.length),d=new Uint8Array(e.exports.memory.buffer);d.set(a,c);let h=t(u,r,i,c,a.length);if(0===h&&o&&o(u,l,i),n.set(d.subarray(u,u+r*i)),s(u-s(0)),0!==h)throw Error(`Malformed buffer data: ${h}`)}let s={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},l={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return r={ready:a,supported:!0,decodeVertexBuffer(t,n,r,i,a){o(e.exports.meshopt_decodeVertexBuffer,t,n,r,i,e.exports[s[a]])},decodeIndexBuffer(t,n,r,i){o(e.exports.meshopt_decodeIndexBuffer,t,n,r,i)},decodeIndexSequence(t,n,r,i){o(e.exports.meshopt_decodeIndexSequence,t,n,r,i)},decodeGltfBuffer(t,n,r,i,a,u){o(e.exports[l[a]],t,n,r,i,e.exports[s[u]])}}};function u(e,t){if(t===i.RJ4)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t!==i.rYR&&t!==i.O49)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e;{let n=e.getIndex();if(null===n){let t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}let r=n.count-2,a=[];if(n){if(t===i.rYR)for(let e=1;e<=r;e++)a.push(n.getX(0)),a.push(n.getX(e)),a.push(n.getX(e+1));else for(let e=0;e<r;e++)e%2==0?(a.push(n.getX(e)),a.push(n.getX(e+1)),a.push(n.getX(e+2))):(a.push(n.getX(e+2)),a.push(n.getX(e+1)),a.push(n.getX(e)))}a.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=e.clone();return o.setIndex(a),o.clearGroups(),o}}var c=n(90780);function d(e){if("undefined"!=typeof TextDecoder)return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}let h="srgb",f="srgb-linear";class p extends i.aHM{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new x(e)}),this.register(function(e){return new _(e)}),this.register(function(e){return new P(e)}),this.register(function(e){return new I(e)}),this.register(function(e){return new B(e)}),this.register(function(e){return new A(e)}),this.register(function(e){return new w(e)}),this.register(function(e){return new E(e)}),this.register(function(e){return new M(e)}),this.register(function(e){return new b(e)}),this.register(function(e){return new C(e)}),this.register(function(e){return new S(e)}),this.register(function(e){return new R(e)}),this.register(function(e){return new T(e)}),this.register(function(e){return new v(e)}),this.register(function(e){return new L(e)}),this.register(function(e){return new D(e)})}load(e,t,n,r){let a;let o=this;if(""!==this.resourcePath)a=this.resourcePath;else if(""!==this.path){let t=i.r6x.extractUrlBase(e);a=i.r6x.resolveURL(t,this.path)}else a=i.r6x.extractUrlBase(e);this.manager.itemStart(e);let s=function(t){r?r(t):console.error(t),o.manager.itemError(e),o.manager.itemEnd(e)},l=new i.Y9S(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(n){try{o.parse(n,a,function(n){t(n),o.manager.itemEnd(e)},s)}catch(e){s(e)}},n,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return -1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return -1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;let a={},o={};if("string"==typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer){if(d(new Uint8Array(e.slice(0,4)))===k){try{a[g.KHR_BINARY_GLTF]=new N(e)}catch(e){r&&r(e);return}i=JSON.parse(a[g.KHR_BINARY_GLTF].content)}else i=JSON.parse(d(new Uint8Array(e)))}else i=e;if(void 0===i.asset||i.asset.version[0]<2){r&&r(Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let s=new ei(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});s.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){let t=this.pluginCallbacks[e](s);t.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[t.name]=t,a[t.name]=!0}if(i.extensionsUsed)for(let e=0;e<i.extensionsUsed.length;++e){let t=i.extensionsUsed[e],n=i.extensionsRequired||[];switch(t){case g.KHR_MATERIALS_UNLIT:a[t]=new y;break;case g.KHR_DRACO_MESH_COMPRESSION:a[t]=new F(i,this.dracoLoader);break;case g.KHR_TEXTURE_TRANSFORM:a[t]=new U;break;case g.KHR_MESH_QUANTIZATION:a[t]=new z;break;default:n.indexOf(t)>=0&&void 0===o[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}s.setExtensions(a),s.setPlugins(o),s.parse(n,r)}parseAsync(e,t){let n=this;return new Promise(function(r,i){n.parse(e,t,r,i)})}}function m(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}let g={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class v{constructor(e){this.parser=e,this.name=g.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){let r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){let t;let n=this.parser,r="light:"+e,a=n.cache.get(r);if(a)return a;let o=n.json,s=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],l=new i.Q1f(0xffffff);void 0!==s.color&&l.setRGB(s.color[0],s.color[1],s.color[2],f);let u=void 0!==s.range?s.range:0;switch(s.type){case"directional":(t=new i.ZyN(l)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new i.HiM(l)).distance=u;break;case"spot":(t=new i.nCl(l)).distance=u,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,t.angle=s.spot.outerConeAngle,t.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return t.position.set(0,0,0),t.decay=2,ee(t,s),void 0!==s.intensity&&(t.intensity=s.intensity),t.name=n.createUniqueName(s.name||"light_"+e),a=Promise.resolve(t),n.cache.add(r,a),a}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){let t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then(function(e){return n._getNodeRef(t.cache,i,e)})}}class y{constructor(){this.name=g.KHR_MATERIALS_UNLIT}getMaterialType(){return i.V9B}extendParams(e,t,n){let r=[];e.color=new i.Q1f(1,1,1),e.opacity=1;let a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){let t=a.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],f),e.opacity=t[3]}void 0!==a.baseColorTexture&&r.push(n.assignTexture(e,"map",a.baseColorTexture,h))}return Promise.all(r)}}class b{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class x{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let a=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&a.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&a.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(a.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){let e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new i.I9Y(e,e)}return Promise.all(a)}}class _{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_DISPERSION}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let r=n.extensions[this.name];return t.dispersion=void 0!==r.dispersion?r.dispersion:0,Promise.resolve()}}class S{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],a=r.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(i)}}class A{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_SHEEN}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let a=[];t.sheenColor=new i.Q1f(0,0,0),t.sheenRoughness=0,t.sheen=1;let o=r.extensions[this.name];if(void 0!==o.sheenColorFactor){let e=o.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],f)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&a.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,h)),void 0!==o.sheenRoughnessTexture&&a.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(a)}}class w{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}class E{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_VOLUME}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let a=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&a.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;let s=o.attenuationColor||[1,1,1];return t.attenuationColor=new i.Q1f().setRGB(s[0],s[1],s[2],f),Promise.all(a)}}class M{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_IOR}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();let r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class C{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_SPECULAR}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let a=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&a.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));let s=o.specularColorFactor||[1,1,1];return t.specularColor=new i.Q1f().setRGB(s[0],s[1],s[2],f),void 0!==o.specularColorTexture&&a.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,h)),Promise.all(a)}}class T{constructor(e){this.parser=e,this.name=g.EXT_MATERIALS_BUMP}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],a=r.extensions[this.name];return t.bumpScale=void 0!==a.bumpFactor?a.bumpFactor:1,void 0!==a.bumpTexture&&i.push(n.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(i)}}class R{constructor(e){this.parser=e,this.name=g.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.uSd:null}extendMaterialParams(e,t){let n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let i=[],a=r.extensions[this.name];return void 0!==a.anisotropyStrength&&(t.anisotropy=a.anisotropyStrength),void 0!==a.anisotropyRotation&&(t.anisotropyRotation=a.anisotropyRotation),void 0!==a.anisotropyTexture&&i.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(i)}}class P{constructor(e){this.parser=e,this.name=g.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;let i=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(!(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures")}return t.loadTextureImage(e,i.source,a)}}class I{constructor(e){this.parser=e,this.name=g.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;let a=i.extensions[t],o=r.images[a.source],s=n.textureLoader;if(o.uri){let e=n.options.manager.getHandler(o.uri);null!==e&&(s=e)}return this.detectSupport().then(function(i){if(i)return n.loadTextureImage(e,a.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class B{constructor(e){this.parser=e,this.name=g.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){let t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;let a=i.extensions[t],o=r.images[a.source],s=n.textureLoader;if(o.uri){let e=n.options.manager.getHandler(o.uri);null!==e&&(s=e)}return this.detectSupport().then(function(i){if(i)return n.loadTextureImage(e,a.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class L{constructor(e){this.name=g.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,n=t.bufferViews[e];if(!n.extensions||!n.extensions[this.name])return null;{let e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(!(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0))return null;throw Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files")}return r.then(function(t){let n=e.byteOffset||0,r=e.byteLength||0,a=e.count,o=e.byteStride,s=new Uint8Array(t,n,r);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(a,o,s,e.mode,e.filter).then(function(e){return e.buffer}):i.ready.then(function(){let t=new ArrayBuffer(a*o);return i.decodeGltfBuffer(new Uint8Array(t),a,o,s,e.mode,e.filter),t})})}}}class D{constructor(e){this.name=g.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;for(let e of t.meshes[n.mesh].primitives)if(e.mode!==j.TRIANGLES&&e.mode!==j.TRIANGLE_STRIP&&e.mode!==j.TRIANGLE_FAN&&void 0!==e.mode)return null;let r=n.extensions[this.name].attributes,a=[],o={};for(let e in r)a.push(this.parser.getDependency("accessor",r[e]).then(t=>(o[e]=t,o[e])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(e=>{let t=e.pop(),n=t.isGroup?t.children:[t],r=e[0].count,a=[];for(let e of n){let t=new i.kn4,n=new i.Pq0,s=new i.PTz,l=new i.Pq0(1,1,1),u=new i.ZLX(e.geometry,e.material,r);for(let e=0;e<r;e++)o.TRANSLATION&&n.fromBufferAttribute(o.TRANSLATION,e),o.ROTATION&&s.fromBufferAttribute(o.ROTATION,e),o.SCALE&&l.fromBufferAttribute(o.SCALE,e),u.setMatrixAt(e,t.compose(n,s,l));for(let t in o)if("_COLOR_0"===t){let e=o[t];u.instanceColor=new i.uWO(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,o[t]);i.B69.prototype.copy.call(u,e),this.parser.assignFinalMaterial(u),a.push(u)}return t.isGroup?(t.clear(),t.add(...a),t):a[0]}))}}let k="glTF",O={JSON:0x4e4f534a,BIN:5130562};class N{constructor(e){this.name=g.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,12);if(this.header={magic:d(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==k)throw Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw Error("THREE.GLTFLoader: Legacy binary file detected.");let n=this.header.length-12,r=new DataView(e,12),i=0;for(;i<n;){let t=r.getUint32(i,!0);i+=4;let n=r.getUint32(i,!0);if(i+=4,n===O.JSON){let n=new Uint8Array(e,12+i,t);this.content=d(n)}else if(n===O.BIN){let n=12+i;this.body=e.slice(n,n+t)}i+=t}if(null===this.content)throw Error("THREE.GLTFLoader: JSON content not found.")}}class F{constructor(e,t){if(!t)throw Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=g.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},s={},l={};for(let e in a)o[K[e]||e.toLowerCase()]=a[e];for(let t in e.attributes){let r=K[t]||t.toLowerCase();if(void 0!==a[t]){let i=n.accessors[e.attributes[t]],a=W[i.componentType];l[r]=a.name,s[r]=!0===i.normalized}}return t.getDependency("bufferView",i).then(function(e){return new Promise(function(t,n){r.decodeDracoFile(e,function(e){for(let t in e.attributes){let n=e.attributes[t],r=s[t];void 0!==r&&(n.normalized=r)}t(e)},o,l,f,n)})})}}class U{constructor(){this.name=g.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class z{constructor(){this.name=g.KHR_MESH_QUANTIZATION}}class H extends i.lGw{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let e=0;e!==r;e++)t[e]=n[i+e];return t}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,l=3*o,u=r-t,c=(n-t)/u,d=c*c,h=d*c,f=e*l,p=f-l,m=-2*h+3*d,g=h-d,v=1-m,y=g-d+c;for(let e=0;e!==o;e++){let t=a[p+e+o],n=a[p+e+s]*u,r=a[f+e+o],l=a[f+e]*u;i[e]=v*t+y*n+m*r+g*l}return i}}let G=new i.PTz;class V extends H{interpolate_(e,t,n,r){let i=super.interpolate_(e,t,n,r);return G.fromArray(i).normalize().toArray(i),i}}let j={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},W={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},X={9728:i.hxR,9729:i.k6q,9984:i.pHI,9985:i.kRr,9986:i.Cfg,9987:i.$_I},J={33071:i.ghU,33648:i.kTW,10497:i.GJx},Y={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},K={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...c.r>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},q={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},$={CUBICSPLINE:void 0,LINEAR:i.PJ3,STEP:i.ljd},Q={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Z(e,t,n){for(let r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function ee(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function et(e){let t="",n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function en(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}let er=new i.kn4;class ei{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new m,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,a=-1;"undefined"!=typeof navigator&&void 0!==navigator.userAgent&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),a=(r=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||r&&a<98?this.textureLoader=new i.Tap(this.options.manager):this.textureLoader=new i.Kzg(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new i.Y9S(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(t){let a={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};return Z(i,a,r),ee(a,r),Promise.all(n._invokeAll(function(e){return e.afterRoot&&e.afterRoot(a)})).then(function(){for(let e of a.scenes)e.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,r=t.length;n<r;n++){let r=t[n].joints;for(let t=0,n=r.length;t<n;t++)e[r[t]].isBone=!0}for(let t=0,r=e.length;t<r;t++){let r=e[t];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(n[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;let r=n.clone(),i=(e,t)=>{let n=this.associations.get(e);for(let[r,a]of(null!=n&&this.associations.set(t,n),e.children.entries()))i(a,t.children[r])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){let r=e(t[n]);if(r)return r}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let n=[];for(let r=0;r<t.length;r++){let i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){let n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":r=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(!(r=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)})))throw Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){let n=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(t,r){return n.getDependency(e,r)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[g.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(e,a){n.load(i.r6x.resolveURL(t.uri,r.path),e,void 0,function(){a(Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){let n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)})}loadAccessor(e){let t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){let e=Y[r.type],t=W[r.componentType],n=!0===r.normalized,a=new t(r.count*e);return Promise.resolve(new i.THS(a,e,n))}let a=[];return void 0!==r.bufferView?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),void 0!==r.sparse&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then(function(e){let a,o;let s=e[0],l=Y[r.type],u=W[r.componentType],c=u.BYTES_PER_ELEMENT,d=c*l,h=r.byteOffset||0,f=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;if(f&&f!==d){let e=Math.floor(h/f),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count,d=t.cache.get(n);d||(a=new u(s,e*f,r.count*f/c),d=new i.eB$(a,f/c),t.cache.add(n,d)),o=new i.eHs(d,l,h%f/c,p)}else a=null===s?new u(r.count*l):new u(s,h,r.count*l),o=new i.THS(a,l,p);if(void 0!==r.sparse){let t=Y.SCALAR,n=W[r.sparse.indices.componentType],a=r.sparse.indices.byteOffset||0,c=r.sparse.values.byteOffset||0,d=new n(e[1],a,r.sparse.count*t),h=new u(e[2],c,r.sparse.count*l);null!==s&&(o=new i.THS(o.array.slice(),o.itemSize,o.normalized));for(let e=0,t=d.length;e<t;e++){let t=d[e];if(o.setX(t,h[e*l]),l>=2&&o.setY(t,h[e*l+1]),l>=3&&o.setZ(t,h[e*l+2]),l>=4&&o.setW(t,h[e*l+3]),l>=5)throw Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o})}loadTexture(e){let t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r],a=this.textureLoader;if(i.uri){let e=n.manager.getHandler(i.uri);null!==e&&(a=e)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,t,n){let r=this,a=this.json,o=a.textures[e],s=a.images[t],l=(s.uri||s.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];let u=this.loadImageSource(t,n).then(function(t){t.flipY=!1,t.name=o.name||s.name||"",""===t.name&&"string"==typeof s.uri&&!1===s.uri.startsWith("data:image/")&&(t.name=s.uri);let n=(a.samplers||{})[o.sampler]||{};return t.magFilter=X[n.magFilter]||i.k6q,t.minFilter=X[n.minFilter]||i.$_I,t.wrapS=J[n.wrapS]||i.GJx,t.wrapT=J[n.wrapT]||i.GJx,r.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){let n=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());let a=n.images[e],o=self.URL||self.webkitURL,s=a.uri||"",l=!1;if(void 0!==a.bufferView)s=this.getDependency("bufferView",a.bufferView).then(function(e){l=!0;let t=new Blob([e],{type:a.mimeType});return s=o.createObjectURL(t)});else if(void 0===a.uri)throw Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let u=Promise.resolve(s).then(function(e){return new Promise(function(n,a){let o=n;!0===t.isImageBitmapLoader&&(o=function(e){let t=new i.gPd(e);t.needsUpdate=!0,n(t)}),t.load(i.r6x.resolveURL(e,r.path),o,void 0,a)})}).then(function(e){var t;return!0===l&&o.revokeObjectURL(s),ee(e,a),e.userData.mimeType=a.mimeType||((t=a.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e}).catch(function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",s),e});return this.sourceCache[e]=u,u}assignTexture(e,t,n,r){let i=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((a=a.clone()).channel=n.texCoord),i.extensions[g.KHR_TEXTURE_TRANSFORM]){let e=void 0!==n.extensions?n.extensions[g.KHR_TEXTURE_TRANSFORM]:void 0;if(e){let t=i.associations.get(a);a=i.extensions[g.KHR_TEXTURE_TRANSFORM].extendTexture(a,e),i.associations.set(a,t)}}return void 0!==r&&("number"==typeof r&&(r=3001===r?h:f),"colorSpace"in a?a.colorSpace=r:a.encoding=r===h?3001:3e3),e[t]=a,a})}assignFinalMaterial(e){let t=e.geometry,n=e.material,r=void 0===t.attributes.tangent,a=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){let e="PointsMaterial:"+n.uuid,t=this.cache.get(e);t||(t=new i.BH$,i.imn.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){let e="LineBasicMaterial:"+n.uuid,t=this.cache.get(e);t||(t=new i.mrM,i.imn.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(r||a||o){let e="ClonedMaterial:"+n.uuid+":";r&&(e+="derivative-tangents:"),a&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),a&&(t.vertexColors=!0),o&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return i._4j}loadMaterial(e){let t;let n=this,r=this.json,a=this.extensions,o=r.materials[e],s={},l=o.extensions||{},u=[];if(l[g.KHR_MATERIALS_UNLIT]){let e=a[g.KHR_MATERIALS_UNLIT];t=e.getMaterialType(),u.push(e.extendParams(s,o,n))}else{let r=o.pbrMetallicRoughness||{};if(s.color=new i.Q1f(1,1,1),s.opacity=1,Array.isArray(r.baseColorFactor)){let e=r.baseColorFactor;s.color.setRGB(e[0],e[1],e[2],f),s.opacity=e[3]}void 0!==r.baseColorTexture&&u.push(n.assignTexture(s,"map",r.baseColorTexture,h)),s.metalness=void 0!==r.metallicFactor?r.metallicFactor:1,s.roughness=void 0!==r.roughnessFactor?r.roughnessFactor:1,void 0!==r.metallicRoughnessTexture&&(u.push(n.assignTexture(s,"metalnessMap",r.metallicRoughnessTexture)),u.push(n.assignTexture(s,"roughnessMap",r.metallicRoughnessTexture))),t=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s)})))}!0===o.doubleSided&&(s.side=i.$EB);let c=o.alphaMode||Q.OPAQUE;if(c===Q.BLEND?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,c===Q.MASK&&(s.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&t!==i.V9B&&(u.push(n.assignTexture(s,"normalMap",o.normalTexture)),s.normalScale=new i.I9Y(1,1),void 0!==o.normalTexture.scale)){let e=o.normalTexture.scale;s.normalScale.set(e,e)}if(void 0!==o.occlusionTexture&&t!==i.V9B&&(u.push(n.assignTexture(s,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(s.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&t!==i.V9B){let e=o.emissiveFactor;s.emissive=new i.Q1f().setRGB(e[0],e[1],e[2],f)}return void 0!==o.emissiveTexture&&t!==i.V9B&&u.push(n.assignTexture(s,"emissiveMap",o.emissiveTexture,h)),Promise.all(u).then(function(){let r=new t(s);return o.name&&(r.name=o.name),ee(r,o),n.associations.set(r,{materials:e}),o.extensions&&Z(a,r,o),r})}createUniqueName(e){let t=i.Nwf.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,n=this.extensions,r=this.primitiveCache,a=[];for(let o=0,s=e.length;o<s;o++){let s=e[o],l=function(e){let t;let n=e.extensions&&e.extensions[g.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+et(n.attributes):e.indices+":"+et(e.attributes)+":"+e.mode,void 0!==e.targets)for(let n=0,r=e.targets.length;n<r;n++)t+=":"+et(e.targets[n]);return t}(s),u=r[l];if(u)a.push(u.promise);else{let e;e=s.extensions&&s.extensions[g.KHR_DRACO_MESH_COMPRESSION]?function(e){return n[g.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return ea(n,e,t)})}(s):ea(new i.LoY,s,t),r[l]={primitive:s,promise:e},a.push(e)}}return Promise.all(a)}loadMesh(e){let t=this,n=this.json,r=this.extensions,a=n.meshes[e],o=a.primitives,s=[];for(let e=0,t=o.length;e<t;e++){var l;let t=void 0===o[e].material?(void 0===(l=this.cache).DefaultMaterial&&(l.DefaultMaterial=new i._4j({color:0xffffff,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:i.hB5})),l.DefaultMaterial):this.getDependency("material",o[e].material);s.push(t)}return s.push(t.loadGeometries(o)),Promise.all(s).then(function(n){let s=n.slice(0,n.length-1),l=n[n.length-1],c=[];for(let n=0,d=l.length;n<d;n++){let d;let h=l[n],f=o[n],p=s[n];if(f.mode===j.TRIANGLES||f.mode===j.TRIANGLE_STRIP||f.mode===j.TRIANGLE_FAN||void 0===f.mode)!0===(d=!0===a.isSkinnedMesh?new i.I46(h,p):new i.eaF(h,p)).isSkinnedMesh&&d.normalizeSkinWeights(),f.mode===j.TRIANGLE_STRIP?d.geometry=u(d.geometry,i.O49):f.mode===j.TRIANGLE_FAN&&(d.geometry=u(d.geometry,i.rYR));else if(f.mode===j.LINES)d=new i.DXC(h,p);else if(f.mode===j.LINE_STRIP)d=new i.N1A(h,p);else if(f.mode===j.LINE_LOOP)d=new i.FCc(h,p);else if(f.mode===j.POINTS)d=new i.ONl(h,p);else throw Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);Object.keys(d.geometry.morphAttributes).length>0&&function(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){let n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}(d,a),d.name=t.createUniqueName(a.name||"mesh_"+e),ee(d,a),f.extensions&&Z(r,d,f),t.assignFinalMaterial(d),c.push(d)}for(let n=0,r=c.length;n<r;n++)t.associations.set(c[n],{meshes:e,primitives:n});if(1===c.length)return a.extensions&&Z(r,c[0],a),c[0];let d=new i.YJl;a.extensions&&Z(r,d,a),t.associations.set(d,{meshes:e});for(let e=0,t=c.length;e<t;e++)d.add(c[e]);return d})}loadCamera(e){let t;let n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return"perspective"===n.type?t=new i.ubm(i.cj9.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new i.qUd(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),ee(t,n),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],n=[];for(let e=0,r=t.joints.length;e<r;e++)n.push(this._loadNodeShallow(t.joints[e]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(e){let n=e.pop(),r=[],a=[];for(let o=0,s=e.length;o<s;o++){let s=e[o];if(s){r.push(s);let e=new i.kn4;null!==n&&e.fromArray(n.array,16*o),a.push(e)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}return new i.EAD(r,a)})}loadAnimation(e){let t=this.json,n=this,r=t.animations[e],a=r.name?r.name:"animation_"+e,o=[],s=[],l=[],u=[],c=[];for(let e=0,t=r.channels.length;e<t;e++){let t=r.channels[e],n=r.samplers[t.sampler],i=t.target,a=i.node,d=void 0!==r.parameters?r.parameters[n.input]:n.input,h=void 0!==r.parameters?r.parameters[n.output]:n.output;void 0!==i.node&&(o.push(this.getDependency("node",a)),s.push(this.getDependency("accessor",d)),l.push(this.getDependency("accessor",h)),u.push(n),c.push(i))}return Promise.all([Promise.all(o),Promise.all(s),Promise.all(l),Promise.all(u),Promise.all(c)]).then(function(e){let t=e[0],r=e[1],o=e[2],s=e[3],l=e[4],u=[];for(let e=0,i=t.length;e<i;e++){let i=t[e],a=r[e],c=o[e],d=s[e],h=l[e];if(void 0===i)continue;i.updateMatrix&&i.updateMatrix();let f=n._createAnimationTracks(i,a,c,d,h);if(f)for(let e=0;e<f.length;e++)u.push(f[e])}return new i.tz3(a,void 0,u)})}createNodeMesh(e){let t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(e){let t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]}),t})}loadNode(e){let t=this.json.nodes[e],n=this._loadNodeShallow(e),r=[],i=t.children||[];for(let e=0,t=i.length;e<t;e++)r.push(this.getDependency("node",i[e]));let a=void 0===t.skin?Promise.resolve(null):this.getDependency("skin",t.skin);return Promise.all([n,Promise.all(r),a]).then(function(e){let t=e[0],n=e[1],r=e[2];null!==r&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(r,er)});for(let e=0,r=n.length;e<r;e++)t.add(n[e]);return t})}_loadNodeShallow(e){let t=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];let a=t.nodes[e],o=a.name?r.createUniqueName(a.name):"",s=[],l=r._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return l&&s.push(l),void 0!==a.camera&&s.push(r.getDependency("camera",a.camera).then(function(e){return r._getNodeRef(r.cameraCache,a.camera,e)})),r._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){s.push(e)}),this.nodeCache[e]=Promise.all(s).then(function(t){let s;if((s=!0===a.isBone?new i.$Kf:t.length>1?new i.YJl:1===t.length?t[0]:new i.B69)!==t[0])for(let e=0,n=t.length;e<n;e++)s.add(t[e]);if(a.name&&(s.userData.name=a.name,s.name=o),ee(s,a),a.extensions&&Z(n,s,a),void 0!==a.matrix){let e=new i.kn4;e.fromArray(a.matrix),s.applyMatrix4(e)}else void 0!==a.translation&&s.position.fromArray(a.translation),void 0!==a.rotation&&s.quaternion.fromArray(a.rotation),void 0!==a.scale&&s.scale.fromArray(a.scale);return r.associations.has(s)||r.associations.set(s,{}),r.associations.get(s).nodes=e,s}),this.nodeCache[e]}loadScene(e){let t=this.extensions,n=this.json.scenes[e],r=this,a=new i.YJl;n.name&&(a.name=r.createUniqueName(n.name)),ee(a,n),n.extensions&&Z(t,a,n);let o=n.nodes||[],s=[];for(let e=0,t=o.length;e<t;e++)s.push(r.getDependency("node",o[e]));return Promise.all(s).then(function(e){for(let t=0,n=e.length;t<n;t++)a.add(e[t]);return r.associations=(e=>{let t=new Map;for(let[e,n]of r.associations)(e instanceof i.imn||e instanceof i.gPd)&&t.set(e,n);return e.traverse(e=>{let n=r.associations.get(e);null!=n&&t.set(e,n)}),t})(a),a})}_createAnimationTracks(e,t,n,r,a){let o;let s=[],l=e.name?e.name:e.uuid,u=[];switch(q[a.path]===q.weights?e.traverse(function(e){e.morphTargetInfluences&&u.push(e.name?e.name:e.uuid)}):u.push(l),q[a.path]){case q.weights:o=i.Hit;break;case q.rotation:o=i.MBL;break;case q.position:case q.scale:o=i.RiT;break;default:o=1===n.itemSize?i.Hit:i.RiT}let c=void 0!==r.interpolation?$[r.interpolation]:i.PJ3,d=this._getArrayFromAccessor(n);for(let e=0,n=u.length;e<n;e++){let n=new o(u[e]+"."+q[a.path],t.array,d,c);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(n),s.push(n)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let e=en(t.constructor),n=new Float32Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=t[r]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof i.MBL?V:H)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function ea(e,t,n){let r=t.attributes,a=[];for(let t in r){let i=K[t]||t.toLowerCase();i in e.attributes||a.push(function(t,r){return n.getDependency("accessor",t).then(function(t){e.setAttribute(r,t)})}(r[t],i))}if(void 0!==t.indices&&!e.index){let r=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});a.push(r)}return ee(e,t),function(e,t,n){let r=t.attributes,a=new i.NRn;if(void 0===r.POSITION)return;{let e=n.json.accessors[r.POSITION],t=e.min,o=e.max;if(void 0!==t&&void 0!==o){if(a.set(new i.Pq0(t[0],t[1],t[2]),new i.Pq0(o[0],o[1],o[2])),e.normalized){let t=en(W[e.componentType]);a.min.multiplyScalar(t),a.max.multiplyScalar(t)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}let o=t.targets;if(void 0!==o){let e=new i.Pq0,t=new i.Pq0;for(let r=0,i=o.length;r<i;r++){let i=o[r];if(void 0!==i.POSITION){let r=n.json.accessors[i.POSITION],a=r.min,o=r.max;if(void 0!==a&&void 0!==o){if(t.setX(Math.max(Math.abs(a[0]),Math.abs(o[0]))),t.setY(Math.max(Math.abs(a[1]),Math.abs(o[1]))),t.setZ(Math.max(Math.abs(a[2]),Math.abs(o[2]))),r.normalized){let e=en(W[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(e)}e.boundingBox=a;let s=new i.iyt;a.getCenter(s.center),s.radius=a.min.distanceTo(a.max)/2,e.boundingSphere=s}(e,t,n),Promise.all(a).then(function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1,a=!1;for(let e=0,n=t.length;e<n;e++){let n=t[e];if(void 0!==n.POSITION&&(r=!0),void 0!==n.NORMAL&&(i=!0),void 0!==n.COLOR_0&&(a=!0),r&&i&&a)break}if(!r&&!i&&!a)return Promise.resolve(e);let o=[],s=[],l=[];for(let u=0,c=t.length;u<c;u++){let c=t[u];if(r){let t=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):e.attributes.position;o.push(t)}if(i){let t=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):e.attributes.normal;s.push(t)}if(a){let t=void 0!==c.COLOR_0?n.getDependency("accessor",c.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(o),Promise.all(s),Promise.all(l)]).then(function(t){let n=t[0],o=t[1],s=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),a&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e})}(e,t.targets,n):e})}var eo=n(7592);let es=null,el="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function eu(e=!0,t=!0,n){return r=>{n&&n(r),e&&(es||(es=new o),es.setDecoderPath("string"==typeof e?e:el),r.setDRACOLoader(es)),t&&r.setMeshoptDecoder("function"==typeof l?l():l)}}let ec=(e,t,n,r)=>(0,eo.F)(p,e,eu(t,n,r));ec.preload=(e,t,n,r)=>eo.F.preload(p,e,eu(t,n,r)),ec.clear=e=>eo.F.clear(p,e),ec.setDecoderPath=e=>{el=e}},59547:(e,t,n)=>{"use strict";n.d(t,{x:()=>u});var r=n(11855),i=n(58009),a=n(29),o=n(7592);let s=parseInt(a.sPf.replace(/\D+/g,"")),l=function(e,t,n,r){var i;return(i=class extends a.BKk{constructor(r){for(let i in super({vertexShader:t,fragmentShader:n,...r}),e)this.uniforms[i]=new a.nc$(e[i]),Object.defineProperty(this,i,{get(){return this.uniforms[i].value},set(e){this.uniforms[i].value=e}})}}).key=a.cj9.generateUUID(),i}({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new a.Q1f,sectionColor:new a.Q1f,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new a.Pq0,worldPlanePosition:new a.Pq0},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${s>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),u=i.forwardRef(({args:e,cellColor:t="#000000",sectionColor:n="#2080ff",cellSize:s=.5,sectionSize:u=1,followCamera:c=!1,infiniteGrid:d=!1,fadeDistance:h=100,fadeStrength:f=1,fadeFrom:p=1,cellThickness:m=.5,sectionThickness:g=1,side:v=a.hsX,...y},b)=>{(0,o.e)({GridMaterial:l});let x=i.useRef(null);i.useImperativeHandle(b,()=>x.current,[]);let _=new a.Zcv,S=new a.Pq0(0,1,0),A=new a.Pq0(0,0,0);return(0,o.C)(e=>{_.setFromNormalAndCoplanarPoint(S,A).applyMatrix4(x.current.matrixWorld);let t=x.current.material,n=t.uniforms.worldCamProjPosition,r=t.uniforms.worldPlanePosition;_.projectPoint(e.camera.position,n.value),r.value.set(0,0,0).applyMatrix4(x.current.matrixWorld)}),i.createElement("mesh",(0,r.A)({ref:x,frustumCulled:!1},y),i.createElement("gridMaterial",(0,r.A)({transparent:!0,"extensions-derivatives":!0,side:v},{cellSize:s,sectionSize:u,cellColor:t,sectionColor:n,cellThickness:m,sectionThickness:g},{fadeDistance:h,fadeStrength:f,fadeFrom:p,infiniteGrid:d,followCamera:c})),i.createElement("planeGeometry",{args:e}))})},68525:(e,t,n)=>{"use strict";n.d(t,{N:()=>b});var r=n(11855),i=n(7592),a=n(58009),o=n(29),s=Object.defineProperty,l=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t,n)=>(l(e,"symbol"!=typeof t?t+"":t,n),n);class c{constructor(){u(this,"_listeners")}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;let n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;let n=this._listeners[e];if(void 0!==n){let e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;let t=this._listeners[e.type];if(void 0!==t){e.target=this;let n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}var d=Object.defineProperty,h=(e,t,n)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t,n)=>(h(e,"symbol"!=typeof t?t+"":t,n),n);let p=new o.RlV,m=new o.Zcv,g=Math.cos(Math.PI/180*70),v=(e,t)=>(e%t+t)%t;class y extends c{constructor(e,t){super(),f(this,"object"),f(this,"domElement"),f(this,"enabled",!0),f(this,"target",new o.Pq0),f(this,"minDistance",0),f(this,"maxDistance",1/0),f(this,"minZoom",0),f(this,"maxZoom",1/0),f(this,"minPolarAngle",0),f(this,"maxPolarAngle",Math.PI),f(this,"minAzimuthAngle",-1/0),f(this,"maxAzimuthAngle",1/0),f(this,"enableDamping",!1),f(this,"dampingFactor",.05),f(this,"enableZoom",!0),f(this,"zoomSpeed",1),f(this,"enableRotate",!0),f(this,"rotateSpeed",1),f(this,"enablePan",!0),f(this,"panSpeed",1),f(this,"screenSpacePanning",!0),f(this,"keyPanSpeed",7),f(this,"zoomToCursor",!1),f(this,"autoRotate",!1),f(this,"autoRotateSpeed",2),f(this,"reverseOrbit",!1),f(this,"reverseHorizontalOrbit",!1),f(this,"reverseVerticalOrbit",!1),f(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),f(this,"mouseButtons",{LEFT:o.kBv.ROTATE,MIDDLE:o.kBv.DOLLY,RIGHT:o.kBv.PAN}),f(this,"touches",{ONE:o.wtR.ROTATE,TWO:o.wtR.DOLLY_PAN}),f(this,"target0"),f(this,"position0"),f(this,"zoom0"),f(this,"_domElementKeyEvents",null),f(this,"getPolarAngle"),f(this,"getAzimuthalAngle"),f(this,"setPolarAngle"),f(this,"setAzimuthalAngle"),f(this,"getDistance"),f(this,"getZoomScale"),f(this,"listenToKeyEvents"),f(this,"stopListenToKeyEvents"),f(this,"saveState"),f(this,"reset"),f(this,"update"),f(this,"connect"),f(this,"dispose"),f(this,"dollyIn"),f(this,"dollyOut"),f(this,"getScale"),f(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=e=>{let t=v(e,2*Math.PI),r=c.phi;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),d.phi=t-r,n.update()},this.setAzimuthalAngle=e=>{let t=v(e,2*Math.PI),r=c.theta;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),d.theta=t-r,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",ee),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ee),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),l=s.NONE},this.update=(()=>{let t=new o.Pq0,i=new o.Pq0(0,1,0),a=new o.PTz().setFromUnitVectors(e.up,i),f=a.clone().invert(),v=new o.Pq0,b=new o.PTz,x=2*Math.PI;return function(){let _=n.object.position;a.setFromUnitVectors(e.up,i),f.copy(a).invert(),t.copy(_).sub(n.target),t.applyQuaternion(a),c.setFromVector3(t),n.autoRotate&&l===s.NONE&&D(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(c.theta+=d.theta*n.dampingFactor,c.phi+=d.phi*n.dampingFactor):(c.theta+=d.theta,c.phi+=d.phi);let S=n.minAzimuthAngle,A=n.maxAzimuthAngle;isFinite(S)&&isFinite(A)&&(S<-Math.PI?S+=x:S>Math.PI&&(S-=x),A<-Math.PI?A+=x:A>Math.PI&&(A-=x),S<=A?c.theta=Math.max(S,Math.min(A,c.theta)):c.theta=c.theta>(S+A)/2?Math.max(S,c.theta):Math.min(A,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(y,n.dampingFactor):n.target.add(y),n.zoomToCursor&&P||n.object.isOrthographicCamera?c.radius=H(c.radius):c.radius=H(c.radius*h),t.setFromSpherical(c),t.applyQuaternion(f),_.copy(n.target).add(t),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(d.theta*=1-n.dampingFactor,d.phi*=1-n.dampingFactor,y.multiplyScalar(1-n.dampingFactor)):(d.set(0,0,0),y.set(0,0,0));let w=!1;if(n.zoomToCursor&&P){let r=null;if(n.object instanceof o.ubm&&n.object.isPerspectiveCamera){let e=t.length();r=H(e*h);let i=e-r;n.object.position.addScaledVector(T,i),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){let e=new o.Pq0(R.x,R.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix(),w=!0;let i=new o.Pq0(R.x,R.y,0);i.unproject(n.object),n.object.position.sub(i).add(e),n.object.updateMatrixWorld(),r=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==r&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(r).add(n.object.position):(p.origin.copy(n.object.position),p.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(p.direction))<g?e.lookAt(n.target):(m.setFromNormalAndCoplanarPoint(n.object.up,n.target),p.intersectPlane(m,n.target))))}else n.object instanceof o.qUd&&n.object.isOrthographicCamera&&(w=1!==h)&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix());return h=1,P=!1,!!(w||v.distanceToSquared(n.object.position)>u||8*(1-b.dot(n.object.quaternion))>u)&&(n.dispatchEvent(r),v.copy(n.object.position),b.copy(n.object.quaternion),w=!1,!0)}})(),this.connect=e=>{n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",et),n.domElement.addEventListener("pointerdown",q),n.domElement.addEventListener("pointercancel",Q),n.domElement.addEventListener("wheel",Z)},this.dispose=()=>{var e,t,r,i,a,o;n.domElement&&(n.domElement.style.touchAction="auto"),null==(e=n.domElement)||e.removeEventListener("contextmenu",et),null==(t=n.domElement)||t.removeEventListener("pointerdown",q),null==(r=n.domElement)||r.removeEventListener("pointercancel",Q),null==(i=n.domElement)||i.removeEventListener("wheel",Z),null==(a=n.domElement)||a.ownerDocument.removeEventListener("pointermove",$),null==(o=n.domElement)||o.ownerDocument.removeEventListener("pointerup",Q),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",ee)};let n=this,r={type:"change"},i={type:"start"},a={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},l=s.NONE,u=1e-6,c=new o.YHV,d=new o.YHV,h=1,y=new o.Pq0,b=new o.I9Y,x=new o.I9Y,_=new o.I9Y,S=new o.I9Y,A=new o.I9Y,w=new o.I9Y,E=new o.I9Y,M=new o.I9Y,C=new o.I9Y,T=new o.Pq0,R=new o.I9Y,P=!1,I=[],B={};function L(){return Math.pow(.95,n.zoomSpeed)}function D(e){n.reverseOrbit||n.reverseHorizontalOrbit?d.theta+=e:d.theta-=e}function k(e){n.reverseOrbit||n.reverseVerticalOrbit?d.phi+=e:d.phi-=e}let O=(()=>{let e=new o.Pq0;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),y.add(e)}})(),N=(()=>{let e=new o.Pq0;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),y.add(e)}})(),F=(()=>{let e=new o.Pq0;return function(t,r){let i=n.domElement;if(i&&n.object instanceof o.ubm&&n.object.isPerspectiveCamera){let a=n.object.position;e.copy(a).sub(n.target);let o=e.length();O(2*t*(o*=Math.tan(n.object.fov/2*Math.PI/180))/i.clientHeight,n.object.matrix),N(2*r*o/i.clientHeight,n.object.matrix)}else i&&n.object instanceof o.qUd&&n.object.isOrthographicCamera?(O(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),N(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function U(e){n.object instanceof o.ubm&&n.object.isPerspectiveCamera||n.object instanceof o.qUd&&n.object.isOrthographicCamera?h=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function z(e){if(!n.zoomToCursor||!n.domElement)return;P=!0;let t=n.domElement.getBoundingClientRect(),r=e.clientX-t.left,i=e.clientY-t.top,a=t.width,o=t.height;R.x=r/a*2-1,R.y=-(i/o*2)+1,T.set(R.x,R.y,1).unproject(n.object).sub(n.object.position).normalize()}function H(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function G(e){b.set(e.clientX,e.clientY)}function V(e){S.set(e.clientX,e.clientY)}function j(){if(1==I.length)b.set(I[0].pageX,I[0].pageY);else{let e=.5*(I[0].pageX+I[1].pageX),t=.5*(I[0].pageY+I[1].pageY);b.set(e,t)}}function W(){if(1==I.length)S.set(I[0].pageX,I[0].pageY);else{let e=.5*(I[0].pageX+I[1].pageX),t=.5*(I[0].pageY+I[1].pageY);S.set(e,t)}}function X(){let e=I[0].pageX-I[1].pageX,t=I[0].pageY-I[1].pageY,n=Math.sqrt(e*e+t*t);E.set(0,n)}function J(e){if(1==I.length)x.set(e.pageX,e.pageY);else{let t=er(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);x.set(n,r)}_.subVectors(x,b).multiplyScalar(n.rotateSpeed);let t=n.domElement;t&&(D(2*Math.PI*_.x/t.clientHeight),k(2*Math.PI*_.y/t.clientHeight)),b.copy(x)}function Y(e){if(1==I.length)A.set(e.pageX,e.pageY);else{let t=er(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);A.set(n,r)}w.subVectors(A,S).multiplyScalar(n.panSpeed),F(w.x,w.y),S.copy(A)}function K(e){var t;let r=er(e),i=e.pageX-r.x,a=e.pageY-r.y,o=Math.sqrt(i*i+a*a);M.set(0,o),C.set(0,Math.pow(M.y/E.y,n.zoomSpeed)),t=C.y,U(h/t),E.copy(M)}function q(e){var t,r;!1!==n.enabled&&(0===I.length&&(null==(t=n.domElement)||t.ownerDocument.addEventListener("pointermove",$),null==(r=n.domElement)||r.ownerDocument.addEventListener("pointerup",Q)),I.push(e),"touch"===e.pointerType?function(e){switch(en(e),I.length){case 1:switch(n.touches.ONE){case o.wtR.ROTATE:if(!1===n.enableRotate)return;j(),l=s.TOUCH_ROTATE;break;case o.wtR.PAN:if(!1===n.enablePan)return;W(),l=s.TOUCH_PAN;break;default:l=s.NONE}break;case 2:switch(n.touches.TWO){case o.wtR.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&X(),n.enablePan&&W(),l=s.TOUCH_DOLLY_PAN;break;case o.wtR.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&X(),n.enableRotate&&j(),l=s.TOUCH_DOLLY_ROTATE;break;default:l=s.NONE}break;default:l=s.NONE}l!==s.NONE&&n.dispatchEvent(i)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case o.kBv.DOLLY:if(!1===n.enableZoom)return;z(e),E.set(e.clientX,e.clientY),l=s.DOLLY;break;case o.kBv.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;V(e),l=s.PAN}else{if(!1===n.enableRotate)return;G(e),l=s.ROTATE}break;case o.kBv.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;G(e),l=s.ROTATE}else{if(!1===n.enablePan)return;V(e),l=s.PAN}break;default:l=s.NONE}l!==s.NONE&&n.dispatchEvent(i)}(e))}function $(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(en(e),l){case s.TOUCH_ROTATE:if(!1===n.enableRotate)return;J(e),n.update();break;case s.TOUCH_PAN:if(!1===n.enablePan)return;Y(e),n.update();break;case s.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&K(e),n.enablePan&&Y(e),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&K(e),n.enableRotate&&J(e),n.update();break;default:l=s.NONE}}(e):function(e){if(!1!==n.enabled)switch(l){case s.ROTATE:if(!1===n.enableRotate)return;!function(e){x.set(e.clientX,e.clientY),_.subVectors(x,b).multiplyScalar(n.rotateSpeed);let t=n.domElement;t&&(D(2*Math.PI*_.x/t.clientHeight),k(2*Math.PI*_.y/t.clientHeight)),b.copy(x),n.update()}(e);break;case s.DOLLY:var t,r;if(!1===n.enableZoom)return;(M.set(e.clientX,e.clientY),C.subVectors(M,E),C.y>0)?(t=L(),U(h/t)):C.y<0&&(r=L(),U(h*r)),E.copy(M),n.update();break;case s.PAN:if(!1===n.enablePan)return;A.set(e.clientX,e.clientY),w.subVectors(A,S).multiplyScalar(n.panSpeed),F(w.x,w.y),S.copy(A),n.update()}}(e))}function Q(e){var t,r,i;(function(e){delete B[e.pointerId];for(let t=0;t<I.length;t++)if(I[t].pointerId==e.pointerId){I.splice(t,1);return}})(e),0===I.length&&(null==(t=n.domElement)||t.releasePointerCapture(e.pointerId),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointermove",$),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointerup",Q)),n.dispatchEvent(a),l=s.NONE}function Z(e){if(!1!==n.enabled&&!1!==n.enableZoom&&(l===s.NONE||l===s.ROTATE)){var t,r;e.preventDefault(),n.dispatchEvent(i),(z(e),e.deltaY<0)?(t=L(),U(h*t)):e.deltaY>0&&(r=L(),U(h/r)),n.update(),n.dispatchEvent(a)}}function ee(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:F(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:F(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:F(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:F(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function et(e){!1!==n.enabled&&e.preventDefault()}function en(e){let t=B[e.pointerId];void 0===t&&(t=new o.I9Y,B[e.pointerId]=t),t.set(e.pageX,e.pageY)}function er(e){return B[(e.pointerId===I[0].pointerId?I[1]:I[0]).pointerId]}this.dollyIn=(e=L())=>{U(h*e),n.update()},this.dollyOut=(e=L())=>{U(h/e),n.update()},this.getScale=()=>h,this.setScale=e=>{U(e),n.update()},this.getZoomScale=()=>L(),void 0!==t&&this.connect(t),this.update()}}let b=a.forwardRef(({makeDefault:e,camera:t,regress:n,domElement:o,enableDamping:s=!0,keyEvents:l=!1,onChange:u,onStart:c,onEnd:d,...h},f)=>{let p=(0,i.A)(e=>e.invalidate),m=(0,i.A)(e=>e.camera),g=(0,i.A)(e=>e.gl),v=(0,i.A)(e=>e.events),b=(0,i.A)(e=>e.setEvents),x=(0,i.A)(e=>e.set),_=(0,i.A)(e=>e.get),S=(0,i.A)(e=>e.performance),A=t||m,w=o||v.connected||g.domElement,E=a.useMemo(()=>new y(A),[A]);return(0,i.C)(()=>{E.enabled&&E.update()},-1),a.useEffect(()=>(l&&E.connect(!0===l?w:l),E.connect(w),()=>void E.dispose()),[l,w,n,E,p]),a.useEffect(()=>{let e=e=>{p(),n&&S.regress(),u&&u(e)},t=e=>{c&&c(e)},r=e=>{d&&d(e)};return E.addEventListener("change",e),E.addEventListener("start",t),E.addEventListener("end",r),()=>{E.removeEventListener("start",t),E.removeEventListener("end",r),E.removeEventListener("change",e)}},[u,c,d,E,p,b]),a.useEffect(()=>{if(e){let e=_().controls;return x({controls:E}),()=>x({controls:e})}},[e,E]),a.createElement("primitive",(0,r.A)({ref:f,object:E,enableDamping:s},h))})},7592:(e,t,n)=>{"use strict";let r,i,a,o,s;n.d(t,{A:()=>eu,B:()=>F,C:()=>ec,E:()=>U,F:()=>ep,a:()=>O,b:()=>k,c:()=>ek,d:()=>eN,e:()=>ex,f:()=>eQ,i:()=>L,o:()=>eF,q:()=>Z,u:()=>N});var l=n(29),u=n(46206),c=n(58009),d=n(95944),h=n(73450);let f=e=>{let t;let n=new Set,r=(e,r)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e))},o=t=e(r,i,a);return a},p=e=>e?f(e):f,{useSyncExternalStoreWithSelector:m}=h,g=e=>e,v=(e,t)=>{let n=p(e),r=(e,r=t)=>(function(e,t=g,n){let r=m(e.subscribe,e.getState,e.getInitialState,t,n);return c.useDebugValue(r),r})(n,e,r);return Object.assign(r,n),r},y=(e,t)=>e?v(e,t):v;var b=n(49145),x=n.n(b),_=n(76830);let S=e=>"object"==typeof e&&"function"==typeof e.then,A=[];function w(e,t,n=(e,t)=>e===t){if(e===t)return!0;if(!e||!t)return!1;let r=e.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function E(e,t=null,n=!1,r={}){for(let i of(null===t&&(t=[e]),A))if(w(t,i.keys,i.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(i,"error"))throw i.error;if(Object.prototype.hasOwnProperty.call(i,"response"))return r.lifespan&&r.lifespan>0&&(i.timeout&&clearTimeout(i.timeout),i.timeout=setTimeout(i.remove,r.lifespan)),i.response;if(!n)throw i.promise}let i={keys:t,equal:r.equal,remove:()=>{let e=A.indexOf(i);-1!==e&&A.splice(e,1)},promise:(S(e)?e:e(...t)).then(e=>{i.response=e,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(e=>i.error=e)};if(A.push(i),!n)throw i.promise}let M=(e,t,n)=>E(e,t,!1,n),C=(e,t,n)=>void E(e,t,!0,n),T=e=>{if(void 0===e||0===e.length)A.splice(0,A.length);else{let t=A.find(t=>w(e,t.keys,t.equal));t&&t.remove()}};var R=n(45512),P=n(50043);function I(e){let t=e.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}c.act;let B=e=>e&&e.isOrthographicCamera,L=e=>e&&e.hasOwnProperty("current"),D=e=>null!=e&&("string"==typeof e||"number"==typeof e||e.isColor),k=((e,t)=>"undefined"!=typeof window&&((null==(e=window.document)?void 0:e.createElement)||(null==(t=window.navigator)?void 0:t.product)==="ReactNative"))()?c.useLayoutEffect:c.useEffect;function O(e){let t=c.useRef(e);return k(()=>void(t.current=e),[e]),t}function N(){let e=(0,P.u5)(),t=(0,P.y3)();return c.useMemo(()=>({children:n})=>{let r=(0,P.Nz)(e,!0,e=>e.type===c.StrictMode)?c.StrictMode:c.Fragment;return(0,R.jsx)(r,{children:(0,R.jsx)(t,{children:n})})},[e,t])}function F({set:e}){return k(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}let U=(e=>((e=class extends c.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}).getDerivedStateFromError=()=>({error:!0}),e))();function z(e){var t;let n="undefined"!=typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}function H(e){var t;return null==(t=e.__r3f)?void 0:t.root.getState()}let G={obj:e=>e===Object(e)&&!G.arr(e)&&"function"!=typeof e,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,boo:e=>"boolean"==typeof e,und:e=>void 0===e,nul:e=>null===e,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){let a;if(typeof e!=typeof t||!!e!=!!t)return!1;if(G.str(e)||G.num(e)||G.boo(e))return e===t;let o=G.obj(e);if(o&&"reference"===r)return e===t;let s=G.arr(e);if(s&&"reference"===n)return e===t;if((s||o)&&e===t)return!0;for(a in e)if(!(a in t))return!1;if(o&&"shallow"===n&&"shallow"===r){for(a in i?t:e)if(!G.equ(e[a],t[a],{strict:i,objects:"reference"}))return!1}else for(a in i?t:e)if(e[a]!==t[a])return!1;if(G.und(a)){if(s&&0===e.length&&0===t.length||o&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}},V=["children","key","ref"];function j(e,t,n,r){let i=null==e?void 0:e.__r3f;return!i&&(i={root:t,type:n,parent:null,children:[],props:function(e){let t={};for(let n in e)V.includes(n)||(t[n]=e[n]);return t}(r),object:e,eventCount:0,handlers:{},isHidden:!1},e&&(e.__r3f=i)),i}function W(e,t){let n=e[t];if(!t.includes("-"))return{root:e,key:t,target:n};for(let i of(n=e,t.split("-"))){var r;t=i,e=n,n=null==(r=n)?void 0:r[t]}return{root:e,key:t,target:n}}let X=/-\d+$/;function J(e,t){if(G.str(t.props.attach)){if(X.test(t.props.attach)){let n=t.props.attach.replace(X,""),{root:r,key:i}=W(e.object,n);Array.isArray(r[i])||(r[i]=[])}let{root:n,key:r}=W(e.object,t.props.attach);t.previousAttach=n[r],n[r]=t.object}else G.fun(t.props.attach)&&(t.previousAttach=t.props.attach(e.object,t.object))}function Y(e,t){if(G.str(t.props.attach)){let{root:n,key:r}=W(e.object,t.props.attach),i=t.previousAttach;void 0===i?delete n[r]:n[r]=i}else null==t.previousAttach||t.previousAttach(e.object,t.object);delete t.previousAttach}let K=[...V,"args","dispose","attach","object","onUpdate","dispose"],q=new Map,$=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Q=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Z(e,t){var n,r;let i=e.__r3f,a=i&&I(i).getState(),o=null==i?void 0:i.eventCount;for(let n in t){let o=t[n];if(K.includes(n))continue;if(i&&Q.test(n)){"function"==typeof o?i.handlers[n]=o:delete i.handlers[n],i.eventCount=Object.keys(i.handlers).length;continue}if(void 0===o)continue;let{root:s,key:u,target:c}=W(e,n);c instanceof l.zgK&&o instanceof l.zgK?c.mask=o.mask:c instanceof l.Q1f&&D(o)?c.set(o):null!==c&&"object"==typeof c&&"function"==typeof c.set&&"function"==typeof c.copy&&null!=o&&o.constructor&&c.constructor===o.constructor?c.copy(o):null!==c&&"object"==typeof c&&"function"==typeof c.set&&Array.isArray(o)?"function"==typeof c.fromArray?c.fromArray(o):c.set(...o):null!==c&&"object"==typeof c&&"function"==typeof c.set&&"number"==typeof o?"function"==typeof c.setScalar?c.setScalar(o):c.set(o):(s[u]=o,a&&!a.linear&&$.includes(u)&&null!=(r=s[u])&&r.isTexture&&s[u].format===l.GWd&&s[u].type===l.OUM&&(s[u].colorSpace=l.er$))}if(null!=i&&i.parent&&null!=a&&a.internal&&null!=(n=i.object)&&n.isObject3D&&o!==i.eventCount){let e=i.object,t=a.internal.interaction.indexOf(e);t>-1&&a.internal.interaction.splice(t,1),i.eventCount&&null!==e.raycast&&a.internal.interaction.push(e)}return i&&void 0===i.props.attach&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&ee(i),e}function ee(e){var t;if(!e.parent)return;null==e.props.onUpdate||e.props.onUpdate(e.object);let n=null==(t=e.root)?void 0:null==t.getState?void 0:t.getState();n&&0===n.internal.frames&&n.invalidate()}function et(e,t){e.manual||(B(e)?(e.left=-(t.width/2),e.right=t.width/2,e.top=t.height/2,e.bottom=-(t.height/2)):e.aspect=t.width/t.height,e.updateProjectionMatrix())}let en=e=>null==e?void 0:e.isObject3D;function er(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function ei(e,t,n,r){let i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}let ea=e=>!!(null!=e&&e.render),eo=c.createContext(null),es=(e,t)=>{let n=y((n,r)=>{let i;let a=new l.Pq0,o=new l.Pq0,s=new l.Pq0;function u(e=r().camera,t=o,n=r().size){let{width:i,height:l,top:c,left:d}=n,h=i/l;t.isVector3?s.copy(t):s.set(...t);let f=e.getWorldPosition(a).distanceTo(s);if(B(e))return{width:i/e.zoom,height:l/e.zoom,top:c,left:d,factor:1,distance:f,aspect:h};{let t=2*Math.tan(e.fov*Math.PI/180/2)*f,n=i/l*t;return{width:n,height:t,top:c,left:d,factor:i/n,distance:f,aspect:h}}}let d=e=>n(t=>({performance:{...t.performance,current:e}})),h=new l.I9Y;return{set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(t=1)=>e(r(),t),advance:(e,n)=>t(e,n,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new l.zD7,pointer:h,mouse:h,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{let e=r();i&&clearTimeout(i),e.performance.current!==e.performance.min&&d(e.performance.min),i=setTimeout(()=>d(r().performance.max),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:u},setEvents:e=>n(t=>({...t,events:{...t.events,...e}})),setSize:(e,t,i=0,a=0)=>{let s=r().camera,l={width:e,height:t,top:i,left:a};n(e=>({size:l,viewport:{...e.viewport,...u(s,o,l)}}))},setDpr:e=>n(t=>{let n=z(e);return{viewport:{...t.viewport,dpr:n,initialDpr:t.viewport.initialDpr||n}}}),setFrameloop:(e="always")=>{let t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n(()=>({frameloop:e}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:c.createRef(),active:!1,frames:0,priority:0,subscribe:(e,t,n)=>{let i=r().internal;return i.priority=i.priority+(t>0?1:0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort((e,t)=>e.priority-t.priority),()=>{let n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter(t=>t.ref!==e))}}}}}),r=n.getState(),i=r.size,a=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{let{camera:e,size:t,viewport:r,gl:s,set:l}=n.getState();if(t.width!==i.width||t.height!==i.height||r.dpr!==a){i=t,a=r.dpr,et(e,t),r.dpr>0&&s.setPixelRatio(r.dpr);let n="undefined"!=typeof HTMLCanvasElement&&s.domElement instanceof HTMLCanvasElement;s.setSize(t.width,t.height,n)}e!==o&&(o=e,l(t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}})))}),n.subscribe(t=>e(t)),n};function el(){let e=c.useContext(eo);if(!e)throw Error("R3F: Hooks can only be used within the Canvas component!");return e}function eu(e=e=>e,t){return el()(e,t)}function ec(e,t=0){let n=el(),r=n.getState().internal.subscribe,i=O(e);return k(()=>r(i,t,n),[t,r,n]),null}let ed=new WeakMap,eh=e=>{var t;return"function"==typeof e&&(null==e?void 0:null==(t=e.prototype)?void 0:t.constructor)===e};function ef(e,t){return function(n,...r){let i;return eh(n)?(i=ed.get(n))||(i=new n,ed.set(n,i)):i=n,e&&e(i),Promise.all(r.map(e=>new Promise((n,r)=>i.load(e,e=>{en(null==e?void 0:e.scene)&&Object.assign(e,function(e){let t={nodes:{},materials:{},meshes:{}};return e&&e.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material),e.isMesh&&!t.meshes[e.name]&&(t.meshes[e.name]=e)}),t}(e.scene)),n(e)},t,t=>r(Error(`Could not load ${e}: ${null==t?void 0:t.message}`))))))}}function ep(e,t,n,r){let i=Array.isArray(t)?t:[t],a=M(ef(n,r),[e,...i],{equal:G.equ});return Array.isArray(t)?a:a[0]}ep.preload=function(e,t,n){let r=Array.isArray(t)?t:[t];return C(ef(n),[e,...r])},ep.clear=function(e,t){return T([e,...Array.isArray(t)?t:[t]])};let em={},eg=/^three(?=[A-Z])/,ev=e=>`${e[0].toUpperCase()}${e.slice(1)}`,ey=0,eb=e=>"function"==typeof e;function ex(e){if(eb(e)){let t=`${ey++}`;return em[t]=e,t}Object.assign(em,e)}function e_(e,t){let n=ev(e),r=em[n];if("primitive"!==e&&!r)throw Error(`R3F: ${n} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if("primitive"===e&&!t.object)throw Error("R3F: Primitives without 'object' are invalid!");if(void 0!==t.args&&!Array.isArray(t.args))throw Error("R3F: The args prop must be an array!")}function eS(e){if(e.isHidden){var t;e.props.attach&&null!=(t=e.parent)&&t.object?J(e.parent,e):en(e.object)&&!1!==e.props.visible&&(e.object.visible=!0),e.isHidden=!1,ee(e)}}function eA(e,t,n){let r=t.root.getState();if(e.parent||e.object===r.scene){if(!t.object){var i,a;let e=em[ev(t.type)];t.object=null!=(i=t.props.object)?i:new e(...null!=(a=t.props.args)?a:[]),t.object.__r3f=t}if(Z(t.object,t.props),t.props.attach)J(e,t);else if(en(t.object)&&en(e.object)){let r=e.object.children.indexOf(null==n?void 0:n.object);if(n&&-1!==r){let n=e.object.children.indexOf(t.object);-1!==n?(e.object.children.splice(n,1),e.object.children.splice(n<r?r-1:r,0,t.object)):(t.object.parent=e.object,e.object.children.splice(r,0,t.object),t.object.dispatchEvent({type:"added"}),e.object.dispatchEvent({type:"childadded",child:t.object}))}else e.object.add(t.object)}for(let e of t.children)eA(t,e);ee(t)}}function ew(e,t){t&&(t.parent=e,e.children.push(t),eA(e,t))}function eE(e,t,n){if(!t||!n)return;t.parent=e;let r=e.children.indexOf(n);-1!==r?e.children.splice(r,0,t):e.children.push(t),eA(e,t,n)}function eM(e){if("function"==typeof e.dispose){let t=()=>{try{e.dispose()}catch{}};"undefined"!=typeof IS_REACT_ACT_ENVIRONMENT?t():(0,_.unstable_scheduleCallback)(_.unstable_IdlePriority,t)}}function eC(e,t,n){if(!t)return;t.parent=null;let r=e.children.indexOf(t);-1!==r&&e.children.splice(r,1),t.props.attach?Y(e,t):en(t.object)&&en(e.object)&&(e.object.remove(t.object),function(e,t){let{internal:n}=e.getState();n.interaction=n.interaction.filter(e=>e!==t),n.initialHits=n.initialHits.filter(e=>e!==t),n.hovered.forEach((e,r)=>{(e.eventObject===t||e.object===t)&&n.hovered.delete(r)}),n.capturedMap.forEach((e,r)=>{ei(n.capturedMap,t,e,r)})}(I(t),t.object));let i=null!==t.props.dispose&&!1!==n;for(let e=t.children.length-1;e>=0;e--){let n=t.children[e];eC(t,n,i)}t.children.length=0,delete t.object.__r3f,i&&"primitive"!==t.type&&"Scene"!==t.object.type&&eM(t.object),void 0===n&&ee(t)}let eT=[],eR=()=>{},eP={},eI=0,eB=function(e){let t=x()(e);return t.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:c.version}),t}({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:function(e,t,n){var r;return e_(e=ev(e)in em?e:e.replace(eg,""),t),"primitive"===e&&null!=(r=t.object)&&r.__r3f&&delete t.object.__r3f,j(t.object,n,e,t)},removeChild:eC,appendChild:ew,appendInitialChild:ew,insertBefore:eE,appendChildToContainer(e,t){let n=e.getState().scene.__r3f;t&&n&&ew(n,t)},removeChildFromContainer(e,t){let n=e.getState().scene.__r3f;t&&n&&eC(n,t)},insertInContainerBefore(e,t,n){let r=e.getState().scene.__r3f;t&&n&&r&&eE(r,t,n)},getRootHostContext:()=>eP,getChildHostContext:()=>eP,commitUpdate(e,t,n,r,i){var a,o,s;e_(t,r);let l=!1;if("primitive"===e.type&&n.object!==r.object?l=!0:(null==(a=r.args)?void 0:a.length)!==(null==(o=n.args)?void 0:o.length)?l=!0:null!=(s=r.args)&&s.some((e,t)=>{var r;return e!==(null==(r=n.args)?void 0:r[t])})&&(l=!0),l)eT.push([e,{...r},i]);else{let t=function(e,t){let n={};for(let r in t)if(!K.includes(r)&&!G.equ(t[r],e.props[r]))for(let e in n[r]=t[r],t)e.startsWith(`${r}-`)&&(n[e]=t[e]);for(let r in e.props){if(K.includes(r)||t.hasOwnProperty(r))continue;let{root:i,key:a}=W(e.object,r);if(i.constructor&&0===i.constructor.length){let e=function(e){let t=q.get(e.constructor);try{t||(t=new e.constructor,q.set(e.constructor,t))}catch(e){}return t}(i);G.und(e)||(n[a]=e[a])}else n[a]=0}return n}(e,r);Object.keys(t).length&&(Object.assign(e.props,t),Z(e.object,t))}(null===i.sibling||(4&i.flags)==0)&&function(){for(let[e]of eT){let t=e.parent;if(t)for(let n of(e.props.attach?Y(t,e):en(e.object)&&en(t.object)&&t.object.remove(e.object),e.children))n.props.attach?Y(e,n):en(n.object)&&en(e.object)&&e.object.remove(n.object);e.isHidden&&eS(e),e.object.__r3f&&delete e.object.__r3f,"primitive"!==e.type&&eM(e.object)}for(let[n,r,i]of eT){n.props=r;let a=n.parent;if(a){var e,t;let r=em[ev(n.type)];for(let o of(n.object=null!=(e=n.props.object)?e:new r(...null!=(t=n.props.args)?t:[]),n.object.__r3f=n,function(e,t){for(let n of[e,e.alternate])if(null!==n){if("function"==typeof n.ref){null==n.refCleanup||n.refCleanup();let e=n.ref(t);"function"==typeof e&&(n.refCleanup=e)}else n.ref&&(n.ref.current=t)}}(i,n.object),Z(n.object,n.props),n.props.attach?J(a,n):en(n.object)&&en(a.object)&&a.object.add(n.object),n.children))o.props.attach?J(n,o):en(o.object)&&en(n.object)&&n.object.add(o.object);ee(n)}}eT.length=0}()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:e=>null==e?void 0:e.object,prepareForCommit:()=>null,preparePortalMount:e=>j(e.getState().scene,e,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:function(e){if(!e.isHidden){var t;e.props.attach&&null!=(t=e.parent)&&t.object?Y(e.parent,e):en(e.object)&&(e.object.visible=!1),e.isHidden=!0,ee(e)}},unhideInstance:eS,createTextInstance:eR,hideTextInstance:eR,unhideTextInstance:eR,scheduleTimeout:"function"==typeof setTimeout?setTimeout:void 0,cancelTimeout:"function"==typeof clearTimeout?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:c.createContext(null),setCurrentUpdatePriority(e){eI=e},getCurrentUpdatePriority:()=>eI,resolveUpdatePriority(){var e;if(0!==eI)return eI;switch("undefined"!=typeof window&&(null==(e=window.event)?void 0:e.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return d.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return d.ContinuousEventPriority;default:return d.DefaultEventPriority}},resetFormInstance(){}}),eL=new Map,eD={objects:"shallow",strict:!1};function ek(e){let t,n;let r=eL.get(e),i=null==r?void 0:r.fiber,a=null==r?void 0:r.store;r&&console.warn("R3F.createRoot should only be called once!");let o="function"==typeof reportError?reportError:console.error,s=a||es(eK,eq),c=i||eB.createContainer(s,d.ConcurrentRoot,null,!1,null,"",o,o,o,null);r||eL.set(e,{fiber:c,store:s});let h=!1,f=null;return{async configure(r={}){var i,a;let o;f=new Promise(e=>o=e);let{gl:c,size:d,scene:p,events:m,onCreated:g,shadows:v=!1,linear:y=!1,flat:b=!1,legacy:x=!1,orthographic:_=!1,frameloop:S="always",dpr:A=[1,2],performance:w,raycaster:E,camera:M,onPointerMissed:C}=r,T=s.getState(),R=T.gl;if(!T.gl){let t={canvas:e,powerPreference:"high-performance",antialias:!0,alpha:!0},n="function"==typeof c?await c(t):c;R=ea(n)?n:new u.WebGLRenderer({...t,...c}),T.set({gl:R})}let P=T.raycaster;P||T.set({raycaster:P=new l.tBo});let{params:I,...B}=E||{};if(G.equ(B,P,eD)||Z(P,{...B}),G.equ(I,P.params,eD)||Z(P,{params:{...P.params,...I}}),!T.camera||T.camera===n&&!G.equ(n,M,eD)){n=M;let e=null==M?void 0:M.isCamera,t=e?M:_?new l.qUd(0,0,0,0,.1,1e3):new l.ubm(75,0,.1,1e3);e||(t.position.z=5,M&&(Z(t,M),!t.manual&&("aspect"in M||"left"in M||"right"in M||"bottom"in M||"top"in M)&&(t.manual=!0,t.updateProjectionMatrix())),T.camera||null!=M&&M.rotation||t.lookAt(0,0,0)),T.set({camera:t}),P.camera=t}if(!T.scene){let e;null!=p&&p.isScene?j(e=p,s,"",{}):(j(e=new l.Z58,s,"",{}),p&&Z(e,p)),T.set({scene:e})}m&&!T.events.handlers&&T.set({events:m(s)});let L=function(e,t){if(!t&&"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){let{width:t,height:n,top:r,left:i}=e.parentElement.getBoundingClientRect();return{width:t,height:n,top:r,left:i}}return!t&&"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0}:{width:0,height:0,top:0,left:0,...t}}(e,d);if(G.equ(L,T.size,eD)||T.setSize(L.width,L.height,L.top,L.left),A&&T.viewport.dpr!==z(A)&&T.setDpr(A),T.frameloop!==S&&T.setFrameloop(S),T.onPointerMissed||T.set({onPointerMissed:C}),w&&!G.equ(w,T.performance,eD)&&T.set(e=>({performance:{...e.performance,...w}})),!T.xr){let e=(e,t)=>{let n=s.getState();"never"!==n.frameloop&&eq(e,!0,n,t)},t=()=>{let t=s.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||eK(t)},n={connect(){let e=s.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){let e=s.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"==typeof(null==(i=R.xr)?void 0:i.addEventListener)&&n.connect(),T.set({xr:n})}if(R.shadowMap){let e=R.shadowMap.enabled,t=R.shadowMap.type;if(R.shadowMap.enabled=!!v,G.boo(v))R.shadowMap.type=l.Wk7;else if(G.str(v)){let e={basic:l.bTm,percentage:l.QP0,soft:l.Wk7,variance:l.RyA};R.shadowMap.type=null!=(a=e[v])?a:l.Wk7}else G.obj(v)&&Object.assign(R.shadowMap,v);(e!==R.shadowMap.enabled||t!==R.shadowMap.type)&&(R.shadowMap.needsUpdate=!0)}return l.ppV.enabled=!x,h||(R.outputColorSpace=y?l.Zr2:l.er$,R.toneMapping=b?l.y_p:l.FV),T.legacy!==x&&T.set(()=>({legacy:x})),T.linear!==y&&T.set(()=>({linear:y})),T.flat!==b&&T.set(()=>({flat:b})),!c||G.fun(c)||ea(c)||G.equ(c,R,eD)||Z(R,c),t=g,h=!0,o(),this},render(n){return h||f||this.configure(),f.then(()=>{eB.updateContainer((0,R.jsx)(eO,{store:s,children:n,onCreated:t,rootElement:e}),c,null,()=>void 0)}),s},unmount(){eN(e)}}}function eO({store:e,children:t,onCreated:n,rootElement:r}){return k(()=>{let t=e.getState();t.set(e=>({internal:{...e.internal,active:!0}})),n&&n(t),e.getState().events.connected||null==t.events.connect||t.events.connect(r)},[]),(0,R.jsx)(eo.Provider,{value:e,children:t})}function eN(e,t){let n=eL.get(e),r=null==n?void 0:n.fiber;if(r){let i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),eB.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var n,r,a,o;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(a=i.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(o=i.gl)&&o.xr&&i.xr.disconnect(),function(e){for(let t in"Scene"!==e.type&&(null==e.dispose||e.dispose()),e){let n=e[t];(null==n?void 0:n.type)!=="Scene"&&(null==n||null==n.dispose||n.dispose())}}(i.scene),eL.delete(e),t&&t(e)}catch(e){}},500)})}}function eF(e,t,n){return(0,R.jsx)(eU,{children:e,container:t,state:n})}function eU({state:e={},children:t,container:n}){let{events:r,size:i,...a}=e,o=el(),[s]=c.useState(()=>new l.tBo),[u]=c.useState(()=>new l.I9Y),d=O((e,t)=>{let a;if(t.camera&&i){let n=t.camera;a=e.viewport.getCurrentViewport(n,new l.Pq0,i),n!==e.camera&&et(n,i)}return{...e,...t,scene:n,raycaster:s,pointer:u,mouse:u,previousRoot:o,events:{...e.events,...t.events,...r},size:{...e.size,...i},viewport:{...e.viewport,...a},setEvents:e=>t.set(t=>({...t,events:{...t.events,...e}}))}}),h=c.useMemo(()=>{let e=y((e,t)=>({...a,set:e,get:t})),t=t=>e.setState(e=>d.current(t,e));return t(o.getState()),o.subscribe(t),e},[o,n]);return(0,R.jsx)(R.Fragment,{children:eB.createPortal((0,R.jsx)(eo.Provider,{value:h,children:t}),h,null)})}let ez=new Set,eH=new Set,eG=new Set;function eV(e,t){if(e.size)for(let{callback:n}of e.values())n(t)}function ej(e,t){switch(e){case"before":return eV(ez,t);case"after":return eV(eH,t);case"tail":return eV(eG,t)}}function eW(e,t,n){let a=t.clock.getDelta();"never"===t.frameloop&&"number"==typeof e&&(a=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),r=t.internal.subscribers;for(let e=0;e<r.length;e++)(i=r[e]).ref.current(i.store.getState(),a,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}let eX=!1,eJ=!1;function eY(e){for(let n of(o=requestAnimationFrame(eY),eX=!0,a=0,ej("before",e),eJ=!0,eL.values())){var t;(s=n.store.getState()).internal.active&&("always"===s.frameloop||s.internal.frames>0)&&!(null!=(t=s.gl.xr)&&t.isPresenting)&&(a+=eW(e,s))}if(eJ=!1,ej("after",e),0===a)return ej("tail",e),eX=!1,cancelAnimationFrame(o)}function eK(e,t=1){var n;if(!e)return eL.forEach(e=>eK(e.store.getState(),t));null!=(n=e.gl.xr)&&n.isPresenting||!e.internal.active||"never"===e.frameloop||(t>1?e.internal.frames=Math.min(60,e.internal.frames+t):eJ?e.internal.frames=2:e.internal.frames=1,eX||(eX=!0,requestAnimationFrame(eY)))}function eq(e,t=!0,n,r){if(t&&ej("before",e),n)eW(e,n,r);else for(let t of eL.values())eW(e,t.store.getState());t&&ej("after",e)}let e$={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function eQ(e){let{handlePointer:t}=function(e){function t(e){return e.filter(e=>["Move","Over","Enter","Out","Leave"].some(t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}function n(t){let{internal:n}=e.getState();for(let e of n.hovered.values())if(!t.length||!t.find(t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId)){let r=e.eventObject.__r3f;if(n.hovered.delete(er(e)),null!=r&&r.eventCount){let n=r.handlers,i={...e,intersections:t};null==n.onPointerOut||n.onPointerOut(i),null==n.onPointerLeave||n.onPointerLeave(i)}}}function r(e,t){for(let n=0;n<t.length;n++){let r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{let{internal:r}=e.getState();"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame(()=>{r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))})}}return function(a){let{onPointerMissed:o,internal:s}=e.getState();s.lastEvent.current=a;let u="onPointerMove"===i,c="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,d=function(t,n){let r=e.getState(),i=new Set,a=[],o=n?n(r.internal.interaction):r.internal.interaction;for(let e=0;e<o.length;e++){let t=H(o[e]);t&&(t.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);let s=o.flatMap(function(e){let n=H(e);if(!n||!n.events.enabled||null===n.raycaster.camera)return[];if(void 0===n.raycaster.camera){var r;null==n.events.compute||n.events.compute(t,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)}return n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]}).sort((e,t)=>{let n=H(e.object),r=H(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance}).filter(e=>{let t=er(e);return!i.has(t)&&(i.add(t),!0)});for(let e of(r.events.filter&&(s=r.events.filter(s,r)),s)){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&a.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())i.has(er(e.intersection))||a.push(e.intersection);return a}(a,u?t:void 0),h=c?function(t){let{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(a):0;"onPointerDown"===i&&(s.initialClick=[a.offsetX,a.offsetY],s.initialHits=d.map(e=>e.eventObject)),c&&!d.length&&h<=2&&(r(a,s.interaction),o&&o(a)),u&&n(d),function(e,t,r,i){if(e.length){let a={stopped:!1};for(let o of e){let s=H(o.object);if(s||o.object.traverseAncestors(e=>{let t=H(e);if(t)return s=t,!1}),s){let{raycaster:u,pointer:c,camera:d,internal:h}=s,f=new l.Pq0(c.x,c.y,0).unproject(d),p=e=>{var t,n;return null!=(t=null==(n=h.capturedMap.get(e))?void 0:n.has(o.eventObject))&&t},m=e=>{let n={intersection:o,target:t.target};h.capturedMap.has(e)?h.capturedMap.get(e).set(o.eventObject,n):h.capturedMap.set(e,new Map([[o.eventObject,n]])),t.target.setPointerCapture(e)},g=e=>{let t=h.capturedMap.get(e);t&&ei(h.capturedMap,o.eventObject,t,e)},v={};for(let e in t){let n=t[e];"function"!=typeof n&&(v[e]=n)}let y={...o,...v,pointer:c,intersections:e,stopped:a.stopped,delta:r,unprojectedPoint:f,ray:u.ray,camera:d,stopPropagation(){let r="pointerId"in t&&h.capturedMap.get(t.pointerId);(!r||r.has(o.eventObject))&&(y.stopped=a.stopped=!0,h.hovered.size&&Array.from(h.hovered.values()).find(e=>e.eventObject===o.eventObject)&&n([...e.slice(0,e.indexOf(o)),o]))},target:{hasPointerCapture:p,setPointerCapture:m,releasePointerCapture:g},currentTarget:{hasPointerCapture:p,setPointerCapture:m,releasePointerCapture:g},nativeEvent:t};if(i(y),!0===a.stopped)break}}}}(d,a,h,function(e){let t=e.eventObject,n=t.__r3f;if(!(null!=n&&n.eventCount))return;let o=n.handlers;if(u){if(o.onPointerOver||o.onPointerEnter||o.onPointerOut||o.onPointerLeave){let t=er(e),n=s.hovered.get(t);n?n.stopped&&e.stopPropagation():(s.hovered.set(t,e),null==o.onPointerOver||o.onPointerOver(e),null==o.onPointerEnter||o.onPointerEnter(e))}null==o.onPointerMove||o.onPointerMove(e)}else{let n=o[i];n?(!c||s.initialHits.includes(t))&&(r(a,s.interaction.filter(e=>!s.initialHits.includes(e))),n(e)):c&&s.initialHits.includes(t)&&r(a,s.interaction.filter(e=>!s.initialHits.includes(e)))}})}}}}(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-(2*(e.offsetY/t.size.height))+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(e$).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var t;let{events:n,internal:r}=e.getState();null!=(t=r.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{let{set:n,events:r}=e.getState();if(null==r.disconnect||r.disconnect(),n(e=>({events:{...e.events,connected:t}})),r.handlers)for(let e in r.handlers){let n=r.handlers[e],[i,a]=e$[e];t.addEventListener(i,n,{passive:a})}},disconnect:()=>{let{set:t,events:n}=e.getState();if(n.connected){if(n.handlers)for(let e in n.handlers){let t=n.handlers[e],[r]=e$[e];n.connected.removeEventListener(r,t)}t(e=>({events:{...e.events,connected:void 0}}))}}}}},66883:(e,t,n)=>{"use strict";n.d(t,{Hl:()=>h});var r=n(7592),i=n(58009),a=n(46206);function o(e,t){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>e(...r),t)}}let s=["x","y","top","bottom","left","right","width","height"],l=(e,t)=>s.every(n=>e[n]===t[n]);var u=n(50043),c=n(45512);function d({ref:e,children:t,fallback:n,resize:s,style:u,gl:d,events:h=r.f,eventSource:f,eventPrefix:p,shadows:m,linear:g,flat:v,legacy:y,orthographic:b,frameloop:x,dpr:_,performance:S,raycaster:A,camera:w,scene:E,onPointerMissed:M,onCreated:C,...T}){i.useMemo(()=>(0,r.e)(a),[]);let R=(0,r.u)(),[P,I]=function({debounce:e,scroll:t,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){var a;let s=n||("undefined"==typeof window?class{}:window.ResizeObserver);if(!s)throw Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");let[u,c]=(0,i.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),d=(0,i.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:u,orientationHandler:null}),h=e?"number"==typeof e?e:e.scroll:null,f=e?"number"==typeof e?e:e.resize:null,p=(0,i.useRef)(!1);(0,i.useEffect)(()=>(p.current=!0,()=>void(p.current=!1)));let[m,g,v]=(0,i.useMemo)(()=>{let e=()=>{if(!d.current.element)return;let{left:e,top:t,width:n,height:i,bottom:a,right:o,x:s,y:u}=d.current.element.getBoundingClientRect(),h={left:e,top:t,width:n,height:i,bottom:a,right:o,x:s,y:u};d.current.element instanceof HTMLElement&&r&&(h.height=d.current.element.offsetHeight,h.width=d.current.element.offsetWidth),Object.freeze(h),p.current&&!l(d.current.lastBounds,h)&&c(d.current.lastBounds=h)};return[e,f?o(e,f):e,h?o(e,h):e]},[c,r,h,f]);function y(){d.current.scrollContainers&&(d.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",v,!0)),d.current.scrollContainers=null),d.current.resizeObserver&&(d.current.resizeObserver.disconnect(),d.current.resizeObserver=null),d.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",d.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",d.current.orientationHandler))}function b(){d.current.element&&(d.current.resizeObserver=new s(v),d.current.resizeObserver.observe(d.current.element),t&&d.current.scrollContainers&&d.current.scrollContainers.forEach(e=>e.addEventListener("scroll",v,{capture:!0,passive:!0})),d.current.orientationHandler=()=>{v()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",d.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",d.current.orientationHandler))}return a=!!t,(0,i.useEffect)(()=>{if(a)return window.addEventListener("scroll",v,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",v,!0)},[v,a]),(0,i.useEffect)(()=>(window.addEventListener("resize",g),()=>void window.removeEventListener("resize",g)),[g]),(0,i.useEffect)(()=>{y(),b()},[t,v,g]),(0,i.useEffect)(()=>y,[]),[e=>{e&&e!==d.current.element&&(y(),d.current.element=e,d.current.scrollContainers=function e(t){let n=[];if(!t||t===document.body)return n;let{overflow:r,overflowX:i,overflowY:a}=window.getComputedStyle(t);return[r,i,a].some(e=>"auto"===e||"scroll"===e)&&n.push(t),[...n,...e(t.parentElement)]}(e),b())},u,m]}({scroll:!0,debounce:{scroll:50,resize:0},...s}),B=i.useRef(null),L=i.useRef(null);i.useImperativeHandle(e,()=>B.current);let D=(0,r.a)(M),[k,O]=i.useState(!1),[N,F]=i.useState(!1);if(k)throw k;if(N)throw N;let U=i.useRef(null);(0,r.b)(()=>{let e=B.current;I.width>0&&I.height>0&&e&&(U.current||(U.current=(0,r.c)(e)),async function(){await U.current.configure({gl:d,scene:E,events:h,shadows:m,linear:g,flat:v,legacy:y,orthographic:b,frameloop:x,dpr:_,performance:S,raycaster:A,camera:w,size:I,onPointerMissed:(...e)=>null==D.current?void 0:D.current(...e),onCreated:e=>{null==e.events.connect||e.events.connect(f?(0,r.i)(f)?f.current:f:L.current),p&&e.setEvents({compute:(e,t)=>{let n=e[p+"X"],r=e[p+"Y"];t.pointer.set(n/t.size.width*2-1,-(2*(r/t.size.height))+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==C||C(e)}}),U.current.render((0,c.jsx)(R,{children:(0,c.jsx)(r.E,{set:F,children:(0,c.jsx)(i.Suspense,{fallback:(0,c.jsx)(r.B,{set:O}),children:null!=t?t:null})})}))}())}),i.useEffect(()=>{let e=B.current;if(e)return()=>(0,r.d)(e)},[]);let z=f?"none":"auto";return(0,c.jsx)("div",{ref:L,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:z,...u},...T,children:(0,c.jsx)("div",{ref:P,style:{width:"100%",height:"100%"},children:(0,c.jsx)("canvas",{ref:B,style:{display:"block"},children:n})})})}function h(e){return(0,c.jsx)(u.Af,{children:(0,c.jsx)(d,{...e})})}n(95944),n(49145),n(76830)},76:e=>{"use strict";e.exports=function(e,t){if(null==e)throw TypeError("expected first argument to be an object.");if(void 0===t||"undefined"==typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return e;for(var n=Object.prototype.propertyIsEnumerable,r=Object(e),i=arguments.length,a=0;++a<i;)for(var o=Object(arguments[a]),s=Object.getOwnPropertySymbols(o),l=0;l<s.length;l++){var u=s[l];n.call(o,u)&&(r[u]=o[u])}return r}},90351:(e,t)=>{"use strict";t.A=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(0===n.length)return!0;var r=e.name||"",i=(e.type||"").toLowerCase(),a=i.replace(/\/.*$/,"");return n.some(function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?a===t.replace(/\/.*$/,""):i===t})}return!0}},13092:(e,t,n)=>{"use strict";var r=n(75011);e.exports=function(e){r(e)||(e={});for(var t=arguments.length,n=1;n<t;n++){var i=arguments[n];r(i)&&function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}(e,i)}return e}},75011:e=>{"use strict";e.exports=function(e){return null!=e&&("object"==typeof e||"function"==typeof e)}},93832:e=>{"use strict";e.exports=function(e,t,n){for(var r in e)if(!1===t.call(n,e[r],r,e))break}},18555:e=>{e.exports=function(e,n,r,i,a){var o;if(!(null!==(o=e)&&("object"==typeof o||"function"==typeof o))||!n)return e;if(n=t(n),r&&(n+="."+t(r)),i&&(n+="."+t(i)),a&&(n+="."+t(a)),n in e)return e[n];for(var s=n.split("."),l=s.length,u=-1;e&&++u<l;){for(var c=s[u];"\\"===c[c.length-1];)c=c.slice(0,-1)+"."+s[++u];e=e[c]}return e};function t(e){return e?Array.isArray(e)?e.join("."):e:""}},29260:(e,t,n)=>{"use strict";var r=n(89092);e.exports=function(e){return r(e)||"function"==typeof e||Array.isArray(e)}},89092:(e,t,n)=>{"use strict";var r=n(60110);function i(e){return!0===r(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,n;return!1!==i(e)&&"function"==typeof(t=e.constructor)&&!1!==i(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")}},60110:e=>{"use strict";e.exports=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},37860:(e,t,n)=>{"use strict";let r,i,a,o;n.d(t,{XA:()=>lr,_5:()=>li});var s=n(58009),l=n.n(s),u=n(11855),c=n(55740),d=n.n(c);function h(...e){return t=>e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}function f(...e){return(0,s.useCallback)(h(...e),e)}let p=(0,s.forwardRef)((e,t)=>{let{children:n,...r}=e,i=s.Children.toArray(n),a=i.find(v);if(a){let e=a.props.children,n=i.map(t=>t!==a?t:s.Children.count(e)>1?s.Children.only(null):(0,s.isValidElement)(e)?e.props.children:null);return(0,s.createElement)(m,(0,u.A)({},r,{ref:t}),(0,s.isValidElement)(e)?(0,s.cloneElement)(e,void 0,n):null)}return(0,s.createElement)(m,(0,u.A)({},r,{ref:t}),n)});p.displayName="Slot";let m=(0,s.forwardRef)((e,t)=>{let{children:n,...r}=e;return(0,s.isValidElement)(n)?(0,s.cloneElement)(n,{...function(e,t){let n={...t};for(let r in t){let i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...e)=>{a(...e),i(...e)}:i&&(n[r]=i):"style"===r?n[r]={...i,...a}:"className"===r&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props),ref:h(t,n.ref)}):s.Children.count(n)>1?s.Children.only(null):null});m.displayName="SlotClone";let g=({children:e})=>(0,s.createElement)(s.Fragment,null,e);function v(e){return(0,s.isValidElement)(e)&&e.type===g}let y=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let n=(0,s.forwardRef)((e,n)=>{let{asChild:r,...i}=e,a=r?p:t;return(0,s.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]),(0,s.createElement)(a,(0,u.A)({},i,{ref:n}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),b=(0,s.forwardRef)((e,t)=>{var n;let{container:r=null==globalThis?void 0:null===(n=globalThis.document)||void 0===n?void 0:n.body,...i}=e;return r?d().createPortal((0,s.createElement)(y.div,(0,u.A)({},i,{ref:t})),r):null});var x=Object.prototype.hasOwnProperty;function _(e,t){var n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&_(e[r],t[r]););return -1===r}if(!n||"object"==typeof e){for(n in r=0,e)if(x.call(e,n)&&++r&&!x.call(t,n)||!(n in t)||!_(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!=e&&t!=t}function S(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}var A=function(e,t,n,r){this.name=e,this.fn=t,this.args=n,this.modifiers=r};function w(e,t){return void 0===t&&(t="simple"),"object"==typeof e?e[t]:e}function E(e,t,n){if(!e.length)return w(t);var r=e.shift(),i=E(e,t,n);return r.perform(i,n)}A.prototype._test=function(e){var t=this.fn;try{E(this.modifiers.slice(),t,this)(e)}catch(e){t=function(){return!1}}try{return E(this.modifiers.slice(),t,this)(e)}catch(e){return!1}},A.prototype._check=function(e){try{E(this.modifiers.slice(),this.fn,this)(e)}catch(e){if(E(this.modifiers.slice(),function(e){return e},this)(!1))return}if(!E(this.modifiers.slice(),this.fn,this)(e))throw null},A.prototype._testAsync=function(e){var t=this;return new Promise(function(n,r){(function e(t,n,r){if(!t.length)return function(e){return Promise.resolve(w(n,"async")(e))};var i=t.shift(),a=e(t,n,r);return i.performAsync(a,r)})(t.modifiers.slice(),t.fn,t)(e).then(function(t){t?n(e):r(null)}).catch(function(e){return r(e)})})};var M=function(e,t,n){this.name=e,this.perform=t,this.performAsync=n},C=function(e){function t(n,r,i,a){for(var o=[],s=arguments.length-4;s-- >0;)o[s]=arguments[s+4];e.call(this,o),e.captureStackTrace&&e.captureStackTrace(this,t),this.rule=n,this.value=r,this.cause=i,this.target=a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),T=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.chain=e,this.nextRuleModifiers=t};T.prototype._applyRule=function(e,t){var n=this;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return n.chain.push(new A(t,e.apply(n,r),r,n.nextRuleModifiers)),n.nextRuleModifiers=[],n}},T.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new M(t,e.simple,e.async)),this},T.prototype._clone=function(){return new T(this.chain.slice(),this.nextRuleModifiers.slice())},T.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})},T.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(n){try{n._check(e)}catch(r){t.push(new C(n,e,r))}}),t},T.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(n){throw new C(t,e,n)}})},T.prototype.testAsync=function(e){var t=this;return new Promise(function(n,r){(function e(t,n,r,i){if(n.length){var a=n.shift();a._testAsync(t).then(function(){e(t,n,r,i)},function(e){i(new C(a,t,e))})}else r(t)})(e,t.chain.slice(),n,r)})};var R=function(e,t){return!!t&&"string"==typeof e&&0===e.trim().length||null==e};function P(){return"undefined"!=typeof Proxy?function e(t){return new Proxy(t,{get:function(n,r){if(r in n)return n[r];var i=e(t._clone());return r in B?i._applyModifier(B[r],r):r in I?i._applyRule(I[r],r):r in k?i._applyRule(k[r],r):void 0}})}(new T):function e(t){var n=function(t,n){return Object.keys(t).forEach(function(r){n[r]=function(){for(var i=[],a=arguments.length;a--;)i[a]=arguments[a];return e(n._clone())._applyRule(t[r],r).apply(void 0,i)}}),n},r=n(k,t),i=n(I,r);return Object.keys(B).forEach(function(t){Object.defineProperty(i,t,{get:function(){return e(i._clone())._applyModifier(B[t],t)}})}),i}(new T)}var I={};P.extend=function(e){Object.assign(I,e)},P.clearCustomRules=function(){I={}};var B={not:{simple:function(e){return function(t){return!e(t)}},async:function(e){return function(t){return Promise.resolve(e(t)).then(function(e){return!e}).catch(function(){return!0})}}},some:{simple:function(e){return function(t){return D(t).some(function(t){try{return e(t)}catch(e){return!1}})}},async:function(e){return function(t){return Promise.all(D(t).map(function(t){try{return e(t).catch(function(){return!1})}catch(e){return!1}})).then(function(e){return e.some(Boolean)})}}},every:{simple:function(e){return function(t){return!1!==t&&D(t).every(e)}},async:function(e){return function(t){return Promise.all(D(t).map(e)).then(function(e){return e.every(Boolean)})}}},strict:{simple:function(e,t){return function(n){return L(t)&&n&&"object"==typeof n?Object.keys(t.args[0]).length===Object.keys(n).length&&e(n):e(n)}},async:function(e,t){return function(n){return Promise.resolve(e(n)).then(function(e){return L(t)&&n&&"object"==typeof n?Object.keys(t.args[0]).length===Object.keys(n).length&&e:e}).catch(function(){return!1})}}}};function L(e){return e&&"schema"===e.name&&e.args.length>0&&"object"==typeof e.args[0]}function D(e){return"string"==typeof e?e.split(""):e}var k={equal:function(e){return function(t){return t==e}},exact:function(e){return function(t){return t===e}},number:function(e){return void 0===e&&(e=!0),function(t){return"number"==typeof t&&(e||isFinite(t))}},integer:function(){return function(e){return(Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e})(e)}},numeric:function(){return function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},string:function(){return O("string")},boolean:function(){return O("boolean")},undefined:function(){return O("undefined")},null:function(){return O("null")},array:function(){return O("array")},object:function(){return O("object")},instanceOf:function(e){return function(t){return t instanceof e}},pattern:function(e){return function(t){return e.test(t)}},lowercase:function(){return function(e){return"boolean"==typeof e||e===e.toLowerCase()&&""!==e.trim()}},uppercase:function(){return function(e){return e===e.toUpperCase()&&""!==e.trim()}},vowel:function(){return function(e){return/^[aeiou]+$/i.test(e)}},consonant:function(){return function(e){return/^(?=[^aeiou])([a-z]+)$/i.test(e)}},first:function(e){return function(t){return t[0]==e}},last:function(e){return function(t){return t[t.length-1]==e}},empty:function(){return function(e){return 0===e.length}},length:function(e,t){return function(n){return n.length>=e&&n.length<=(t||e)}},minLength:function(e){return function(t){return t.length>=e}},maxLength:function(e){return function(t){return t.length<=e}},negative:function(){return function(e){return e<0}},positive:function(){return function(e){return e>=0}},between:function(e,t){return function(n){return n>=e&&n<=t}},range:function(e,t){return function(n){return n>=e&&n<=t}},lessThan:function(e){return function(t){return t<e}},lessThanOrEqual:function(e){return function(t){return t<=e}},greaterThan:function(e){return function(t){return t>e}},greaterThanOrEqual:function(e){return function(t){return t>=e}},even:function(){return function(e){return e%2==0}},odd:function(){return function(e){return e%2!=0}},includes:function(e){return function(t){return~t.indexOf(e)}},schema:function(e){return{simple:function(t){var n=[];if(Object.keys(e).forEach(function(r){var i=e[r];try{i.check((t||{})[r])}catch(e){e.target=r,n.push(e)}}),n.length>0)throw n;return!0},async:function(t){var n=[];return Promise.all(Object.keys(e).map(function(r){return e[r].testAsync((t||{})[r]).catch(function(e){e.target=r,n.push(e)})})).then(function(){if(n.length>0)throw n;return!0})}}},passesAnyOf:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t){return e.some(function(e){return e.test(t)})}},optional:function(e,t){return void 0===t&&(t=!1),{simple:function(n){return R(n,t)||void 0===e.check(n)},async:function(n){return R(n,t)||e.testAsync(n)}}}};function O(e){return function(t){return Array.isArray(t)&&"array"===e||null===t&&"null"===e||typeof t===e}}var N="colors",F="sizes",U="space",z={gap:U,gridGap:U,columnGap:U,gridColumnGap:U,rowGap:U,gridRowGap:U,inset:U,insetBlock:U,insetBlockEnd:U,insetBlockStart:U,insetInline:U,insetInlineEnd:U,insetInlineStart:U,margin:U,marginTop:U,marginRight:U,marginBottom:U,marginLeft:U,marginBlock:U,marginBlockEnd:U,marginBlockStart:U,marginInline:U,marginInlineEnd:U,marginInlineStart:U,padding:U,paddingTop:U,paddingRight:U,paddingBottom:U,paddingLeft:U,paddingBlock:U,paddingBlockEnd:U,paddingBlockStart:U,paddingInline:U,paddingInlineEnd:U,paddingInlineStart:U,top:U,right:U,bottom:U,left:U,scrollMargin:U,scrollMarginTop:U,scrollMarginRight:U,scrollMarginBottom:U,scrollMarginLeft:U,scrollMarginX:U,scrollMarginY:U,scrollMarginBlock:U,scrollMarginBlockEnd:U,scrollMarginBlockStart:U,scrollMarginInline:U,scrollMarginInlineEnd:U,scrollMarginInlineStart:U,scrollPadding:U,scrollPaddingTop:U,scrollPaddingRight:U,scrollPaddingBottom:U,scrollPaddingLeft:U,scrollPaddingX:U,scrollPaddingY:U,scrollPaddingBlock:U,scrollPaddingBlockEnd:U,scrollPaddingBlockStart:U,scrollPaddingInline:U,scrollPaddingInlineEnd:U,scrollPaddingInlineStart:U,fontSize:"fontSizes",background:N,backgroundColor:N,backgroundImage:N,borderImage:N,border:N,borderBlock:N,borderBlockEnd:N,borderBlockStart:N,borderBottom:N,borderBottomColor:N,borderColor:N,borderInline:N,borderInlineEnd:N,borderInlineStart:N,borderLeft:N,borderLeftColor:N,borderRight:N,borderRightColor:N,borderTop:N,borderTopColor:N,caretColor:N,color:N,columnRuleColor:N,fill:N,outline:N,outlineColor:N,stroke:N,textDecorationColor:N,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:F,minBlockSize:F,maxBlockSize:F,inlineSize:F,minInlineSize:F,maxInlineSize:F,width:F,minWidth:F,maxWidth:F,height:F,minHeight:F,maxHeight:F,flexBasis:F,gridTemplateColumns:F,gridTemplateRows:F,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},H=(e,t)=>"function"==typeof t?{"()":Function.prototype.toString.call(t)}:t,G=()=>{let e=Object.create(null);return(t,n,...r)=>{let i=JSON.stringify(t,H);return i in e?e[i]:e[i]=n(t,...r)}},V=Symbol.for("sxs.internal"),j=(e,t)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)),W=e=>{for(let t in e)return!0;return!1},{hasOwnProperty:X}=Object.prototype,J=e=>e.includes("-")?e:e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),Y=/\s+(?![^()]*\))/,K=e=>t=>e(..."string"==typeof t?String(t).split(Y):[t]),q={appearance:e=>({WebkitAppearance:e,appearance:e}),backfaceVisibility:e=>({WebkitBackfaceVisibility:e,backfaceVisibility:e}),backdropFilter:e=>({WebkitBackdropFilter:e,backdropFilter:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),boxDecorationBreak:e=>({WebkitBoxDecorationBreak:e,boxDecorationBreak:e}),clipPath:e=>({WebkitClipPath:e,clipPath:e}),content:e=>({content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:`"${e}"`}),hyphens:e=>({WebkitHyphens:e,hyphens:e}),maskImage:e=>({WebkitMaskImage:e,maskImage:e}),maskSize:e=>({WebkitMaskSize:e,maskSize:e}),tabSize:e=>({MozTabSize:e,tabSize:e}),textSizeAdjust:e=>({WebkitTextSizeAdjust:e,textSizeAdjust:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),marginBlock:K((e,t)=>({marginBlockStart:e,marginBlockEnd:t||e})),marginInline:K((e,t)=>({marginInlineStart:e,marginInlineEnd:t||e})),maxSize:K((e,t)=>({maxBlockSize:e,maxInlineSize:t||e})),minSize:K((e,t)=>({minBlockSize:e,minInlineSize:t||e})),paddingBlock:K((e,t)=>({paddingBlockStart:e,paddingBlockEnd:t||e})),paddingInline:K((e,t)=>({paddingInlineStart:e,paddingInlineEnd:t||e}))},$=/([\d.]+)([^]*)/,Q=(e,t)=>e.length?e.reduce((e,n)=>(e.push(...t.map(e=>e.includes("&")?e.replace(/&/g,/[ +>|~]/.test(n)&&/&.*&/.test(e)?`:is(${n})`:n):n+" "+e)),e),[]):t,Z=(e,t)=>e in ee&&"string"==typeof t?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,n,r,i)=>n+("stretch"===r?`-moz-available${i};${J(e)}:${n}-webkit-fill-available`:`-moz-fit-content${i};${J(e)}:${n}fit-content`)+i):String(t),ee={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},et=e=>e?e+"-":"",en=(e,t,n)=>e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(e,r,i,a,o)=>"$"==a==!!i?e:(r||"--"==a?"calc(":"")+"var(--"+("$"===a?et(t)+(o.includes("$")?"":et(n))+o.replace(/\$/g,"-"):o)+")"+(r||"--"==a?"*"+(r||"")+(i||"1")+")":"")),er=/\s*,\s*(?![^()]*\))/,ei=Object.prototype.toString,ea=(e,t,n,r,i)=>{let a,o,s;let l=(e,t,n)=>{let u,c;let d=e=>{var h;for(u in e){let f=64===u.charCodeAt(0);for(c of f&&Array.isArray(e[u])?e[u]:[e[u]]){let e=/[A-Z]/.test(h=u)?h:h.replace(/-[^]/g,e=>e[1].toUpperCase()),p="object"==typeof c&&c&&c.toString===ei&&(!r.utils[e]||!t.length);if(e in r.utils&&!p){let t=r.utils[e];if(t!==o){o=t,d(t(c)),o=null;continue}}else if(e in q){let t=q[e];if(t!==s){s=t,d(t(c)),s=null;continue}}if(f&&(u=(u.slice(1)in r.media?"@media "+r.media[u.slice(1)]:u).replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(e,t,n,r,i,a)=>{let o=$.test(t),s=.0625*(o?-1:1),[l,u]=o?[r,t]:[t,r];return"("+("="===n[0]?"":">"===n[0]===o?"max-":"min-")+l+":"+("="!==n[0]&&1===n.length?u.replace($,(e,t,r)=>Number(t)+s*(">"===n?1:-1)+r):u)+(i?") and ("+(">"===i[0]?"min-":"max-")+l+":"+(1===i.length?a.replace($,(e,t,n)=>Number(t)+s*(">"===i?-1:1)+n):a):"")+")"})),p){let e=f?n.concat(u):[...n],r=f?[...t]:Q(t,u.split(er));void 0!==a&&i(eo(...a)),a=void 0,l(c,r,e)}else void 0===a&&(a=[[],t,n]),u=f||36!==u.charCodeAt(0)?u:`--${et(r.prefix)}${u.slice(1).replace(/\$/g,"-")}`,c=p?c:"number"==typeof c?c&&e in es?String(c)+"px":String(c):en(Z(e,null==c?"":c),r.prefix,r.themeMap[e]),a[0].push(`${f?`${u} `:`${J(u)}:`}${c}`)}}};d(e),void 0!==a&&i(eo(...a)),a=void 0};l(e,t,n)},eo=(e,t,n)=>`${n.map(e=>`${e}{`).join("")}${t.length?`${t.join(",")}{`:""}${e.join(";")}${t.length?"}":""}${Array(n.length?n.length+1:0).join("}")}`,es={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},el=e=>String.fromCharCode(e+(e>25?39:97)),eu=e=>(e=>{let t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=el(t%52)+n;return el(t%52)+n})(((e,t)=>{let n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return e})(5381,JSON.stringify(e))>>>0),ec=["themed","global","styled","onevar","resonevar","allvar","inline"],ed=e=>{if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch(e){return!1}},eh=e=>{let t;let n=()=>{let{cssRules:e}=t.sheet;return[].map.call(e,(n,r)=>{let{cssText:i}=n,a="";if(i.startsWith("--sxs"))return"";if(e[r-1]&&(a=e[r-1].cssText).startsWith("--sxs")){if(!n.cssRules.length)return"";for(let e in t.rules)if(t.rules[e].group===n)return`--sxs{--sxs:${[...t.rules[e].cache].join(" ")}}${i}`;return n.cssRules.length?`${a}${i}`:""}return i}).join("")},r=()=>{if(t){let{rules:e,sheet:n}=t;if(!n.deleteRule){for(;3===Object(Object(n.cssRules)[0]).type;)n.cssRules.splice(0,1);n.cssRules=[]}for(let t in e)delete e[t]}for(let i of Object(e).styleSheets||[])if(ed(i)){for(let e=0,a=i.cssRules;a[e];++e){let o=Object(a[e]);if(1!==o.type)continue;let s=Object(a[e+1]);if(4!==s.type)continue;++e;let{cssText:l}=o;if(!l.startsWith("--sxs"))continue;let u=l.slice(14,-3).trim().split(/\s+/),c=ec[u[0]];c&&(t||(t={sheet:i,reset:r,rules:{},toString:n}),t.rules[c]={group:s,index:e,cache:new Set(u)})}if(t)break}if(!t){let i=(e,t)=>({type:t,cssRules:[],insertRule(e,t){this.cssRules.splice(t,0,i(e,{import:3,undefined:1}[(e.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return"@media{}"===e?`@media{${[].map.call(this.cssRules,e=>e.cssText).join("")}}`:e}});t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:i("","text/css"),rules:{},reset:r,toString:n}}let{sheet:i,rules:a}=t;for(let e=ec.length-1;e>=0;--e){let t=ec[e];if(!a[t]){let n=ec[e+1],r=a[n]?a[n].index:i.cssRules.length;i.insertRule("@media{}",r),i.insertRule(`--sxs{--sxs:${e}}`,r),a[t]={group:i.cssRules[r+1],index:r,cache:new Set([e])}}ef(a[t])}};return r(),t},ef=e=>{let t=e.group,n=t.cssRules.length;e.apply=e=>{try{t.insertRule(e,n),++n}catch(e){}}},ep=Symbol(),em=G(),eg=(e,t)=>em(e,()=>(...n)=>{let r={type:null,composers:new Set};for(let t of n)if(null!=t){if(t[V])for(let e of(null==r.type&&(r.type=t[V].type),t[V].composers))r.composers.add(e);else t.constructor!==Object||t.$$typeof?null==r.type&&(r.type=t):r.composers.add(ev(t,e))}return null==r.type&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),ey(e,r,t)}),ev=({variants:e,compoundVariants:t,defaultVariants:n,...r},i)=>{let a=`${et(i.prefix)}c-${eu(r)}`,o=[],s=[],l=Object.create(null),u=[];for(let e in n)l[e]=String(n[e]);if("object"==typeof e&&e)for(let t in e){X.call(l,t)||(l[t]="undefined");let n=e[t];for(let e in n){let r={[t]:String(e)};"undefined"===String(e)&&u.push(t);let i=n[e],a=[r,i,!W(i)];o.push(a)}}if("object"==typeof t&&t)for(let e of t){let{css:t,...n}=e;for(let e in t="object"==typeof t&&t||{},n)n[e]=String(n[e]);let r=[n,t,!W(t)];s.push(r)}return[a,r,o,s,l,u]},ey=(e,t,n)=>{let[r,i,a,o]=eb(t.composers),s="function"==typeof t.type||t.type.$$typeof?(e=>{function t(){for(let n=0;n<t[ep].length;n++){let[r,i]=t[ep][n];e.rules[r].apply(i)}return t[ep]=[],null}return t[ep]=[],t.rules={},ec.forEach(e=>t.rules[e]={apply:n=>t[ep].push([e,n])}),t})(n):null,l=(s||n).rules,u=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,c=c=>{let{css:d,...h}=c="object"==typeof c&&c||e_,f={};for(let e in a)if(delete h[e],e in c){let t=c[e];"object"==typeof t&&t?f[e]={"@initial":a[e],...t}:(t=String(t),f[e]="undefined"!==t||o.has(e)?t:a[e])}else f[e]=a[e];let p=new Set([...i]);for(let[r,i,a,o]of t.composers){n.rules.styled.cache.has(r)||(n.rules.styled.cache.add(r),ea(i,[`.${r}`],[],e,e=>{l.styled.apply(e)}));let t=ex(a,f,e.media),s=ex(o,f,e.media,!0);for(let i of t)if(void 0!==i)for(let[t,a,o]of i){let i=`${r}-${eu(a)}-${t}`;p.add(i);let s=(o?n.rules.resonevar:n.rules.onevar).cache,u=o?l.resonevar:l.onevar;s.has(i)||(s.add(i),ea(a,[`.${i}`],[],e,e=>{u.apply(e)}))}for(let t of s)if(void 0!==t)for(let[i,a]of t){let t=`${r}-${eu(a)}-${i}`;p.add(t),n.rules.allvar.cache.has(t)||(n.rules.allvar.cache.add(t),ea(a,[`.${t}`],[],e,e=>{l.allvar.apply(e)}))}}if("object"==typeof d&&d){let t=`${r}-i${eu(d)}-css`;p.add(t),n.rules.inline.cache.has(t)||(n.rules.inline.cache.add(t),ea(d,[`.${t}`],[],e,e=>{l.inline.apply(e)}))}for(let e of String(c.className||"").trim().split(/\s+/))e&&p.add(e);let m=h.className=[...p].join(" ");return{type:t.type,className:m,selector:u,props:h,toString:()=>m,deferredInjector:s}};return j(c,{className:r,selector:u,[V]:t,toString:()=>(n.rules.styled.cache.has(r)||c(),r)})},eb=e=>{let t="",n=[],r={},i=[];for(let[a,,,,o,s]of e)for(let e in""===t&&(t=a),n.push(a),i.push(...s),o){let t=o[e];(void 0===r[e]||"undefined"!==t||s.includes(t))&&(r[e]=t)}return[t,n,r,new Set(i)]},ex=(e,t,n,r)=>{let i=[];e:for(let[a,o,s]of e){if(s)continue;let e,l=0,u=!1;for(e in a){let r=a[e],i=t[e];if(i!==r){if("object"!=typeof i||!i)continue e;{let e,t,a=0;for(let o in i){if(r===String(i[o])){if("@initial"!==o){let e=o.slice(1);(t=t||[]).push(e in n?n[e]:o.replace(/^@media ?/,"")),u=!0}l+=a,e=!0}++a}if(t&&t.length&&(o={["@media "+t.join(", ")]:o}),!e)continue e}}}(i[l]=i[l]||[]).push([r?"cv":`${e}-${a[e]}`,o,u])}return i},e_={},eS=G(),eA=(e,t)=>eS(e,()=>(...n)=>{let r=()=>{for(let r of n){let n=eu(r="object"==typeof r&&r||{});if(!t.rules.global.cache.has(n)){if(t.rules.global.cache.add(n),"@import"in r){let e=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1;for(let n of[].concat(r["@import"]))n=n.includes('"')||n.includes("'")?n:`"${n}"`,t.sheet.insertRule(`@import ${n};`,e++);delete r["@import"]}ea(r,[],[],e,e=>{t.rules.global.apply(e)})}}return""};return j(r,{toString:r})}),ew=G(),eE=(e,t)=>ew(e,()=>n=>{let r=`${et(e.prefix)}k-${eu(n)}`,i=()=>{if(!t.rules.global.cache.has(r)){t.rules.global.cache.add(r);let i=[];ea(n,[],[],e,e=>i.push(e));let a=`@keyframes ${r}{${i.join("")}}`;t.rules.global.apply(a)}return r};return j(i,{get name(){return i()},toString:i})}),eM=class{constructor(e,t,n,r){this.token=null==e?"":String(e),this.value=null==t?"":String(t),this.scale=null==n?"":String(n),this.prefix=null==r?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+et(this.prefix)+et(this.scale)+this.token}toString(){return this.computedValue}},eC=G(),eT=(e,t)=>eC(e,()=>(n,r)=>{r="object"==typeof n&&n||Object(r);let i=`.${n=(n="string"==typeof n?n:"")||`${et(e.prefix)}t-${eu(r)}`}`,a={},o=[];for(let t in r)for(let n in a[t]={},r[t]){let i=`--${et(e.prefix)}${t}-${n}`,s=en(String(r[t][n]),e.prefix,t);a[t][n]=new eM(n,s,t,e.prefix),o.push(`${i}:${s}`)}let s=()=>{if(o.length&&!t.rules.themed.cache.has(n)){t.rules.themed.cache.add(n);let i=`${r===e.theme?":root,":""}.${n}{${o.join(";")}}`;t.rules.themed.apply(i)}return n};return{...a,get className(){return s()},selector:i,toString:s}}),eR=G(),eP=G();let eI={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function eB(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function eL(e,t,n,r=.15){return 0===r?Math.max(t,Math.min(e,n)):e<t?-eB(t-e,n-t,r)+t:e>n?+eB(e-n,n-t,r)+n:e}function eD(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ek(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ek(Object(n),!0).forEach(function(t){eD(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ek(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let eN={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function eF(e){return e?e[0].toUpperCase()+e.slice(1):""}let eU=["enter","leave"],ez=["gotpointercapture","lostpointercapture"];function eH(e){return"touches"in e}function eG(e){return eH(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function eV(e){return eH(e)?("touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches)[0]:e}function ej(e){let t=eV(e);return eH(e)?t.identifier:t.pointerId}function eW(e){let t=eV(e);return[t.clientX,t.clientY]}function eX(e,...t){return"function"==typeof e?e(...t):e}function eJ(){}function eY(e,t){return Object.assign({},t,e||{})}class eK{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){let{state:e,shared:t,ingKey:n,args:r}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){let t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?eX(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){let t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){let e=this.state;e._initial=e._values,e.initial=e.values}compute(e){let{state:t,config:n,shared:r}=this;t.args=this.args;let i=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,function(e){let t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){let{shiftKey:n,altKey:r,metaKey:i,ctrlKey:a}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:a})}return t}(e)),r.down=r.pressed=r.buttons%2==1||r.touches>0,i=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){let e=t._delta.map(Math.abs);eI.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);let[a,o]=t._movement,[s,l]=n.threshold,{_step:u,values:c}=t;if(n.hasCustomTransform?(!1===u[0]&&(u[0]=Math.abs(a)>=s&&c[0]),!1===u[1]&&(u[1]=Math.abs(o)>=l&&c[1])):(!1===u[0]&&(u[0]=Math.abs(a)>=s&&Math.sign(a)*s),!1===u[1]&&(u[1]=Math.abs(o)>=l&&Math.sign(o)*l)),t.intentional=!1!==u[0]||!1!==u[1],!t.intentional)return;let d=[0,0];if(n.hasCustomTransform){let[e,t]=c;d[0]=!1!==u[0]?e-u[0]:0,d[1]=!1!==u[1]?t-u[1]:0}else d[0]=!1!==u[0]?a-u[0]:0,d[1]=!1!==u[1]?o-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(d);let h=t.offset,f=t._active&&!t._blocked||t.active;f&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=eX(n.bounds,t)),this.setup&&this.setup()),t.movement=d,this.computeOffset()));let[p,m]=t.offset,[[g,v],[y,b]]=t._bounds;t.overflow=[p<g?-1:p>v?1:0,m<y?-1:m>b?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);let x=t._active&&n.rubberband||[0,0];if(t.offset=function(e,[t,n],[r,i]){let[[a,o],[s,l]]=e;return[eL(t,a,o,r),eL(n,s,l,i)]}(t._bounds,t.offset,x),t.delta=eI.sub(t.offset,h),this.computeMovement(),f&&(!t.last||i>32)){t.delta=eI.sub(t.offset,h);let e=t.delta.map(Math.abs);eI.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&i>0&&(t.velocity=[e[0]/i,e[1]/i],t.timeDelta=i)}}emit(){let e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;let r=this.handler(eO(eO(eO({},t),e),{},{[this.aliasKey]:e.values}));void 0!==r&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class eq extends eK{constructor(...e){super(...e),eD(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=eI.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=eI.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){let t=this.state,n=this.config;if(!t.axis&&e){let r="object"==typeof n.axisThreshold?n.axisThreshold[eG(e)]:n.axisThreshold;t.axis=function([e,t],n){let r=Math.abs(e),i=Math.abs(t);return r>i&&r>n?"x":i>r&&i>n?"y":void 0}(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}let e$=e=>e,eQ={enabled:(e=!0)=>e,eventOptions:(e,t,n)=>eO(eO({},n.shared.eventOptions),e),preventDefault:(e=!1)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return eI.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?eI.toVector(e):void 0,transform(e,t,n){let r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||e$},threshold:e=>eI.toVector(e,0)},eZ=0,e0=eO(eO({},eQ),{},{axis(e,t,{axis:n}){if(this.lockDirection="lock"===n,!this.lockDirection)return n},axisThreshold:(e=eZ)=>e,bounds(e={}){if("function"==typeof e)return t=>e0.bounds(e(t));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;let{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=e;return[[t,n],[r,i]]}}),e1={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class e2 extends eq{constructor(...e){super(...e),eD(this,"ingKey","dragging")}reset(){super.reset();let e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){let e=this.state;if(e._bounds instanceof HTMLElement){let t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=e0.bounds(r)}}cancel(){let e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){let t=this.config,n=this.state;if(null!=e.buttons&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):-1!==t.pointerButtons&&t.pointerButtons!==e.buttons))return;let r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),r&&r.size>1&&n._pointerActive||(this.start(e),this.setupPointer(e),n._pointerId=ej(e),n._pointerActive=!0,this.computeValues(eW(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==eG(e)?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){let t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){let t=this.state,n=this.config;if(!t._pointerActive)return;let r=ej(e);if(void 0!==t._pointerId&&r!==t._pointerId)return;let i=eW(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=eI.sub(i,t._values),this.computeValues(i)),eI.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(n.preventScrollAxis&&!t._preventScroll){if(!t.axis)return;if(t.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis){t._active=!1,this.clean();return}this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(e){}let t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;let r=ej(e);if(void 0!==t._pointerId&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);let[i,a]=t._distance;if(t.tap=i<=n.tapsThreshold&&a<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{let[e,r]=t._delta,[i,a]=t._movement,[o,s]=n.swipe.velocity,[l,u]=n.swipe.distance,c=n.swipe.duration;if(t.elapsedTime<c){let n=Math.abs(e/t.timeDelta),c=Math.abs(r/t.timeDelta);n>o&&Math.abs(i)>l&&(t.swipe[0]=Math.sign(e)),c>s&&Math.abs(a)>u&&(t.swipe[1]=Math.sign(r))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){let t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,"persist"in e&&"function"==typeof e.persist&&e.persist();let t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){let t=e1[e.key];if(t){let n=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,r),n._keyboardActive=!0,eI.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in e1&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){let t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}let e3="undefined"!=typeof window&&window.document&&window.document.createElement;function e4(){return e3&&"ontouchstart"in window}let e5={isBrowser:e3,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:e4(),touchscreen:e4()||e3&&window.navigator.maxTouchPoints>1,pointer:e3&&"onpointerdown"in window,pointerLock:e3&&"exitPointerLock"in window.document},e9=10,e6={mouse:0,touch:0,pen:8},e8=eO(eO({},e0),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return(this.pointerLock=r&&e5.pointerLock,e5.touch&&n)?"touch":this.pointerLock?"mouse":e5.pointer&&!i?"pointer":e5.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay="number"==typeof n?n:n||void 0===n&&e?250:void 0,e5.touchscreen&&!1!==n)return e||(void 0!==n?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&"pointer"===this.device&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:i}){let a=eI.toVector(e,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,a},swipe({velocity:e=.5,distance:t=50,duration:n=250}={}){return{velocity:this.transform(eI.toVector(e)),distance:this.transform(eI.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?eO(eO({},e6),e):e6,keyboardDisplacement:(e=e9)=>e});eO(eO({},eQ),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!e5.touch&&e5.gesture)return"gesture";if(e5.touch&&r)return"touch";if(e5.touchscreen){if(e5.pointer)return"pointer";if(e5.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){let i=e=>{let t=eY(eX(n,e),{min:-1/0,max:1/0});return[t.min,t.max]},a=e=>{let t=eY(eX(r,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof n&&"function"!=typeof r?[i(),a()]:e=>[i(e),a(e)]},threshold(e,t,n){return this.lockDirection="lock"===n.axis,eI.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel:(e=!0)=>e}),eO(eO({},e0),{},{mouseOnly:(e=!0)=>e}),eO(eO({},e0),{},{mouseOnly:(e=!0)=>e});let e7=new Map,te=new Map,tt={key:"drag",engine:e2,resolver:e8},tn={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=e5.isBrowser?window:void 0)=>e,eventOptions:({passive:e=!0,capture:t=!1}={})=>({passive:e,capture:t}),transform:e=>e},tr=["target","eventOptions","window","enabled","transform"];function ti(e={},t){let n={};for(let[r,i]of Object.entries(t))switch(typeof i){case"function":n[r]=i.call(n,e[r],r,e);break;case"object":n[r]=ti(e[r],i);break;case"boolean":i&&(n[r]=e[r])}return n}class ta{constructor(e,t){eD(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,r,i){let a=this._listeners,o=function(e,t=""){let n=eN[e];return e+(n&&n[t]||t)}(t,n),s=eO(eO({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),i);e.addEventListener(o,r,s);let l=()=>{e.removeEventListener(o,r,s),a.delete(l)};return a.add(l),l}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class to{constructor(){eD(this,"_timeouts",new Map)}add(e,t,n=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,n,...r))}remove(e){let t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class ts{constructor(e){eD(this,"gestures",new Set),eD(this,"_targetEventStore",new ta(this)),eD(this,"gestureEventStores",{}),eD(this,"gestureTimeoutStores",{}),eD(this,"handlers",{}),eD(this,"config",{}),eD(this,"pointerIds",new Set),eD(this,"touchIds",new Set),eD(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&tl(e,"drag"),t.wheel&&tl(e,"wheel"),t.scroll&&tl(e,"scroll"),t.move&&tl(e,"move"),t.pinch&&tl(e,"pinch"),t.hover&&tl(e,"hover")}(this,e)}setEventIds(e){return eH(e)?(this.touchIds=new Set(Array.from(e.touches).filter(t=>{var n,r;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,t.target))}).map(e=>e.identifier)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t,n={}){let{target:r,eventOptions:i,window:a,enabled:o,transform:s}=e,l=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,tr);if(n.shared=ti({target:r,eventOptions:i,window:a,enabled:o,transform:s},tn),t){let e=te.get(t);n[t]=ti(eO({shared:n.shared},l),e)}else for(let e in l){let t=te.get(e);t&&(n[e]=ti(eO({shared:n.shared},l[e]),t))}return n}(e,t,this.config)}clean(){for(let e of(this._targetEventStore.clean(),this.gestures))this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){let t;let n=this.config.shared,r={};if(!n.target||(t=n.target())){if(n.enabled){for(let n of this.gestures){let i=this.config[n],a=tu(r,i.eventOptions,!!t);i.enabled&&new(e7.get(n))(this,e,n).bind(a)}let i=tu(r,n.eventOptions,!!t);for(let t in this.nativeHandlers)i(t,"",n=>this.nativeHandlers[t](eO(eO({},this.state.shared),{},{event:n,args:e})),void 0,!0)}for(let e in r)r[e]=function(...e){return 0===e.length?eJ:1===e.length?e[0]:function(){let t;for(let n of e)t=n.apply(this,arguments)||t;return t}}(...r[e]);if(!t)return r;for(let e in r){let{device:n,capture:i,passive:a}=function(e){let t=e.substring(2).toLowerCase(),n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));let r=ez.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}(e);this._targetEventStore.add(t,n,"",r[e],{capture:i,passive:a})}}}}function tl(e,t){e.gestures.add(t),e.gestureEventStores[t]=new ta(e,t),e.gestureTimeoutStores[t]=new to}let tu=(e,t,n)=>(r,i,a,o={},s=!1)=>{var l,u;let c=null!==(l=o.capture)&&void 0!==l?l:t.capture,d=null!==(u=o.passive)&&void 0!==u?u:t.passive,h=s?r:function(e,t="",n=!1){let r=eN[e],i=r&&r[t]||t;return"on"+eF(e)+eF(i)+(!function(e=!1,t){return e&&!eU.includes(t)}(n,i)?"":"Capture")}(r,i,c);n&&d&&(h+="Passive"),e[h]=e[h]||[],e[h].push(a)};function tc(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}function td(e,t=[]){let n=[],r=()=>{let t=n.map(e=>(0,s.createContext)(e));return function(n){let r=(null==n?void 0:n[e])||t;return(0,s.useMemo)(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return r.scopeName=e,[function(t,r){let i=(0,s.createContext)(r),a=n.length;function o(t){let{scope:n,children:r,...o}=t,l=(null==n?void 0:n[e][a])||i,u=(0,s.useMemo)(()=>o,Object.values(o));return(0,s.createElement)(l.Provider,{value:u},r)}return n=[...n,r],o.displayName=t+"Provider",[o,function(n,o){let l=(null==o?void 0:o[e][a])||i,u=(0,s.useContext)(l);if(u)return u;if(void 0!==r)return r;throw Error(`\`${n}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=n.reduce((t,{useScope:n,scopeName:r})=>{let i=n(e)[`__scope${r}`];return{...t,...i}},{});return(0,s.useMemo)(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}(r,...t)]}function th(e){let t=(0,s.useRef)(e);return(0,s.useEffect)(()=>{t.current=e}),(0,s.useMemo)(()=>(...e)=>{var n;return null===(n=t.current)||void 0===n?void 0:n.call(t,...e)},[])}let tf="dismissableLayer.update",tp=(0,s.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),tm=(0,s.forwardRef)((e,t)=>{var n;let{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:l,onInteractOutside:c,onDismiss:d,...h}=e,p=(0,s.useContext)(tp),[m,g]=(0,s.useState)(null),v=null!==(n=null==m?void 0:m.ownerDocument)&&void 0!==n?n:null==globalThis?void 0:globalThis.document,[,b]=(0,s.useState)({}),x=f(t,e=>g(e)),_=Array.from(p.layers),[S]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),A=_.indexOf(S),w=m?_.indexOf(m):-1,E=p.layersWithOutsidePointerEventsDisabled.size>0,M=w>=A,C=function(e,t=null==globalThis?void 0:globalThis.document){let n=th(e),r=(0,s.useRef)(!1),i=(0,s.useRef)(()=>{});return(0,s.useEffect)(()=>{let e=e=>{if(e.target&&!r.current){let r={originalEvent:e};function a(){tv("dismissableLayer.pointerDownOutside",n,r,{discrete:!0})}"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=a,t.addEventListener("click",i.current,{once:!0})):a()}r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}(e=>{let t=e.target,n=[...p.branches].some(e=>e.contains(t));!M||n||(null==o||o(e),null==c||c(e),e.defaultPrevented||null==d||d())},v),T=function(e,t=null==globalThis?void 0:globalThis.document){let n=th(e),r=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{let e=e=>{e.target&&!r.current&&tv("dismissableLayer.focusOutside",n,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{let t=e.target;[...p.branches].some(e=>e.contains(t))||(null==l||l(e),null==c||c(e),e.defaultPrevented||null==d||d())},v);return function(e,t=null==globalThis?void 0:globalThis.document){let n=th(e);(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e),()=>t.removeEventListener("keydown",e)},[n,t])}(e=>{w!==p.layers.size-1||(null==a||a(e),!e.defaultPrevented&&d&&(e.preventDefault(),d()))},v),(0,s.useEffect)(()=>{if(m)return i&&(0===p.layersWithOutsidePointerEventsDisabled.size&&(r=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(m)),p.layers.add(m),tg(),()=>{i&&1===p.layersWithOutsidePointerEventsDisabled.size&&(v.body.style.pointerEvents=r)}},[m,v,i,p]),(0,s.useEffect)(()=>()=>{m&&(p.layers.delete(m),p.layersWithOutsidePointerEventsDisabled.delete(m),tg())},[m,p]),(0,s.useEffect)(()=>{let e=()=>b({});return document.addEventListener(tf,e),()=>document.removeEventListener(tf,e)},[]),(0,s.createElement)(y.div,(0,u.A)({},h,{ref:x,style:{pointerEvents:E?M?"auto":"none":void 0,...e.style},onFocusCapture:tc(e.onFocusCapture,T.onFocusCapture),onBlurCapture:tc(e.onBlurCapture,T.onBlurCapture),onPointerDownCapture:tc(e.onPointerDownCapture,C.onPointerDownCapture)}))});function tg(){let e=new CustomEvent(tf);document.dispatchEvent(e)}function tv(e,t,n,{discrete:r}){let i=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});(t&&i.addEventListener(e,t,{once:!0}),r)?i&&(0,c.flushSync)(()=>i.dispatchEvent(a)):i.dispatchEvent(a)}let ty=(null==globalThis?void 0:globalThis.document)?s.useLayoutEffect:()=>{},tb=s["useId".toString()]||(()=>void 0),tx=0;function t_(e){return e.split("-")[0]}function tS(e){return e.split("-")[1]}function tA(e){return["top","bottom"].includes(t_(e))?"x":"y"}function tw(e){return"y"===e?"height":"width"}function tE(e,t,n){let r,{reference:i,floating:a}=e,o=i.x+i.width/2-a.width/2,s=i.y+i.height/2-a.height/2,l=tA(t),u=tw(l),c=i[u]/2-a[u]/2,d=t_(t),h="x"===l;switch(d){case"top":r={x:o,y:i.y-a.height};break;case"bottom":r={x:o,y:i.y+i.height};break;case"right":r={x:i.x+i.width,y:s};break;case"left":r={x:i.x-a.width,y:s};break;default:r={x:i.x,y:i.y}}switch(tS(t)){case"start":r[l]-=c*(n&&h?-1:1);break;case"end":r[l]+=c*(n&&h?-1:1)}return r}let tM=async(e,t,n)=>{let{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,s=await (null==o.isRTL?void 0:o.isRTL(t)),l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:c}=tE(l,r,s),d=r,h={},f=0;for(let n=0;n<a.length;n++){let{name:p,fn:m}=a[n],{x:g,y:v,data:y,reset:b}=await m({x:u,y:c,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});if(u=null!=g?g:u,c=null!=v?v:c,h={...h,[p]:{...h[p],...y}},b&&f<=50){f++,"object"==typeof b&&(b.placement&&(d=b.placement),b.rects&&(l=!0===b.rects?await o.getElementRects({reference:e,floating:t,strategy:i}):b.rects),{x:u,y:c}=tE(l,d,s)),n=-1;continue}}return{x:u,y:c,placement:d,strategy:i,middlewareData:h}};function tC(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function tT(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function tR(e,t){var n;void 0===t&&(t={});let{x:r,y:i,platform:a,rects:o,elements:s,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=t,p=tC(f),m=s[h?"floating"===d?"reference":"floating":d],g=tT(await a.getClippingRect({element:null==(n=await (null==a.isElement?void 0:a.isElement(m)))||n?m:m.contextElement||await (null==a.getDocumentElement?void 0:a.getDocumentElement(s.floating)),boundary:u,rootBoundary:c,strategy:l})),v=tT(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===d?{...o.floating,x:r,y:i}:o.reference,offsetParent:await (null==a.getOffsetParent?void 0:a.getOffsetParent(s.floating)),strategy:l}):o[d]);return{top:g.top-v.top+p.top,bottom:v.bottom-g.bottom+p.bottom,left:g.left-v.left+p.left,right:v.right-g.right+p.right}}let tP=Math.min,tI=Math.max,tB=e=>({name:"arrow",options:e,async fn(t){let{element:n,padding:r=0}=null!=e?e:{},{x:i,y:a,placement:o,rects:s,platform:l}=t;if(null==n)return{};let u=tC(r),c={x:i,y:a},d=tA(o),h=tS(o),f=tw(d),p=await l.getDimensions(n),m="y"===d?"top":"left",g="y"===d?"bottom":"right",v=s.reference[f]+s.reference[d]-c[d]-s.floating[f],y=c[d]-s.reference[d],b=await (null==l.getOffsetParent?void 0:l.getOffsetParent(n)),x=b?"y"===d?b.clientHeight||0:b.clientWidth||0:0;0===x&&(x=s.floating[f]);let _=u[m],S=x-p[f]-u[g],A=x/2-p[f]/2+(v/2-y/2),w=tI(_,tP(A,S)),E=("start"===h?u[m]:u[g])>0&&A!==w&&s.reference[f]<=s.floating[f]?A<_?_-A:S-A:0;return{[d]:c[d]-E,data:{[d]:w,centerOffset:A-w}}}}),tL={left:"right",right:"left",bottom:"top",top:"bottom"};function tD(e){return e.replace(/left|right|bottom|top/g,e=>tL[e])}let tk={start:"end",end:"start"};function tO(e){return e.replace(/start|end/g,e=>tk[e])}let tN=["top","right","bottom","left"];function tF(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function tU(e){return tN.some(t=>e[t]>=0)}let tz=function(e){let{strategy:t="referenceHidden",...n}=void 0===e?{}:e;return{name:"hide",async fn(e){let{rects:r}=e;switch(t){case"referenceHidden":{let t=tF(await tR(e,{...n,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:t,referenceHidden:tU(t)}}}case"escaped":{let t=tF(await tR(e,{...n,altBoundary:!0}),r.floating);return{data:{escapedOffsets:t,escaped:tU(t)}}}default:return{}}}}};async function tH(e,t){let{placement:n,platform:r,elements:i}=e,a=await (null==r.isRTL?void 0:r.isRTL(i.floating)),o=t_(n),s=tS(n),l="x"===tA(n),u=["left","top"].includes(o)?-1:1,c=a&&l?-1:1,d="function"==typeof t?t(e):t,{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return s&&"number"==typeof p&&(f="end"===s?-1*p:p),l?{x:f*c,y:h*u}:{x:h*u,y:f*c}}function tG(e){return"x"===e?"y":"x"}function tV(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function tj(e){if(null==e)return window;if(!tV(e)){let t=e.ownerDocument;return t&&t.defaultView||window}return e}function tW(e){return tj(e).getComputedStyle(e)}function tX(e){return tV(e)?"":e?(e.nodeName||"").toLowerCase():""}function tJ(){let e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function tY(e){return e instanceof tj(e).HTMLElement}function tK(e){return e instanceof tj(e).Element}function tq(e){if("undefined"==typeof ShadowRoot)return!1;let t=tj(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function t$(e){let{overflow:t,overflowX:n,overflowY:r}=tW(e);return/auto|scroll|overlay|hidden/.test(t+r+n)}function tQ(e){let t=/firefox/i.test(tJ()),n=tW(e);return"none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||["transform","perspective"].includes(n.willChange)||t&&"filter"===n.willChange||t&&!!n.filter&&"none"!==n.filter}function tZ(){return!/^((?!chrome|android).)*safari/i.test(tJ())}let t0=Math.min,t1=Math.max,t2=Math.round;function t3(e,t,n){var r,i,a,o;void 0===t&&(t=!1),void 0===n&&(n=!1);let s=e.getBoundingClientRect(),l=1,u=1;t&&tY(e)&&(l=e.offsetWidth>0&&t2(s.width)/e.offsetWidth||1,u=e.offsetHeight>0&&t2(s.height)/e.offsetHeight||1);let c=tK(e)?tj(e):window,d=!tZ()&&n,h=(s.left+(d&&null!=(r=null==(i=c.visualViewport)?void 0:i.offsetLeft)?r:0))/l,f=(s.top+(d&&null!=(a=null==(o=c.visualViewport)?void 0:o.offsetTop)?a:0))/u,p=s.width/l,m=s.height/u;return{width:p,height:m,top:f,right:h+p,bottom:f+m,left:h,x:h,y:f}}function t4(e){return((e instanceof tj(e).Node?e.ownerDocument:e.document)||window.document).documentElement}function t5(e){return tK(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function t9(e){return t3(t4(e)).left+t5(e).scrollLeft}function t6(e){return"html"===tX(e)?e:e.assignedSlot||e.parentNode||(tq(e)?e.host:null)||t4(e)}function t8(e){return tY(e)&&"fixed"!==getComputedStyle(e).position?e.offsetParent:null}function t7(e){let t=tj(e),n=t8(e);for(;n&&["table","td","th"].includes(tX(n))&&"static"===getComputedStyle(n).position;)n=t8(n);return n&&("html"===tX(n)||"body"===tX(n)&&"static"===getComputedStyle(n).position&&!tQ(n))?t:n||function(e){let t=t6(e);for(tq(t)&&(t=t.host);tY(t)&&!["html","body"].includes(tX(t));){if(tQ(t))return t;t=t.parentNode}return null}(e)||t}function ne(e){if(tY(e))return{width:e.offsetWidth,height:e.offsetHeight};let t=t3(e);return{width:t.width,height:t.height}}function nt(e,t){var n;void 0===t&&(t=[]);let r=function e(t){let n=t6(t);return["html","body","#document"].includes(tX(n))?t.ownerDocument.body:tY(n)&&t$(n)?n:e(n)}(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),a=tj(r),o=i?[a].concat(a.visualViewport||[],t$(r)?r:[]):r,s=t.concat(o);return i?s:s.concat(nt(o))}function nn(e,t,n){return"viewport"===t?tT(function(e,t){let n=tj(e),r=t4(e),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;let e=tZ();(e||!e&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s,y:l}}(e,n)):tK(t)?function(e,t){let n=t3(e,!1,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft;return{top:r,left:i,x:i,y:r,right:i+e.clientWidth,bottom:r+e.clientHeight,width:e.clientWidth,height:e.clientHeight}}(t,n):tT(function(e){var t;let n=t4(e),r=t5(e),i=null==(t=e.ownerDocument)?void 0:t.body,a=t1(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=t1(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+t9(e),l=-r.scrollTop;return"rtl"===tW(i||n).direction&&(s+=t1(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}(t4(e)))}let nr={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e,a=[..."clippingAncestors"===n?function(e){let t=nt(e),n=["absolute","fixed"].includes(tW(e).position)&&tY(e)?t7(e):e;return tK(n)?t.filter(e=>tK(e)&&function(e,t){let n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&tq(n)){let n=t;do{if(n&&e===n)return!0;n=n.parentNode||n.host}while(n)}return!1}(e,n)&&"body"!==tX(e)):[]}(t):[].concat(n),r],o=a[0],s=a.reduce((e,n)=>{let r=nn(t,n,i);return e.top=t1(r.top,e.top),e.right=t0(r.right,e.right),e.bottom=t0(r.bottom,e.bottom),e.left=t1(r.left,e.left),e},nn(t,o,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e,i=tY(n),a=t4(n);if(n===a)return t;let o={scrollLeft:0,scrollTop:0},s={x:0,y:0};if((i||!i&&"fixed"!==r)&&(("body"!==tX(n)||t$(a))&&(o=t5(n)),tY(n))){let e=t3(n,!0);s.x=e.x+n.clientLeft,s.y=e.y+n.clientTop}return{...t,x:t.x-o.scrollLeft+s.x,y:t.y-o.scrollTop+s.y}},isElement:tK,getDimensions:ne,getOffsetParent:t7,getDocumentElement:t4,getElementRects:e=>{let{reference:t,floating:n,strategy:r}=e;return{reference:function(e,t,n){let r=tY(t),i=t4(t),a=t3(e,r&&function(e){let t=t3(e);return t2(t.width)!==e.offsetWidth||t2(t.height)!==e.offsetHeight}(t),"fixed"===n),o={scrollLeft:0,scrollTop:0},s={x:0,y:0};if(r||!r&&"fixed"!==n){if(("body"!==tX(t)||t$(i))&&(o=t5(t)),tY(t)){let e=t3(t,!0);s.x=e.x+t.clientLeft,s.y=e.y+t.clientTop}else i&&(s.x=t9(i))}return{x:a.left+o.scrollLeft-s.x,y:a.top+o.scrollTop-s.y,width:a.width,height:a.height}}(t,t7(n),r),floating:{...ne(n),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>"rtl"===tW(e).direction};function ni(e,t,n,r){let i;void 0===r&&(r={});let{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:s=!0,animationFrame:l=!1}=r,u=a&&!l,c=o&&!l,d=u||c?[...tK(e)?nt(e):[],...nt(t)]:[];d.forEach(e=>{u&&e.addEventListener("scroll",n,{passive:!0}),c&&e.addEventListener("resize",n)});let h=null;if(s){let r=!0;h=new ResizeObserver(()=>{r||n(),r=!1}),tK(e)&&!l&&h.observe(e),h.observe(t)}let f=l?t3(e):null;return l&&function t(){let r=t3(e);f&&(r.x!==f.x||r.y!==f.y||r.width!==f.width||r.height!==f.height)&&n(),f=r,i=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach(e=>{u&&e.removeEventListener("scroll",n),c&&e.removeEventListener("resize",n)}),null==(e=h)||e.disconnect(),h=null,l&&cancelAnimationFrame(i)}}let na=(e,t,n)=>tM(e,t,{platform:nr,...n});var no="undefined"!=typeof document?s.useLayoutEffect:s.useEffect;let ns=e=>{let{element:t,padding:n}=e;return{name:"arrow",options:e,fn(e){if(Object.prototype.hasOwnProperty.call(t,"current")){if(null!=t.current)return tB({element:t.current,padding:n}).fn(e)}else if(t)return tB({element:t,padding:n}).fn(e);return{}}}},nl=(0,s.forwardRef)((e,t)=>{let{children:n,width:r=10,height:i=5,...a}=e;return(0,s.createElement)(y.svg,(0,u.A)({},a,{ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),e.asChild?n:(0,s.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),nu="Popper",[nc,nd]=td(nu),[nh,nf]=nc(nu),np=(0,s.forwardRef)((e,t)=>{let{__scopePopper:n,virtualRef:r,...i}=e,a=nf("PopperAnchor",n),o=(0,s.useRef)(null),l=f(t,o);return(0,s.useEffect)(()=>{a.onAnchorChange((null==r?void 0:r.current)||o.current)}),r?null:(0,s.createElement)(y.div,(0,u.A)({},i,{ref:l}))}),nm="PopperContent",[ng,nv]=nc(nm),[ny,nb]=nc(nm,{hasParent:!1,positionUpdateFns:new Set}),nx=(0,s.forwardRef)((e,t)=>{var n,r,i,a,o,l,u,d;let{__scopePopper:h,side:p="bottom",sideOffset:m=0,align:g="center",alignOffset:v=0,arrowPadding:b=0,collisionBoundary:x=[],collisionPadding:_=0,sticky:S="partial",hideWhenDetached:A=!1,avoidCollisions:w=!0,onPlaced:E,...M}=e,C=nf(nm,h),[T,R]=(0,s.useState)(null),P=f(t,e=>R(e)),[I,B]=(0,s.useState)(null),L=function(e){let[t,n]=(0,s.useState)(void 0);return ty(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let r,i;if(!Array.isArray(t)||!t.length)return;let a=t[0];if("borderBoxSize"in a){let e=a.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,i=t.blockSize}else r=e.offsetWidth,i=e.offsetHeight;n({width:r,height:i})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}(I),D=null!==(n=null==L?void 0:L.width)&&void 0!==n?n:0,k=null!==(r=null==L?void 0:L.height)&&void 0!==r?r:0,O="number"==typeof _?_:{top:0,right:0,bottom:0,left:0,..._},N=Array.isArray(x)?x:[x],F=N.length>0,U={padding:O,boundary:N.filter(nw),altBoundary:F},{reference:z,floating:H,strategy:G,x:V,y:j,placement:W,middlewareData:X,update:J}=function(e){let{middleware:t,placement:n="bottom",strategy:r="absolute",whileElementsMounted:i}=void 0===e?{}:e,a=s.useRef(null),o=s.useRef(null),l=function(e){let t=s.useRef(e);return no(()=>{t.current=e}),t}(i),u=s.useRef(null),[d,h]=s.useState({x:null,y:null,strategy:r,placement:n,middlewareData:{}}),[f,p]=s.useState(t);!function e(t,n){let r,i,a;if(t===n)return!0;if(typeof t!=typeof n)return!1;if("function"==typeof t&&t.toString()===n.toString())return!0;if(t&&n&&"object"==typeof t){if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;0!=i--;){let r=a[i];if(("_owner"!==r||!t.$$typeof)&&!e(t[r],n[r]))return!1}return!0}return t!=t&&n!=n}(null==f?void 0:f.map(e=>{let{options:t}=e;return t}),null==t?void 0:t.map(e=>{let{options:t}=e;return t}))&&p(t);let m=s.useCallback(()=>{a.current&&o.current&&na(a.current,o.current,{middleware:f,placement:n,strategy:r}).then(e=>{g.current&&c.flushSync(()=>{h(e)})})},[f,n,r]);no(()=>{g.current&&m()},[m]);let g=s.useRef(!1);no(()=>(g.current=!0,()=>{g.current=!1}),[]);let v=s.useCallback(()=>{if("function"==typeof u.current&&(u.current(),u.current=null),a.current&&o.current){if(l.current){let e=l.current(a.current,o.current,m);u.current=e}else m()}},[m,l]),y=s.useCallback(e=>{a.current=e,v()},[v]),b=s.useCallback(e=>{o.current=e,v()},[v]),x=s.useMemo(()=>({reference:a,floating:o}),[]);return s.useMemo(()=>({...d,update:m,refs:x,reference:y,floating:b}),[d,m,x,y,b])}({strategy:"fixed",placement:p+("center"!==g?"-"+g:""),whileElementsMounted:ni,middleware:[nE(),function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){let{x:n,y:r}=t,i=await tH(t,e);return{x:n+i.x,y:r+i.y,data:i}}}}({mainAxis:m+k,alignmentAxis:v}),w?function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){let{x:n,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=e,u={x:n,y:r},c=await tR(t,l),d=tA(t_(i)),h=tG(d),f=u[d],p=u[h];if(a){let e="y"===d?"top":"left",t="y"===d?"bottom":"right",n=f+c[e],r=f-c[t];f=tI(n,tP(f,r))}if(o){let e="y"===h?"top":"left",t="y"===h?"bottom":"right",n=p+c[e],r=p-c[t];p=tI(n,tP(p,r))}let m=s.fn({...t,[d]:f,[h]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}}({mainAxis:!0,crossAxis:!1,limiter:"partial"===S?function(e){return void 0===e&&(e={}),{options:e,fn(t){let{x:n,y:r,placement:i,rects:a,middlewareData:o}=t,{offset:s=0,mainAxis:l=!0,crossAxis:u=!0}=e,c={x:n,y:r},d=tA(i),h=tG(d),f=c[d],p=c[h],m="function"==typeof s?s({...a,placement:i}):s,g="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){let e="y"===d?"height":"width",t=a.reference[d]-a.floating[e]+g.mainAxis,n=a.reference[d]+a.reference[e]-g.mainAxis;f<t?f=t:f>n&&(f=n)}if(u){var v,y,b,x;let e="y"===d?"width":"height",t=["top","left"].includes(t_(i)),n=a.reference[h]-a.floating[e]+(t&&null!=(v=null==(y=o.offset)?void 0:y[h])?v:0)+(t?0:g.crossAxis),r=a.reference[h]+a.reference[e]+(t?0:null!=(b=null==(x=o.offset)?void 0:x[h])?b:0)-(t?g.crossAxis:0);p<n?p=n:p>r&&(p=r)}return{[d]:f,[h]:p}}}}():void 0,...U}):void 0,I?ns({element:I,padding:b}):void 0,w?function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r,i,a;let{placement:o,middlewareData:s,rects:l,initialPlacement:u,platform:c,elements:d}=t,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",flipAlignment:g=!0,...v}=e,y=t_(o),b=y===u,x=p||(b||!g?[tD(u)]:function(e){let t=tD(e);return[tO(e),t,tO(t)]}(u)),_=[u,...x],S=await tR(t,v),A=[],w=(null==(n=s.flip)?void 0:n.overflows)||[];if(h&&A.push(S[y]),f){let{main:e,cross:t}=function(e,t,n){void 0===n&&(n=!1);let r=tS(e),i=tA(e),a=tw(i),o="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=tD(o)),{main:o,cross:tD(o)}}(o,l,await (null==c.isRTL?void 0:c.isRTL(d.floating)));A.push(S[e],S[t])}if(w=[...w,{placement:o,overflows:A}],!A.every(e=>e<=0)){let e=(null!=(r=null==(i=s.flip)?void 0:i.index)?r:0)+1,t=_[e];if(t)return{data:{index:e,overflows:w},reset:{placement:t}};let n="bottom";switch(m){case"bestFit":{let e=null==(a=w.map(e=>[e,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:a[0].placement;e&&(n=e);break}case"initialPlacement":n=u}if(o!==n)return{reset:{placement:n}}}return{}}}}({...U}):void 0,function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){let n,r;let{placement:i,rects:a,platform:o,elements:s}=t,{apply:l,...u}=e,c=await tR(t,u),d=t_(i),h=tS(i);"top"===d||"bottom"===d?(n=d,r=h===(await (null==o.isRTL?void 0:o.isRTL(s.floating))?"start":"end")?"left":"right"):(r=d,n="end"===h?"top":"bottom");let f=tI(c.left,0),p=tI(c.right,0),m=tI(c.top,0),g=tI(c.bottom,0),v={availableHeight:a.floating.height-(["left","right"].includes(i)?2*(0!==m||0!==g?m+g:tI(c.top,c.bottom)):c[n]),availableWidth:a.floating.width-(["top","bottom"].includes(i)?2*(0!==f||0!==p?f+p:tI(c.left,c.right)):c[r])},y=await o.getDimensions(s.floating);null==l||l({...t,...v});let b=await o.getDimensions(s.floating);return y.width!==b.width||y.height!==b.height?{reset:{rects:!0}}:{}}}}({...U,apply:({elements:e,availableWidth:t,availableHeight:n})=>{e.floating.style.setProperty("--radix-popper-available-width",`${t}px`),e.floating.style.setProperty("--radix-popper-available-height",`${n}px`)}}),nM({arrowWidth:D,arrowHeight:k}),A?tz({strategy:"referenceHidden"}):void 0].filter(nA)});ty(()=>{z(C.anchor)},[z,C.anchor]);let Y=null!==V&&null!==j,[K,q]=nC(W),$=th(E);ty(()=>{Y&&(null==$||$())},[Y,$]);let Q=null===(i=X.arrow)||void 0===i?void 0:i.x,Z=null===(a=X.arrow)||void 0===a?void 0:a.y,ee=(null===(o=X.arrow)||void 0===o?void 0:o.centerOffset)!==0,[et,en]=(0,s.useState)();ty(()=>{T&&en(window.getComputedStyle(T).zIndex)},[T]);let{hasParent:er,positionUpdateFns:ei}=nb(nm,h),ea=!er;(0,s.useLayoutEffect)(()=>{if(!ea)return ei.add(J),()=>{ei.delete(J)}},[ea,ei,J]),ty(()=>{ea&&Y&&Array.from(ei).reverse().forEach(e=>requestAnimationFrame(e))},[ea,Y,ei]);let eo={"data-side":K,"data-align":q,...M,ref:P,style:{...M.style,animation:Y?void 0:"none",opacity:null!==(l=X.hide)&&void 0!==l&&l.referenceHidden?0:void 0}};return(0,s.createElement)("div",{ref:H,"data-radix-popper-content-wrapper":"",style:{position:G,left:0,top:0,transform:Y?`translate3d(${Math.round(V)}px, ${Math.round(j)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:et,"--radix-popper-transform-origin":[null===(u=X.transformOrigin)||void 0===u?void 0:u.x,null===(d=X.transformOrigin)||void 0===d?void 0:d.y].join(" ")},dir:e.dir},(0,s.createElement)(ng,{scope:h,placedSide:K,onArrowChange:B,arrowX:Q,arrowY:Z,shouldHideArrow:ee},ea?(0,s.createElement)(ny,{scope:h,hasParent:!0,positionUpdateFns:ei},(0,s.createElement)(y.div,eo)):(0,s.createElement)(y.div,eo)))}),n_={top:"bottom",right:"left",bottom:"top",left:"right"},nS=(0,s.forwardRef)(function(e,t){let{__scopePopper:n,...r}=e,i=nv("PopperArrow",n),a=n_[i.placedSide];return(0,s.createElement)("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0}},(0,s.createElement)(nl,(0,u.A)({},r,{ref:t,style:{...r.style,display:"block"}})))});function nA(e){return void 0!==e}function nw(e){return null!==e}let nE=()=>({name:"anchorCssProperties",fn(e){let{rects:t,elements:n}=e,{width:r,height:i}=t.reference;return n.floating.style.setProperty("--radix-popper-anchor-width",`${r}px`),n.floating.style.setProperty("--radix-popper-anchor-height",`${i}px`),{}}}),nM=e=>({name:"transformOrigin",options:e,fn(t){var n,r,i,a,o;let{placement:s,rects:l,middlewareData:u}=t,c=(null===(n=u.arrow)||void 0===n?void 0:n.centerOffset)!==0,d=c?0:e.arrowWidth,h=c?0:e.arrowHeight,[f,p]=nC(s),m={start:"0%",center:"50%",end:"100%"}[p],g=(null!==(r=null===(i=u.arrow)||void 0===i?void 0:i.x)&&void 0!==r?r:0)+d/2,v=(null!==(a=null===(o=u.arrow)||void 0===o?void 0:o.y)&&void 0!==a?a:0)+h/2,y="",b="";return"bottom"===f?(y=c?m:`${g}px`,b=`${-h}px`):"top"===f?(y=c?m:`${g}px`,b=`${l.floating.height+h}px`):"right"===f?(y=`${-h}px`,b=c?m:`${v}px`):"left"===f&&(y=`${l.floating.width+h}px`,b=c?m:`${v}px`),{data:{x:y,y:b}}}});function nC(e){let[t,n="center"]=e.split("-");return[t,n]}let nT=e=>{let{__scopePopper:t,children:n}=e,[r,i]=(0,s.useState)(null);return(0,s.createElement)(nh,{scope:t,anchor:r,onAnchorChange:i},n)},nR=e=>{let{present:t,children:n}=e,r=function(e){var t,n;let[r,i]=(0,s.useState)(),a=(0,s.useRef)({}),o=(0,s.useRef)(e),l=(0,s.useRef)("none"),[u,d]=(t=e?"mounted":"unmounted",n={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},(0,s.useReducer)((e,t)=>{let r=n[e][t];return null!=r?r:e},t));return(0,s.useEffect)(()=>{let e=nP(a.current);l.current="mounted"===u?e:"none"},[u]),ty(()=>{let t=a.current,n=o.current;if(n!==e){let r=l.current,i=nP(t);e?d("MOUNT"):"none"===i||(null==t?void 0:t.display)==="none"?d("UNMOUNT"):n&&r!==i?d("ANIMATION_OUT"):d("UNMOUNT"),o.current=e}},[e,d]),ty(()=>{if(r){let e=e=>{let t=nP(a.current).includes(e.animationName);e.target===r&&t&&(0,c.flushSync)(()=>d("ANIMATION_END"))},t=e=>{e.target===r&&(l.current=nP(a.current))};return r.addEventListener("animationstart",t),r.addEventListener("animationcancel",e),r.addEventListener("animationend",e),()=>{r.removeEventListener("animationstart",t),r.removeEventListener("animationcancel",e),r.removeEventListener("animationend",e)}}d("ANIMATION_END")},[r,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:(0,s.useCallback)(e=>{e&&(a.current=getComputedStyle(e)),i(e)},[])}}(t),i="function"==typeof n?n({present:r.isPresent}):s.Children.only(n),a=f(r.ref,i.ref);return"function"==typeof n||r.isPresent?(0,s.cloneElement)(i,{ref:a}):null};function nP(e){return(null==e?void 0:e.animationName)||"none"}nR.displayName="Presence";let nI=(0,s.forwardRef)((e,t)=>(0,s.createElement)(y.span,(0,u.A)({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}))),[nB,nL]=td("Tooltip",[nd]),nD=nd(),nk="tooltip.open",[nO,nN]=nB("TooltipProvider"),nF="Tooltip",[nU,nz]=nB(nF),nH="TooltipTrigger",nG=(0,s.forwardRef)((e,t)=>{let{__scopeTooltip:n,...r}=e,i=nz(nH,n),a=nN(nH,n),o=nD(n),l=f(t,(0,s.useRef)(null),i.onTriggerChange),c=(0,s.useRef)(!1),d=(0,s.useRef)(!1),h=(0,s.useCallback)(()=>c.current=!1,[]);return(0,s.useEffect)(()=>()=>document.removeEventListener("pointerup",h),[h]),(0,s.createElement)(np,(0,u.A)({asChild:!0},o),(0,s.createElement)(y.button,(0,u.A)({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:l,onPointerMove:tc(e.onPointerMove,e=>{"touch"===e.pointerType||d.current||a.isPointerInTransitRef.current||(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:tc(e.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:tc(e.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:tc(e.onFocus,()=>{c.current||i.onOpen()}),onBlur:tc(e.onBlur,i.onClose),onClick:tc(e.onClick,i.onClose)})))}),[nV,nj]=nB("TooltipPortal",{forceMount:void 0}),nW="TooltipContent",nX=(0,s.forwardRef)((e,t)=>{let n=nj(nW,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...a}=e,o=nz(nW,e.__scopeTooltip);return(0,s.createElement)(nR,{present:r||o.open},o.disableHoverableContent?(0,s.createElement)(nq,(0,u.A)({side:i},a,{ref:t})):(0,s.createElement)(nJ,(0,u.A)({side:i},a,{ref:t})))}),nJ=(0,s.forwardRef)((e,t)=>{let n=nz(nW,e.__scopeTooltip),r=nN(nW,e.__scopeTooltip),i=(0,s.useRef)(null),a=f(t,i),[o,l]=(0,s.useState)(null),{trigger:c,onClose:d}=n,h=i.current,{onPointerInTransitChange:p}=r,m=(0,s.useCallback)(()=>{l(null),p(!1)},[p]),g=(0,s.useCallback)((e,t)=>{let n=e.currentTarget,r=function(e,t){let n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,i,a)){case a:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:return null}}({x:e.clientX,y:e.clientY},n.getBoundingClientRect()),i="right"===r||"bottom"===r?-5:5;l(function(e){let t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();let t=[];for(let n=0;n<e.length;n++){let r=e[n];for(;t.length>=2;){let e=t[t.length-1],n=t[t.length-2];if((e.x-n.x)*(r.y-n.y)>=(e.y-n.y)*(r.x-n.x))t.pop();else break}t.push(r)}t.pop();let n=[];for(let t=e.length-1;t>=0;t--){let r=e[t];for(;n.length>=2;){let e=n[n.length-1],t=n[n.length-2];if((e.x-t.x)*(r.y-t.y)>=(e.y-t.y)*(r.x-t.x))n.pop();else break}n.push(r)}return(n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y)?t:t.concat(n)}(t)}(["right"===r||"left"===r?{x:e.clientX+i,y:e.clientY}:{x:e.clientX,y:e.clientY+i},...function(e){let{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}(t.getBoundingClientRect())])),p(!0)},[p]);return(0,s.useEffect)(()=>()=>m(),[m]),(0,s.useEffect)(()=>{if(c&&h){let e=e=>g(e,h),t=e=>g(e,c);return c.addEventListener("pointerleave",e),h.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),h.removeEventListener("pointerleave",t)}}},[c,h,g,m]),(0,s.useEffect)(()=>{if(o){let e=e=>{let t=e.target,n={x:e.clientX,y:e.clientY},r=(null==c?void 0:c.contains(t))||(null==h?void 0:h.contains(t)),i=!function(e,t){let{x:n,y:r}=e,i=!1;for(let e=0,a=t.length-1;e<t.length;a=e++){let o=t[e].x,s=t[e].y,l=t[a].x,u=t[a].y;s>r!=u>r&&n<(l-o)*(r-s)/(u-s)+o&&(i=!i)}return i}(n,o);r?m():i&&(m(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[c,h,o,d,m]),(0,s.createElement)(nq,(0,u.A)({},e,{ref:a}))}),[nY,nK]=nB(nF,{isInside:!1}),nq=(0,s.forwardRef)((e,t)=>{let{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=nz(nW,n),d=nD(n),{onClose:h}=c;return(0,s.useEffect)(()=>(document.addEventListener(nk,h),()=>document.removeEventListener(nk,h)),[h]),(0,s.useEffect)(()=>{if(c.trigger){let e=e=>{let t=e.target;null!=t&&t.contains(c.trigger)&&h()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,h]),(0,s.createElement)(tm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:h},(0,s.createElement)(nx,(0,u.A)({"data-state":c.stateAttribute},d,l,{ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),(0,s.createElement)(g,null,r),(0,s.createElement)(nY,{scope:n,isInside:!0},(0,s.createElement)(nI,{id:c.contentId,role:"tooltip"},i||r))))}),n$=(0,s.forwardRef)((e,t)=>{let{__scopeTooltip:n,...r}=e,i=nD(n);return nK("TooltipArrow",n).isInside?null:(0,s.createElement)(nS,(0,u.A)({},i,r,{ref:t}))}),nQ=e=>{let{__scopeTooltip:t,children:n,open:r,defaultOpen:i=!1,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=e,u=nN(nF,e.__scopeTooltip),c=nD(t),[d,h]=(0,s.useState)(null),f=function(e){let[t,n]=s.useState(tb());return ty(()=>{n(e=>null!=e?e:String(tx++))},[void 0]),t?`radix-${t}`:""}(),p=(0,s.useRef)(0),m=null!=o?o:u.disableHoverableContent,g=null!=l?l:u.delayDuration,v=(0,s.useRef)(!1),[y=!1,b]=function({prop:e,defaultProp:t,onChange:n=()=>{}}){let[r,i]=function({defaultProp:e,onChange:t}){let n=(0,s.useState)(e),[r]=n,i=(0,s.useRef)(r),a=th(t);return(0,s.useEffect)(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),n}({defaultProp:t,onChange:n}),a=void 0!==e,o=a?e:r,l=th(n);return[o,(0,s.useCallback)(t=>{if(a){let n="function"==typeof t?t(e):t;n!==e&&l(n)}else i(t)},[a,e,i,l])]}({prop:r,defaultProp:i,onChange:e=>{e?(u.onOpen(),document.dispatchEvent(new CustomEvent(nk))):u.onClose(),null==a||a(e)}}),x=(0,s.useMemo)(()=>y?v.current?"delayed-open":"instant-open":"closed",[y]),_=(0,s.useCallback)(()=>{window.clearTimeout(p.current),v.current=!1,b(!0)},[b]),S=(0,s.useCallback)(()=>{window.clearTimeout(p.current),b(!1)},[b]),A=(0,s.useCallback)(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{v.current=!0,b(!0)},g)},[g,b]);return(0,s.useEffect)(()=>()=>window.clearTimeout(p.current),[]),(0,s.createElement)(nT,c,(0,s.createElement)(nU,{scope:t,contentId:f,open:y,stateAttribute:x,trigger:d,onTriggerChange:h,onTriggerEnter:(0,s.useCallback)(()=>{u.isOpenDelayed?A():_()},[u.isOpenDelayed,A,_]),onTriggerLeave:(0,s.useCallback)(()=>{m?S():window.clearTimeout(p.current)},[S,m]),onOpen:_,onClose:S,disableHoverableContent:m},n))};function nZ(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}!function(e){e[e.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",e[e.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",e[e.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",e[e.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",e[e.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",e[e.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",e[e.THEME_ERROR=6]="THEME_ERROR",e[e.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",e[e.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",e[e.EMPTY_KEY=9]="EMPTY_KEY"}(i||(i={}));let n0={[i.UNSUPPORTED_INPUT]:(e,t)=>[`An input with type \`${e}\` input was found at path \`${t}\` but it's not supported yet.`],[i.NO_COMPONENT_FOR_TYPE]:(e,t)=>[`Type \`${e}\` found at path \`${t}\` can't be displayed in panel because no component supports it yet.`],[i.UNKNOWN_INPUT]:(e,t)=>[`input at path \`${e}\` is not recognized.`,t],[i.DUPLICATE_KEYS]:(e,t,n)=>[`Key \`${e}\` of path \`${t}\` already exists at path \`${n}\`. Even nested keys need to be unique. Rename one of the keys.`],[i.ALREADY_REGISTERED_TYPE]:e=>[`Type ${e} has already been registered. You can't register a component with the same type.`],[i.CLIPBOARD_ERROR]:e=>["Error copying the value",e],[i.THEME_ERROR]:(e,t)=>[`Error accessing the theme \`${e}.${t}\` value.`],[i.PATH_DOESNT_EXIST]:e=>[`Error getting the value at path \`${e}\`. There is probably an error in your \`render\` function.`],[i.PATH_DOESNT_EXIST]:e=>[`Error accessing the value at path \`${e}\``],[i.INPUT_TYPE_OVERRIDE]:(e,t,n)=>[`Input at path \`${e}\` already exists with type: \`${t}\`. Its type cannot be overridden with type \`${n}\`.`],[i.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function n1(e,t,...n){let[r,...i]=n0[t](...n);console[e]("LEVA: "+r,...i)}let n2=n1.bind(null,"warn"),n3=n1.bind(null,"log"),n4=["value"],n5=["schema"],n9=["value"],n6=[],n8={};function n7(e){let{value:t}=e,n=nZ(e,n4);for(let e of n6){let r=e(t,n);if(r)return r}}function re(e,t){let{schema:n}=t,r=nZ(t,n5);if(e in n8){n2(i.ALREADY_REGISTERED_TYPE,e);return}n6.push((t,r)=>n(t,r)&&e),n8[e]=r}function rt(e,t,n,r){let{normalize:i}=n8[e];if(i)return i(t,n,r);if("object"!=typeof t||!("value"in t))return{value:t};let{value:a}=t;return{value:a,settings:nZ(t,n9)}}function rn(e,t,n){let{format:r}=n8[e];return r?r(t,n):t}function rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(n),!0).forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let ra=(e,t,n)=>e>n?n:e<t?t:e,ro=e=>{if(""===e||"number"==typeof e)return e;try{let t=function e(t){if(isNaN(Number(t))){if(rh.test(t)){let n=t.replace(rh,(t,n)=>String(e(n)));return e(n)}if(rf.test(t))return e(t.replace(rf,(e,t,n)=>String(Math.pow(Number(t),Number(n)))));if(rp.test(t))return e(t.replace(rp,(e,t,n)=>String(Number(t)*Number(n))));if(rm.test(t))return e(t.replace(rm,(e,t,n)=>{if(0!=n)return String(Number(t)/Number(n));throw Error("Division by zero")}));else if(rg.test(t))return e(t.replace(rg,(e,t,n)=>String(Number(t)+Number(n))));else if(rv.test(t))return e(t.replace(rv,(e,t,n)=>String(Number(t)-Number(n))))}return Number(t)}(e);if(!isNaN(t))return t}catch(e){}return parseFloat(e)},rs=Math.log(10);function rl(e){let t=Math.abs(+String(e).replace(".",""));if(0===t)return .01;for(;0!==t&&t%10==0;)t/=10;return Math.max(Math.pow(10,Math.floor(Math.log10(Math.abs(e)))-(Math.floor(Math.log(t)/rs)+1)),.001)}let ru=(e,t,n)=>n===t?0:(ra(e,t,n)-t)/(n-t),rc=(e,t,n)=>e*(n-t)+t,rd=()=>"_"+Math.random().toString(36).substr(2,9),rh=/\(([0-9+\-*/^ .]+)\)/,rf=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,rp=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,rm=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,rg=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,rv=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function ry(e){return"[object Object]"===Object.prototype.toString.call(e)}let rb=e=>ry(e)&&0===Object.keys(e).length;(function(e){e.BUTTON="BUTTON",e.BUTTON_GROUP="BUTTON_GROUP",e.MONITOR="MONITOR",e.FOLDER="FOLDER"})(a||(a={})),function(e){e.SELECT="SELECT",e.IMAGE="IMAGE",e.NUMBER="NUMBER",e.COLOR="COLOR",e.STRING="STRING",e.BOOLEAN="BOOLEAN",e.INTERVAL="INTERVAL",e.VECTOR3D="VECTOR3D",e.VECTOR2D="VECTOR2D"}(o||(o={}));let rx=["type","__customInput"],r_=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],rS=["type"];function rA(e,t,n,r,i){let{value:a,type:o,settings:s}=e;e.value=rE({type:o,value:a,settings:s},t,n,r),e.fromPanel=i}let rw=function(e,t,n){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=n};function rE({type:e,value:t,settings:n},r,i,a){let o;let s="SELECT"!==e&&"function"==typeof r?r(t):r;try{o=function(e,t,n,r,i,a){let{sanitize:o}=n8[e];return o?o(t,n,r,i,a):t}(e,s,n,t,i,a)}catch(e){throw new rw(`The value \`${r}\` did not result in a correct value.`,t,e)}return _(o,t)?t:o}let rM=(e,t,n=!1)=>{let r=0;return function(){let i=arguments,a=n&&!r,o=()=>e.apply(this,i);window.clearTimeout(r),r=window.setTimeout(o,t),a&&o()}},rC=e=>e.shiftKey?5:e.altKey?.2:1,rT=["value"],rR=["min","max"],rP=(e,{min:t=-1/0,max:n=1/0,suffix:r})=>{let i=parseFloat(e);if(""===e||isNaN(i))throw Error("Invalid number");let a=ra(i,t,n);return r?a+r:a},rI=e=>{let{value:t}=e,n=nZ(e,rT),{min:r=-1/0,max:i=1/0}=n,a=nZ(n,rR),o=parseFloat(t),s="string"==typeof t?t.substring((""+o).length):void 0;o=ra(o,r,i);let l=n.step;!l&&(Number.isFinite(r)?l=Number.isFinite(i)?+(Math.abs(i-r)/100).toPrecision(1):+(Math.abs(o-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-o)/100).toPrecision(1)));let u=l?10*rl(l):rl(o);return{value:s?o+s:o,settings:ri({initialValue:o,step:l=l||u/10,pad:Math.round(ra(Math.log10(1/u),0,2)),min:r,max:i,suffix:s},a)}},rB=(e,{step:t,initialValue:n})=>{let r=Math.round((e-n)/t);return n+r*t};var rL=Object.freeze({__proto__:null,schema:e=>{if("number"==typeof e)return!0;if("string"==typeof e){let t=parseFloat(e);return!isNaN(t)&&e.substring((""+t).length).trim().length<4}return!1},sanitize:rP,format:(e,{pad:t=0,suffix:n})=>{let r=parseFloat(e).toFixed(t);return n?r+n:r},normalize:rI,sanitizeStep:rB});function rD(){return(rD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let rk=(0,s.createContext)({});function rO(){return(0,s.useContext)(rk)}let rN=(0,s.createContext)(null),rF=(0,s.createContext)(null),rU=(0,s.createContext)(null);function rz(){return(0,s.useContext)(rF)}let rH=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function rG(e,t){let[n,r]=e.split(" "),i={};return"none"!==n&&(i.boxShadow=`${t.inset?"inset ":""}0 0 0 $borderWidths${[t.key]} $colors${"default"!==n&&n||t.borderColor}`),r&&(i.backgroundColor=r),i}let rV={$inputStyle:()=>e=>rG(e,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>e=>rG(e,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>e=>rG(e,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>e=>rG(e,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:rj,css:rW,createTheme:rX,globalCss:rJ,keyframes:rY}=(e=>{let t=(e=>{let t=!1,n=eR(e,e=>{t=!0;let n="prefix"in(e="object"==typeof e&&e||{})?String(e.prefix):"",r="object"==typeof e.media&&e.media||{},i="object"==typeof e.root?e.root||null:globalThis.document||null,a="object"==typeof e.theme&&e.theme||{},o={prefix:n,media:r,theme:a,themeMap:"object"==typeof e.themeMap&&e.themeMap||{...z},utils:"object"==typeof e.utils&&e.utils||{}},s=eh(i),l={css:eg(o,s),globalCss:eA(o,s),keyframes:eE(o,s),createTheme:eT(o,s),reset(){s.reset(),l.theme.toString()},theme:{},sheet:s,config:o,prefix:n,getCssText:s.toString,toString:s.toString};return String(l.theme=l.createTheme(a)),l});return t||n.reset(),n})(e);return t.styled=(({config:e,sheet:t})=>eP(e,()=>{let n=eg(e,t);return(...e)=>{let t=n(...e),r=t[V].type,i=s.forwardRef((e,n)=>{let i=e&&e.as||r,{props:a,deferredInjector:o}=t(e);return delete a.as,a.ref=n,o?s.createElement(s.Fragment,null,s.createElement(i,a),s.createElement(o,null)):s.createElement(i,a)});return i.className=t.className,i.displayName=`Styled.${r.displayName||r.name||r}`,i.selector=t.selector,i.toString=()=>t.selector,i[V]=t[V],i}}))(t),t})({prefix:"leva",theme:rH(),utils:ri(ri({},rV),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:e=>({"&:focus":rV.$focusStyle()(e)}),$focusWithin:e=>({"&:focus-within":rV.$focusStyle()(e)}),$hover:e=>({"&:hover":rV.$hoverStyle()(e)}),$active:e=>({"&:active":rV.$activeStyle()(e)})})}),rK=rJ({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function rq(e,t){let{theme:n}=(0,s.useContext)(rN);if(!(e in n)||!(t in n[e]))return n2(i.THEME_ERROR,e,t),"";let r=t;for(;;){let t=n[e][r];if("string"!=typeof t||"$"!==t.charAt(0))return t;r=t.substr(1)}}let r$=rj("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),rQ=rj("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${r$}`]:{paddingLeft:0}}),rZ=rj(rQ,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),r0=rj("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),r1=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],r2=["onUpdate"];function r3(e){let{innerLabel:t,value:n,onUpdate:r,onChange:i,onKeyDown:a,type:o,id:u,inputType:c="text",rows:d=0}=e,h=nZ(e,r1),{id:f,emitOnEditStart:p,emitOnEditEnd:m,disabled:g}=rO(),v=(0,s.useRef)(null),y=d>0,b=(0,s.useCallback)(e=>t=>{e(t.currentTarget.value)},[]);l().useEffect(()=>{let e=v.current,t=b(e=>{r(e),m()});return null==e||e.addEventListener("blur",t),()=>null==e?void 0:e.removeEventListener("blur",t)},[b,r,m]);let x=(0,s.useCallback)(e=>{"Enter"===e.key&&b(r)(e)},[b,r]),_=Object.assign({as:y?"textarea":"input"},y?{rows:d}:{},h);return l().createElement(r0,{textArea:y},t&&"string"==typeof t?l().createElement(rQ,null,t):t,l().createElement(r$,rD({levaType:o,ref:v,id:u||f,type:c,autoComplete:"off",spellCheck:"false",value:n,onChange:b(i),onFocus:()=>p(),onKeyPress:x,onKeyDown:a,disabled:g},_)))}function r4(e){let{onUpdate:t}=e,n=nZ(e,r2),r=(0,s.useCallback)(e=>t(ro(e)),[t]),i=(0,s.useCallback)(e=>{let n="ArrowUp"===e.key?1:"ArrowDown"===e.key?-1:0;if(n){e.preventDefault();let r=e.altKey?.1:e.shiftKey?10:1;t(e=>parseFloat(e)+n*r)}},[t]);return l().createElement(r3,rD({},n,{onUpdate:r,onKeyDown:i,type:"number"}))}let r5=rj("div",{}),r9=rj("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),r6=rj("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${r9}::after`]:{opacity:.6},[`${r5}:hover > & + ${r9}::after`]:{opacity:.6},[`${r5}:hover > & > svg`]:{opacity:1}}),r8=rj("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${r5}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),r7=rj("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${r8} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),ie=rj(r7,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),it=rj("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),ir=rj("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),ii=rj("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),ia=rj("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${ii}`]:{pointerEvents:"auto"}}}}}),io=rj("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),is=rj("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),il=rj(n$,{fill:"$toolTipBackground"});function iu({children:e}){let{className:t}=(0,s.useContext)(rN);return l().createElement(b,{className:t},e)}let ic=["align"];function id(){let{id:e,disable:t,disabled:n}=rO();return l().createElement(l().Fragment,null,l().createElement(ir,{id:e+"__disable",type:"checkbox",checked:!n,onChange:()=>t(!n)}),l().createElement("label",{htmlFor:e+"__disable"}))}function ih(e){let{id:t,optional:n,hint:r}=rO(),i=e.htmlFor||(t?{htmlFor:t}:null),a=r||"string"!=typeof e.children?null:{title:e.children};return l().createElement(l().Fragment,null,n&&l().createElement(id,null),void 0!==r?l().createElement(nQ,null,l().createElement(nG,{asChild:!0},l().createElement(ii,rD({},i,e))),l().createElement(nX,{side:"top",sideOffset:2},l().createElement(is,null,r,l().createElement(il,null)))):l().createElement(ii,rD({},i,a,e)))}function ip(e){let{align:t}=e,n=nZ(e,ic),{value:r,label:a,key:o,disabled:u}=rO(),{hideCopyButton:c}=(0,s.useContext)(rU),d=!c&&void 0!==o,[h,f]=(0,s.useState)(!1),p=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[o]:null!=r?r:""})),f(!0)}catch(e){n2(i.CLIPBOARD_ERROR,{[o]:r})}};return l().createElement(it,{align:t,onPointerLeave:()=>f(!1)},l().createElement(ih,n),d&&!u&&l().createElement("div",{title:`Click to copy ${"string"==typeof a?a:o} value`},h?l().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},l().createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),l().createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):l().createElement("svg",{onClick:p,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},l().createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),l().createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}let im=["toggled"],ig=rj("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function iv(e){let{toggled:t}=e,n=nZ(e,im);return l().createElement(ig,rD({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${t?0:-90}deg)`}},n),l().createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}let iy=["input"];function ib(e){let{input:t}=e,n=nZ(e,iy);return t?l().createElement(ie,n):l().createElement(r7,n)}function ix({value:e,type:t,settings:n,setValue:r}){let[i,a]=(0,s.useState)(rn(t,e,n)),o=(0,s.useRef)(e),l=(0,s.useRef)(n);l.current=n;let u=(0,s.useCallback)(e=>a(rn(t,e,l.current)),[t]),c=(0,s.useCallback)(e=>{try{r(e)}catch(n){let{type:e,previousValue:t}=n;if("LEVA_ERROR"!==e)throw n;u(t)}},[u,r]);return(0,s.useEffect)(()=>{_(e,o.current)||u(e),o.current=e},[e,u]),{displayValue:i,onChange:a,onUpdate:c}}function i_(e,t){var n;let{emitOnEditStart:r,emitOnEditEnd:i}=rO();return n=t=>{t.first&&(document.body.classList.add("leva__panel__dragged"),null==r||r());let n=e(t);return t.last&&(document.body.classList.remove("leva__panel__dragged"),null==i||i()),n},e7.set(tt.key,tt.engine),te.set(tt.key,tt.resolver),function(e,t={},n,r){let i=l().useMemo(()=>new ts(e),[]);if(i.applyHandlers(e,void 0),i.applyConfig(t,n),l().useEffect(i.effect.bind(i)),l().useEffect(()=>i.clean.bind(i),[]),void 0===t.target)return i.bind.bind(i)}({drag:n},t||{},"drag")}function iS(){let e=(0,s.useRef)(null),t=(0,s.useRef)({x:0,y:0}),n=(0,s.useCallback)(n=>{Object.assign(t.current,n),e.current&&(e.current.style.transform=`translate3d(${t.current.x}px, ${t.current.y}px, 0)`)},[]);return[e,n]}let iA=["__refCount"],iw=(e,t)=>e[t]?nZ(e[t],iA):null,iE=rj("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),iM=rj("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),iC=rj("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),iT=rj("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),iR=rj("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function iP({value:e,min:t,max:n,onDrag:r,step:i,initialValue:a}){let o=(0,s.useRef)(null),u=(0,s.useRef)(null),c=(0,s.useRef)(0),d=rq("sizes","scrubberWidth"),h=i_(({event:s,first:l,xy:[h],movement:[f],memo:p})=>{if(l){let{width:r,left:i}=o.current.getBoundingClientRect();c.current=r-parseFloat(d),p=(null==s?void 0:s.target)===u.current?e:rc((h-i)/r,t,n)}return r(rB(p+rc(f/c.current,0,n-t),{step:i,initialValue:a})),p}),f=ru(e,t,n);return l().createElement(iT,rD({ref:o},h()),l().createElement(iM,null,l().createElement(iR,{style:{left:0,right:`${(1-f)*100}%`}})),l().createElement(iC,{ref:u,style:{left:`calc(${f} * (100% - ${d}))`}}))}let iI=l().memo(({label:e,onUpdate:t,step:n,innerLabelTrim:r})=>{let[i,a]=(0,s.useState)(!1),o=i_(({active:e,delta:[r],event:i,memo:o=0,first:s,last:l,target:u})=>(s&&u.requestPointerLock(),l&&document.exitPointerLock(),a(e),Math.abs(o+=r/2)>=1&&(t(e=>parseFloat(e)+Math.floor(o)*n*rC(i)),o=0),o));return l().createElement(rZ,rD({dragging:i,title:e.length>1?e:""},o()),e.slice(0,r))});function iB({label:e,id:t,displayValue:n,onUpdate:r,onChange:i,settings:a,innerLabelTrim:o=1}){let s=o>0&&l().createElement(iI,{label:e,step:a.step,onUpdate:r,innerLabelTrim:o});return l().createElement(r4,{id:t,value:String(n),onUpdate:r,onChange:i,innerLabel:s})}let{sanitizeStep:iL}=rL;var iD=ri({component:function(){let e=rO(),{label:t,value:n,onUpdate:r,settings:i,id:a}=e,{min:o,max:s}=i,u=s!==1/0&&o!==-1/0;return l().createElement(ib,{input:!0},l().createElement(ip,null,t),l().createElement(iE,{hasRange:u},u&&l().createElement(iP,rD({value:parseFloat(n),onDrag:r},i)),l().createElement(iB,rD({},e,{id:a,label:"value",innerLabelTrim:u?0:1}))))}},nZ(rL,["sanitizeStep"])),ik=Object.freeze({__proto__:null,schema:(e,t)=>P().schema({options:P().passesAnyOf(P().object(),P().array())}).test(t),sanitize:(e,{values:t})=>{if(0>t.indexOf(e))throw Error("Selected value doesn't match Select options");return e},format:(e,{values:t})=>t.indexOf(e),normalize:e=>{let t,n,{value:r,options:i}=e;return Array.isArray(i)?(n=i,t=i.map(e=>String(e))):(n=Object.values(i),t=Object.keys(i)),"value"in e?n.includes(r)||(t.unshift(String(r)),n.unshift(r)):r=n[0],Object.values(i).includes(r)||(i[String(r)]=r),{value:r,settings:{keys:t,values:n}}}});let iO=rj("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),iN=rj("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),iF=rj("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${iN}:focus + &`]:{$focusStyle:""},[`${iN}:hover + &`]:{$hoverStyle:""}});function iU({displayValue:e,value:t,onUpdate:n,id:r,settings:i,disabled:a}){let{keys:o,values:u}=i,c=(0,s.useRef)();return t===u[e]&&(c.current=o[e]),l().createElement(iO,null,l().createElement(iN,{id:r,value:e,onChange:e=>n(u[Number(e.currentTarget.value)]),disabled:a},o.map((e,t)=>l().createElement("option",{key:e,value:t},e))),l().createElement(iF,null,c.current),l().createElement(iv,{toggled:!0}))}var iz=ri({component:function(){let{label:e,value:t,displayValue:n,onUpdate:r,id:i,disabled:a,settings:o}=rO();return l().createElement(ib,{input:!0},l().createElement(ip,null,e),l().createElement(iU,{id:i,value:t,displayValue:n,onUpdate:r,settings:o,disabled:a}))}},ik),iH=Object.freeze({__proto__:null,schema:e=>P().string().test(e),sanitize:e=>{if("string"!=typeof e)throw Error("Invalid string");return e},normalize:({value:e,editable:t=!0,rows:n=!1})=>({value:e,settings:{editable:t,rows:"number"==typeof n?n:n?5:0}})});let iG=["displayValue","onUpdate","onChange","editable"],iV=rj("div",{whiteSpace:"pre-wrap"});function ij(e){let{displayValue:t,onUpdate:n,onChange:r,editable:i=!0}=e,a=nZ(e,iG);return i?l().createElement(r3,rD({value:t,onUpdate:n,onChange:r},a)):l().createElement(iV,null,t)}var iW=ri({component:function(){let{label:e,settings:t,displayValue:n,onUpdate:r,onChange:i}=rO();return l().createElement(ib,{input:!0},l().createElement(ip,null,e),l().createElement(ij,rD({displayValue:n,onUpdate:r,onChange:i},t)))}},iH),iX=Object.freeze({__proto__:null,schema:e=>P().boolean().test(e),sanitize:e=>{if("boolean"!=typeof e)throw Error("Invalid boolean");return e}});let iJ=rj("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function iY({value:e,onUpdate:t,id:n,disabled:r}){return l().createElement(iJ,null,l().createElement("input",{id:n,type:"checkbox",checked:e,onChange:e=>t(e.currentTarget.checked),disabled:r}),l().createElement("label",{htmlFor:n},l().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},l().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}var iK=ri({component:function(){let{label:e,value:t,onUpdate:n,disabled:r,id:i}=rO();return l().createElement(ib,{input:!0},l().createElement(ip,null,e),l().createElement(iY,{value:t,onUpdate:n,id:i,disabled:r}))}},iX);let iq=["locked"];function i$({value:e,id:t,valueKey:n,settings:r,onUpdate:i,innerLabelTrim:a}){let o=(0,s.useRef)(e[n]);o.current=e[n];let u=(0,s.useCallback)(e=>i({[n]:rE({type:"NUMBER",value:o.current,settings:r},e)}),[i,r,n]),c=ix({type:"NUMBER",value:e[n],settings:r,setValue:u});return l().createElement(iB,{id:t,label:n,value:e[n],displayValue:c.displayValue,onUpdate:c.onUpdate,onChange:c.onChange,settings:r,innerLabelTrim:a})}let iQ=rj("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function iZ(e){let{locked:t}=e,n=nZ(e,iq);return l().createElement("svg",rD({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),t?l().createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):l().createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function i0({value:e,onUpdate:t,settings:n,innerLabelTrim:r}){let{id:i,setSettings:a}=rO(),{lock:o,locked:s}=n;return l().createElement(iQ,{withLock:o},o&&l().createElement(iZ,{locked:s,onClick:()=>a({locked:!s})}),Object.keys(e).map((a,o)=>l().createElement(i$,{id:0===o?i:`${i}.${a}`,key:a,valueKey:a,value:e,settings:n[a],onUpdate:t,innerLabelTrim:r})))}let i1=(e,t)=>{let n={},r=0,i=1/0;for(let a in Object.entries(e).forEach(([e,a])=>{n[e]=rI(ri({value:a},t[e])).settings,r=Math.max(r,n[e].step),i=Math.min(i,n[e].pad)}),n){let{step:e,min:o,max:s}=t[a]||{};isFinite(e)||isFinite(o)&&isFinite(s)||(n[a].step=r,n[a].pad=i)}return n},i2=["lock"],i3=["value"];function i4(e,t,n){return(Array.isArray(e)?"array":"object")===t?e:"array"===t?Object.values(e):e.reduce((e,t,r)=>Object.assign(e,{[n[r]]:t}),{})}let i5=(e,t,n)=>{let r=i4(e,"object",t.keys);for(let e in r)r[e]=rP(r[e],t[e]);let i=Object.keys(r),a={};if(i.length===t.keys.length)a=r;else{let e=i4(n,"object",t.keys);if(1===i.length&&t.locked){let t=i[0],n=r[t],o=e[t],s=0!==o?n/o:1;for(let r in e)r===t?a[t]=n:a[r]=e[r]*s}else a=ri(ri({},e),r)}return i4(a,t.format,t.keys)},i9=(e,t)=>i4(e,"object",t.keys),i6=e=>!!e&&("step"in e||"min"in e||"max"in e);function i8(e){return{schema:function(e){let t=P().array().length(e).every.number(),n=t=>{if(!t||"object"!=typeof t)return!1;let n=Object.values(t);return n.length===e&&n.every(e=>isFinite(e))};return e=>t.test(e)||n(e)}(e.length),normalize:t=>{let{value:n}=t;return function(e,t,n=[]){let{lock:r=!1}=t,i=nZ(t,i2),a=Array.isArray(e)?"array":"object",o="object"===a?Object.keys(e):n,s=i4(e,"object",o),l=i1(s,i6(i)?o.reduce((e,t)=>Object.assign(e,{[t]:i}),{}):i);return{value:"array"===a?e:s,settings:ri(ri({},l),{},{format:a,keys:o,lock:r,locked:!1})}}(n,nZ(t,i3),e)},format:(e,t)=>i9(e,t),sanitize:(e,t,n)=>i5(e,t,n)}}var i7={grad:.9,turn:360,rad:360/(2*Math.PI)},ae=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},at=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},an=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},ar=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},ai=function(e){return{r:an(e.r,0,255),g:an(e.g,0,255),b:an(e.b,0,255),a:an(e.a)}},aa=function(e){return{r:at(e.r),g:at(e.g),b:at(e.b),a:at(e.a,3)}},ao=/^#([0-9a-f]{3,8})$/i,as=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},al=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=Math.max(t,n,r),o=a-Math.min(t,n,r),s=o?a===t?(n-r)/o:a===n?2+(r-t)/o:4+(t-n)/o:0;return{h:60*(s<0?s+6:s),s:a?o/a*100:0,v:a/255*100,a:i}},au=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var a=Math.floor(t),o=r*(1-n),s=r*(1-(t-a)*n),l=r*(1-(1-t+a)*n),u=a%6;return{r:255*[r,s,o,o,l,r][u],g:255*[l,r,r,s,o,o][u],b:255*[o,o,l,r,r,s][u],a:i}},ac=function(e){return{h:ar(e.h),s:an(e.s,0,100),l:an(e.l,0,100),a:an(e.a)}},ad=function(e){return{h:at(e.h),s:at(e.s),l:at(e.l),a:at(e.a,3)}},ah=function(e){var t,n;return au((t=e.s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}))},af=function(e){var t,n,r,i;return{h:(t=al(e)).h,s:(i=(200-(n=t.s))*(r=t.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a}},ap=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,am=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ag=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,av=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ay={string:[[function(e){var t=ao.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?at(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?at(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=ag.exec(e)||av.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:ai({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t,n,r=ap.exec(e)||am.exec(e);return r?ah(ac({h:(t=r[1],void 0===(n=r[2])&&(n="deg"),Number(t)*(i7[n]||1)),s:Number(r[3]),l:Number(r[4]),a:void 0===r[5]?1:Number(r[5])/(r[6]?100:1)})):null},"hsl"]],object:[[function(e){var t=e.r,n=e.g,r=e.b,i=e.a;return ae(t)&&ae(n)&&ae(r)?ai({r:Number(t),g:Number(n),b:Number(r),a:Number(void 0===i?1:i)}):null},"rgb"],[function(e){var t=e.h,n=e.s,r=e.l,i=e.a;return ae(t)&&ae(n)&&ae(r)?ah(ac({h:Number(t),s:Number(n),l:Number(r),a:Number(void 0===i?1:i)})):null},"hsl"],[function(e){var t,n=e.h,r=e.s,i=e.v,a=e.a;return ae(n)&&ae(r)&&ae(i)?au({h:ar((t={h:Number(n),s:Number(r),v:Number(i),a:Number(void 0===a?1:a)}).h),s:an(t.s,0,100),v:an(t.v,0,100),a:an(t.a)}):null},"hsv"]]},ab=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},ax=function(e){return"string"==typeof e?ab(e.trim(),ay.string):"object"==typeof e&&null!==e?ab(e,ay.object):[null,void 0]},a_=function(e,t){var n=af(e);return{h:n.h,s:an(n.s+100*t,0,100),l:n.l,a:n.a}},aS=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},aA=function(e,t){var n=af(e);return{h:n.h,s:n.s,l:an(n.l+100*t,0,100),a:n.a}},aw=function(){function e(e){this.parsed=ax(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return at(aS(this.rgba),2)},e.prototype.isDark=function(){return .5>aS(this.rgba)},e.prototype.isLight=function(){return aS(this.rgba)>=.5},e.prototype.toHex=function(){var e,t,n,r,i,a;return t=(e=aa(this.rgba)).r,n=e.g,r=e.b,a=(i=e.a)<1?as(at(255*i)):"","#"+as(t)+as(n)+as(r)+a},e.prototype.toRgb=function(){return aa(this.rgba)},e.prototype.toRgbString=function(){var e,t,n,r,i;return t=(e=aa(this.rgba)).r,n=e.g,r=e.b,(i=e.a)<1?"rgba("+t+", "+n+", "+r+", "+i+")":"rgb("+t+", "+n+", "+r+")"},e.prototype.toHsl=function(){return ad(af(this.rgba))},e.prototype.toHslString=function(){var e,t,n,r,i;return t=(e=ad(af(this.rgba))).h,n=e.s,r=e.l,(i=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+i+")":"hsl("+t+", "+n+"%, "+r+"%)"},e.prototype.toHsv=function(){var e;return{h:at((e=al(this.rgba)).h),s:at(e.s),v:at(e.v),a:at(e.a,3)}},e.prototype.invert=function(){var e;return aE({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a})},e.prototype.saturate=function(e){return void 0===e&&(e=.1),aE(a_(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),aE(a_(this.rgba,-e))},e.prototype.grayscale=function(){return aE(a_(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),aE(aA(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),aE(aA(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){var t;return"number"==typeof e?aE({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):at(this.rgba.a,3)},e.prototype.hue=function(e){var t=af(this.rgba);return"number"==typeof e?aE({h:e,s:t.s,l:t.l,a:t.a}):at(t.h)},e.prototype.isEqual=function(e){return this.toHex()===aE(e).toHex()},e}(),aE=function(e){return e instanceof aw?e:new aw(e)},aM=[];function aC(){return(aC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function aT(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}function aR(e){var t=(0,s.useRef)(e),n=(0,s.useRef)(function(e){t.current&&t.current(e)});return t.current=e,n.current}var aP=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e<t?t:e},aI=function(e){return"touches"in e},aB=function(e){return e&&e.ownerDocument.defaultView||self},aL=function(e,t,n){var r=e.getBoundingClientRect(),i=aI(t)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return e[0]}(t.touches,n):t;return{left:aP((i.pageX-(r.left+aB(e).pageXOffset))/r.width),top:aP((i.pageY-(r.top+aB(e).pageYOffset))/r.height)}},aD=function(e){aI(e)||e.preventDefault()},ak=s.memo(function(e){var t=e.onMove,n=e.onKey,r=aT(e,["onMove","onKey"]),i=(0,s.useRef)(null),a=aR(t),o=aR(n),l=(0,s.useRef)(null),u=(0,s.useRef)(!1),c=(0,s.useMemo)(function(){var e=function(e){aD(e),(aI(e)?e.touches.length>0:e.buttons>0)&&i.current?a(aL(i.current,e,l.current)):n(!1)},t=function(){return n(!1)};function n(n){var r=u.current,a=aB(i.current),o=n?a.addEventListener:a.removeEventListener;o(r?"touchmove":"mousemove",e),o(r?"touchend":"mouseup",t)}return[function(e){var t=e.nativeEvent,r=i.current;if(r&&(aD(t),(!u.current||aI(t))&&r)){if(aI(t)){u.current=!0;var o=t.changedTouches||[];o.length&&(l.current=o[0].identifier)}r.focus(),a(aL(r,t,l.current)),n(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),o({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},n]},[o,a]),d=c[0],h=c[1],f=c[2];return(0,s.useEffect)(function(){return f},[f]),s.createElement("div",aC({},r,{onTouchStart:d,onMouseDown:d,className:"react-colorful__interactive",ref:i,onKeyDown:h,tabIndex:0,role:"slider"}))}),aO=function(e){return e.filter(Boolean).join(" ")},aN=function(e){var t=e.color,n=e.left,r=e.top,i=aO(["react-colorful__pointer",e.className]);return s.createElement("div",{className:i,style:{top:100*(void 0===r?.5:r)+"%",left:100*n+"%"}},s.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},aF=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n},aU={grad:.9,turn:360,rad:360/(2*Math.PI)},az=function(e){return"#"===e[0]&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?aF(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:8===e.length?aF(parseInt(e.substring(6,8),16)/255,2):1}},aH=function(e,t){return void 0===t&&(t="deg"),Number(e)*(aU[t]||1)},aG=function(e){var t=e.s,n=e.l;return{h:e.h,s:(t*=(n<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}},aV=function(e){var t=e.s,n=e.v,r=e.a,i=(200-t)*n/100;return{h:aF(e.h),s:aF(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:aF(i/2),a:aF(r,2)}},aj=function(e){var t=aV(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},aW=function(e){var t=aV(e);return"hsla("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")"},aX=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var a=Math.floor(t),o=r*(1-n),s=r*(1-(t-a)*n),l=r*(1-(1-t+a)*n),u=a%6;return{r:aF(255*[r,s,o,o,l,r][u]),g:aF(255*[l,r,r,s,o,o][u]),b:aF(255*[o,o,l,r,r,s][u]),a:aF(i,2)}},aJ=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},aY=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=i<1?aJ(aF(255*i)):"";return"#"+aJ(t)+aJ(n)+aJ(r)+a},aK=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=Math.max(t,n,r),o=a-Math.min(t,n,r),s=o?a===t?(n-r)/o:a===n?2+(r-t)/o:4+(t-n)/o:0;return{h:aF(60*(s<0?s+6:s)),s:aF(a?o/a*100:0),v:aF(a/255*100),a:i}},aq=function(e){return{h:aF(e.h),s:aF(e.s),v:aF(e.v),a:aF(e.a,2)}},a$=s.memo(function(e){var t=e.hue,n=e.onChange,r=aO(["react-colorful__hue",e.className]);return s.createElement("div",{className:r},s.createElement(ak,{onMove:function(e){n({h:360*e.left})},onKey:function(e){n({h:aP(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuenow":aF(t),"aria-valuemax":"360","aria-valuemin":"0"},s.createElement(aN,{className:"react-colorful__hue-pointer",left:t/360,color:aj({h:t,s:100,v:100,a:1})})))}),aQ=s.memo(function(e){var t=e.hsva,n=e.onChange,r={backgroundColor:aj({h:t.h,s:100,v:100,a:1})};return s.createElement("div",{className:"react-colorful__saturation",style:r},s.createElement(ak,{onMove:function(e){n({s:100*e.left,v:100-100*e.top})},onKey:function(e){n({s:aP(t.s+100*e.left,0,100),v:aP(t.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+aF(t.s)+"%, Brightness "+aF(t.v)+"%"},s.createElement(aN,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:aj(t)})))}),aZ=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0};function a0(e,t,n){var r=aR(n),i=(0,s.useState)(function(){return e.toHsva(t)}),a=i[0],o=i[1],l=(0,s.useRef)({color:t,hsva:a});return(0,s.useEffect)(function(){if(!e.equal(t,l.current.color)){var n=e.toHsva(t);l.current={hsva:n,color:t},o(n)}},[t,e]),(0,s.useEffect)(function(){var t;aZ(a,l.current.hsva)||e.equal(t=e.fromHsva(a),l.current.color)||(l.current={hsva:a,color:t},r(t))},[a,e,r]),[a,(0,s.useCallback)(function(e){o(function(t){return Object.assign({},t,e)})},[])]}var a1,a2="undefined"!=typeof window?s.useLayoutEffect:s.useEffect,a3=new Map,a4=function(e){a2(function(){var t=e.current?e.current.ownerDocument:document;if(void 0!==t&&!a3.has(t)){var r=t.createElement("style");r.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',a3.set(t,r);var i=a1||n.nc;i&&r.setAttribute("nonce",i),t.head.appendChild(r)}},[])},a5=function(e){var t=e.className,n=e.colorModel,r=e.color,i=void 0===r?n.defaultColor:r,a=e.onChange,o=aT(e,["className","colorModel","color","onChange"]),l=(0,s.useRef)(null);a4(l);var u=a0(n,i,a),c=u[0],d=u[1],h=aO(["react-colorful",t]);return s.createElement("div",aC({},o,{ref:l,className:h}),s.createElement(aQ,{hsva:c,onChange:d}),s.createElement(a$,{hue:c.h,onChange:d,className:"react-colorful__last-control"}))},a9=function(e){var t=e.className,n=e.hsva,r=e.onChange,i={backgroundImage:"linear-gradient(90deg, "+aW(Object.assign({},n,{a:0}))+", "+aW(Object.assign({},n,{a:1}))+")"},a=aO(["react-colorful__alpha",t]),o=aF(100*n.a);return s.createElement("div",{className:a},s.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),s.createElement(ak,{onMove:function(e){r({a:e.left})},onKey:function(e){r({a:aP(n.a+e.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},s.createElement(aN,{className:"react-colorful__alpha-pointer",left:n.a,color:aW(n)})))},a6=function(e){var t=e.className,n=e.colorModel,r=e.color,i=void 0===r?n.defaultColor:r,a=e.onChange,o=aT(e,["className","colorModel","color","onChange"]),l=(0,s.useRef)(null);a4(l);var u=a0(n,i,a),c=u[0],d=u[1],h=aO(["react-colorful",t]);return s.createElement("div",aC({},o,{ref:l,className:h}),s.createElement(aQ,{hsva:c,onChange:d}),s.createElement(a$,{hue:c.h,onChange:d}),s.createElement(a9,{hsva:c,onChange:d,className:"react-colorful__last-control"}))},a8={defaultColor:{r:0,g:0,b:0,a:1},toHsva:aK,fromHsva:aX,equal:aZ},a7=function(e){return s.createElement(a6,aC({},e,{colorModel:a8}))},oe={defaultColor:{r:0,g:0,b:0},toHsva:function(e){return aK({r:e.r,g:e.g,b:e.b,a:1})},fromHsva:function(e){var t;return{r:(t=aX(e)).r,g:t.g,b:t.b}},equal:aZ},ot=function(e){return s.createElement(a5,aC({},e,{colorModel:oe}))},on=n(28200),or=n.n(on),oi=n(97412),oa=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function oo(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),r=oa.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!=typeof n.path){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"==typeof t?t:"string"==typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var os=[".DS_Store","Thumbs.db"];function ol(e){return"object"==typeof e&&null!==e}function ou(e){return e.filter(function(e){return -1===os.indexOf(e.name)})}function oc(e){if(null===e)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function od(e){if("function"!=typeof e.webkitGetAsEntry)return oh(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?op(t):oh(e)}function oh(e){var t=e.getAsFile();return t?Promise.resolve(oo(t)):Promise.reject(e+" is not a File")}function of(e){return(0,oi.sH)(this,void 0,void 0,function(){return(0,oi.YH)(this,function(t){return[2,e.isDirectory?op(e):function(e){return(0,oi.sH)(this,void 0,void 0,function(){return(0,oi.YH)(this,function(t){return[2,new Promise(function(t,n){e.file(function(n){t(oo(n,e.fullPath))},function(e){n(e)})})]})})}(e)]})})}function op(e){var t=e.createReader();return new Promise(function(e,n){var r=[];!function i(){var a=this;t.readEntries(function(t){return(0,oi.sH)(a,void 0,void 0,function(){var a;return(0,oi.YH)(this,function(o){switch(o.label){case 0:if(t.length)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return e(o.sent()),[3,4];case 3:return n(o.sent()),[3,4];case 4:return[3,6];case 5:a=Promise.all(t.map(of)),r.push(a),i(),o.label=6;case 6:return[2]}})})},function(e){n(e)})}()})}var om=n(90351);function og(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ov(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?og(Object(n),!0).forEach(function(t){oy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):og(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ob(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ox(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ox(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ox(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var o_=function(e){var t=Array.isArray(e=Array.isArray(e)&&1===e.length?e[0]:e)?"one of ".concat(e.join(", ")):e;return{code:"file-invalid-type",message:"File type must be ".concat(t)}},oS=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},oA=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},ow={code:"too-many-files",message:"Too many files"};function oE(e,t){var n="application/x-moz-file"===e.type||(0,om.A)(e,t);return[n,n?null:o_(t)]}function oM(e,t,n){if(oC(e.size)){if(oC(t)&&oC(n)){if(e.size>n)return[!1,oS(n)];if(e.size<t)return[!1,oA(t)]}else if(oC(t)&&e.size<t)return[!1,oA(t)];else if(oC(n)&&e.size>n)return[!1,oS(n)]}return[!0,null]}function oC(e){return null!=e}function oT(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function oR(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(e){return"Files"===e||"application/x-moz-file"===e}):!!e.target&&!!e.target.files}function oP(e){e.preventDefault()}function oI(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.some(function(t){return!oT(e)&&t&&t.apply(void 0,[e].concat(r)),oT(e)})}}var oB=["children"],oL=["open"],oD=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],ok=["refKey","onChange","onClick"];function oO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}}(e,t)||oN(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oN(e,t){if(e){if("string"==typeof e)return oF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oF(e,t)}}function oF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function oU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oU(Object(n),!0).forEach(function(t){oH(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oG(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var oV=(0,s.forwardRef)(function(e,t){var n=e.children,r=oX(oG(e,oB)),i=r.open,a=oG(r,oL);return(0,s.useImperativeHandle)(t,function(){return{open:i}},[i]),l().createElement(s.Fragment,null,n(oz(oz({},a),{},{open:i})))});oV.displayName="Dropzone";var oj={disabled:!1,getFilesFromEvent:function(e){return(0,oi.sH)(this,void 0,void 0,function(){return(0,oi.YH)(this,function(t){return ol(e)&&ol(e.dataTransfer)?[2,function(e,t){return(0,oi.sH)(this,void 0,void 0,function(){var n;return(0,oi.YH)(this,function(r){switch(r.label){case 0:if(null===e)return[2,[]];if(!e.items)return[3,2];if(n=oc(e.items).filter(function(e){return"file"===e.kind}),"drop"!==t)return[2,n];return[4,Promise.all(n.map(od))];case 1:return[2,ou(function e(t){return t.reduce(function(t,n){return(0,oi.gz)(t,Array.isArray(n)?e(n):[n])},[])}(r.sent()))];case 2:return[2,ou(oc(e.files).map(function(e){return oo(e)}))]}})})}(e.dataTransfer,e.type)]:ol(e)&&ol(e.target)?[2,oc(e.target.files).map(function(e){return oo(e)})]:Array.isArray(e)&&e.every(function(e){return"getFile"in e&&"function"==typeof e.getFile})?[2,function(e){return(0,oi.sH)(this,void 0,void 0,function(){return(0,oi.YH)(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(e){return e.getFile()}))];case 1:return[2,t.sent().map(function(e){return oo(e)})]}})})}(e)]:[2,[]]})})},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};oV.defaultProps=oj,oV.propTypes={children:or().func,accept:or().oneOfType([or().string,or().arrayOf(or().string)]),multiple:or().bool,preventDropOnDocument:or().bool,noClick:or().bool,noKeyboard:or().bool,noDrag:or().bool,noDragEventsBubbling:or().bool,minSize:or().number,maxSize:or().number,maxFiles:or().number,disabled:or().bool,getFilesFromEvent:or().func,onFileDialogCancel:or().func,onFileDialogOpen:or().func,useFsAccessApi:or().bool,onDragEnter:or().func,onDragLeave:or().func,onDragOver:or().func,onDrop:or().func,onDropAccepted:or().func,onDropRejected:or().func,validator:or().func};var oW={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function oX(){var e,t,n,r,i,a,o,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=oz(oz({},oj),l),c=u.accept,d=u.disabled,h=u.getFilesFromEvent,f=u.maxSize,p=u.minSize,m=u.multiple,g=u.maxFiles,v=u.onDragEnter,y=u.onDragLeave,b=u.onDragOver,x=u.onDrop,_=u.onDropAccepted,S=u.onDropRejected,A=u.onFileDialogCancel,w=u.onFileDialogOpen,E=u.useFsAccessApi,M=u.preventDropOnDocument,C=u.noClick,T=u.noKeyboard,R=u.noDrag,P=u.noDragEventsBubbling,I=u.validator,B=(0,s.useMemo)(function(){return"function"==typeof w?w:oY},[w]),L=(0,s.useMemo)(function(){return"function"==typeof A?A:oY},[A]),D=(0,s.useRef)(null),k=(0,s.useRef)(null),O=oO((0,s.useReducer)(oJ,oW),2),N=O[0],F=O[1],U=N.isFocused,z=N.isFileDialogActive,H=N.draggedFiles,G=(0,s.useRef)("undefined"!=typeof window&&window.isSecureContext&&E&&"showOpenFilePicker"in window),V=function(){!G.current&&z&&setTimeout(function(){k.current&&!k.current.files.length&&(F({type:"closeDialog"}),L())},300)};(0,s.useEffect)(function(){return window.addEventListener("focus",V,!1),function(){window.removeEventListener("focus",V,!1)}},[k,z,L,G]);var j=(0,s.useRef)([]),W=function(e){D.current&&D.current.contains(e.target)||(e.preventDefault(),j.current=[])};(0,s.useEffect)(function(){return M&&(document.addEventListener("dragover",oP,!1),document.addEventListener("drop",W,!1)),function(){M&&(document.removeEventListener("dragover",oP),document.removeEventListener("drop",W))}},[D,M]);var X=(0,s.useCallback)(function(e){var t;e.preventDefault(),e.persist(),ea(e),j.current=[].concat(function(e){if(Array.isArray(e))return oF(e)}(t=j.current)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||oN(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[e.target]),oR(e)&&Promise.resolve(h(e)).then(function(t){(!oT(e)||P)&&(F({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),v&&v(e))})},[h,v,P]),J=(0,s.useCallback)(function(e){e.preventDefault(),e.persist(),ea(e);var t=oR(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(e){}return t&&b&&b(e),!1},[b,P]),Y=(0,s.useCallback)(function(e){e.preventDefault(),e.persist(),ea(e);var t=j.current.filter(function(e){return D.current&&D.current.contains(e)}),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),j.current=t,!(t.length>0)&&(F({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),oR(e)&&y&&y(e))},[D,y,P]),K=(0,s.useCallback)(function(e,t){var n=[],r=[];e.forEach(function(e){var t=oO(oE(e,c),2),i=t[0],a=t[1],o=oO(oM(e,p,f),2),s=o[0],l=o[1],u=I?I(e):null;if(i&&s&&!u)n.push(e);else{var d=[a,l];u&&(d=d.concat(u)),r.push({file:e,errors:d.filter(function(e){return e})})}}),(!m&&n.length>1||m&&g>=1&&n.length>g)&&(n.forEach(function(e){r.push({file:e,errors:[ow]})}),n.splice(0)),F({acceptedFiles:n,fileRejections:r,type:"setFiles"}),x&&x(n,r,t),r.length>0&&S&&S(r,t),n.length>0&&_&&_(n,t)},[F,m,c,p,f,g,x,_,S,I]),q=(0,s.useCallback)(function(e){e.preventDefault(),e.persist(),ea(e),j.current=[],oR(e)&&Promise.resolve(h(e)).then(function(t){(!oT(e)||P)&&K(t,e)}),F({type:"reset"})},[h,K,P]),$=(0,s.useCallback)(function(){if(G.current){F({type:"openDialog"}),B();var e,t={multiple:m,types:[{description:"everything",accept:Array.isArray(e="string"==typeof(e=c)?e.split(","):e)?e.filter(function(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return ov(ov({},e),{},oy({},t,[]))},{}):{}}]};window.showOpenFilePicker(t).then(function(e){return h(e)}).then(function(e){K(e,null),F({type:"closeDialog"})}).catch(function(e){e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)?(L(e),F({type:"closeDialog"})):e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)&&(G.current=!1,k.current&&(k.current.value=null,k.current.click()))});return}k.current&&(F({type:"openDialog"}),B(),k.current.value=null,k.current.click())},[F,B,L,E,K,c,m]),Q=(0,s.useCallback)(function(e){D.current&&D.current.isEqualNode(e.target)&&(" "===e.key||"Enter"===e.key||32===e.keyCode||13===e.keyCode)&&(e.preventDefault(),$())},[D,$]),Z=(0,s.useCallback)(function(){F({type:"focus"})},[]),ee=(0,s.useCallback)(function(){F({type:"blur"})},[]),et=(0,s.useCallback)(function(){C||(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return -1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")||-1!==e.indexOf("Edge/")}()?setTimeout($,0):$())},[C,$]),en=function(e){return d?null:e},er=function(e){return T?null:en(e)},ei=function(e){return R?null:en(e)},ea=function(e){P&&e.stopPropagation()},eo=(0,s.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=e.role,r=e.onKeyDown,i=e.onFocus,a=e.onBlur,o=e.onClick,s=e.onDragEnter,l=e.onDragOver,u=e.onDragLeave,c=e.onDrop,h=oG(e,oD);return oz(oz(oH({onKeyDown:er(oI(r,Q)),onFocus:er(oI(i,Z)),onBlur:er(oI(a,ee)),onClick:en(oI(o,et)),onDragEnter:ei(oI(s,X)),onDragOver:ei(oI(l,J)),onDragLeave:ei(oI(u,Y)),onDrop:ei(oI(c,q)),role:"string"==typeof n&&""!==n?n:"button"},void 0===t?"ref":t,D),d||T?{}:{tabIndex:0}),h)}},[D,Q,Z,ee,et,X,J,Y,q,T,R,d]),es=(0,s.useCallback)(function(e){e.stopPropagation()},[]),el=(0,s.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=e.onChange,r=e.onClick,i=oG(e,ok);return oz(oz({},oH({accept:c,multiple:m,type:"file",style:{display:"none"},onChange:en(oI(n,q)),onClick:en(oI(r,es)),tabIndex:-1},void 0===t?"ref":t,k)),i)}},[k,c,m,q,d]),eu=H.length,ec=eu>0&&(t=(e={files:H,accept:c,minSize:p,maxSize:f,multiple:m,maxFiles:g}).files,n=e.accept,r=e.minSize,i=e.maxSize,a=e.multiple,o=e.maxFiles,(!!a||!(t.length>1))&&(!a||!(o>=1)||!(t.length>o))&&t.every(function(e){var t=ob(oE(e,n),1)[0],a=ob(oM(e,r,i),1)[0];return t&&a}));return oz(oz({},N),{},{isDragAccept:ec,isDragReject:eu>0&&!ec,isFocused:U&&!d,getRootProps:eo,getInputProps:el,rootRef:D,inputRef:k,open:en($)})}function oJ(e,t){switch(t.type){case"focus":return oz(oz({},e),{},{isFocused:!0});case"blur":return oz(oz({},e),{},{isFocused:!1});case"openDialog":return oz(oz({},oW),{},{isFileDialogActive:!0});case"closeDialog":return oz(oz({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=t.isDragActive,r=t.draggedFiles;return oz(oz({},e),{},{draggedFiles:r,isDragActive:n});case"setFiles":return oz(oz({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return oz({},oW);default:return e}}function oY(){}let oK="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?s.useEffect:s.useLayoutEffect;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;let oq=e=>(t,n,r)=>{let i=r.subscribe;return r.subscribe=(e,t,n)=>{let a=e;if(t){let i=(null==n?void 0:n.equalityFn)||Object.is,o=e(r.getState());a=n=>{let r=e(n);if(!i(o,r)){let e=o;t(o=r,e)}},(null==n?void 0:n.fireImmediately)&&t(o,o)}return i(a)},e(t,n,r)};var o$=(Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,n(53413)),oQ=n(72203),oZ=n.n(oQ);let o0=(...e)=>e.filter(Boolean).join(".");function o1(e,t){return(0,s.useMemo)(e,function(e,t){let n=(0,s.useRef)();return(t?_:S)(e,n.current)||(n.current=e),n.current}(t,!0))}let o2=e=>{let[t,n]=(0,s.useState)(e.getVisiblePaths());return(0,s.useEffect)(()=>{n(e.getVisiblePaths());let t=e.useStore.subscribe(e.getVisiblePaths,n,{equalityFn:S});return()=>t()},[e]),t};function o3(e=3){let t=(0,s.useRef)(null),n=(0,s.useRef)(null),[r,i]=(0,s.useState)(!1),a=(0,s.useCallback)(()=>i(!0),[]),o=(0,s.useCallback)(()=>i(!1),[]);return(0,s.useLayoutEffect)(()=>{if(r){let{bottom:r,top:i,left:a}=t.current.getBoundingClientRect(),{height:o}=n.current.getBoundingClientRect(),s=r+o>window.innerHeight-40?"up":"down";n.current.style.position="fixed",n.current.style.zIndex="10000",n.current.style.left=a+"px","down"===s?n.current.style.top=r+e+"px":n.current.style.bottom=window.innerHeight-i+e+"px"}},[e,r]),{popinRef:t,wrapperRef:n,shown:r,show:a,hide:o}}!function(e){e.forEach(function(e){0>aM.indexOf(e)&&(e(aw,ay),aM.push(e))})}([function(e,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var a={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var i,o=r[this.toHex()];if(o)return o;if(null==t?void 0:t.closest){var s=this.toRgb(),l=1/0,u="black";if(!a.length)for(var c in n)a[c]=new e(n[c]).toRgb();for(var d in n){var h=(i=a[d],Math.pow(s.r-i.r,2)+Math.pow(s.g-i.g,2)+Math.pow(s.b-i.b,2));h<l&&(l=h,u=d)}return u}},t.string.push([function(t){var r=t.toLowerCase(),i="transparent"===r?"#0000":n[r];return i?new e(i).toRgb():null},"name"])}]);let o4={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};function o5(e,{format:t,hasAlpha:n,isString:r}){let i=e[o4[t]+(r&&"hex"!==t?"String":"")]();return"object"!=typeof i||n?i:function(e,t){let n=ri({},e);return t.forEach(t=>t in e&&delete n[t]),n}(i,["a"])}P.extend({color:()=>e=>aE(e).isValid()});let o9=(e,t)=>{let n=aE(e);if(!n.isValid())throw Error("Invalid color");return o5(n,t)};var o6=Object.freeze({__proto__:null,schema:e=>P().color().test(e),sanitize:o9,format:(e,t)=>o5(aE(e),ri(ri({},t),{},{isString:!0,format:"hex"})),normalize:({value:e})=>{let t=ax(e)[1],n="object"==typeof e?"a"in e:"hex"===t&&8===e.length||/^(rgba)|(hsla)|(hsva)/.test(e),r={format:"name"===t?"hex":t,hasAlpha:n,isString:"string"==typeof e};return{value:o9(e,r),settings:r}}});let o8=rj("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:'url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')',$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),o7=rj("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),se=rj("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function st(e,t){return"rgb"!==t?aE(e).toRgb():e}function sn({value:e,displayValue:t,settings:n,onUpdate:r}){let{emitOnEditStart:i,emitOnEditEnd:a}=rO(),{format:o,hasAlpha:u}=n,{popinRef:c,wrapperRef:d,shown:h,show:f,hide:p}=o3(),m=(0,s.useRef)(0),[g,v]=(0,s.useState)(()=>st(e,o)),y=()=>{v(st(e,o)),f(),i()},b=()=>{p(),a(),window.clearTimeout(m.current)},x=()=>{m.current=window.setTimeout(b,500)};return(0,s.useEffect)(()=>()=>window.clearTimeout(m.current),[]),l().createElement(l().Fragment,null,l().createElement(o8,{ref:c,active:h,onClick:()=>y(),style:{color:t}}),h&&l().createElement(iu,null,l().createElement(io,{onPointerUp:b}),l().createElement(se,{ref:d,onMouseEnter:()=>window.clearTimeout(m.current),onMouseLeave:e=>0===e.buttons&&x()},l().createElement(u?a7:ot,{color:g,onChange:r}))))}var sr=ri({component:function(){let{value:e,displayValue:t,label:n,onChange:r,onUpdate:i,settings:a}=rO();return l().createElement(ib,{input:!0},l().createElement(ip,null,n),l().createElement(o7,null,l().createElement(sn,{value:e,displayValue:t,onChange:r,onUpdate:i,settings:a}),l().createElement(r3,{value:t,onChange:r,onUpdate:i})))}},o6),si=ri({component:function(){let{label:e,displayValue:t,onUpdate:n,settings:r}=rO();return l().createElement(ib,{input:!0},l().createElement(ip,null,e),l().createElement(i0,{value:t,settings:r,onUpdate:n}))}},i8(["x","y","z"]));let sa=rj("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),so=rj("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function ss({value:e,settings:t,onUpdate:n}){let r=(0,s.useRef)(),i=(0,s.useRef)(0),a=(0,s.useRef)(0),o=(0,s.useRef)(1),[u,c]=(0,s.useState)(!1),[d,h]=(0,s.useState)(!1),[f,p]=iS(),m=(0,s.useRef)(null),g=(0,s.useRef)(null);(0,s.useLayoutEffect)(()=>{if(u){let{top:e,left:t,width:n,height:r}=m.current.getBoundingClientRect();g.current.style.left=t+n/2+"px",g.current.style.top=e+r/2+"px"}},[u]);let{keys:[v,y],joystick:b}=t,x="invertY"===b?1:-1,{[v]:{step:_},[y]:{step:S}}=t,A=rq("sizes","joystickWidth"),w=rq("sizes","joystickHeight"),E=.8*parseFloat(A)/2,M=.8*parseFloat(w)/2,C=(0,s.useCallback)(()=>{r.current||(h(!0),i.current&&p({x:i.current*E}),a.current&&p({y:-(a.current*M)}),r.current=window.setInterval(()=>{n(e=>{let t=_*i.current*o.current,n=x*S*a.current*o.current;return Array.isArray(e)?{[v]:e[0]+t,[y]:e[1]+n}:{[v]:e[v]+t,[y]:e[y]+n}})},16))},[E,M,n,p,_,S,v,y,x]),T=(0,s.useCallback)(()=>{window.clearTimeout(r.current),r.current=void 0,h(!1)},[]);(0,s.useEffect)(()=>{function e(e){o.current=rC(e)}return window.addEventListener("keydown",e),window.addEventListener("keyup",e),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",e),window.removeEventListener("keyup",e)}},[]);let R=i_(({first:t,active:r,delta:[s,l],movement:[u,d]})=>{t&&c(!0);let h=ra(u,-E,E),f=ra(d,-M,M);i.current=Math.abs(u)>Math.abs(h)?Math.sign(u-h):0,a.current=Math.abs(d)>Math.abs(f)?Math.sign(f-d):0;let m=e[v],g=e[y];r?(i.current||(m+=s*_*o.current,p({x:h})),a.current||(g-=x*l*S*o.current,p({y:f})),i.current||a.current?C():T(),n({[v]:m,[y]:g})):(c(!1),i.current=0,a.current=0,p({x:0,y:0}),T())});return l().createElement(sa,rD({ref:m},R()),u&&l().createElement(iu,null,l().createElement(so,{ref:g,isOutOfBounds:d},l().createElement("div",null),l().createElement("span",{ref:f}))))}let sl=rj("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}}),su=["joystick"],sc=i8(["x","y"]);var sd=ri(ri({component:function(){let{label:e,displayValue:t,onUpdate:n,settings:r}=rO();return l().createElement(ib,{input:!0},l().createElement(ip,null,e),l().createElement(sl,{withJoystick:!!r.joystick},r.joystick&&l().createElement(ss,{value:t,settings:r,onUpdate:n}),l().createElement(i0,{value:t,settings:r,onUpdate:n})))}},sc),{},{normalize:e=>{let{joystick:t=!0}=e,n=nZ(e,su),{value:r,settings:i}=sc.normalize(n);return{value:r,settings:ri(ri({},i),{},{joystick:t})}}}),sh=Object.freeze({__proto__:null,sanitize:e=>{if(void 0!==e){if(e instanceof File)try{return URL.createObjectURL(e)}catch(e){return}if("string"==typeof e&&0===e.indexOf("blob:"))return e;throw Error(`Invalid image format [undefined | blob |\xa0File].`)}},schema:(e,t)=>"object"==typeof t&&"image"in t,normalize:({image:e})=>({value:e})});let sf=rj("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),sp=rj("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),sm=rj("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),sg=rj("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),sv=rj("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),sy=rj("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});var sb=ri({component:function(){let{label:e,value:t,onUpdate:n,disabled:r}=rO(),{popinRef:i,wrapperRef:a,shown:o,show:u,hide:c}=o3(),d=(0,s.useCallback)(e=>{e.length&&n(e[0])},[n]),h=(0,s.useCallback)(e=>{e.stopPropagation(),n(void 0)},[n]),{getRootProps:f,getInputProps:p,isDragAccept:m}=oX({maxFiles:1,accept:"image/*",onDrop:d,disabled:r});return l().createElement(ib,{input:!0},l().createElement(ip,null,e),l().createElement(sf,null,l().createElement(sm,{ref:i,hasImage:!!t,onPointerDown:()=>!!t&&u(),onPointerUp:c,style:{backgroundImage:t?`url(${t})`:"none"}}),o&&!!t&&l().createElement(iu,null,l().createElement(io,{onPointerUp:c,style:{cursor:"pointer"}}),l().createElement(sg,{ref:a,style:{backgroundImage:`url(${t})`}})),l().createElement(sp,f({isDragAccept:m}),l().createElement("input",p()),l().createElement(sv,null,m?"drop image":"click or drop")),l().createElement(sy,{onClick:h,disabled:!t})))}},sh);let sx=P().number(),s_=e=>({min:e[0],max:e[1]}),sS=(e,{bounds:[t,n]},r)=>{let i=Array.isArray(e)?s_(e):e,{min:a,max:o}=ri(ri({},{min:r[0],max:r[1]}),i);return[ra(Number(a),t,Math.max(t,o)),ra(Number(o),Math.min(n,a),n)]};var sA=Object.freeze({__proto__:null,schema:(e,t)=>P().array().length(2).every.number().test(e)&&P().schema({min:sx,max:sx}).test(t),format:s_,sanitize:sS,normalize:({value:e,min:t,max:n})=>{let r={min:t,max:n},i=ri(ri({},i1(s_(e),{min:r,max:r})),{},{bounds:[t,n]});return{value:sS(s_(e),i,e),settings:i}}});let sw=["value","bounds","onDrag"],sE=["bounds"],sM=rj("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function sC(e){let{value:t,bounds:[n,r],onDrag:i}=e,a=nZ(e,sw),o=(0,s.useRef)(null),u=(0,s.useRef)(null),c=(0,s.useRef)(null),d=(0,s.useRef)(0),h=rq("sizes","scrubberWidth"),f=i_(({event:e,first:s,xy:[l],movement:[f],memo:p={}})=>{if(s){let{width:i,left:a}=o.current.getBoundingClientRect();d.current=i-parseFloat(h);let s=(null==e?void 0:e.target)===u.current||(null==e?void 0:e.target)===c.current;p.pos=rc((l-a)/i,n,r);let f=Math.abs(p.pos-t.min)-Math.abs(p.pos-t.max);p.key=f<0||0===f&&p.pos<=t.min?"min":"max",s&&(p.pos=t[p.key])}let m=p.pos+rc(f/d.current,0,r-n);return i({[p.key]:iL(m,a[p.key])}),p}),p=`calc(${ru(t.min,n,r)} * (100% - ${h} - 8px) + 4px)`,m=`calc(${1-ru(t.max,n,r)} * (100% - ${h} - 8px) + 4px)`;return l().createElement(iT,rD({ref:o},f()),l().createElement(iM,null,l().createElement(iR,{style:{left:p,right:m}})),l().createElement(iC,{position:"left",ref:u,style:{left:p}}),l().createElement(iC,{position:"right",ref:c,style:{right:m}}))}var sT=ri({component:function(){let{label:e,displayValue:t,onUpdate:n,settings:r}=rO(),i=nZ(r,sE);return l().createElement(l().Fragment,null,l().createElement(ib,{input:!0},l().createElement(ip,null,e),l().createElement(sM,null,l().createElement(sC,rD({value:t},r,{onDrag:n})),l().createElement(i0,{value:t,settings:i,onUpdate:n,innerLabelTrim:0}))))}},sA);let sR=()=>{let e=new Map;return{on:(t,n)=>{let r=e.get(t);void 0===r&&(r=new Set,e.set(t,r)),r.add(n)},off:(t,n)=>{let r=e.get(t);void 0!==r&&(r.delete(n),0===r.size&&e.delete(t))},emit:(t,...n)=>{let r=e.get(t);if(void 0!==r)for(let e of r)e(...n)}}},sP=["type","value"],sI=["onChange","transient","onEditStart","onEditEnd"],sB=new function(){let e=function(e){let t="function"==typeof e?function(e){let t;let n=new Set,r=(e,r)=>{let i="function"==typeof e?e(t):e;if(i!==t){let e=t;t=r?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a=(e,r=i,a=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let o=r(t);function s(){let n=r(t);if(!a(o,n)){let t=o;e(o=n,t)}}return n.add(s),()=>n.delete(s)},o={setState:r,getState:i,subscribe:(e,t,r)=>t||r?a(e,t,r):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,o),o}(e):e,n=(e=t.getState,n=Object.is)=>{let r;let[,i]=(0,s.useReducer)(e=>e+1,0),a=t.getState(),o=(0,s.useRef)(a),l=(0,s.useRef)(e),u=(0,s.useRef)(n),c=(0,s.useRef)(!1),d=(0,s.useRef)();void 0===d.current&&(d.current=e(a));let h=!1;(o.current!==a||l.current!==e||u.current!==n||c.current)&&(r=e(a),h=!n(d.current,r)),oK(()=>{h&&(d.current=r),o.current=a,l.current=e,u.current=n,c.current=!1});let f=(0,s.useRef)(a);oK(()=>{let e=()=>{try{let e=t.getState(),n=l.current(e);u.current(d.current,n)||(o.current=e,d.current=n,i())}catch(e){c.current=!0,i()}},n=t.subscribe(e);return t.getState()!==f.current&&e(),n},[]);let p=h?r:d.current;return(0,s.useDebugValue)(p),p};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let e=[n,t];return{next(){let t=e.length<=0;return{value:e.shift(),done:t}}}},n}(oq(()=>({data:{}}))),t=sR();this.storeId=rd(),this.useStore=e;let n={},r=new Set;this.getVisiblePaths=()=>{let e=this.getData(),t=Object.keys(e),i=[];Object.entries(n).forEach(([e,n])=>{n.render&&t.some(t=>0===t.indexOf(e))&&!n.render(this.get)&&i.push(e+".")});let a=[];return r.forEach(t=>{t in e&&e[t].__refCount>0&&i.every(e=>-1===t.indexOf(e))&&(!e[t].render||e[t].render(this.get))&&a.push(t)}),a},this.setOrderedPaths=e=>{e.forEach(e=>r.add(e))},this.orderPaths=e=>(this.setOrderedPaths(e),e),this.disposePaths=t=>{e.setState(e=>{let n=e.data;return t.forEach(e=>{if(e in n){let t=n[e];t.__refCount--,0===t.__refCount&&t.type in a&&delete n[e]}}),{data:n}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=e=>n[e]||{},this.getData=()=>e.getState().data,this.addData=(t,n)=>{e.setState(e=>{let r=e.data;return Object.entries(t).forEach(([e,t])=>{let a=r[e];if(a){let{type:e,value:r}=t,o=nZ(t,sP);e!==a.type?n2(i.INPUT_TYPE_OVERRIDE,e):((0===a.__refCount||n)&&Object.assign(a,o),a.__refCount++)}else r[e]=ri(ri({},t),{},{__refCount:1})}),{data:r}})},this.setValueAtPath=(t,n,r)=>{e.setState(e=>{let i=e.data;return rA(i[t],n,t,this,r),{data:i}})},this.setSettingsAtPath=(t,n)=>{e.setState(e=>{let r=e.data;return r[t].settings=ri(ri({},r[t].settings),n),{data:r}})},this.disableInputAtPath=(t,n)=>{e.setState(e=>{let r=e.data;return r[t].disabled=n,{data:r}})},this.set=(t,n)=>{e.setState(e=>{let r=e.data;return Object.entries(t).forEach(([e,t])=>{try{rA(r[e],t,void 0,void 0,n)}catch(e){}}),{data:r}})},this.getInput=e=>{try{return this.getData()[e]}catch(t){n2(i.PATH_DOESNT_EXIST,e)}},this.get=e=>{var t;return null===(t=this.getInput(e))||void 0===t?void 0:t.value},this.emitOnEditStart=e=>{t.emit(`onEditStart:${e}`,this.get(e),e,ri(ri({},this.getInput(e)),{},{get:this.get}))},this.emitOnEditEnd=e=>{t.emit(`onEditEnd:${e}`,this.get(e),e,ri(ri({},this.getInput(e)),{},{get:this.get}))},this.subscribeToEditStart=(e,n)=>{let r=`onEditStart:${e}`;return t.on(r,n),()=>t.off(r,n)},this.subscribeToEditEnd=(e,n)=>{let r=`onEditEnd:${e}`;return t.on(r,n),()=>t.off(r,n)};let o=(e,t,r)=>{let s={};return Object.entries(e).forEach(([e,l])=>{if(""===e)return n2(i.EMPTY_KEY);let u=o0(t,e);if(l.type===a.FOLDER)Object.assign(s,o(l.schema,u,r)),u in n||(n[u]=l.settings);else if(e in r)n2(i.DUPLICATE_KEYS,e,u,r[e].path);else{let t=function(e,t,n,r){let i=function e(t,n,r={},i){var o,s;if("object"!=typeof t||Array.isArray(t))return{type:i,input:t,options:ri({key:n,label:n,optional:!1,disabled:!1,order:0},r)};if("__customInput"in t){let{type:r,__customInput:i}=t;return e(i,n,nZ(t,rx),r)}let{render:l,label:u,optional:c,order:d=0,disabled:h,hint:f,onChange:p,onEditStart:m,onEditEnd:g,transient:v}=t,y=nZ(t,r_),b=ri({render:l,key:n,label:null!=u?u:n,hint:f,transient:null!=v?v:!!p,onEditStart:m,onEditEnd:g,disabled:h,optional:c,order:d},r),{type:x}=y,_=nZ(y,rS);return(x=null!=i?i:x)in a?{type:x,input:_,options:b}:{type:x,input:i&&ry(_)&&"value"in _?_.value:rb(_)?void 0:_,options:ri(ri({},b),{},{onChange:p,optional:null!==(o=b.optional)&&void 0!==o&&o,disabled:null!==(s=b.disabled)&&void 0!==s&&s})}}(e,t),{type:o,input:s,options:l}=i;if(o)return o in a?i:{type:o,input:rt(o,s,n,r),options:l};let u=n7(s);return u?{type:u,input:rt(u,s,n,r),options:l}:!!(u=n7({value:s}))&&{type:u,input:rt(u,{value:s},n,r),options:l}}(l,e,u,s);if(t){let{type:n,options:i,input:a}=t,{onChange:o,transient:l,onEditStart:c,onEditEnd:d}=i,h=nZ(i,sI);s[u]=ri(ri(ri({type:n},h),a),{},{fromPanel:!0}),r[e]={path:u,onChange:o,transient:l,onEditStart:c,onEditEnd:d}}else n2(i.UNKNOWN_INPUT,u,l)}}),s};this.getDataFromSchema=e=>{let t={};return[o(e,"",t),t]}},sL={collapsed:!1},sD=e=>"__levaInput"in e,sk=(e,t)=>{let n={},r=t?t.toLowerCase():null;return e.forEach(e=>{let[t,i]=function(e){let t=e.split(".");return[t.pop(),t.join(".")||void 0]}(e);(!r||t.toLowerCase().indexOf(r)>-1)&&oZ()(n,i,{[t]:{__levaInput:!0,path:e}})}),n},sO=["type","label","path","valueKey","value","settings","setValue","disabled"];function sN(e){let{type:t,label:n,path:r,valueKey:a,value:o,settings:s,setValue:u,disabled:c}=e,d=nZ(e,sO),{displayValue:h,onChange:f,onUpdate:p}=ix({type:t,value:o,settings:s,setValue:u}),m=n8[t].component;return m?l().createElement(rk.Provider,{value:ri({key:a,path:r,id:""+r,label:n,displayValue:h,value:o,onChange:f,onUpdate:p,settings:s,setValue:u,disabled:c},d)},l().createElement(ia,{disabled:c},l().createElement(m,null))):(n2(i.NO_COMPONENT_FOR_TYPE,t,r),null)}let sF=rj("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}}),sU=rj("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),sz=rj("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),sH=({label:e,opts:t})=>{let n="string"==typeof e&&""===e.trim()?null:e,r=t;return"object"==typeof t.opts&&(void 0!==r.label&&(n=t.label),r=t.opts),{label:n,opts:r}},sG=rj("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),sV=(0,s.forwardRef)(function({initialValue:e},t){let n=rq("colors","highlight3"),r=rq("colors","elevation2"),i=rq("colors","highlight1"),[a,o]=(0,s.useMemo)(()=>[aE(i).alpha(.4).toRgbString(),aE(i).alpha(.1).toRgbString()],[i]),u=(0,s.useRef)([e]),c=(0,s.useRef)(e),d=(0,s.useRef)(e),h=(0,s.useRef)(),f=(0,s.useCallback)((e,t)=>{if(!e)return;let{width:i,height:s}=e,l=new Path2D,h=i/100,f=.05*s;for(let e=0;e<u.current.length;e++){let t=ru(u.current[e],c.current,d.current),n=h*e,r=s-t*(s-2*f)-f;l.lineTo(n,r)}t.clearRect(0,0,i,s);let p=new Path2D(l);p.lineTo(h*(u.current.length+1),s),p.lineTo(0,s),p.lineTo(0,0);let m=t.createLinearGradient(0,0,0,s);m.addColorStop(0,a),m.addColorStop(1,o),t.fillStyle=m,t.fill(p),t.strokeStyle=r,t.lineJoin="round",t.lineWidth=14,t.stroke(l),t.strokeStyle=n,t.lineWidth=2,t.stroke(l)},[n,r,a,o]),[p,m]=function(e){let t=(0,s.useRef)(null),n=(0,s.useRef)(null),r=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{let i=rM(()=>{t.current.width=t.current.offsetWidth*window.devicePixelRatio,t.current.height=t.current.offsetHeight*window.devicePixelRatio,e(t.current,n.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[e]),(0,s.useEffect)(()=>{n.current=t.current.getContext("2d")},[]),[t,n]}(f);return(0,s.useImperativeHandle)(t,()=>({frame:e=>{var t;(void 0===c.current||e<c.current)&&(c.current=e),(void 0===d.current||e>d.current)&&(d.current=e),(t=u.current).push(e),t.length>100&&t.shift(),h.current=requestAnimationFrame(()=>f(p.current,m.current))}}),[p,m,f]),(0,s.useEffect)(()=>()=>cancelAnimationFrame(h.current),[]),l().createElement(sG,{ref:p})}),sj=e=>Number.isFinite(e)?e.toPrecision(2):e.toString(),sW=(0,s.forwardRef)(function({initialValue:e},t){let[n,r]=(0,s.useState)(sj(e));return(0,s.useImperativeHandle)(t,()=>({frame:e=>r(sj(e))}),[]),l().createElement("div",null,n)});function sX(e){return"function"==typeof e?e():e.current}let sJ=["type","label","key"],sY={[a.BUTTON]:function({onClick:e,settings:t,label:n}){let r=rz();return l().createElement(ib,null,l().createElement(sF,{disabled:t.disabled,onClick:()=>e(r.get)},n))},[a.BUTTON_GROUP]:function(e){let{label:t,opts:n}=sH(e),r=rz();return l().createElement(ib,{input:!!t},t&&l().createElement(ip,null,t),l().createElement(sU,null,Object.entries(n).map(([e,t])=>l().createElement(sz,{key:e,onClick:()=>t(r.get)},e))))},[a.MONITOR]:function({label:e,objectOrFn:t,settings:n}){let r=(0,s.useRef)(),i=(0,s.useRef)(sX(t));return(0,s.useEffect)(()=>{let e=window.setInterval(()=>{var e;document.hidden||null===(e=r.current)||void 0===e||e.frame(sX(t))},n.interval);return()=>window.clearInterval(e)},[t,n.interval]),l().createElement(ib,{input:!0},l().createElement(ip,{align:"top"},e),n.graph?l().createElement(sV,{ref:r,initialValue:i.current}):l().createElement(sW,{ref:r,initialValue:i.current}))}},sK=l().memo(({path:e})=>{let[t,{set:n,setSettings:r,disable:o,storeId:u,emitOnEditStart:c,emitOnEditEnd:d}]=function(e){let t=rz(),[n,r]=(0,s.useState)(iw(t.getData(),e)),i=(0,s.useCallback)(n=>t.setValueAtPath(e,n,!0),[e,t]),a=(0,s.useCallback)(n=>t.setSettingsAtPath(e,n),[e,t]),o=(0,s.useCallback)(n=>t.disableInputAtPath(e,n),[e,t]),l=(0,s.useCallback)(()=>t.emitOnEditStart(e),[e,t]),u=(0,s.useCallback)(()=>t.emitOnEditEnd(e),[e,t]);return(0,s.useEffect)(()=>{r(iw(t.getData(),e));let n=t.useStore.subscribe(t=>iw(t.data,e),r,{equalityFn:S});return()=>n()},[t,e]),[n,{set:i,setSettings:a,disable:o,storeId:t.storeId,emitOnEditStart:l,emitOnEditEnd:u}]}(e);if(!t)return null;let{type:h,label:f,key:p}=t,m=nZ(t,sJ);if(h in a){let t=sY[h];return l().createElement(t,rD({label:f,path:e},m))}return h in n8?l().createElement(sN,rD({key:u+e,type:h,label:f,storeId:u,path:e,valueKey:p,setValue:n,setSettings:r,disable:o,emitOnEditStart:c,emitOnEditEnd:d},m)):(n3(i.UNSUPPORTED_INPUT,h,e),null)});function sq({toggle:e,toggled:t,name:n}){return l().createElement(r6,{onClick:()=>e()},l().createElement(iv,{toggled:t}),l().createElement("div",null,n))}let s$=({name:e,path:t,tree:n})=>{let r=rz(),i=o0(t,e),{collapsed:a,color:o}=r.getFolderSettings(i),[u,c]=(0,s.useState)(!a),d=(0,s.useRef)(null),h=rq("colors","folderWidgetColor"),f=rq("colors","folderTextColor");return(0,s.useLayoutEffect)(()=>{d.current.style.setProperty("--leva-colors-folderWidgetColor",o||h),d.current.style.setProperty("--leva-colors-folderTextColor",o||f)},[o,h,f]),l().createElement(r5,{ref:d},l().createElement(sq,{name:e,toggled:u,toggle:()=>c(e=>!e)}),l().createElement(sQ,{parent:i,tree:n,toggled:u}))},sQ=l().memo(({isRoot:e=!1,fill:t=!1,flat:n=!1,parent:r,tree:i,toggled:a})=>{let{wrapperRef:o,contentRef:u}=function(e){let t=(0,s.useRef)(null),n=(0,s.useRef)(null),r=(0,s.useRef)(!0);return(0,s.useLayoutEffect)(()=>{e||(t.current.style.height="0px",t.current.style.overflow="hidden")},[]),(0,s.useEffect)(()=>{let i;if(r.current){r.current=!1;return}let a=t.current,o=()=>{e&&(a.style.removeProperty("height"),a.style.removeProperty("overflow"),n.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};a.addEventListener("transitionend",o,{once:!0});let{height:s}=n.current.getBoundingClientRect();return a.style.height=s+"px",e||(a.style.overflow="hidden",i=window.setTimeout(()=>a.style.height="0px",50)),()=>{a.removeEventListener("transitionend",o),clearTimeout(i)}},[e]),{wrapperRef:t,contentRef:n}}(a),c=rz(),d=([e,t])=>{var n;return(sD(t)?null===(n=c.getInput(t.path))||void 0===n?void 0:n.order:c.getFolderSettings(o0(r,e)).order)||0},h=Object.entries(i).sort((e,t)=>d(e)-d(t));return l().createElement(r9,{ref:o,isRoot:e,fill:t,flat:n},l().createElement(r8,{ref:u,isRoot:e,toggled:a},h.map(([e,t])=>sD(t)?l().createElement(sK,{key:t.path,valueKey:t.valueKey,path:t.path}):l().createElement(s$,{key:e,name:e,path:r,tree:t}))))}),sZ=rj("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${ie}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),s0=rj("i",{$flexCenter:"",width:40,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),s1=rj("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),s2=rj("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${s0}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),s3=rj("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),s4=rj("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:40}}}}),s5=l().forwardRef(({setFilter:e,toggle:t},n)=>{let[r,i]=(0,s.useState)(""),a=(0,s.useMemo)(()=>rM(e,250),[e]),o=()=>{e(""),i("")};return(0,s.useEffect)(()=>{a(r)},[r,a]),l().createElement(l().Fragment,null,l().createElement(s3,{ref:n,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:e=>e.stopPropagation(),onChange:e=>{let n=e.currentTarget.value;t(!0),i(n)}}),l().createElement(s0,{onClick:()=>o(),style:{visibility:r?"visible":"hidden"}},l().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},l().createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function s9({setFilter:e,onDrag:t,onDragStart:n,onDragEnd:r,toggle:i,toggled:a,title:o,drag:u,filterEnabled:c,from:d}){let[h,f]=(0,s.useState)(!1),p=(0,s.useRef)(null);(0,s.useEffect)(()=>{var e,t;h?null===(e=p.current)||void 0===e||e.focus():null===(t=p.current)||void 0===t||t.blur()},[h]);let m=i_(({offset:[e,i],first:a,last:o})=>{t({x:e,y:i}),a&&n({x:e,y:i}),o&&r({x:e,y:i})},{filterTaps:!0,from:({offset:[e,t]})=>[(null==d?void 0:d.x)||e,(null==d?void 0:d.y)||t]});return(0,s.useEffect)(()=>{let e=e=>{"L"===e.key&&e.shiftKey&&e.metaKey&&f(e=>!e)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),l().createElement(l().Fragment,null,l().createElement(s1,{mode:u?"drag":void 0},l().createElement(s0,{active:!a,onClick:()=>i()},l().createElement(iv,{toggled:a,width:12,height:8})),l().createElement(s4,rD({},u?m():{},{drag:u,filterEnabled:c}),void 0===o&&u?l().createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},l().createElement("circle",{cx:"2",cy:"2",r:"2"}),l().createElement("circle",{cx:"14",cy:"2",r:"2"}),l().createElement("circle",{cx:"26",cy:"2",r:"2"}),l().createElement("circle",{cx:"2",cy:"12",r:"2"}),l().createElement("circle",{cx:"14",cy:"12",r:"2"}),l().createElement("circle",{cx:"26",cy:"12",r:"2"})):o),c&&l().createElement(s0,{active:h,onClick:()=>f(e=>!e)},l().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},l().createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),l().createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),l().createElement(s2,{toggled:h},l().createElement(s5,{ref:p,setFilter:e,toggle:i})))}let s6=["store","hidden","theme","collapsed"];function s8(e){let{store:t,hidden:n=!1,theme:r,collapsed:i=!1}=e,a=nZ(e,s6),o=o1(()=>(function(e){let t=rH();if(!e)return{theme:t,className:""};Object.keys(e).forEach(n=>{Object.assign(t[n],e[n])});let n=rX(t);return{theme:t,className:n.className}})(r),[r]),[u,c]=(0,s.useState)(!i),d="object"==typeof i?!i.collapsed:u,h=(0,s.useMemo)(()=>"object"==typeof i?e=>{"function"==typeof e?i.onChange(!e(!i.collapsed)):i.onChange(!e)}:c,[i]);return!t||n?null:l().createElement(rN.Provider,{value:o},l().createElement(s7,rD({store:t},a,{toggled:d,setToggle:h,rootClass:o.className})))}let s7=l().memo(({store:e,rootClass:t,fill:n=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:a=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:u=!1,toggled:c,setToggle:d})=>{var h,f;let p=o2(e),[m,g]=(0,s.useState)(""),v=(0,s.useMemo)(()=>sk(p,m),[p,m]),[y,b]=iS(),x=i||p.length>0,_="object"==typeof o&&o.title||void 0,S="object"!=typeof o||null===(h=o.drag)||void 0===h||h,A="object"!=typeof o||null===(f=o.filter)||void 0===f||f,w="object"==typeof o&&o.position||void 0,E="object"==typeof o&&o.onDrag||void 0,M="object"==typeof o&&o.onDragStart||void 0,C="object"==typeof o&&o.onDragEnd||void 0;return l().useEffect(()=>{b({x:null==w?void 0:w.x,y:null==w?void 0:w.y})},[w,b]),rK(),l().createElement(rU.Provider,{value:{hideCopyButton:u}},l().createElement(sZ,{ref:y,className:t,fill:n,flat:r,oneLineLabels:a,hideTitleBar:!o,style:{display:x?"block":"none"}},o&&l().createElement(s9,{onDrag:e=>{b(e),null==E||E(e)},onDragStart:e=>null==M?void 0:M(e),onDragEnd:e=>null==C?void 0:C(e),setFilter:g,toggle:e=>d(t=>null!=e?e:!t),toggled:c,title:_,drag:S,filterEnabled:A,from:w}),x&&l().createElement(rF.Provider,{value:e},l().createElement(sQ,{isRoot:!0,fill:n,flat:r,tree:v,toggled:c}))))}),le=["isRoot"],lt=!1,ln=null;function lr(e){let{isRoot:t=!1}=e,n=nZ(e,le);return(0,s.useEffect)(()=>(lt=!0,!t&&ln&&(ln.remove(),ln=null),()=>{t||(lt=!1)}),[t]),l().createElement(s8,rD({store:sB},n))}function li(e,t,n,r,i){var o;let u,c,d,h,f;let{folderName:p,schema:m,folderSettings:g,hookSettings:v,deps:y}=("string"==typeof e?(f=e,u=t,Array.isArray(n)?h=n:n&&("store"in n?(d=n,h=r):(c=n,Array.isArray(r)?h=r:(d=r,h=i)))):(u=e,Array.isArray(t)?h=t:(d=t,h=n)),{schema:u,folderName:f,folderSettings:c,hookSettings:d,deps:h||[]}),b="function"==typeof m,x=(0,s.useRef)(!1),_=(0,s.useRef)(!0),A=o1(()=>{x.current=!0;let e="function"==typeof m?m():m;return p?{[p]:{type:a.FOLDER,schema:e,settings:ri(ri({},sL),g)}}:e},y);o=!(null!=v&&v.store),(0,s.useEffect)(()=>{o&&!lt&&(!ln&&(ln=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(ln),(0,o$.createRoot)(ln).render(l().createElement(lr,{isRoot:!0})))),lt=!0)},[o]);let[w]=(0,s.useState)(()=>(null==v?void 0:v.store)||sB),[E,M]=(0,s.useMemo)(()=>w.getDataFromSchema(A),[w,A]),[C,T,R,P,I]=(0,s.useMemo)(()=>{let e=[],t=[],n={},r={},i={};return Object.values(M).forEach(({path:a,onChange:o,onEditStart:s,onEditEnd:l,transient:u})=>{e.push(a),o?(n[a]=o,u||t.push(a)):t.push(a),s&&(r[a]=s),l&&(i[a]=l)}),[e,t,n,r,i]},[M]),B=(0,s.useMemo)(()=>w.orderPaths(C),[C,w]),L=w.useStore(e=>{var t;return t=ri(ri({},E),e.data),Object.entries(T.reduce((e,n)=>(t&&t.hasOwnProperty(n)&&(e[n]=t[n]),e),{})).reduce((e,[,{value:t,disabled:n,key:r}])=>(e[r]=n?void 0:t,e),{})},S),D=(0,s.useCallback)(e=>{let t=Object.entries(e).reduce((e,[t,n])=>Object.assign(e,{[M[t].path]:n}),{});w.set(t,!1)},[w,M]),k=(0,s.useCallback)(e=>w.get(M[e].path),[w,M]);return((0,s.useEffect)(()=>{let e=!_.current&&x.current;return w.addData(E,e),_.current=!1,x.current=!1,()=>w.disposePaths(B)},[w,B,E]),(0,s.useEffect)(()=>{let e=[];return Object.entries(R).forEach(([t,n])=>{n(w.get(t),t,ri({initial:!0,get:w.get},w.getInput(t)));let r=w.useStore.subscribe(e=>{let n=e.data[t];return[n.disabled?void 0:n.value,n]},([e,r])=>n(e,t,ri({initial:!1,get:w.get},r)),{equalityFn:S});e.push(r)}),()=>e.forEach(e=>e())},[w,R]),(0,s.useEffect)(()=>{let e=[];return Object.entries(P).forEach(([t,n])=>e.push(w.subscribeToEditStart(t,n))),Object.entries(I).forEach(([t,n])=>e.push(w.subscribeToEditEnd(t,n))),()=>e.forEach(e=>e())},[P,I,w]),b)?[L,D,k]:L}re(o.SELECT,iz),re(o.IMAGE,sb),re(o.NUMBER,iD),re(o.COLOR,sr),re(o.STRING,iW),re(o.BOOLEAN,iK),re(o.INTERVAL,sT),re(o.VECTOR3D,si),re(o.VECTOR2D,sd)},72203:(e,t,n)=>{"use strict";var r=n(29260),i=n(63139),a=n(18555),o=n(75839);e.exports=function(e,t,n){if(!r(e))throw TypeError("expected an object");if("string"!=typeof t||null==n)return i.apply(null,arguments);if("string"==typeof n)return o(e,t,n),e;var s=a(e,t);return r(n)&&r(s)&&(n=i({},s,n)),o(e,t,n),e}},63139:(e,t,n)=>{"use strict";var r=n(29260),i=n(93832);function a(e,t){for(var n=arguments.length,r=0;++r<n;){var a=arguments[r];s(a)&&i(a,o,e)}return e}function o(e,t){if("__proto__"!==t&&"constructor"!==t&&"prototype"!==t){var n=this[t];s(e)&&s(n)?a(n,e):this[t]=e}}function s(e){return r(e)&&!Array.isArray(e)}e.exports=a},75614:(e,t,n)=>{"use strict";var r,i,a=n(51583),o=n(14205),s=n(20100);function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.consumer"),v=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var w=Symbol.for("react.memo_cache_sentinel"),E=Symbol.iterator;function M(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=E&&e[E]||e["@@iterator"])?e:null}var C,T,R=Symbol.for("react.client.reference"),P=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=Object.assign;function B(e){if(void 0===C)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);C=t&&t[1]||"",T=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+C+e+T}var L=!1;function D(e,t){if(!e||L)return"";L=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var l=o.split("\n"),u=s.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(1!==r||1!==i)do if(r--,i--,0>i||l[r]!==u[i]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=r&&0<=i);break}}}finally{L=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?B(n):""}function k(e){try{var t="";do t+=function(e){switch(e.tag){case 26:case 27:case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 15:return e=D(e.type,!1);case 11:return e=D(e.type.render,!1);case 1:return e=D(e.type,!0);default:return""}}(e),e=e.return;while(e);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function O(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 0!=(4098&(t=e).flags)&&(n=t.return),e=t.return;while(e)}return 3===t.tag?n:null}function N(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function F(e){if(O(e)!==e)throw Error(l(188))}var U=Array.isArray,z=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},G=[],V=-1;function j(e){return{current:e}}function W(e){0>V||(e.current=G[V],G[V]=null,V--)}function X(e,t){G[++V]=e.current,e.current=t}var J=j(null),Y=j(null),K=j(null),q=j(null);function $(e,t){switch(X(K,t),X(Y,e),X(J,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?l8(t):0;break;default:if(t=(e=8===e?t.parentNode:t).tagName,e=e.namespaceURI)t=l7(e=l8(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}W(J),X(J,t)}function Q(){W(J),W(Y),W(K)}function Z(e){null!==e.memoizedState&&X(q,e);var t=J.current,n=l7(t,e.type);t!==n&&(X(Y,e),X(J,n))}function ee(e){Y.current===e&&(W(J),W(Y)),q.current===e&&(W(q),uU._currentValue=H)}var et=Object.prototype.hasOwnProperty,en=a.unstable_scheduleCallback,er=a.unstable_cancelCallback,ei=a.unstable_shouldYield,ea=a.unstable_requestPaint,eo=a.unstable_now,es=a.unstable_getCurrentPriorityLevel,el=a.unstable_ImmediatePriority,eu=a.unstable_UserBlockingPriority,ec=a.unstable_NormalPriority,ed=a.unstable_LowPriority,eh=a.unstable_IdlePriority,ef=a.log,ep=a.unstable_setDisableYieldValue,em=null,eg=null;function ev(e){if("function"==typeof ef&&ep(e),eg&&"function"==typeof eg.setStrictMode)try{eg.setStrictMode(em,e)}catch(e){}}var ey=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(eb(e)/ex|0)|0},eb=Math.log,ex=Math.LN2,e_=128,eS=4194304;function eA(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 0x1000000:case 0x2000000:return 0x3c00000&e;case 0x4000000:return 0x4000000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0;default:return e}}function ew(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=e.warmLanes;e=0!==e.finishedLanes;var s=0x7ffffff&n;return 0!==s?0!=(n=s&~i)?r=eA(n):0!=(a&=s)?r=eA(a):e||0!=(o=s&~o)&&(r=eA(o)):0!=(s=n&~i)?r=eA(s):0!==a?r=eA(a):e||0!=(o=n&~o)&&(r=eA(o)),0===r?0:0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(o=t&-t)||32===i&&0!=(4194176&o))?t:r}function eE(e,t){return 0==(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function eM(){var e=e_;return 0==(4194176&(e_<<=1))&&(e_=128),e}function eC(){var e=eS;return 0==(0x3c00000&(eS<<=1))&&(eS=4194304),e}function eT(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function eR(e,t){e.pendingLanes|=t,0x10000000!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function eP(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ey(t);e.entangledLanes|=t,e.entanglements[r]=0x40000000|e.entanglements[r]|4194218&n}function eI(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ey(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function eB(e){return 2<(e&=-e)?8<e?0!=(0x7ffffff&e)?32:0x10000000:8:2}function eL(){var e=z.p;return 0!==e?e:void 0===(e=window.event)?32:uQ(e.type)}var eD=Math.random().toString(36).slice(2),ek="__reactFiber$"+eD,eO="__reactProps$"+eD,eN="__reactContainer$"+eD,eF="__reactEvents$"+eD,eU="__reactListeners$"+eD,ez="__reactHandles$"+eD,eH="__reactResources$"+eD,eG="__reactMarker$"+eD;function eV(e){delete e[ek],delete e[eO],delete e[eF],delete e[eU],delete e[ez]}function ej(e){var t=e[ek];if(t)return t;for(var n=e.parentNode;n;){if(t=n[eN]||n[ek]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ud(e);null!==e;){if(n=e[ek])return n;e=ud(e)}return t}n=(e=n).parentNode}return null}function eW(e){if(e=e[ek]||e[eN]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function eX(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(l(33))}function eJ(e){var t=e[eH];return t||(t=e[eH]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function eY(e){e[eG]=!0}var eK=new Set,eq={};function e$(e,t){eQ(e,t),eQ(e+"Capture",t)}function eQ(e,t){for(eq[e]=t,e=0;e<t.length;e++)eK.add(t[e])}var eZ=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),e0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),e1={},e2={};function e3(e,t,n){if(et.call(e2,t)||!et.call(e1,t)&&(e0.test(t)?e2[t]=!0:(e1[t]=!0,!1))){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}}function e4(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function e5(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+r)}}function e9(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function e6(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function e8(e){e._valueTracker||(e._valueTracker=function(e){var t=e6(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function e7(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=e6(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function te(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var tt=/[\n"\\]/g;function tn(e){return e.replace(tt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function tr(e,t,n,r,i,a,o,s){e.name="",null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+e9(t)):e.value!==""+e9(t)&&(e.value=""+e9(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?ta(e,o,e9(t)):null!=n?ta(e,o,e9(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=a&&(e.defaultChecked=!!a),null!=i&&(e.checked=i&&"function"!=typeof i&&"symbol"!=typeof i),null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.name=""+e9(s):e.removeAttribute("name")}function ti(e,t,n,r,i,a,o,s){if(null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.type=a),null!=t||null!=n){if(!("submit"!==a&&"reset"!==a||null!=t))return;n=null!=n?""+e9(n):"",t=null!=t?""+e9(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:i)&&"symbol"!=typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.name=o)}function ta(e,t,n){"number"===t&&te(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function to(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(i=0,n=""+e9(n),t=null;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ts(e,t,n){if(null!=t&&((t=""+e9(t))!==e.value&&(e.value=t),null==n)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=null!=n?""+e9(n):""}function tl(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(l(92));if(U(r)){if(1<r.length)throw Error(l(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=e9(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function tu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType){n.nodeValue=t;return}}e.textContent=t}var tc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function td(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||tc.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function th(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(l(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&td(e,i,r)}else for(var a in t)t.hasOwnProperty(a)&&td(e,a,t[a])}function tf(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tg(e){return tm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var tv=null;function ty(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var tb=null,tx=null;function t_(e){var t=eW(e);if(t&&(e=t.stateNode)){var n=e[eO]||null;switch(e=t.stateNode,t.type){case"input":if(tr(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+tn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[eO]||null;if(!i)throw Error(l(90));tr(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&e7(r)}break;case"textarea":ts(e,n.value,n.defaultValue);break;case"select":null!=(t=n.value)&&to(e,!!n.multiple,t,!1)}}}var tS=!1;function tA(e,t,n){if(tS)return e(t,n);tS=!0;try{return e(t)}finally{if(tS=!1,(null!==tb||null!==tx)&&(s8(),tb&&(t=tb,e=tx,tx=tb=null,t_(t),e)))for(t=0;t<e.length;t++)t_(e[t])}}function tw(e,t){var n=e.stateNode;if(null===n)return null;var r=n[eO]||null;if(null===r)return null;switch(n=r[t],t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(l(231,t,typeof n));return n}var tE=!1;if(eZ)try{var tM={};Object.defineProperty(tM,"passive",{get:function(){tE=!0}}),window.addEventListener("test",tM,tM),window.removeEventListener("test",tM,tM)}catch(e){tE=!1}var tC=null,tT=null,tR=null;function tP(){if(tR)return tR;var e,t,n=tT,r=n.length,i="value"in tC?tC.value:tC.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return tR=i.slice(e,1<t?1-t:void 0)}function tI(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tB(){return!0}function tL(){return!1}function tD(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tB:tL,this.isPropagationStopped=tL,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tB)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tB)},persist:function(){},isPersistent:tB}),t}var tk,tO,tN,tF={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tU=tD(tF),tz=I({},tF,{view:0,detail:0}),tH=tD(tz),tG=I({},tz,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tZ,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tN&&(tN&&"mousemove"===e.type?(tk=e.screenX-tN.screenX,tO=e.screenY-tN.screenY):tO=tk=0,tN=e),tk)},movementY:function(e){return"movementY"in e?e.movementY:tO}}),tV=tD(tG),tj=tD(I({},tG,{dataTransfer:0})),tW=tD(I({},tz,{relatedTarget:0})),tX=tD(I({},tF,{animationName:0,elapsedTime:0,pseudoElement:0})),tJ=tD(I({},tF,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),tY=tD(I({},tF,{data:0})),tK={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tQ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=t$[e])&&!!t[e]}function tZ(){return tQ}var t0=tD(I({},tz,{key:function(e){if(e.key){var t=tK[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tI(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?tq[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tZ,charCode:function(e){return"keypress"===e.type?tI(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tI(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),t1=tD(I({},tG,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),t2=tD(I({},tz,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tZ})),t3=tD(I({},tF,{propertyName:0,elapsedTime:0,pseudoElement:0})),t4=tD(I({},tG,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),t5=tD(I({},tF,{newState:0,oldState:0})),t9=[9,13,27,32],t6=eZ&&"CompositionEvent"in window,t8=null;eZ&&"documentMode"in document&&(t8=document.documentMode);var t7=eZ&&"TextEvent"in window&&!t8,ne=eZ&&(!t6||t8&&8<t8&&11>=t8),nt=!1;function nn(e,t){switch(e){case"keyup":return -1!==t9.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var ni=!1,na={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function no(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!na[e.type]:"textarea"===t}function ns(e,t,n,r){tb?tx?tx.push(r):tx=[r]:tb=r,0<(t=lY(t,"onChange")).length&&(n=new tU("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var nl=null,nu=null;function nc(e){lz(e,0)}function nd(e){if(e7(eX(e)))return e}function nh(e,t){if("change"===e)return t}var nf=!1;if(eZ){if(eZ){var np="oninput"in document;if(!np){var nm=document.createElement("div");nm.setAttribute("oninput","return;"),np="function"==typeof nm.oninput}r=np}else r=!1;nf=r&&(!document.documentMode||9<document.documentMode)}function ng(){nl&&(nl.detachEvent("onpropertychange",nv),nu=nl=null)}function nv(e){if("value"===e.propertyName&&nd(nu)){var t=[];ns(t,nu,e,ty(e)),tA(nc,t)}}function ny(e,t,n){"focusin"===e?(ng(),nl=t,nu=n,nl.attachEvent("onpropertychange",nv)):"focusout"===e&&ng()}function nb(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return nd(nu)}function nx(e,t){if("click"===e)return nd(t)}function n_(e,t){if("input"===e||"change"===e)return nd(t)}var nS="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function nA(e,t){if(nS(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!et.call(t,i)||!nS(e[i],t[i]))return!1}return!0}function nw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nE(e,t){var n,r=nw(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=nw(r)}}function nM(e){e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;for(var t=te(e.document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(n)e=t.contentWindow;else break;t=te(e.document)}return t}function nC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nT=eZ&&"documentMode"in document&&11>=document.documentMode,nR=null,nP=null,nI=null,nB=!1;function nL(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;nB||null==nR||nR!==te(r)||(r="selectionStart"in(r=nR)&&nC(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},nI&&nA(nI,r)||(nI=r,0<(r=lY(nP,"onSelect")).length&&(t=new tU("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=nR)))}function nD(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var nk={animationend:nD("Animation","AnimationEnd"),animationiteration:nD("Animation","AnimationIteration"),animationstart:nD("Animation","AnimationStart"),transitionrun:nD("Transition","TransitionRun"),transitionstart:nD("Transition","TransitionStart"),transitioncancel:nD("Transition","TransitionCancel"),transitionend:nD("Transition","TransitionEnd")},nO={},nN={};function nF(e){if(nO[e])return nO[e];if(!nk[e])return e;var t,n=nk[e];for(t in n)if(n.hasOwnProperty(t)&&t in nN)return nO[e]=n[t];return e}eZ&&(nN=document.createElement("div").style,"AnimationEvent"in window||(delete nk.animationend.animation,delete nk.animationiteration.animation,delete nk.animationstart.animation),"TransitionEvent"in window||delete nk.transitionend.transition);var nU=nF("animationend"),nz=nF("animationiteration"),nH=nF("animationstart"),nG=nF("transitionrun"),nV=nF("transitionstart"),nj=nF("transitioncancel"),nW=nF("transitionend"),nX=new Map,nJ="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function nY(e,t){nX.set(e,t),e$(t,[e])}var nK=[],nq=0,n$=0;function nQ(){for(var e=nq,t=n$=nq=0;t<e;){var n=nK[t];nK[t++]=null;var r=nK[t];nK[t++]=null;var i=nK[t];nK[t++]=null;var a=nK[t];if(nK[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==a&&n2(n,i,a)}}function nZ(e,t,n,r){nK[nq++]=e,nK[nq++]=t,nK[nq++]=n,nK[nq++]=r,n$|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function n0(e,t,n,r){return nZ(e,t,n,r),n3(e)}function n1(e,t){return nZ(e,null,null,t),n3(e)}function n2(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(i=!0)),e=a,a=a.return;i&&null!==t&&3===e.tag&&(a=e.stateNode,i=31-ey(n),null===(e=(a=a.hiddenUpdates)[i])?a[i]=[t]:e.push(t),t.lane=0x20000000|n)}function n3(e){if(50<sZ)throw sZ=0,s0=null,Error(l(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var n4={},n5=new WeakMap;function n9(e,t){if("object"==typeof e&&null!==e){var n=n5.get(e);return void 0!==n?n:(t={value:e,source:t,stack:k(t)},n5.set(e,t),t)}return{value:e,source:t,stack:k(t)}}var n6=[],n8=0,n7=null,re=0,rt=[],rn=0,rr=null,ri=1,ra="";function ro(e,t){n6[n8++]=re,n6[n8++]=n7,n7=e,re=t}function rs(e,t,n){rt[rn++]=ri,rt[rn++]=ra,rt[rn++]=rr,rr=e;var r=ri;e=ra;var i=32-ey(r)-1;r&=~(1<<i),n+=1;var a=32-ey(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ri=1<<32-ey(t)+i|n<<i|r,ra=a+e}else ri=1<<a|n<<i|r,ra=e}function rl(e){null!==e.return&&(ro(e,1),rs(e,1,0))}function ru(e){for(;e===n7;)n7=n6[--n8],n6[n8]=null,re=n6[--n8],n6[n8]=null;for(;e===rr;)rr=rt[--rn],rt[rn]=null,ra=rt[--rn],rt[rn]=null,ri=rt[--rn],rt[rn]=null}var rc=null,rd=null,rh=!1,rf=null,rp=!1,rm=Error(l(519));function rg(e){throw r_(n9(Error(l(418,"")),e)),rm}function rv(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ek]=e,t[eO]=r,n){case"dialog":lH("cancel",t),lH("close",t);break;case"iframe":case"object":case"embed":lH("load",t);break;case"video":case"audio":for(n=0;n<lF.length;n++)lH(lF[n],t);break;case"source":lH("error",t);break;case"img":case"image":case"link":lH("error",t),lH("load",t);break;case"details":lH("toggle",t);break;case"input":lH("invalid",t),ti(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),e8(t);break;case"select":lH("invalid",t);break;case"textarea":lH("invalid",t),tl(t,r.value,r.defaultValue,r.children),e8(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||l0(t.textContent,n)?(null!=r.popover&&(lH("beforetoggle",t),lH("toggle",t)),null!=r.onScroll&&lH("scroll",t),null!=r.onScrollEnd&&lH("scrollend",t),null!=r.onClick&&(t.onclick=l1),t=!0):t=!1,t||rg(e)}function ry(e){for(rc=e.return;rc;)switch(rc.tag){case 3:case 27:rp=!0;return;case 5:case 13:rp=!1;return;default:rc=rc.return}}function rb(e){if(e!==rc)return!1;if(!rh)return ry(e),rh=!0,!1;var t,n=!1;if((t=3!==e.tag&&27!==e.tag)&&((t=5===e.tag)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ue(e.type,e.memoizedProps)),t=!t),t&&(n=!0),n&&rd&&rg(e),ry(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));t:{for(n=0,e=e.nextSibling;e;){if(8===e.nodeType){if("/$"===(t=e.data)){if(0===n){rd=uc(e.nextSibling);break t}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++}e=e.nextSibling}rd=null}}else rd=rc?uc(e.stateNode.nextSibling):null;return!0}function rx(){rd=rc=null,rh=!1}function r_(e){null===rf?rf=[e]:rf.push(e)}var rS=Error(l(460)),rA=Error(l(474)),rw=Error(l(542)),rE={then:function(){}};function rM(e){return"fulfilled"===(e=e.status)||"rejected"===e}function rC(){}function rT(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(rC,rC),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw rI(e=t.reason),e;default:if("string"==typeof t.status)t.then(rC,rC);else{if(null!==(e=sM)&&100<e.shellSuspendCounter)throw Error(l(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw rI(e=t.reason),e}throw rR=t,rS}}var rR=null;function rP(){if(null===rR)throw Error(l(459));var e=rR;return rR=null,e}function rI(e){if(e===rS||e===rw)throw Error(l(483))}var rB="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},rL=a.unstable_scheduleCallback,rD=a.unstable_NormalPriority,rk={$$typeof:v,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rO(){return{controller:new rB,data:new Map,refCount:0}}function rN(e){e.refCount--,0===e.refCount&&rL(rD,function(){e.controller.abort()})}var rF=null,rU=0,rz=0,rH=null;function rG(){if(0==--rU&&null!==rF){null!==rH&&(rH.status="fulfilled");var e=rF;rF=null,rz=0,rH=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var rV=j(null),rj=j(0);function rW(e,t){X(rj,e=sD),X(rV,t),sD=e|t.baseLanes}function rX(){X(rj,sD),X(rV,rV.current)}function rJ(){sD=rj.current,W(rV),W(rj)}var rY=P.S;P.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===rF){var n=rF=[];rU=0,rz=lL(),rH={status:"pending",value:void 0,then:function(e){n.push(e)}}}rU++,t.then(rG,rG)}(0,t),null!==rY&&rY(e,t)};var rK=j(null);function rq(){var e=rK.current;return null!==e?e:sM.pooledCache}function r$(e,t){null===t?X(rK,rK.current):X(rK,t.pool)}function rQ(){var e=rq();return null===e?null:{parent:rk._currentValue,pool:e}}var rZ=0,r0=null,r1=null,r2=null,r3=!1,r4=!1,r5=!1,r9=0,r6=0,r8=null,r7=0;function ie(){throw Error(l(321))}function it(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nS(e[n],t[n]))return!1;return!0}function ir(e,t,n,r,i,a){return rZ=a,r0=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=null===e||null===e.memoizedState?au:ac,r5=!1,a=n(r,i),r5=!1,r4&&(a=ia(t,n,r,i)),ii(e),a}function ii(e){P.H=al;var t=null!==r1&&null!==r1.next;if(rZ=0,r2=r1=r0=null,r3=!1,r6=0,r8=null,t)throw Error(l(300));null===e||aj||null!==(e=e.dependencies)&&of(e)&&(aj=!0)}function ia(e,t,n,r){r0=e;var i=0;do{if(r4&&(r8=null),r6=0,r4=!1,25<=i)throw Error(l(301));if(i+=1,r2=r1=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}P.H=ad,a=t(n,r)}while(r4);return a}function io(){var e=P.H,t=e.useState()[0];return t="function"==typeof t.then?ih(t):t,e=e.useState()[0],(null!==r1?r1.memoizedState:null)!==e&&(r0.flags|=1024),t}function is(){var e=0!==r9;return r9=0,e}function il(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function iu(e){if(r3){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}r3=!1}rZ=0,r2=r1=r0=null,r4=!1,r6=r9=0,r8=null}function ic(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===r2?r0.memoizedState=r2=e:r2=r2.next=e,r2}function id(){if(null===r1){var e=r0.alternate;e=null!==e?e.memoizedState:null}else e=r1.next;var t=null===r2?r0.memoizedState:r2.next;if(null!==t)r2=t,r1=e;else{if(null===e){if(null===r0.alternate)throw Error(l(467));throw Error(l(310))}e={memoizedState:(r1=e).memoizedState,baseState:r1.baseState,baseQueue:r1.baseQueue,queue:r1.queue,next:null},null===r2?r0.memoizedState=r2=e:r2=r2.next=e}return r2}function ih(e){var t=r6;return r6+=1,null===r8&&(r8=[]),e=rT(r8,e,t),t=r0,null===(null===r2?t.memoizedState:r2.next)&&(t=t.alternate,P.H=null===t||null===t.memoizedState?au:ac),e}function ip(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return ih(e);if(e.$$typeof===v)return om(e)}throw Error(l(438,String(e)))}function im(e){var t=null,n=r0.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=r0.alternate;null!==r&&null!==(r=r.updateQueue)&&null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===n&&(n=i(),r0.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=w;return t.index++,n}function ig(e,t){return"function"==typeof t?t(e):t}function iv(e){return iy(id(),r1,e)}function iy(e,t,n){var r=e.queue;if(null===r)throw Error(l(311));r.lastRenderedReducer=n;var i=e.baseQueue,a=r.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}t.baseQueue=i=a,r.pending=null}if(a=e.baseState,null===i)e.memoizedState=a;else{t=i.next;var s=o=null,u=null,c=t,d=!1;do{var h=-0x20000001&c.lane;if(h!==c.lane?(sT&h)===h:(rZ&h)===h){var f=c.revertLane;if(0===f)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===rz&&(d=!0);else if((rZ&f)===f){c=c.next,f===rz&&(d=!0);continue}else h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(s=u=h,o=a):u=u.next=h,r0.lanes|=f,sO|=f;h=c.action,r5&&n(a,h),a=c.hasEagerState?c.eagerState:n(a,h)}else f={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(s=u=f,o=a):u=u.next=f,r0.lanes|=h,sO|=h;c=c.next}while(null!==c&&c!==t);if(null===u?o=a:u.next=s,!nS(a,e.memoizedState)&&(aj=!0,d&&null!==(n=rH)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=u,r.lastRenderedState=a}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function ib(e){var t=id(),n=t.queue;if(null===n)throw Error(l(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);nS(a,t.memoizedState)||(aj=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ix(e,t,n){var r=r0,i=id(),a=rh;if(a){if(void 0===n)throw Error(l(407));n=n()}else n=t();var o=!nS((r1||i).memoizedState,n);if(o&&(i.memoizedState=n,aj=!0),i=i.queue,iX(iA.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||null!==r2&&1&r2.memoizedState.tag){if(r.flags|=2048,iz(9,iH(),iS.bind(null,r,i,n,t),null),null===sM)throw Error(l(349));a||0!=(60&rZ)||i_(r,t,n)}return n}function i_(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=r0.updateQueue)?(t=i(),r0.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function iS(e,t,n,r){t.value=n,t.getSnapshot=r,iw(t)&&iE(e)}function iA(e,t,n){return n(function(){iw(t)&&iE(e)})}function iw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nS(e,n)}catch(e){return!0}}function iE(e){var t=n1(e,2);null!==t&&s3(t,e,2)}function iM(e){var t=ic();if("function"==typeof e){var n=e;if(e=n(),r5){ev(!0);try{n()}finally{ev(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ig,lastRenderedState:e},t}function iC(e,t,n,r){return e.baseState=n,iy(e,r1,"function"==typeof r?r:ig)}function iT(e,t,n,r,i){if(aa(e))throw Error(l(485));if(null!==(e=t.action)){var a={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==P.T?n(!0):a.isTransition=!1,r(a),null===(n=t.pending)?(a.next=t.pending=a,iR(t,a)):(a.next=n.next,t.pending=n.next=a)}}function iR(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=P.T,o={};P.T=o;try{var s=n(i,r),l=P.S;null!==l&&l(o,s),iP(e,t,s)}catch(n){iB(e,t,n)}finally{P.T=a}}else try{a=n(i,r),iP(e,t,a)}catch(n){iB(e,t,n)}}function iP(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){iI(e,t,n)},function(n){return iB(e,t,n)}):iI(e,t,n)}function iI(e,t,n){t.status="fulfilled",t.value=n,iL(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,iR(e,n)))}function iB(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do t.status="rejected",t.reason=n,iL(t),t=t.next;while(t!==r)}e.action=null}function iL(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function iD(e,t){return t}function ik(e,t){if(rh){var n=sM.formState;if(null!==n){t:{var r=r0;if(rh){if(rd){n:{for(var i=rd,a=rp;8!==i.nodeType;)if(!a||null===(i=uc(i.nextSibling))){i=null;break n}i="F!"===(a=i.data)||"F"===a?i:null}if(i){rd=uc(i.nextSibling),r="F!"===i.data;break t}}rg(r)}r=!1}r&&(t=n[0])}}return(n=ic()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iD,lastRenderedState:t},n.queue=r,n=an.bind(null,r0,r),r.dispatch=n,r=iM(!1),a=ai.bind(null,r0,!1,r.queue),r=ic(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=iT.bind(null,r0,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function iO(e){return iN(id(),r1,e)}function iN(e,t,n){if(t=iy(e,t,iD)[0],e=iv(ig)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=ih(t)}catch(e){if(e===rS)throw rw;throw e}else r=t;var i=(t=id()).queue,a=i.dispatch;return n!==t.memoizedState&&(r0.flags|=2048,iz(9,iH(),iF.bind(null,i,n),null)),[r,a,e]}function iF(e,t){e.action=t}function iU(e){var t=id(),n=r1;if(null!==n)return iN(t,n,e);id(),t=t.memoizedState;var r=(n=id()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function iz(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=r0.updateQueue)&&(t=i(),r0.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function iH(){return{destroy:void 0,resource:void 0}}function iG(){return id().memoizedState}function iV(e,t,n,r){var i=ic();r=void 0===r?null:r,r0.flags|=e,i.memoizedState=iz(1|t,iH(),n,r)}function ij(e,t,n,r){var i=id();r=void 0===r?null:r;var a=i.memoizedState.inst;null!==r1&&null!==r&&it(r,r1.memoizedState.deps)?i.memoizedState=iz(t,a,n,r):(r0.flags|=e,i.memoizedState=iz(1|t,a,n,r))}function iW(e,t){iV(8390656,8,e,t)}function iX(e,t){ij(2048,8,e,t)}function iJ(e,t){return ij(4,2,e,t)}function iY(e,t){return ij(4,4,e,t)}function iK(e,t){if("function"==typeof t){var n=t(e=e());return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function iq(e,t,n){n=null!=n?n.concat([e]):null,ij(4,4,iK.bind(null,t,e),n)}function i$(){}function iQ(e,t){var n=id();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&it(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function iZ(e,t){var n=id();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&it(t,r[1]))return r[0];if(r=e(),r5){ev(!0);try{e()}finally{ev(!1)}}return n.memoizedState=[r,t],r}function i0(e,t,n){return void 0===n||0!=(0x40000000&rZ)?e.memoizedState=t:(e.memoizedState=n,e=s2(),r0.lanes|=e,sO|=e,n)}function i1(e,t,n,r){return nS(n,t)?n:null!==rV.current?(nS(e=i0(e,n,r),t)||(aj=!0),e):0==(42&rZ)?(aj=!0,e.memoizedState=n):(e=s2(),r0.lanes|=e,sO|=e,t)}function i2(e,t,n,r,i){var a=z.p;z.p=0!==a&&8>a?a:8;var o=P.T,s={};P.T=s,ai(e,!1,t,n);try{var l=i(),u=P.S;if(null!==u&&u(s,l),null!==l&&"object"==typeof l&&"function"==typeof l.then){var c,d,h=(c=[],d={status:"pending",value:null,reason:null,then:function(e){c.push(e)}},l.then(function(){d.status="fulfilled",d.value=r;for(var e=0;e<c.length;e++)(0,c[e])(r)},function(e){for(d.status="rejected",d.reason=e,e=0;e<c.length;e++)(0,c[e])(void 0)}),d);ar(e,t,h,s1(e))}else ar(e,t,r,s1(e))}catch(n){ar(e,t,{then:function(){},status:"rejected",reason:n},s1())}finally{z.p=a,P.T=o}}function i3(){}function i4(e,t,n,r){if(5!==e.tag)throw Error(l(476));var i=i5(e).queue;i2(e,i,t,H,null===n?i3:function(){return i9(e),n(r)})}function i5(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ig,lastRenderedState:H},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ig,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function i9(e){var t=i5(e).next.queue;ar(e,t,{},s1())}function i6(){return om(uU)}function i8(){return id().memoizedState}function i7(){return id().memoizedState}function ae(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=s1(),r=oS(t,e=o_(n),n);null!==r&&(s3(r,t,n),oA(r,t,n)),t={cache:rO()},e.payload=t;return}t=t.return}}function at(e,t,n){var r=s1();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},aa(e)?ao(t,n):null!==(n=n0(e,t,n,r))&&(s3(n,e,r),as(n,t,r))}function an(e,t,n){ar(e,t,n,s1())}function ar(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(aa(e))ao(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,nS(s,o))return nZ(e,t,i,0),null===sM&&nQ(),!1}catch(e){}finally{}if(null!==(n=n0(e,t,i,r)))return s3(n,e,r),as(n,t,r),!0}return!1}function ai(e,t,n,r){if(r={lane:2,revertLane:lL(),action:r,hasEagerState:!1,eagerState:null,next:null},aa(e)){if(t)throw Error(l(479))}else null!==(t=n0(e,n,r,2))&&s3(t,e,2)}function aa(e){var t=e.alternate;return e===r0||null!==t&&t===r0}function ao(e,t){r4=r3=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!=(4194176&n)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,eI(e,n)}}i=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};var al={readContext:om,use:ip,useCallback:ie,useContext:ie,useEffect:ie,useImperativeHandle:ie,useLayoutEffect:ie,useInsertionEffect:ie,useMemo:ie,useReducer:ie,useRef:ie,useState:ie,useDebugValue:ie,useDeferredValue:ie,useTransition:ie,useSyncExternalStore:ie,useId:ie};al.useCacheRefresh=ie,al.useMemoCache=ie,al.useHostTransitionStatus=ie,al.useFormState=ie,al.useActionState=ie,al.useOptimistic=ie;var au={readContext:om,use:ip,useCallback:function(e,t){return ic().memoizedState=[e,void 0===t?null:t],e},useContext:om,useEffect:iW,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,iV(4194308,4,iK.bind(null,t,e),n)},useLayoutEffect:function(e,t){return iV(4194308,4,e,t)},useInsertionEffect:function(e,t){iV(4,2,e,t)},useMemo:function(e,t){var n=ic();t=void 0===t?null:t;var r=e();if(r5){ev(!0);try{e()}finally{ev(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=ic();if(void 0!==n){var i=n(t);if(r5){ev(!0);try{n(t)}finally{ev(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=at.bind(null,r0,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ic().memoizedState=e},useState:function(e){var t=(e=iM(e)).queue,n=an.bind(null,r0,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:i$,useDeferredValue:function(e,t){return i0(ic(),e,t)},useTransition:function(){var e=iM(!1);return e=i2.bind(null,r0,e.queue,!0,!1),ic().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=r0,i=ic();if(rh){if(void 0===n)throw Error(l(407));n=n()}else{if(n=t(),null===sM)throw Error(l(349));0!=(60&sT)||i_(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,iW(iA.bind(null,r,a,e),[e]),r.flags|=2048,iz(9,iH(),iS.bind(null,r,a,n,t),null),n},useId:function(){var e=ic(),t=sM.identifierPrefix;if(rh){var n=ra,r=ri;t=":"+t+"R"+(n=(r&~(1<<32-ey(r)-1)).toString(32)+n),0<(n=r9++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=r7++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return ic().memoizedState=ae.bind(null,r0)}};au.useMemoCache=im,au.useHostTransitionStatus=i6,au.useFormState=ik,au.useActionState=ik,au.useOptimistic=function(e){var t=ic();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ai.bind(null,r0,!0,n),n.dispatch=t,[e,t]};var ac={readContext:om,use:ip,useCallback:iQ,useContext:om,useEffect:iX,useImperativeHandle:iq,useInsertionEffect:iJ,useLayoutEffect:iY,useMemo:iZ,useReducer:iv,useRef:iG,useState:function(){return iv(ig)},useDebugValue:i$,useDeferredValue:function(e,t){return i1(id(),r1.memoizedState,e,t)},useTransition:function(){var e=iv(ig)[0],t=id().memoizedState;return["boolean"==typeof e?e:ih(e),t]},useSyncExternalStore:ix,useId:i8};ac.useCacheRefresh=i7,ac.useMemoCache=im,ac.useHostTransitionStatus=i6,ac.useFormState=iO,ac.useActionState=iO,ac.useOptimistic=function(e,t){return iC(id(),r1,e,t)};var ad={readContext:om,use:ip,useCallback:iQ,useContext:om,useEffect:iX,useImperativeHandle:iq,useInsertionEffect:iJ,useLayoutEffect:iY,useMemo:iZ,useReducer:ib,useRef:iG,useState:function(){return ib(ig)},useDebugValue:i$,useDeferredValue:function(e,t){var n=id();return null===r1?i0(n,e,t):i1(n,r1.memoizedState,e,t)},useTransition:function(){var e=ib(ig)[0],t=id().memoizedState;return["boolean"==typeof e?e:ih(e),t]},useSyncExternalStore:ix,useId:i8};ad.useCacheRefresh=i7,ad.useMemoCache=im,ad.useHostTransitionStatus=i6,ad.useFormState=iU,ad.useActionState=iU,ad.useOptimistic=function(e,t){var n=id();return null!==r1?iC(n,r1,e,t):(n.baseState=e,[e,n.queue.dispatch])};var ah=null,af=0;function ap(e){var t=af;return af+=1,null===ah&&(ah=[]),rT(ah,e,t)}function am(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ag(e,t){if(t.$$typeof===u)throw Error(l(525));throw Error(l(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function av(e){return(0,e._init)(e._payload)}function ay(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=sc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return(t.index=r,e)?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=0x2000002,n):r:(t.flags|=0x2000002,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=0x2000002),t}function s(e,t,n,r){return null===t||6!==t.tag?(t=sm(n,e.mode,r)).return=e:(t=i(t,n)).return=e,t}function u(e,t,n,r){var a=n.type;return a===h?p(e,t,n.props.children,r,n.key):(null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===S&&av(a)===t.type)?am(t=i(t,n.props),n):am(t=sh(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function f(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=sg(n,e.mode,r)).return=e:(t=i(t,n.children||[])).return=e,t}function p(e,t,n,r,a){return null===t||7!==t.tag?(t=sf(n,e.mode,r,a)).return=e:(t=i(t,n)).return=e,t}function m(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=sm(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case c:return am(n=sh(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case d:return(t=sg(t,e.mode,n)).return=e,t;case S:return m(e,t=(0,t._init)(t._payload),n)}if(U(t)||M(t))return(t=sf(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return m(e,ap(t),n);if(t.$$typeof===v)return m(e,og(e,t),n);ag(e,t)}return null}function g(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case c:return n.key===i?u(e,t,n,r):null;case d:return n.key===i?f(e,t,n,r):null;case S:return g(e,t,n=(i=n._init)(n._payload),r)}if(U(n)||M(n))return null!==i?null:p(e,t,n,r,null);if("function"==typeof n.then)return g(e,t,ap(n),r);if(n.$$typeof===v)return g(e,t,og(e,n),r);ag(e,n)}return null}function y(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case c:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case d:return f(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(U(r)||M(r))return p(t,e=e.get(n)||null,r,i,null);if("function"==typeof r.then)return y(e,t,n,ap(r),i);if(r.$$typeof===v)return y(e,t,n,og(t,r),i);ag(t,r)}return null}return function(s,u,f,p){try{af=0;var b=function s(u,f,p,b){if("object"==typeof p&&null!==p&&p.type===h&&null===p.key&&(p=p.props.children),"object"==typeof p&&null!==p){switch(p.$$typeof){case c:t:{for(var x=p.key;null!==f;){if(f.key===x){if((x=p.type)===h){if(7===f.tag){n(u,f.sibling),(b=i(f,p.props.children)).return=u,u=b;break t}}else if(f.elementType===x||"object"==typeof x&&null!==x&&x.$$typeof===S&&av(x)===f.type){n(u,f.sibling),am(b=i(f,p.props),p),b.return=u,u=b;break t}n(u,f);break}t(u,f),f=f.sibling}p.type===h?(b=sf(p.props.children,u.mode,b,p.key)).return=u:(am(b=sh(p.type,p.key,p.props,null,u.mode,b),p),b.return=u),u=b}return o(u);case d:t:{for(x=p.key;null!==f;){if(f.key===x){if(4===f.tag&&f.stateNode.containerInfo===p.containerInfo&&f.stateNode.implementation===p.implementation){n(u,f.sibling),(b=i(f,p.children||[])).return=u,u=b;break t}n(u,f);break}t(u,f),f=f.sibling}(b=sg(p,u.mode,b)).return=u,u=b}return o(u);case S:return s(u,f,p=(x=p._init)(p._payload),b)}if(U(p))return function(i,o,s,l){for(var u=null,c=null,d=o,h=o=0,f=null;null!==d&&h<s.length;h++){d.index>h?(f=d,d=null):f=d.sibling;var p=g(i,d,s[h],l);if(null===p){null===d&&(d=f);break}e&&d&&null===p.alternate&&t(i,d),o=a(p,o,h),null===c?u=p:c.sibling=p,c=p,d=f}if(h===s.length)return n(i,d),rh&&ro(i,h),u;if(null===d){for(;h<s.length;h++)null!==(d=m(i,s[h],l))&&(o=a(d,o,h),null===c?u=d:c.sibling=d,c=d);return rh&&ro(i,h),u}for(d=r(d);h<s.length;h++)null!==(f=y(d,i,h,s[h],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?h:f.key),o=a(f,o,h),null===c?u=f:c.sibling=f,c=f);return e&&d.forEach(function(e){return t(i,e)}),rh&&ro(i,h),u}(u,f,p,b);if(M(p)){if("function"!=typeof(x=M(p)))throw Error(l(150));return function(i,o,s,u){if(null==s)throw Error(l(151));for(var c=null,d=null,h=o,f=o=0,p=null,v=s.next();null!==h&&!v.done;f++,v=s.next()){h.index>f?(p=h,h=null):p=h.sibling;var b=g(i,h,v.value,u);if(null===b){null===h&&(h=p);break}e&&h&&null===b.alternate&&t(i,h),o=a(b,o,f),null===d?c=b:d.sibling=b,d=b,h=p}if(v.done)return n(i,h),rh&&ro(i,f),c;if(null===h){for(;!v.done;f++,v=s.next())null!==(v=m(i,v.value,u))&&(o=a(v,o,f),null===d?c=v:d.sibling=v,d=v);return rh&&ro(i,f),c}for(h=r(h);!v.done;f++,v=s.next())null!==(v=y(h,i,f,v.value,u))&&(e&&null!==v.alternate&&h.delete(null===v.key?f:v.key),o=a(v,o,f),null===d?c=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(i,e)}),rh&&ro(i,f),c}(u,f,p=x.call(p),b)}if("function"==typeof p.then)return s(u,f,ap(p),b);if(p.$$typeof===v)return s(u,f,og(u,p),b);ag(u,p)}return"string"==typeof p&&""!==p||"number"==typeof p||"bigint"==typeof p?(p=""+p,null!==f&&6===f.tag?(n(u,f.sibling),(b=i(f,p)).return=u):(n(u,f),(b=sm(p,u.mode,b)).return=u),o(u=b)):n(u,f)}(s,u,f,p);return ah=null,b}catch(e){if(e===rS||e===rw)throw e;var x=sl(29,e,null,s.mode);return x.lanes=p,x.return=s,x}finally{}}}var ab=ay(!0),ax=ay(!1),a_=j(null),aS=null;function aA(e){var t=e.alternate;X(aC,1&aC.current),X(a_,e),null===aS&&(null===t||null!==rV.current?aS=e:null!==t.memoizedState&&(aS=e))}function aw(e){if(22===e.tag){if(X(aC,aC.current),X(a_,e),null===aS){var t=e.alternate;null!==t&&null!==t.memoizedState&&(aS=e)}}else aE(e)}function aE(){X(aC,aC.current),X(a_,a_.current)}function aM(e){W(a_),aS===e&&(aS=null),W(aC)}var aC=j(0);function aT(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||uu(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function aR(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:I({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var aP={isMounted:function(e){return!!(e=e._reactInternals)&&O(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=s1(),i=o_(r);i.payload=t,null!=n&&(i.callback=n),null!==(t=oS(e,i,r))&&(s3(t,e,r),oA(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=s1(),i=o_(r);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=oS(e,i,r))&&(s3(t,e,r),oA(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=s1(),r=o_(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=oS(e,r,n))&&(s3(t,e,n),oA(t,e,n))}};function aI(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||!nA(n,r)||!nA(i,a)}function aB(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&aP.enqueueReplaceState(t,t.state,null)}function aL(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=I({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var aD="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit){process.emit("uncaughtException",e);return}console.error(e)};function ak(e){aD(e)}function aO(e){console.error(e)}function aN(e){aD(e)}function aF(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function aU(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function az(e,t,n){return(n=o_(n)).tag=3,n.payload={element:null},n.callback=function(){aF(e,t)},n}function aH(e){return(e=o_(e)).tag=3,e}function aG(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){aU(t,n,r)}}var o=n.stateNode;null!==o&&"function"==typeof o.componentDidCatch&&(e.callback=function(){aU(t,n,r),"function"!=typeof i&&(null===sJ?sJ=new Set([this]):sJ.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var aV=Error(l(461)),aj=!1;function aW(e,t,n,r){t.child=null===e?ax(t,null,n,r):ab(t,e.child,n,r)}function aX(e,t,n,r,i){n=n.render;var a=t.ref;if("ref"in r){var o={};for(var s in r)"ref"!==s&&(o[s]=r[s])}else o=r;return(op(t),r=ir(e,t,n,o,a,i),s=is(),null===e||aj)?(rh&&s&&rl(t),t.flags|=1,aW(e,t,r,i),t.child):(il(e,t,i),on(e,t,i))}function aJ(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||su(a)||void 0!==a.defaultProps||null!==n.compare?((e=sh(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,aY(e,t,a,r,i))}if(a=e.child,!or(e,i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:nA)(o,r)&&e.ref===t.ref)return on(e,t,i)}return t.flags|=1,(e=sc(a,r)).ref=t.ref,e.return=t,t.child=e}function aY(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(nA(a,r)&&e.ref===t.ref){if(aj=!1,t.pendingProps=r=a,!or(e,i))return t.lanes=e.lanes,on(e,t,i);0!=(131072&e.flags)&&(aj=!0)}}return aQ(e,t,n,r,i)}function aK(e,t,n){var r=t.pendingProps,i=r.children,a=0!=(2&t.stateNode._pendingVisibility),o=null!==e?e.memoizedState:null;if(a$(e,t),"hidden"===r.mode||a){if(0!=(128&t.flags)){if(r=null!==o?o.baseLanes|n:n,null!==e){for(a=0,i=t.child=e.child;null!==i;)a=a|i.lanes|i.childLanes,i=i.sibling;t.childLanes=a&~r}else t.childLanes=0,t.child=null;return aq(e,t,r,n)}if(0==(0x20000000&n))return t.lanes=t.childLanes=0x20000000,aq(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&r$(t,null!==o?o.cachePool:null),null!==o?rW(t,o):rX(),aw(t)}else null!==o?(r$(t,o.cachePool),rW(t,o),aE(t),t.memoizedState=null):(null!==e&&r$(t,null),rX(),aE(t));return aW(e,t,i,n),t.child}function aq(e,t,n,r){var i=rq();return i=null===i?null:{parent:rk._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&r$(t,null),rX(),aw(t),null!==e&&oh(e,t,r,!0),null}function a$(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(l(284));(null===e||e.ref!==n)&&(t.flags|=2097664)}}function aQ(e,t,n,r,i){return(op(t),n=ir(e,t,n,r,void 0,i),r=is(),null===e||aj)?(rh&&r&&rl(t),t.flags|=1,aW(e,t,n,i),t.child):(il(e,t,i),on(e,t,i))}function aZ(e,t,n,r,i,a){return(op(t),t.updateQueue=null,n=ia(t,r,n,i),ii(e),r=is(),null===e||aj)?(rh&&r&&rl(t),t.flags|=1,aW(e,t,n,a),t.child):(il(e,t,a),on(e,t,a))}function a0(e,t,n,r,i){if(op(t),null===t.stateNode){var a=n4,o=n.contextType;"object"==typeof o&&null!==o&&(a=om(o)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=aP,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},ob(t),o=n.contextType,a.context="object"==typeof o&&null!==o?om(o):n4,a.state=t.memoizedState,"function"==typeof(o=n.getDerivedStateFromProps)&&(aR(t,n,o,r),a.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(o=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),o!==a.state&&aP.enqueueReplaceState(a,a.state,null),oC(t,r,a,i),oM(),a.state=t.memoizedState),"function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var s=t.memoizedProps,l=aL(n,s);a.props=l;var u=a.context,c=n.contextType;o=n4,"object"==typeof c&&null!==c&&(o=om(c));var d=n.getDerivedStateFromProps;c="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate,s=t.pendingProps!==s,c||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s||u!==o)&&aB(t,a,r,o),oy=!1;var h=t.memoizedState;a.state=h,oC(t,r,a,i),oM(),u=t.memoizedState,s||h!==u||oy?("function"==typeof d&&(aR(t,n,d,r),u=t.memoizedState),(l=oy||aI(t,n,l,r,h,u,o))?(c||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=o,r=l):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,ox(e,t),c=aL(n,o=t.memoizedProps),a.props=c,d=t.pendingProps,h=a.context,u=n.contextType,l=n4,"object"==typeof u&&null!==u&&(l=om(u)),(u="function"==typeof(s=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==d||h!==l)&&aB(t,a,r,l),oy=!1,h=t.memoizedState,a.state=h,oC(t,r,a,i),oM();var f=t.memoizedState;o!==d||h!==f||oy||null!==e&&null!==e.dependencies&&of(e.dependencies)?("function"==typeof s&&(aR(t,n,s,r),f=t.memoizedState),(c=oy||aI(t,n,c,r,h,f,l)||null!==e&&null!==e.dependencies&&of(e.dependencies))?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,a$(e,t),r=0!=(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=ab(t,e.child,null,i),t.child=ab(t,null,n,i)):aW(e,t,n,i),t.memoizedState=a.state,e=t.child):e=on(e,t,i),e}function a1(e,t,n,r){return rx(),t.flags|=256,aW(e,t,n,r),t.child}var a2={dehydrated:null,treeContext:null,retryLane:0};function a3(e){return{baseLanes:e,cachePool:rQ()}}function a4(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=sU),e}function a5(e,t,n){var r,i=t.pendingProps,a=!1,o=0!=(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!=(2&aC.current)),r&&(a=!0,t.flags&=-129),r=0!=(32&t.flags),t.flags&=-33,null===e){if(rh){if(a?aA(t):aE(t),rh){var s,u=rd;if(s=u){r:{for(s=u,u=rp;8!==s.nodeType;)if(!u||null===(s=uc(s.nextSibling))){u=null;break r}u=s}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==rr?{id:ri,overflow:ra}:null,retryLane:0x20000000},(s=sl(18,null,null,0)).stateNode=u,s.return=t,t.child=s,rc=t,rd=null,s=!0):s=!1}s||rg(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return uu(u)?t.lanes=16:t.lanes=0x20000000,null;aM(t)}return(u=i.children,i=i.fallback,a)?(aE(t),u=a6({mode:"hidden",children:u},a=t.mode),i=sf(i,a,n,null),u.return=t,i.return=t,u.sibling=i,t.child=u,(a=t.child).memoizedState=a3(n),a.childLanes=a4(e,r,n),t.memoizedState=a2,i):(aA(t),a9(t,u))}if(null!==(s=e.memoizedState)&&null!==(u=s.dehydrated)){if(o)256&t.flags?(aA(t),t.flags&=-257,t=a8(e,t,n)):null!==t.memoizedState?(aE(t),t.child=e.child,t.flags|=128,t=null):(aE(t),a=i.fallback,u=t.mode,i=a6({mode:"visible",children:i.children},u),a=sf(a,u,n,null),a.flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,ab(t,e.child,null,n),(i=t.child).memoizedState=a3(n),i.childLanes=a4(e,r,n),t.memoizedState=a2,t=a);else if(aA(t),uu(u)){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(i=Error(l(419))).stack="",i.digest=r,r_({value:i,source:null,stack:null}),t=a8(e,t,n)}else if(aj||oh(e,t,n,!1),r=0!=(n&e.childLanes),aj||r){if(null!==(r=sM)){if(0!=(42&(i=n&-n)))i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:i=64;break;case 0x10000000:i=0x8000000;break;default:i=0}if(0!==(i=0!=(i&(r.suspendedLanes|n))?0:i)&&i!==s.retryLane)throw s.retryLane=i,n1(e,i),s3(r,e,i),aV}"$?"===u.data||li(),t=a8(e,t,n)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=s.treeContext,rd=uc(u.nextSibling),rc=t,rh=!0,rf=null,rp=!1,null!==e&&(rt[rn++]=ri,rt[rn++]=ra,rt[rn++]=rr,ri=e.id,ra=e.overflow,rr=t),t=a9(t,i.children),t.flags|=4096);return t}return a?(aE(t),a=i.fallback,u=t.mode,c=(s=e.child).sibling,(i=sc(s,{mode:"hidden",children:i.children})).subtreeFlags=0x1e00000&s.subtreeFlags,null!==c?a=sc(c,a):(a=sf(a,u,n,null),a.flags|=2),a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,null===(u=e.child.memoizedState)?u=a3(n):(null!==(s=u.cachePool)?(c=rk._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=rQ(),u={baseLanes:u.baseLanes|n,cachePool:s}),a.memoizedState=u,a.childLanes=a4(e,r,n),t.memoizedState=a2,i):(aA(t),e=(n=e.child).sibling,(n=sc(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function a9(e,t){return(t=a6({mode:"visible",children:t},e.mode)).return=e,e.child=t}function a6(e,t){return sp(e,t,0,null)}function a8(e,t,n){return ab(t,e.child,null,n),e=a9(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function a7(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),oc(e.return,t,n)}function oe(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function ot(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(aW(e,t,r.children,n),0!=(2&(r=aC.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))t:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&a7(e,n,t);else if(19===e.tag)a7(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(X(aC,r),i){case"forwards":for(i=null,n=t.child;null!==n;)null!==(e=n.alternate)&&null===aT(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),oe(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===aT(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}oe(t,!0,n,null,a);break;case"together":oe(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function on(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),sO|=t.lanes,0==(n&t.childLanes)&&(null===e||(oh(e,t,n,!1),0==(n&t.childLanes))))return null;if(null!==e&&t.child!==e.child)throw Error(l(153));if(null!==t.child){for(n=sc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=sc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function or(e,t){return 0!=(e.lanes&t)||!!(null!==(e=e.dependencies)&&of(e))}function oi(e,t,n){if(null!==e){if(e.memoizedProps!==t.pendingProps)aj=!0;else{if(!or(e,n)&&0==(128&t.flags))return aj=!1,function(e,t,n){switch(t.tag){case 3:$(t,t.stateNode.containerInfo),ol(t,rk,e.memoizedState.cache),rx();break;case 27:case 5:Z(t);break;case 4:$(t,t.stateNode.containerInfo);break;case 10:ol(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r){if(null!==r.dehydrated)return aA(t),t.flags|=128,null;if(0!=(n&t.child.childLanes))return a5(e,t,n);return aA(t),null!==(e=on(e,t,n))?e.sibling:null}aA(t);break;case 19:var i=0!=(128&e.flags);if((r=0!=(n&t.childLanes))||(oh(e,t,n,!1),r=0!=(n&t.childLanes)),i){if(r)return ot(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),X(aC,aC.current),!r)return null;break;case 22:case 23:return t.lanes=0,aK(e,t,n);case 24:ol(t,rk,e.memoizedState.cache)}return on(e,t,n)}(e,t,n);aj=0!=(131072&e.flags)}}else aj=!1,rh&&0!=(1048576&t.flags)&&rs(t,re,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"==typeof r)su(r)?(e=aL(r,e),t.tag=1,t=a0(null,t,r,e,n)):(t.tag=0,t=aQ(null,t,r,e,n));else{if(null!=r){if((i=r.$$typeof)===y){t.tag=11,t=aX(null,t,r,e,n);break t}if(i===_){t.tag=14,t=aJ(null,t,r,e,n);break t}}throw Error(l(306,t=function e(t){if(null==t)return null;if("function"==typeof t)return t.$$typeof===R?null:t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case h:return"Fragment";case d:return"Portal";case p:return"Profiler";case f:return"StrictMode";case b:return"Suspense";case x:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case v:return(t.displayName||"Context")+".Provider";case g:return(t._context.displayName||"Context")+".Consumer";case y:var n=t.render;return(t=t.displayName)||(t=""!==(t=n.displayName||n.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case _:return null!==(n=t.displayName||null)?n:e(t.type)||"Memo";case S:n=t._payload,t=t._init;try{return e(t(n))}catch(e){}}return null}(r)||r,""))}}return t;case 0:return aQ(e,t,t.type,t.pendingProps,n);case 1:return i=aL(r=t.type,t.pendingProps),a0(e,t,r,i,n);case 3:t:{if($(t,t.stateNode.containerInfo),null===e)throw Error(l(387));var a=t.pendingProps;r=(i=t.memoizedState).element,ox(e,t),oC(t,a,null,n);var o=t.memoizedState;if(ol(t,rk,a=o.cache),a!==i.cache&&od(t,[rk],n,!0),oM(),a=o.element,i.isDehydrated){if(i={element:a,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=a1(e,t,a,n);break t}if(a!==r){r_(r=n9(Error(l(424)),t)),t=a1(e,t,a,n);break t}for(rd=uc(t.stateNode.containerInfo.firstChild),rc=t,rh=!0,rf=null,rp=!0,n=ax(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(rx(),a===r){t=on(e,t,n);break t}aW(e,t,a,n)}t=t.child}return t;case 26:return a$(e,t),null===e?(n=ub(t.type,null,t.pendingProps,null))?t.memoizedState=n:rh||(n=t.type,e=t.pendingProps,(r=l6(K.current).createElement(n))[ek]=t,r[eO]=e,l4(r,n,e),eY(r),t.stateNode=r):t.memoizedState=ub(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Z(t),null===e&&rh&&(r=t.stateNode=uh(t.type,t.pendingProps,K.current),rc=t,rp=!0,rd=uc(r.firstChild)),r=t.pendingProps.children,null!==e||rh?aW(e,t,r,n):t.child=ab(t,null,r,n),a$(e,t),t.child;case 5:return null===e&&rh&&((i=r=rd)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[eG])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence")||i!==n.rel||e.getAttribute("href")!==(null==n.href?null:n.href)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin)||e.getAttribute("title")!==(null==n.title?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==n.src?null:n.src)||e.getAttribute("type")!==(null==n.type?null:n.type)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==n.name?null:""+n.name;if("hidden"===n.type&&e.getAttribute("name")===i)return e}if(null===(e=uc(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,rp))?(t.stateNode=r,rc=t,rd=uc(r.firstChild),rp=!1,i=!0):i=!1),i||rg(t)),Z(t),i=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,r=a.children,ue(i,a)?r=null:null!==o&&ue(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=ir(e,t,io,null,null,n),uU._currentValue=i),a$(e,t),aW(e,t,r,n),t.child;case 6:return null===e&&rh&&((e=n=rd)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;)if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n||null===(e=uc(e.nextSibling)))return null;return e}(n,t.pendingProps,rp))?(t.stateNode=n,rc=t,rd=null,e=!0):e=!1),e||rg(t)),null;case 13:return a5(e,t,n);case 4:return $(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ab(t,null,r,n):aW(e,t,r,n),t.child;case 11:return aX(e,t,t.type,t.pendingProps,n);case 7:return aW(e,t,t.pendingProps,n),t.child;case 8:case 12:return aW(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ol(t,t.type,r.value),aW(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,op(t),r=r(i=om(i)),t.flags|=1,aW(e,t,r,n),t.child;case 14:return aJ(e,t,t.type,t.pendingProps,n);case 15:return aY(e,t,t.type,t.pendingProps,n);case 19:return ot(e,t,n);case 22:return aK(e,t,n);case 24:return op(t),r=om(rk),null===e?(null===(i=rq())&&(i=sM,a=rO(),i.pooledCache=a,a.refCount++,null!==a&&(i.pooledCacheLanes|=n),i=a),t.memoizedState={parent:r,cache:i},ob(t),ol(t,rk,i)):(0!=(e.lanes&n)&&(ox(e,t),oC(t,null,null,n),oM()),i=e.memoizedState,a=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),ol(t,rk,r)):(ol(t,rk,r=a.cache),r!==i.cache&&od(t,[rk],n,!0))),aW(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}var oa=j(null),oo=null,os=null;function ol(e,t,n){X(oa,t._currentValue),t._currentValue=n}function ou(e){e._currentValue=oa.current,W(oa)}function oc(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function od(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var a=i.dependencies;if(null!==a){var o=i.child;a=a.firstContext;t:for(;null!==a;){var s=a;a=i;for(var u=0;u<t.length;u++)if(s.context===t[u]){a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),oc(a.return,n,e),r||(o=null);break t}a=s.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(l(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),oc(o,n,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function oh(e,t,n,r){e=null;for(var i=t,a=!1;null!==i;){if(!a){if(0!=(524288&i.flags))a=!0;else if(0!=(262144&i.flags))break}if(10===i.tag){var o=i.alternate;if(null===o)throw Error(l(387));if(null!==(o=o.memoizedProps)){var s=i.type;nS(i.pendingProps.value,o.value)||(null!==e?e.push(s):e=[s])}}else if(i===q.current){if(null===(o=i.alternate))throw Error(l(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(uU):e=[uU])}i=i.return}null!==e&&od(t,e,n,r),t.flags|=262144}function of(e){for(e=e.firstContext;null!==e;){if(!nS(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function op(e){oo=e,os=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function om(e){return ov(oo,e)}function og(e,t){return null===oo&&op(e),ov(e,t)}function ov(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===os){if(null===e)throw Error(l(308));os=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else os=os.next=t;return n}var oy=!1;function ob(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ox(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function o_(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oS(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&sE)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=n3(e),n2(e,null,n),t}return nZ(e,r,t,n),n3(e)}function oA(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194176&n))){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,eI(e,n)}}function ow(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var oE=!1;function oM(){if(oE){var e=rH;if(null!==e)throw e}}function oC(e,t,n,r){oE=!1;var i=e.updateQueue;oy=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&(s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l)}if(null!==a){var d=i.baseState;for(o=0,c=u=l=null,s=a;;){var h=-0x20000001&s.lane,f=h!==s.lane;if(f?(sT&h)===h:(r&h)===h){0!==h&&h===rz&&(oE=!0),null!==c&&(c=c.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});t:{var p=e,m=s;switch(h=t,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(n,d,h);break t}d=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(n,d,h):p))break t;d=I({},d,h);break t;case 2:oy=!0}}null!==(h=s.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[h]:f.push(h))}else f={lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null===a&&(i.shared.lanes=0),sO|=o,e.lanes=o,e.memoizedState=d}}function oT(e,t){if("function"!=typeof e)throw Error(l(191,e));e.call(t)}function oR(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)oT(n[e],t)}function oP(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){lm(t,t.return,e)}}function oI(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(void 0!==s){o.destroy=void 0,i=t;try{s()}catch(e){lm(i,n,e)}}}r=r.next}while(r!==a)}}catch(e){lm(t,t.return,e)}}function oB(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{oR(t,n)}catch(t){lm(e,e.return,t)}}}function oL(e,t,n){n.props=aL(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){lm(e,t,n)}}function oD(e,t){try{var n=e.ref;if(null!==n){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var i=r;break;default:i=r}"function"==typeof n?e.refCleanup=n(i):n.current=i}}catch(n){lm(e,t,n)}}function ok(e,t){var n=e.ref,r=e.refCleanup;if(null!==n){if("function"==typeof r)try{r()}catch(n){lm(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(n){lm(e,t,n)}else n.current=null}}function oO(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){lm(e,e.return,t)}}function oN(e,t,n){try{var r=e.stateNode;(function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,o=null,s=null,u=null,c=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":u=h;default:r.hasOwnProperty(p)||l2(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":a=p;break;case"name":i=p;break;case"checked":c=p;break;case"defaultChecked":d=p;break;case"value":o=p;break;case"defaultValue":s=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(l(137,t));break;default:p!==h&&l2(e,t,f,p,r,h)}}tr(e,o,s,u,c,d,a,i);return;case"select":for(a in p=o=s=f=null,n)if(u=n[a],n.hasOwnProperty(a)&&null!=u)switch(a){case"value":break;case"multiple":p=u;default:r.hasOwnProperty(a)||l2(e,t,a,null,r,u)}for(i in r)if(a=r[i],u=n[i],r.hasOwnProperty(i)&&(null!=a||null!=u))switch(i){case"value":f=a;break;case"defaultValue":s=a;break;case"multiple":o=a;default:a!==u&&l2(e,t,i,a,r,u)}t=s,n=o,r=p,null!=f?to(e,!!n,f,!1):!!r!=!!n&&(null!=t?to(e,!!n,t,!0):to(e,!!n,n?[]:"",!1));return;case"textarea":for(s in p=f=null,n)if(i=n[s],n.hasOwnProperty(s)&&null!=i&&!r.hasOwnProperty(s))switch(s){case"value":case"children":break;default:l2(e,t,s,null,r,i)}for(o in r)if(i=r[o],a=n[o],r.hasOwnProperty(o)&&(null!=i||null!=a))switch(o){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(l(91));break;default:i!==a&&l2(e,t,o,i,r,a)}ts(e,f,p);return;case"option":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m)&&("selected"===m?e.selected=!1:l2(e,t,m,null,r,f));for(u in r)f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p)&&("selected"===u?e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f:l2(e,t,u,f,r,p));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&l2(e,t,g,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(l(137,t));break;default:l2(e,t,c,f,r,p)}return;default:if(tf(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!r.hasOwnProperty(v)&&l3(e,t,v,void 0,r,f);for(d in r)f=r[d],p=n[d],r.hasOwnProperty(d)&&f!==p&&(void 0!==f||void 0!==p)&&l3(e,t,d,f,r,p);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!r.hasOwnProperty(y)&&l2(e,t,y,null,r,f);for(h in r)f=r[h],p=n[h],r.hasOwnProperty(h)&&f!==p&&(null!=f||null!=p)&&l2(e,t,h,f,r,p)})(r,e.type,n,t),r[eO]=t}catch(t){lm(e,e.return,t)}}function oF(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function oU(e){t:for(;;){for(;null===e.sibling;){if(null===e.return||oF(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags||null===e.child||4===e.tag)continue t;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function oz(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&27!==r&&null!==(e=e.child))for(oz(e,t,n),e=e.sibling;null!==e;)oz(e,t,n),e=e.sibling}var oH=!1,oG=!1,oV=!1,oj="function"==typeof WeakSet?WeakSet:Set,oW=null,oX=!1;function oJ(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:o4(e,n),4&r&&oP(5,n);break;case 1:if(o4(e,n),4&r){if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(e){lm(n,n.return,e)}else{var i=aL(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){lm(n,n.return,e)}}}64&r&&oB(n),512&r&&oD(n,n.return);break;case 3:if(o4(e,n),64&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:e=n.child.stateNode}try{oR(r,e)}catch(e){lm(n,n.return,e)}}break;case 26:o4(e,n),512&r&&oD(n,n.return);break;case 27:case 5:o4(e,n),null===t&&4&r&&oO(n),512&r&&oD(n,n.return);break;case 12:default:o4(e,n);break;case 13:o4(e,n),4&r&&oQ(e,n),64&r&&null!==(r=n.memoizedState)&&null!==(r=r.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(r,n=lb.bind(null,n));break;case 22:if(!(i=null!==n.memoizedState||oH)){t=null!==t&&null!==t.memoizedState||oG;var a=oH,o=oG;oH=i,(oG=t)&&!o?function e(t,n,r){for(r=r&&0!=(8772&n.subtreeFlags),n=n.child;null!==n;){var i=n.alternate,a=t,o=n,s=o.flags;switch(o.tag){case 0:case 11:case 15:e(a,o,r),oP(4,o);break;case 1:if(e(a,o,r),"function"==typeof(a=(i=o).stateNode).componentDidMount)try{a.componentDidMount()}catch(e){lm(i,i.return,e)}if(null!==(a=(i=o).updateQueue)){var l=i.stateNode;try{var u=a.shared.hiddenCallbacks;if(null!==u)for(a.shared.hiddenCallbacks=null,a=0;a<u.length;a++)oT(u[a],l)}catch(e){lm(i,i.return,e)}}r&&64&s&&oB(o),oD(o,o.return);break;case 26:case 27:case 5:e(a,o,r),r&&null===i&&4&s&&oO(o),oD(o,o.return);break;case 12:default:e(a,o,r);break;case 13:e(a,o,r),r&&4&s&&oQ(a,o);break;case 22:null===o.memoizedState&&e(a,o,r),oD(o,o.return)}n=n.sibling}}(e,n,0!=(8772&n.subtreeFlags)):o4(e,n),oH=a,oG=o}512&r&&("manual"===n.memoizedProps.mode?oD(n,n.return):ok(n,n.return))}}var oY=null,oK=!1;function oq(e,t,n){for(n=n.child;null!==n;)o$(e,t,n),n=n.sibling}function o$(e,t,n){if(eg&&"function"==typeof eg.onCommitFiberUnmount)try{eg.onCommitFiberUnmount(em,n)}catch(e){}switch(n.tag){case 26:oG||ok(n,t),oq(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:oG||ok(n,t);var r=oY,i=oK;for(oY=n.stateNode,oq(e,t,n),t=(n=n.stateNode).attributes;t.length;)n.removeAttributeNode(t[0]);eV(n),oY=r,oK=i;break;case 5:oG||ok(n,t);case 6:i=oY;var a=oK;if(oY=null,oq(e,t,n),oY=i,oK=a,null!==oY){if(oK)try{e=oY,r=n.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)}catch(e){lm(n,t,e)}else try{oY.removeChild(n.stateNode)}catch(e){lm(n,t,e)}}break;case 18:null!==oY&&(oK?(t=oY,n=n.stateNode,8===t.nodeType?us(t.parentNode,n):1===t.nodeType&&us(t,n),co(t)):us(oY,n.stateNode));break;case 4:r=oY,i=oK,oY=n.stateNode.containerInfo,oK=!0,oq(e,t,n),oY=r,oK=i;break;case 0:case 11:case 14:case 15:oG||oI(2,n,t),oG||oI(4,n,t),oq(e,t,n);break;case 1:oG||(ok(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&oL(n,t,r)),oq(e,t,n);break;case 21:default:oq(e,t,n);break;case 22:oG||ok(n,t),oG=(r=oG)||null!==n.memoizedState,oq(e,t,n),oG=r}}function oQ(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{co(e)}catch(e){lm(t,t.return,e)}}function oZ(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new oj),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new oj),t;default:throw Error(l(435,e.tag))}}(e);t.forEach(function(t){var r=lx.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function o0(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],a=e,o=t,s=o;t:for(;null!==s;){switch(s.tag){case 27:case 5:oY=s.stateNode,oK=!1;break t;case 3:case 4:oY=s.stateNode.containerInfo,oK=!0;break t}s=s.return}if(null===oY)throw Error(l(160));o$(a,o,i),oY=null,oK=!1,null!==(a=i.alternate)&&(a.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)o2(t,e),t=t.sibling}var o1=null;function o2(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:o0(t,e),o3(e),4&r&&(oI(3,e,e.return),oP(3,e),oI(5,e,e.return));break;case 1:o0(t,e),o3(e),512&r&&(oG||null===n||ok(n,n.return)),64&r&&oH&&null!==(e=e.updateQueue)&&null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r));break;case 26:var i=o1;if(o0(t,e),o3(e),512&r&&(oG||null===n||ok(n,n.return)),4&r){var a=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n){if(null===r){if(null===e.stateNode){t:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;n:switch(r){case"title":(!(a=i.getElementsByTagName("title")[0])||a[eG]||a[ek]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=i.createElement(r),i.head.insertBefore(a,i.querySelector("head > title"))),l4(a,r,n),a[ek]=e,eY(a),r=a;break t;case"link":var o=uP("link","href",i).get(r+(n.href||""));if(o){for(var s=0;s<o.length;s++)if((a=o[s]).getAttribute("href")===(null==n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(s,1);break n}}l4(a=i.createElement(r),r,n),i.head.appendChild(a);break;case"meta":if(o=uP("meta","content",i).get(r+(n.content||""))){for(s=0;s<o.length;s++)if((a=o[s]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(s,1);break n}}l4(a=i.createElement(r),r,n),i.head.appendChild(a);break;default:throw Error(l(468,r))}a[ek]=e,eY(a),r=a}e.stateNode=r}else uI(i,e.type,e.stateNode)}else e.stateNode=uE(i,r,e.memoizedProps)}else a!==r?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===r?uI(i,e.type,e.stateNode):uE(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&oN(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(4&r&&null===e.alternate){i=e.stateNode,a=e.memoizedProps;try{for(var u=i.firstChild;u;){var c=u.nextSibling,d=u.nodeName;u[eG]||"HEAD"===d||"BODY"===d||"SCRIPT"===d||"STYLE"===d||"LINK"===d&&"stylesheet"===u.rel.toLowerCase()||i.removeChild(u),u=c}for(var h=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);l4(i,h,a),i[ek]=e,i[eO]=a}catch(t){lm(e,e.return,t)}}case 5:if(o0(t,e),o3(e),512&r&&(oG||null===n||ok(n,n.return)),32&e.flags){i=e.stateNode;try{tu(i,"")}catch(t){lm(e,e.return,t)}}4&r&&null!=e.stateNode&&(i=e.memoizedProps,oN(e,i,null!==n?n.memoizedProps:i)),1024&r&&(oV=!0);break;case 6:if(o0(t,e),o3(e),4&r){if(null===e.stateNode)throw Error(l(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){lm(e,e.return,t)}}break;case 3:if(uR=null,i=o1,o1=um(t.containerInfo),o0(t,e),o1=i,o3(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{co(t.containerInfo)}catch(t){lm(e,e.return,t)}oV&&(oV=!1,function e(t){if(1024&t.subtreeFlags)for(t=t.child;null!==t;){var n=t;e(n),5===n.tag&&1024&n.flags&&n.stateNode.reset(),t=t.sibling}}(e));break;case 4:r=o1,o1=um(e.stateNode.containerInfo),o0(t,e),o3(e),o1=r;break;case 12:default:o0(t,e),o3(e);break;case 13:o0(t,e),o3(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(sj=eo()),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,oZ(e,r));break;case 22:if(512&r&&(oG||null===n||ok(n,n.return)),u=null!==e.memoizedState,c=null!==n&&null!==n.memoizedState,d=oH,h=oG,oH=d||u,oG=h||c,o0(t,e),oG=h,oH=d,o3(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&r&&(t._visibility=u?-2&t._visibility:1|t._visibility,u&&(t=oH||oG,null===n||c||t||function e(t){for(t=t.child;null!==t;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:oI(4,n,n.return),e(n);break;case 1:ok(n,n.return);var r=n.stateNode;"function"==typeof r.componentWillUnmount&&oL(n,n.return,r),e(n);break;case 26:case 27:case 5:ok(n,n.return),e(n);break;case 22:ok(n,n.return),null===n.memoizedState&&e(n);break;default:e(n)}t=t.sibling}}(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))t:for(n=null,t=e;;){if(5===t.tag||26===t.tag||27===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,u)a=i.style,"function"==typeof a.setProperty?a.setProperty("display","none","important"):a.display="none";else{o=c.stateNode;var p=null!=(s=c.memoizedProps.style)&&s.hasOwnProperty("display")?s.display:null;o.style.display=null==p||"boolean"==typeof p?"":(""+p).trim()}}catch(e){lm(c,c.return,e)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(e){lm(c,c.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&null!==(r=e.updateQueue)&&null!==(n=r.retryQueue)&&(r.retryQueue=null,oZ(e,n));break;case 19:o0(t,e),o3(e),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,oZ(e,r));case 21:}}function o3(e){var t=e.flags;if(2&t){try{if(27!==e.tag){t:{for(var n=e.return;null!==n;){if(oF(n)){var r=n;break t}n=n.return}throw Error(l(160))}switch(r.tag){case 27:var i=r.stateNode,a=oU(e);oz(e,a,i);break;case 5:var o=r.stateNode;32&r.flags&&(tu(o,""),r.flags&=-33);var s=oU(e);oz(e,s,o);break;case 3:case 4:var u=r.stateNode.containerInfo,c=oU(e);!function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!=(r=r._reactRootContainer)||null!==n.onclick||(n.onclick=l1));else if(4!==i&&27!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,c,u);break;default:throw Error(l(161))}}}catch(t){lm(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function o4(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)oJ(e,t.alternate,t),t=t.sibling}function o5(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&rN(n))}function o9(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&rN(e))}function o6(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)o8(e,t,n,r),t=t.sibling}function o8(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:o6(e,t,n,r),2048&i&&oP(9,t);break;case 3:o6(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&rN(e)));break;case 12:if(2048&i){o6(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;"function"==typeof s&&s(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){lm(t,t.return,e)}}else o6(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,null!==t.memoizedState?4&a._visibility?o6(e,t,n,r):o7(e,t):4&a._visibility?o6(e,t,n,r):(a._visibility|=4,function e(t,n,r,i,a){for(a=a&&0!=(10256&n.subtreeFlags),n=n.child;null!==n;){var o=n,s=o.flags;switch(o.tag){case 0:case 11:case 15:e(t,o,r,i,a),oP(8,o);break;case 23:break;case 22:var l=o.stateNode;null!==o.memoizedState?4&l._visibility?e(t,o,r,i,a):o7(t,o):(l._visibility|=4,e(t,o,r,i,a)),a&&2048&s&&o5(o.alternate,o);break;case 24:e(t,o,r,i,a),a&&2048&s&&o9(o.alternate,o);break;default:e(t,o,r,i,a)}n=n.sibling}}(e,t,n,r,0!=(10256&t.subtreeFlags))),2048&i&&o5(t.alternate,t);break;case 24:o6(e,t,n,r),2048&i&&o9(t.alternate,t);break;default:o6(e,t,n,r)}}function o7(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=t,r=n.flags;switch(n.tag){case 22:o7(e,n),2048&r&&o5(n.alternate,n);break;case 24:o7(e,n),2048&r&&o9(n.alternate,n);break;default:o7(e,n)}t=t.sibling}}var se=8192;function st(e){if(e.subtreeFlags&se)for(e=e.child;null!==e;)sn(e),e=e.sibling}function sn(e){switch(e.tag){case 26:st(e),e.flags&se&&null!==e.memoizedState&&function(e,t,n){if(null===uL)throw Error(l(475));var r=uL;if("stylesheet"===t.type&&("string"!=typeof n.media||!1!==matchMedia(n.media).matches)&&0==(4&t.state.loading)){if(null===t.instance){var i=ux(n.href),a=e.querySelector(u_(i));if(a){null!==(e=a._p)&&"object"==typeof e&&"function"==typeof e.then&&(r.count++,r=uk.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=a,eY(a);return}a=e.ownerDocument||e,n=uS(n),(i=uf.get(i))&&uC(n,i),eY(a=a.createElement("link"));var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),l4(a,"link",n),t.instance=a}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0==(3&t.state.loading)&&(r.count++,t=uk.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(o1,e.memoizedState,e.memoizedProps);break;case 5:default:st(e);break;case 3:case 4:var t=o1;o1=um(e.stateNode.containerInfo),st(e),o1=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=se,se=0x1000000,st(e),se=t):st(e))}}function sr(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(null!==e)}}function si(e){var t=e.deletions;if(0!=(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];oW=r,so(r,e)}sr(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)sa(e),e=e.sibling}function sa(e){switch(e.tag){case 0:case 11:case 15:si(e),2048&e.flags&&oI(9,e,e.return);break;case 3:case 12:default:si(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,function e(t){var n=t.deletions;if(0!=(16&t.flags)){if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];oW=i,so(i,t)}sr(t)}for(t=t.child;null!==t;){switch((n=t).tag){case 0:case 11:case 15:oI(8,n,n.return),e(n);break;case 22:4&(r=n.stateNode)._visibility&&(r._visibility&=-5,e(n));break;default:e(n)}t=t.sibling}}(e)):si(e)}}function so(e,t){for(;null!==oW;){var n=oW;switch(n.tag){case 0:case 11:case 15:oI(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:rN(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,oW=r;else for(n=e;null!==oW;){var i=(r=oW).sibling,a=r.return;if(function e(t){var n=t.alternate;null!==n&&(t.alternate=null,e(n)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(n=t.stateNode)&&eV(n),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}(r),r===n){oW=null;break}if(null!==i){i.return=a,oW=i;break}oW=a}}}function ss(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sl(e,t,n,r){return new ss(e,t,n,r)}function su(e){return!(!(e=e.prototype)||!e.isReactComponent)}function sc(e,t){var n=e.alternate;return null===n?((n=sl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=0x1e00000&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function sd(e,t){e.flags&=0x1e00002;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function sh(e,t,n,r,i,a){var o=0;if(r=e,"function"==typeof e)su(e)&&(o=1);else if("string"==typeof e)o=!function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;if("stylesheet"===t.rel)return e=t.disabled,"string"==typeof t.precedence&&null==e;return!0;case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,J.current)?"html"===e||"head"===e||"body"===e?27:5:26;else t:switch(e){case h:return sf(n.children,i,a,t);case f:o=8,i|=24;break;case p:return(e=sl(12,n,t,2|i)).elementType=p,e.lanes=a,e;case b:return(e=sl(13,n,t,i)).elementType=b,e.lanes=a,e;case x:return(e=sl(19,n,t,i)).elementType=x,e.lanes=a,e;case A:return sp(n,i,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case m:case v:o=10;break t;case g:o=9;break t;case y:o=11;break t;case _:o=14;break t;case S:o=16,r=null;break t}o=29,n=Error(l(130,null===e?"null":typeof e,"")),r=null}return(t=sl(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function sf(e,t,n,r){return(e=sl(7,e,r,t)).lanes=n,e}function sp(e,t,n,r){(e=sl(22,e,r,t)).elementType=A,e.lanes=n;var i={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=i._current;if(null===e)throw Error(l(456));if(0==(2&i._pendingVisibility)){var t=n1(e,2);null!==t&&(i._pendingVisibility|=2,s3(t,e,2))}},attach:function(){var e=i._current;if(null===e)throw Error(l(456));if(0!=(2&i._pendingVisibility)){var t=n1(e,2);null!==t&&(i._pendingVisibility&=-3,s3(t,e,2))}}};return e.stateNode=i,e}function sm(e,t,n){return(e=sl(6,e,null,t)).lanes=n,e}function sg(e,t,n){return(t=sl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function sv(e){e.flags|=4}function sy(e,t){if("stylesheet"!==t.type||0!=(4&t.state.loading))e.flags&=-0x1000001;else if(e.flags|=0x1000000,!uB(t)){if(null!==(t=a_.current)&&((4194176&sT)===sT?null!==aS:(0x3c00000&sT)!==sT&&0==(0x20000000&sT)||t!==aS))throw rR=rE,rA;e.flags|=8192}}function sb(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?eC():0x20000000,e.lanes|=t,sz|=t)}function sx(e,t){if(!rh)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function s_(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=0x1e00000&i.subtreeFlags,r|=0x1e00000&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function sS(e,t){switch(ru(t),t.tag){case 3:ou(rk),Q();break;case 26:case 27:case 5:ee(t);break;case 4:Q();break;case 13:aM(t);break;case 19:W(aC);break;case 10:ou(t.type);break;case 22:case 23:aM(t),rJ(),null!==e&&W(rK);break;case 24:ou(rk)}}var sA={getCacheForType:function(e){var t=om(rk),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},sw="function"==typeof WeakMap?WeakMap:Map,sE=0,sM=null,sC=null,sT=0,sR=0,sP=null,sI=!1,sB=!1,sL=!1,sD=0,sk=0,sO=0,sN=0,sF=0,sU=0,sz=0,sH=null,sG=null,sV=!1,sj=0,sW=1/0,sX=null,sJ=null,sY=!1,sK=null,sq=0,s$=0,sQ=null,sZ=0,s0=null;function s1(){if(0!=(2&sE)&&0!==sT)return sT&-sT;if(null!==P.T){var e=rz;return 0!==e?e:lL()}return eL()}function s2(){0===sU&&(sU=0==(0x20000000&sT)||rh?eM():0x20000000);var e=a_.current;return null!==e&&(e.flags|=32),sU}function s3(e,t,n){(e===sM&&(2===sR||9===sR)||null!==e.cancelPendingCommit)&&(le(e,0),s6(e,sT,sU,!1)),eR(e,n),(0==(2&sE)||e!==sM)&&(e===sM&&(0==(2&sE)&&(sN|=n),4===sk&&s6(e,sT,sU,!1)),lC(e))}function s4(e,t,n){if(0!=(6&sE))throw Error(l(327));for(var r=!n&&0==(60&t)&&0==(t&e.expiredLanes)||eE(e,t),i=r?function(e,t){var n=sE;sE|=2;var r=ln(),i=lr();sM!==e||sT!==t?(sX=null,sW=eo()+500,le(e,t)):sB=eE(e,t);t:for(;;)try{if(0!==sR&&null!==sC){t=sC;var a=sP;n:switch(sR){case 1:sR=0,sP=null,ll(e,t,a,1);break;case 2:case 9:if(rM(a)){sR=0,sP=null,ls(t);break}t=function(){2!==sR&&9!==sR||sM!==e||(sR=7),lC(e)},a.then(t,t);break t;case 3:sR=7;break t;case 4:sR=5;break t;case 7:rM(a)?(sR=0,sP=null,ls(t)):(sR=0,sP=null,ll(e,t,a,7));break;case 5:var o=null;switch(sC.tag){case 26:o=sC.memoizedState;case 5:case 27:var s=sC;if(o?uB(o):1){sR=0,sP=null;var u=s.sibling;if(null!==u)sC=u;else{var c=s.return;null!==c?(sC=c,lu(c)):sC=null}break n}}sR=0,sP=null,ll(e,t,a,5);break;case 6:sR=0,sP=null,ll(e,t,a,6);break;case 8:s7(),sk=6;break t;default:throw Error(l(462))}}(function(){for(;null!==sC&&!ei();)lo(sC)})();break}catch(t){lt(e,t)}return(os=oo=null,P.H=r,P.A=i,sE=n,null!==sC)?0:(sM=null,sT=0,nQ(),sk)}(e,t):la(e,t,!0),a=r;;){if(0===i)sB&&!r&&s6(e,t,0,!1);else{if(n=e.current.alternate,a&&!function(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&null!==(n=t.updateQueue)&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!nS(a(),i))return!1}catch(e){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)){i=la(e,t,!1),a=!1;continue}if(2===i){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=0!=(o=-0x20000001&e.pendingLanes)?o:0x20000000&o?0x20000000:0;if(0!==o){t=o;t:{i=sH;var s=e.current.memoizedState.isDehydrated;if(s&&(le(e,o).flags|=256),2!==(o=la(e,o,!1))){if(sL&&!s){e.errorRecoveryDisabledLanes|=a,sN|=a,i=4;break t}a=sG,sG=i,null!==a&&s5(a)}i=o}if(a=!1,2!==i)continue}}if(1===i){le(e,0),s6(e,t,0,!0);break}t:{switch(r=e,a=i){case 0:case 1:throw Error(l(345));case 4:if((4194176&t)!==t)break;case 6:s6(r,t,sU,!sI);break t;case 2:sG=null;break;case 3:case 5:break;default:throw Error(l(329))}if(r.finishedWork=n,r.finishedLanes=t,(0x3c00000&t)===t&&10<(i=sj+300-eo())){if(s6(r,t,sU,!sI),0!==ew(r,0))break t;r.timeoutHandle=un(s9.bind(null,r,n,sG,sX,sV,t,sU,sN,sz,sI,a,2,-0,0),i);break t}s9(r,n,sG,sX,sV,t,sU,sN,sz,sI,a,0,-0,0)}}break}lC(e)}function s5(e){null===sG?sG=e:sG.push.apply(sG,e)}function s9(e,t,n,r,i,a,o,s,u,c,d,h,f,p){var m=t.subtreeFlags;if((8192&m||0x1002000==(0x1002000&m))&&(uL={stylesheets:null,count:0,unsuspend:uD},sn(t),null!==(t=function(){if(null===uL)throw Error(l(475));var e=uL;return e.stylesheets&&0===e.count&&uN(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&uN(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}()))){e.cancelPendingCommit=t(ld.bind(null,e,n,r,i,o,s,u,d,1,f,p)),s6(e,a,o,!c);return}ld(e,n,r,i,o,s,u,d,h,f,p)}function s6(e,t,n,r){t&=~sF,t&=~sN,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-ey(i),o=1<<a;r[a]=-1,i&=~o}0!==n&&eP(e,n,t)}function s8(){return 0!=(6&sE)||(lT(0,!1),!1)}function s7(){if(null!==sC){if(0===sR)var e=sC.return;else e=sC,os=oo=null,iu(e),ah=null,af=0,e=sC;for(;null!==e;)sS(e.alternate,e),e=e.return;sC=null}}function le(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ur(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),s7(),sM=e,sC=n=sc(e.current,null),sT=t,sR=0,sP=null,sI=!1,sB=eE(e,t),sL=!1,sz=sU=sF=sN=sO=sk=0,sG=sH=null,sV=!1,0!=(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-ey(r),a=1<<i;t|=e[i],r&=~a}return sD=t,nQ(),n}function lt(e,t){r0=null,P.H=al,t===rS||t===rw?(t=rP(),sR=3):t===rA?(t=rP(),sR=4):sR=t===aV?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,sP=t,null===sC&&(sk=1,aF(e,n9(t,e.current)))}function ln(){var e=P.H;return P.H=al,null===e?al:e}function lr(){var e=P.A;return P.A=sA,e}function li(){sk=4,sI||(4194176&sT)!==sT&&null!==a_.current||(sB=!0),0==(0x7ffffff&sO)&&0==(0x7ffffff&sN)||null===sM||s6(sM,sT,sU,!1)}function la(e,t,n){var r=sE;sE|=2;var i=ln(),a=lr();(sM!==e||sT!==t)&&(sX=null,le(e,t)),t=!1;var o=sk;t:for(;;)try{if(0!==sR&&null!==sC){var s=sC,l=sP;switch(sR){case 8:s7(),o=6;break t;case 3:case 2:case 9:case 6:null===a_.current&&(t=!0);var u=sR;if(sR=0,sP=null,ll(e,s,l,u),n&&sB){o=0;break t}break;default:u=sR,sR=0,sP=null,ll(e,s,l,u)}}(function(){for(;null!==sC;)lo(sC)})(),o=sk;break}catch(t){lt(e,t)}return t&&e.shellSuspendCounter++,os=oo=null,sE=r,P.H=i,P.A=a,null===sC&&(sM=null,sT=0,nQ()),o}function lo(e){var t=oi(e.alternate,e,sD);e.memoizedProps=e.pendingProps,null===t?lu(e):sC=t}function ls(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=aZ(n,t,t.pendingProps,t.type,void 0,sT);break;case 11:t=aZ(n,t,t.pendingProps,t.type.render,t.ref,sT);break;case 5:iu(t);default:sS(n,t),t=oi(n,t=sC=sd(t,sD),sD)}e.memoizedProps=e.pendingProps,null===t?lu(e):sC=t}function ll(e,t,n,r){os=oo=null,iu(t),ah=null,af=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=n.alternate)&&oh(t,n,i,!0),null!==(n=a_.current)){switch(n.tag){case 13:return null===aS?li():null===n.alternate&&0===sk&&(sk=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===rE?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),lg(e,r,i)),!1;case 22:return n.flags|=65536,r===rE?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),lg(e,r,i)),!1}throw Error(l(435,n.tag))}return lg(e,r,i),li(),!1}if(rh)return null!==(t=a_.current)?(0==(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==rm&&r_(n9(e=Error(l(422),{cause:r}),n))):(r!==rm&&r_(n9(t=Error(l(423),{cause:r}),n)),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,r=n9(r,n),i=az(e.stateNode,r,i),ow(e,i),4!==sk&&(sk=2)),!1;var a=Error(l(520),{cause:r});if(a=n9(a,n),null===sH?sH=[a]:sH.push(a),4!==sk&&(sk=2),null===t)return!0;r=n9(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,e=az(n.stateNode,r,e),ow(n,e),!1;case 1:if(t=n.type,a=n.stateNode,0==(128&n.flags)&&("function"==typeof t.getDerivedStateFromError||null!==a&&"function"==typeof a.componentDidCatch&&(null===sJ||!sJ.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,aG(i=aH(i),e,n,r),ow(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,sT)){sk=1,aF(e,n9(n,e.current)),sC=null;return}}catch(t){if(null!==i)throw sC=i,t;sk=1,aF(e,n9(n,e.current)),sC=null;return}32768&t.flags?(rh||1===r?e=!0:sB||0!=(0x20000000&sT)?e=!1:(sI=e=!0,(2===r||9===r||3===r||6===r)&&null!==(r=a_.current)&&13===r.tag&&(r.flags|=16384)),lc(t,e)):lu(t)}function lu(e){var t=e;do{if(0!=(32768&t.flags)){lc(t,sI);return}e=t.return;var n=function(e,t,n){var r=t.pendingProps;switch(ru(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return s_(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ou(rk),Q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(null===e||null===e.child)&&(rb(t)?sv(t):null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==rf&&(s5(rf),rf=null))),s_(t),null;case 26:return n=t.memoizedState,null===e?(sv(t),null!==n?(s_(t),sy(t,n)):(s_(t),t.flags&=-0x1000001)):n?n!==e.memoizedState?(sv(t),s_(t),sy(t,n)):(s_(t),t.flags&=-0x1000001):(e.memoizedProps!==r&&sv(t),s_(t),t.flags&=-0x1000001),null;case 27:ee(t),n=K.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&sv(t);else{if(!r){if(null===t.stateNode)throw Error(l(166));return s_(t),null}e=J.current,rb(t)?rv(t,e):(e=uh(i,r,n),t.stateNode=e,sv(t))}return s_(t),null;case 5:if(ee(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&sv(t);else{if(!r){if(null===t.stateNode)throw Error(l(166));return s_(t),null}if(e=J.current,rb(t))rv(t,e);else{switch(i=l6(K.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"==typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[ek]=t,e[eO]=r;t:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(t.stateNode=e,l4(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break;case"img":e=!0;break;default:e=!1}e&&sv(t)}}return s_(t),t.flags&=-0x1000001,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&sv(t);else{if("string"!=typeof r&&null===t.stateNode)throw Error(l(166));if(e=K.current,rb(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=rc))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[ek]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||l0(e.nodeValue,n)))||rg(t)}else(e=l6(e).createTextNode(r))[ek]=t,t.stateNode=e}return s_(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=rb(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(l(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(l(317));i[ek]=t}else rx(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;s_(t),i=!1}else null!==rf&&(s5(rf),rf=null),i=!0;if(!i){if(256&t.flags)return aM(t),t;return aM(t),null}}if(aM(t),0!=(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){r=t.child,i=null,null!==r.alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var a=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),sb(t,t.updateQueue),s_(t),null;case 4:return Q(),null===e&&lj(t.stateNode.containerInfo),s_(t),null;case 10:return ou(t.type),s_(t),null;case 19:if(W(aC),null===(i=t.memoizedState))return s_(t),null;if(r=0!=(128&t.flags),null===(a=i.rendering)){if(r)sx(i,!1);else{if(0!==sk||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=aT(e))){for(t.flags|=128,sx(i,!1),e=a.updateQueue,t.updateQueue=e,sb(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)sd(n,e),n=n.sibling;return X(aC,1&aC.current|2),t.child}e=e.sibling}null!==i.tail&&eo()>sW&&(t.flags|=128,r=!0,sx(i,!1),t.lanes=4194304)}}else{if(!r){if(null!==(e=aT(a))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,sb(t,e),sx(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!rh)return s_(t),null}else 2*eo()-i.renderingStartTime>sW&&0x20000000!==n&&(t.flags|=128,r=!0,sx(i,!1),t.lanes=4194304)}i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}if(null!==i.tail)return t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=eo(),t.sibling=null,e=aC.current,X(aC,r?1&e|2:1&e),t;return s_(t),null;case 22:case 23:return aM(t),rJ(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!=(0x20000000&n)&&0==(128&t.flags)&&(s_(t),6&t.subtreeFlags&&(t.flags|=8192)):s_(t),null!==(n=t.updateQueue)&&sb(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&W(rK),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ou(rk),s_(t),null;case 25:return null}throw Error(l(156,t.tag))}(t.alternate,t,sD);if(null!==n){sC=n;return}if(null!==(t=t.sibling)){sC=t;return}sC=t=e}while(null!==t);0===sk&&(sk=5)}function lc(e,t){do{var n=function(e,t){switch(ru(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ou(rk),Q(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return ee(t),null;case 13:if(aM(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(l(340));rx()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return W(aC),null;case 4:return Q(),null;case 10:return ou(t.type),null;case 22:case 23:return aM(t),rJ(),null!==e&&W(rK),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ou(rk),null;default:return null}}(e.alternate,e);if(null!==n){n.flags&=32767,sC=n;return}if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling)){sC=e;return}sC=e=n}while(null!==e);sk=6,sC=null}function ld(e,t,n,r,i,a,o,s,u,c,d){var h=P.T,f=z.p;try{z.p=2,P.T=null,function(e,t,n,r,i,a,o,s){do lf();while(null!==sK);if(0!=(6&sE))throw Error(l(327));var u,c=e.finishedWork;if(r=e.finishedLanes,null!==c){if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(l(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var d=c.lanes|c.childLanes;if(function(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=o&~n;0<n;){var c=31-ey(n),d=1<<c;s[c]=0,l[c]=-1;var h=u[c];if(null!==h)for(u[c]=null,c=0;c<h.length;c++){var f=h[c];null!==f&&(f.lane&=-0x20000001)}n&=~d}0!==r&&eP(e,r,0),0!==a&&0===i&&0!==e.tag&&(e.suspendedLanes|=a&~(o&~t))}(e,r,d|=n$,a,o,s),e===sM&&(sC=sM=null,sT=0),0==(10256&c.subtreeFlags)&&0==(10256&c.flags)||sY||(sY=!0,s$=d,sQ=n,u=function(){return lf(!0),null},en(ec,u)),n=0!=(15990&c.flags),0!=(15990&c.subtreeFlags)||n?(n=P.T,P.T=null,a=z.p,z.p=2,o=sE,sE|=4,function(e,t){if(e=e.containerInfo,l5=uW,nC(e=nM(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else t:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i,a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break t}var s=0,u=-1,c=-1,d=0,h=0,f=e,p=null;n:for(;;){for(;f!==n||0!==a&&3!==f.nodeType||(u=s+a),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(i=f.firstChild);)p=f,f=i;for(;;){if(f===e)break n;if(p===n&&++d===a&&(u=s),p===o&&++h===r&&(c=s),null!==(i=f.nextSibling))break;p=(f=p).parentNode}f=i}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(l9={focusedElem:e,selectionRange:n},uW=!1,oW=t;null!==oW;)if(e=(t=oW).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,oW=e;else for(;null!==oW;){switch(o=(t=oW).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!=(1024&e)&&null!==o){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var m=aL(n.type,a,n.elementType===n.type);e=r.getSnapshotBeforeUpdate(m,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){lm(n,n.return,e)}}break;case 3:if(0!=(1024&e)){if(9===(n=(e=t.stateNode.containerInfo).nodeType))ul(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ul(e);break;default:e.textContent=""}}break;default:if(0!=(1024&e))throw Error(l(163))}if(null!==(e=t.sibling)){e.return=t.return,oW=e;break}oW=t.return}m=oX,oX=!1}(e,c),o2(c,e),function(e,t){var n=nM(t);t=e.focusedElem;var r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&function e(t,n){return!!t&&!!n&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(t.ownerDocument.documentElement,t)){if(null!==r&&nC(t)){if(e=r.start,void 0===(n=r.end)&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if((n=(e=t.ownerDocument||document)&&e.defaultView||window).getSelection){n=n.getSelection();var i=t.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!n.extend&&a>r&&(i=r,r=a,a=i),i=nE(t,a);var o=nE(t,r);i&&o&&(1!==n.rangeCount||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&((e=e.createRange()).setStart(i.node,i.offset),n.removeAllRanges(),a>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)1===n.nodeType&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for("function"==typeof t.focus&&t.focus(),t=0;t<e.length;t++)(n=e[t]).element.scrollLeft=n.left,n.element.scrollTop=n.top}}(l9,e.containerInfo),uW=!!l5,l9=l5=null,e.current=c,oJ(e,c.alternate,c),ea(),sE=o,z.p=a,P.T=n):e.current=c,sY?(sY=!1,sK=e,sq=r):lh(e,d),0===(d=e.pendingLanes)&&(sJ=null),function(e){if(eg&&"function"==typeof eg.onCommitFiberRoot)try{eg.onCommitFiberRoot(em,e,void 0,128==(128&e.current.flags))}catch(e){}}(c.stateNode,i),lC(e),null!==t)for(i=e.onRecoverableError,c=0;c<t.length;c++)i((d=t[c]).value,{componentStack:d.stack});0!=(3&sq)&&lf(),d=e.pendingLanes,0!=(4194218&r)&&0!=(42&d)?e===s0?sZ++:(sZ=0,s0=e):sZ=0,lT(0,!1)}}(e,t,n,r,f,i,a,o,s,u,c,d)}finally{P.T=h,z.p=f}}function lh(e,t){0==(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,rN(t))}function lf(){if(null!==sK){var e=sK,t=s$;s$=0;var n=eB(sq),r=P.T,i=z.p;try{if(z.p=32>n?32:n,P.T=null,null===sK)var a=!1;else{n=sQ,sQ=null;var o=sK,s=sq;if(sK=null,sq=0,0!=(6&sE))throw Error(l(331));var u=sE;if(sE|=4,sa(o.current),o8(o,o.current,s,n),sE=u,lT(0,!1),eg&&"function"==typeof eg.onPostCommitFiberRoot)try{eg.onPostCommitFiberRoot(em,o)}catch(e){}a=!0}return a}finally{z.p=i,P.T=r,lh(e,t)}}return!1}function lp(e,t,n){t=n9(n,t),t=az(e.stateNode,t,2),null!==(e=oS(e,t,2))&&(eR(e,2),lC(e))}function lm(e,t,n){if(3===e.tag)lp(e,e,n);else for(;null!==t;){if(3===t.tag){lp(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===sJ||!sJ.has(r))){e=n9(n,e),null!==(r=oS(t,n=aH(2),2))&&(aG(n,r,t,e),eR(r,2),lC(r));break}}t=t.return}}function lg(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new sw;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(sL=!0,i.add(n),e=lv.bind(null,e,t,n),t.then(e,e))}function lv(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,sM===e&&(sT&n)===n&&(4===sk||3===sk&&(0x3c00000&sT)===sT&&300>eo()-sj?0==(2&sE)&&le(e,0):sF|=n,sz===sT&&(sz=0)),lC(e)}function ly(e,t){0===t&&(t=eC()),null!==(e=n1(e,t))&&(eR(e,t),lC(e))}function lb(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ly(e,n)}function lx(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(l(314))}null!==r&&r.delete(t),ly(e,n)}var l_=null,lS=null,lA=!1,lw=!1,lE=!1,lM=0;function lC(e){var t;e!==lS&&null===e.next&&(null===lS?l_=lS=e:lS=lS.next=e),lw=!0,lA||(lA=!0,t=lR,ua(function(){0!=(6&sE)?en(el,t):t()}))}function lT(e,t){if(!lE&&lw){lE=!0;do for(var n=!1,r=l_;null!==r;){if(!t){if(0!==e){var i=r.pendingLanes;if(0===i)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=0xc000055&(a=(1<<31-ey(42|e)+1)-1&(i&~(o&~s)))?0xc000055&a|1:a?2|a:0}0!==a&&(n=!0,lB(r,a))}else a=sT,0==(3&(a=ew(r,r===sM?a:0)))||eE(r,a)||(n=!0,lB(r,a))}r=r.next}while(n);lE=!1}}function lR(){lw=lA=!1;var e,t=0;0!==lM&&(((e=window.event)&&"popstate"===e.type?e===ut||(ut=e,0):(ut=null,1))||(t=lM),lM=0);for(var n=eo(),r=null,i=l_;null!==i;){var a=i.next,o=lP(i,n);0===o?(i.next=null,null===r?l_=a:r.next=a,null===a&&(lS=r)):(r=i,(0!==t||0!=(3&o))&&(lw=!0)),i=a}lT(t,!1)}function lP(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=-0x3c00001&e.pendingLanes;0<a;){var o=31-ey(a),s=1<<o,l=i[o];-1===l?(0==(s&n)||0!=(s&r))&&(i[o]=function(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}if(t=sM,n=sT,n=ew(e,e===t?n:0),r=e.callbackNode,0===n||e===t&&(2===sR||9===sR)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&er(r),e.callbackNode=null,e.callbackPriority=0;if(0==(3&n)||eE(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&er(r),eB(n)){case 2:case 8:n=eu;break;case 32:default:n=ec;break;case 0x10000000:n=eh}return n=en(n,r=lI.bind(null,e)),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&er(r),e.callbackPriority=2,e.callbackNode=null,2}function lI(e,t){var n=e.callbackNode;if(lf()&&e.callbackNode!==n)return null;var r=sT;return 0===(r=ew(e,e===sM?r:0))?null:(s4(e,r,t),lP(e,eo()),null!=e.callbackNode&&e.callbackNode===n?lI.bind(null,e):null)}function lB(e,t){if(lf())return null;s4(e,t,!0)}function lL(){return 0===lM&&(lM=eM()),lM}function lD(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:tg(""+e)}function lk(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var lO=0;lO<nJ.length;lO++){var lN=nJ[lO];nY(lN.toLowerCase(),"on"+(lN[0].toUpperCase()+lN.slice(1)))}nY(nU,"onAnimationEnd"),nY(nz,"onAnimationIteration"),nY(nH,"onAnimationStart"),nY("dblclick","onDoubleClick"),nY("focusin","onFocus"),nY("focusout","onBlur"),nY(nG,"onTransitionRun"),nY(nV,"onTransitionStart"),nY(nj,"onTransitionCancel"),nY(nW,"onTransitionEnd"),eQ("onMouseEnter",["mouseout","mouseover"]),eQ("onMouseLeave",["mouseout","mouseover"]),eQ("onPointerEnter",["pointerout","pointerover"]),eQ("onPointerLeave",["pointerout","pointerover"]),e$("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),e$("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),e$("onBeforeInput",["compositionend","keypress","textInput","paste"]),e$("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),e$("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),e$("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lF="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lF));function lz(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;t:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break t;a=s,i.currentTarget=u;try{a(i)}catch(e){aD(e)}i.currentTarget=null,a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break t;a=s,i.currentTarget=u;try{a(i)}catch(e){aD(e)}i.currentTarget=null,a=l}}}}function lH(e,t){var n=t[eF];void 0===n&&(n=t[eF]=new Set);var r=e+"__bubble";n.has(r)||(lW(t,e,2,!1),n.add(r))}function lG(e,t,n){var r=0;t&&(r|=4),lW(n,e,r,t)}var lV="_reactListening"+Math.random().toString(36).slice(2);function lj(e){if(!e[lV]){e[lV]=!0,eK.forEach(function(t){"selectionchange"!==t&&(lU.has(t)||lG(t,!1,e),lG(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[lV]||(t[lV]=!0,lG("selectionchange",!1,t))}}function lW(e,t,n,r){switch(uQ(t)){case 2:var i=uX;break;case 8:i=uJ;break;default:i=uY}n=i.bind(null,t,n,e),i=void 0,tE&&("touchstart"===t||"touchmove"===t||"wheel"===t)&&(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function lX(e,t,n,r,i){var a=r;if(0==(1&t)&&0==(2&t)&&null!==r)t:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ej(s)))return;if(5===(l=o.tag)||6===l||26===l||27===l){r=a=o;continue t}s=s.parentNode}}r=r.return}tA(function(){var r=a,i=ty(n),o=[];t:{var s=nX.get(e);if(void 0!==s){var l=tU,u=e;switch(e){case"keypress":if(0===tI(n))break t;case"keydown":case"keyup":l=t0;break;case"focusin":u="focus",l=tW;break;case"focusout":u="blur",l=tW;break;case"beforeblur":case"afterblur":l=tW;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=tV;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=tj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=t2;break;case nU:case nz:case nH:l=tX;break;case nW:l=t3;break;case"scroll":case"scrollend":l=tH;break;case"wheel":l=t4;break;case"copy":case"cut":case"paste":l=tJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=t1;break;case"toggle":case"beforetoggle":l=t5}var c=0!=(4&t),d=!c&&("scroll"===e||"scrollend"===e),h=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var m=p;if(f=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===f||null===h||null!=(m=tw(p,h))&&c.push(lJ(p,m,f)),d)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,i),o.push({event:s,listeners:c}))}}if(0==(7&t)){if(s="mouseover"===e||"pointerover"===e,l="mouseout"===e||"pointerout"===e,!(s&&n!==tv&&(u=n.relatedTarget||n.fromElement)&&(ej(u)||u[eN]))&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,null!==(u=u?ej(u):null)&&(d=O(u),c=u.tag,u!==d||5!==c&&27!==c&&6!==c)&&(u=null)):(l=null,u=r),l!==u)){if(c=tV,m="onMouseLeave",h="onMouseEnter",p="mouse",("pointerout"===e||"pointerover"===e)&&(c=t1,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:eX(l),f=null==u?s:eX(u),(s=new c(m,p+"leave",l,n,i)).target=d,s.relatedTarget=f,m=null,ej(i)===r&&((c=new c(h,p+"enter",u,n,i)).target=f,c.relatedTarget=d,m=c),d=m,l&&u)n:{for(c=l,h=u,p=0,f=c;f;f=lK(f))p++;for(f=0,m=h;m;m=lK(m))f++;for(;0<p-f;)c=lK(c),p--;for(;0<f-p;)h=lK(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break n;c=lK(c),h=lK(h)}c=null}else c=null;null!==l&&lq(o,s,l,c,!1),null!==u&&null!==d&&lq(o,d,u,c,!0)}t:{if("select"===(l=(s=r?eX(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g,v=nh;else if(no(s)){if(nf)v=n_;else{v=nb;var y=ny}}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)?v=nx:r&&tf(r.elementType)&&(v=nh);if(v&&(v=v(e,r))){ns(o,v,n,i);break t}y&&y(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&ta(s,"number",s.value)}switch(y=r?eX(r):window,e){case"focusin":(no(y)||"true"===y.contentEditable)&&(nR=y,nP=r,nI=null);break;case"focusout":nI=nP=nR=null;break;case"mousedown":nB=!0;break;case"contextmenu":case"mouseup":case"dragend":nB=!1,nL(o,n,i);break;case"selectionchange":if(nT)break;case"keydown":case"keyup":nL(o,n,i)}if(t6)n:{switch(e){case"compositionstart":var b="onCompositionStart";break n;case"compositionend":b="onCompositionEnd";break n;case"compositionupdate":b="onCompositionUpdate";break n}b=void 0}else ni?nn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(ne&&"ko"!==n.locale&&(ni||"onCompositionStart"!==b?"onCompositionEnd"===b&&ni&&(g=tP()):(tT="value"in(tC=i)?tC.value:tC.textContent,ni=!0)),0<(y=lY(r,b)).length&&(b=new tY(b,e,null,n,i),o.push({event:b,listeners:y}),g?b.data=g:null!==(g=nr(n))&&(b.data=g))),(g=t7?function(e,t){switch(e){case"compositionend":return nr(t);case"keypress":if(32!==t.which)return null;return nt=!0," ";case"textInput":return" "===(e=t.data)&&nt?null:e;default:return null}}(e,n):function(e,t){if(ni)return"compositionend"===e||!t6&&nn(e,t)?(e=tP(),tR=tT=tC=null,ni=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ne&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(b=lY(r,"onBeforeInput")).length&&(y=new tY("onBeforeInput","beforeinput",null,n,i),o.push({event:y,listeners:b}),y.data=g),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var a=lD((i[eO]||null).action),o=r.submitter;o&&null!==(t=(t=o[eO]||null)?lD(t.formAction):o.getAttribute("formAction"))&&(a=t,o=null);var s=new tU("action","action",null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==lM){var e=o?lk(i,o):new FormData(i);i4(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else"function"==typeof a&&(s.preventDefault(),i4(n,{pending:!0,data:e=o?lk(i,o):new FormData(i),method:i.method,action:a},a,e))},currentTarget:i}]})}}(o,e,r,n,i)}lz(o,t)})}function lJ(e,t,n){return{instance:e,listener:t,currentTarget:n}}function lY(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5!==(i=i.tag)&&26!==i&&27!==i||null===a||(null!=(i=tw(e,n))&&r.unshift(lJ(e,i,a)),null!=(i=tw(e,t))&&r.push(lJ(e,i,a))),e=e.return}return r}function lK(e){if(null===e)return null;do e=e.return;while(e&&5!==e.tag&&27!==e.tag);return e||null}function lq(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===u||(l=u,i?null!=(u=tw(n,a))&&o.unshift(lJ(n,u,l)):i||null!=(u=tw(n,a))&&o.push(lJ(n,u,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var l$=/\r\n?/g,lQ=/\u0000|\uFFFD/g;function lZ(e){return("string"==typeof e?e:""+e).replace(l$,"\n").replace(lQ,"")}function l0(e,t){return t=lZ(t),lZ(e)===t}function l1(){}function l2(e,t,n,r,i,a){switch(n){case"children":"string"==typeof r?"body"===t||"textarea"===t&&""===r||tu(e,r):("number"==typeof r||"bigint"==typeof r)&&"body"!==t&&tu(e,""+r);break;case"className":e4(e,"class",r);break;case"tabIndex":e4(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":e4(e,n,r);break;case"style":th(e,r,a);break;case"data":if("object"!==t){e4(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)||null==r||"function"==typeof r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=tg(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"==typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof a&&("formAction"===n?("input"!==t&&l2(e,t,"name",i.name,i,null),l2(e,t,"formEncType",i.formEncType,i,null),l2(e,t,"formMethod",i.formMethod,i,null),l2(e,t,"formTarget",i.formTarget,i,null)):(l2(e,t,"encType",i.encType,i,null),l2(e,t,"method",i.method,i,null),l2(e,t,"target",i.target,i,null))),null==r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=tg(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=l1);break;case"onScroll":null!=r&&lH("scroll",e);break;case"onScrollEnd":null!=r&&lH("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(l(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(l(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"muted":e.muted=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":case"innerText":case"textContent":break;case"xlinkHref":if(null==r||"function"==typeof r||"boolean"==typeof r||"symbol"==typeof r){e.removeAttribute("xlink:href");break}n=tg(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"==typeof r||"symbol"==typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":lH("beforetoggle",e),lH("toggle",e),e3(e,"popover",r);break;case"xlinkActuate":e5(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":e5(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":e5(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":e5(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":e5(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":e5(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":e5(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":e5(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":e5(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":e3(e,"is",r);break;default:2<n.length&&("o"===n[0]||"O"===n[0])&&("n"===n[1]||"N"===n[1])||e3(e,n=tp.get(n)||n,r)}}function l3(e,t,n,r,i,a){switch(n){case"style":th(e,r,a);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(l(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(l(60));e.innerHTML=n}}break;case"children":"string"==typeof r?tu(e,r):("number"==typeof r||"bigint"==typeof r)&&tu(e,""+r);break;case"onScroll":null!=r&&lH("scroll",e);break;case"onScrollEnd":null!=r&&lH("scrollend",e);break;case"onClick":null!=r&&(e.onclick=l1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:if(!eq.hasOwnProperty(n))t:{if("o"===n[0]&&"n"===n[1]&&(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"==typeof(a=null!=(a=e[eO]||null)?a[n]:null)&&e.removeEventListener(t,a,i),"function"==typeof r)){"function"!=typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i);break t}n in e?e[n]=r:!0===r?e.setAttribute(n,""):e3(e,n,r)}}}function l4(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lH("error",e),lH("load",e);var r,i=!1,a=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:l2(e,t,r,o,n,null)}}a&&l2(e,t,"srcSet",n.srcSet,n,null),i&&l2(e,t,"src",n.src,n,null);return;case"input":lH("invalid",e);var s=r=o=a=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":a=d;break;case"type":o=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":s=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(l(137,t));break;default:l2(e,t,i,d,n,null)}}ti(e,r,s,u,c,o,a,!1),e8(e);return;case"select":for(a in lH("invalid",e),i=o=r=null,n)if(n.hasOwnProperty(a)&&null!=(s=n[a]))switch(a){case"value":r=s;break;case"defaultValue":o=s;break;case"multiple":i=s;default:l2(e,t,a,s,n,null)}t=r,n=o,e.multiple=!!i,null!=t?to(e,!!i,t,!1):null!=n&&to(e,!!i,n,!0);return;case"textarea":for(o in lH("invalid",e),r=a=i=null,n)if(n.hasOwnProperty(o)&&null!=(s=n[o]))switch(o){case"value":i=s;break;case"defaultValue":a=s;break;case"children":r=s;break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(l(91));break;default:l2(e,t,o,s,n,null)}tl(e,i,a,r),e8(e);return;case"option":for(u in n)n.hasOwnProperty(u)&&null!=(i=n[u])&&("selected"===u?e.selected=i&&"function"!=typeof i&&"symbol"!=typeof i:l2(e,t,u,i,n,null));return;case"dialog":lH("cancel",e),lH("close",e);break;case"iframe":case"object":lH("load",e);break;case"video":case"audio":for(i=0;i<lF.length;i++)lH(lF[i],e);break;case"image":lH("error",e),lH("load",e);break;case"details":lH("toggle",e);break;case"embed":case"source":case"link":lH("error",e),lH("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:l2(e,t,c,i,n,null)}return;default:if(tf(t)){for(d in n)n.hasOwnProperty(d)&&void 0!==(i=n[d])&&l3(e,t,d,i,n,void 0);return}}for(s in n)n.hasOwnProperty(s)&&null!=(i=n[s])&&l2(e,t,s,i,n,null)}var l5=null,l9=null;function l6(e){return 9===e.nodeType?e:e.ownerDocument}function l8(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function l7(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ue(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ut=null,un="function"==typeof setTimeout?setTimeout:void 0,ur="function"==typeof clearTimeout?clearTimeout:void 0,ui="function"==typeof Promise?Promise:void 0,ua="function"==typeof queueMicrotask?queueMicrotask:void 0!==ui?function(e){return ui.resolve(null).then(e).catch(uo)}:un;function uo(e){setTimeout(function(){throw e})}function us(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType){if("/$"===(n=i.data)){if(0===r){e.removeChild(i),co(t);return}r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++}n=i}while(n);co(t)}function ul(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ul(n),eV(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function uu(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function uc(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function ud(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function uh(e,t,n){switch(t=l6(n),e){case"html":if(!(e=t.documentElement))throw Error(l(452));return e;case"head":if(!(e=t.head))throw Error(l(453));return e;case"body":if(!(e=t.body))throw Error(l(454));return e;default:throw Error(l(451))}}var uf=new Map,up=new Set;function um(e){return"function"==typeof e.getRootNode?e.getRootNode():e.ownerDocument}var ug=z.d;z.d={f:function(){var e=ug.f(),t=s8();return e||t},r:function(e){var t=eW(e);null!==t&&5===t.tag&&"form"===t.type?i9(t):ug.r(e)},D:function(e){ug.D(e),uy("dns-prefetch",e,null)},C:function(e,t){ug.C(e,t),uy("preconnect",e,t)},L:function(e,t,n){if(ug.L(e,t,n),uv&&e&&t){var r='link[rel="preload"][as="'+tn(t)+'"]';"image"===t&&n&&n.imageSrcSet?(r+='[imagesrcset="'+tn(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(r+='[imagesizes="'+tn(n.imageSizes)+'"]')):r+='[href="'+tn(e)+'"]';var i=r;switch(t){case"style":i=ux(e);break;case"script":i=uA(e)}uf.has(i)||(e=I({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),uf.set(i,e),null!==uv.querySelector(r)||"style"===t&&uv.querySelector(u_(i))||"script"===t&&uv.querySelector(uw(i))||(l4(t=uv.createElement("link"),"link",e),eY(t),uv.head.appendChild(t)))}},m:function(e,t){if(ug.m(e,t),uv&&e){var n=t&&"string"==typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+tn(n)+'"][href="'+tn(e)+'"]',i=r;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=uA(e)}if(!uf.has(i)&&(e=I({rel:"modulepreload",href:e},t),uf.set(i,e),null===uv.querySelector(r))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(uv.querySelector(uw(i)))return}l4(n=uv.createElement("link"),"link",e),eY(n),uv.head.appendChild(n)}}},X:function(e,t){if(ug.X(e,t),uv&&e){var n=eJ(uv).hoistableScripts,r=uA(e),i=n.get(r);i||((i=uv.querySelector(uw(r)))||(e=I({src:e,async:!0},t),(t=uf.get(r))&&uT(e,t),eY(i=uv.createElement("script")),l4(i,"link",e),uv.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(r,i))}},S:function(e,t,n){if(ug.S(e,t,n),uv&&e){var r=eJ(uv).hoistableStyles,i=ux(e);t=t||"default";var a=r.get(i);if(!a){var o={loading:0,preload:null};if(a=uv.querySelector(u_(i)))o.loading=5;else{e=I({rel:"stylesheet",href:e,"data-precedence":t},n),(n=uf.get(i))&&uC(e,n);var s=a=uv.createElement("link");eY(s),l4(s,"link",e),s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),s.addEventListener("load",function(){o.loading|=1}),s.addEventListener("error",function(){o.loading|=2}),o.loading|=4,uM(a,t,uv)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(i,a)}}},M:function(e,t){if(ug.M(e,t),uv&&e){var n=eJ(uv).hoistableScripts,r=uA(e),i=n.get(r);i||((i=uv.querySelector(uw(r)))||(e=I({src:e,async:!0,type:"module"},t),(t=uf.get(r))&&uT(e,t),eY(i=uv.createElement("script")),l4(i,"link",e),uv.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(r,i))}}};var uv="undefined"==typeof document?null:document;function uy(e,t,n){if(uv&&"string"==typeof t&&t){var r=tn(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"==typeof n&&(r+='[crossorigin="'+n+'"]'),up.has(r)||(up.add(r),e={rel:e,crossOrigin:n,href:t},null===uv.querySelector(r)&&(l4(t=uv.createElement("link"),"link",e),eY(t),uv.head.appendChild(t)))}}function ub(e,t,n,r){var i=(i=K.current)?um(i):null;if(!i)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=ux(n.href),(r=(n=eJ(i).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=ux(n.href);var a,o,s,u,c=eJ(i).hoistableStyles,d=c.get(e);if(d||(i=i.ownerDocument||i,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=i.querySelector(u_(e)))&&!c._p&&(d.instance=c,d.state.loading=5),uf.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},uf.set(e,n),c||(a=i,o=e,s=n,u=d.state,a.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=a.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),l4(o,"link",s),eY(o),a.head.appendChild(o))))),t&&null===r)throw Error(l(528,""));return d}if(t&&null!==r)throw Error(l(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=uA(n),(r=(n=eJ(i).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function ux(e){return'href="'+tn(e)+'"'}function u_(e){return'link[rel="stylesheet"]['+e+"]"}function uS(e){return I({},e,{"data-precedence":e.precedence,precedence:null})}function uA(e){return'[src="'+tn(e)+'"]'}function uw(e){return"script[async]"+e}function uE(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+tn(n.href)+'"]');if(r)return t.instance=r,eY(r),r;var i=I({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return eY(r=(e.ownerDocument||e).createElement("style")),l4(r,"style",i),uM(r,n.precedence,e),t.instance=r;case"stylesheet":i=ux(n.href);var a=e.querySelector(u_(i));if(a)return t.state.loading|=4,t.instance=a,eY(a),a;r=uS(n),(i=uf.get(i))&&uC(r,i),eY(a=(e.ownerDocument||e).createElement("link"));var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),l4(a,"link",r),t.state.loading|=4,uM(a,n.precedence,e),t.instance=a;case"script":if(a=uA(n.src),i=e.querySelector(uw(a)))return t.instance=i,eY(i),i;return r=n,(i=uf.get(a))&&uT(r=I({},n),i),eY(i=(e=e.ownerDocument||e).createElement("script")),l4(i,"link",r),e.head.appendChild(i),t.instance=i;case"void":return null;default:throw Error(l(443,t.type))}else"stylesheet"===t.type&&0==(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,uM(r,n.precedence,e));return t.instance}function uM(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function uC(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function uT(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var uR=null;function uP(e,t,n){if(null===uR){var r=new Map,i=uR=new Map;i.set(n,r)}else(r=(i=uR).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[eG]||a[ek]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var o=a.getAttribute(t)||"";o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function uI(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function uB(e){return"stylesheet"!==e.type||0!=(3&e.state.loading)}var uL=null;function uD(){}function uk(){if(this.count--,0===this.count){if(this.stylesheets)uN(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var uO=null;function uN(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,uO=new Map,t.forEach(uF,e),uO=null,uk.call(e))}function uF(e,t){if(!(4&t.state.loading)){var n=uO.get(e);if(n)var r=n.get(null);else{n=new Map,uO.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var o=i[a];("LINK"===o.nodeName||"not all"!==o.getAttribute("media"))&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(a=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=uk.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var uU={$$typeof:v,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function uz(e,t,n,r,i,a,o,s){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=eT(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eT(0),this.hiddenUpdates=eT(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function uH(e,t,n,r,i,a){var o;i=n4,null===r.context?r.context=i:r.pendingContext=i,(r=o_(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=oS(e,r,t))&&(s3(n,e,t),oA(n,e,t))}function uG(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function uV(e,t){uG(e,t),(e=e.alternate)&&uG(e,t)}function uj(e){if(13===e.tag){var t=n1(e,0x4000000);null!==t&&s3(t,e,0x4000000),uV(e,0x4000000)}}var uW=!0;function uX(e,t,n,r){var i=P.T;P.T=null;var a=z.p;try{z.p=2,uY(e,t,n,r)}finally{z.p=a,P.T=i}}function uJ(e,t,n,r){var i=P.T;P.T=null;var a=z.p;try{z.p=8,uY(e,t,n,r)}finally{z.p=a,P.T=i}}function uY(e,t,n,r){if(uW){var i=uK(r);if(null===i)lX(e,t,r,uq,n),u6(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return u0=u8(u0,e,t,n,r,i),!0;case"dragenter":return u1=u8(u1,e,t,n,r,i),!0;case"mouseover":return u2=u8(u2,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return u3.set(a,u8(u3.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,u4.set(a,u8(u4.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(u6(e,r),4&t&&-1<u9.indexOf(e)){for(;null!==i;){var a=eW(i);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var o=eA(a.pendingLanes);if(0!==o){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var l=1<<31-ey(o);s.entanglements[1]|=l,o&=~l}lC(a),0==(6&sE)&&(sW=eo()+500,lT(0,!1))}}break;case 13:null!==(s=n1(a,2))&&s3(s,a,2),s8(),uV(a,2)}if(null===(a=uK(r))&&lX(e,t,r,uq,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else lX(e,t,r,null,n)}}function uK(e){return u$(e=ty(e))}var uq=null;function u$(e){if(uq=null,null!==(e=ej(e))){var t=O(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=N(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return uq=e,null}function uQ(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(es()){case el:return 2;case eu:return 8;case ec:case ed:return 32;case eh:return 0x10000000;default:return 32}default:return 32}}var uZ=!1,u0=null,u1=null,u2=null,u3=new Map,u4=new Map,u5=[],u9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function u6(e,t){switch(e){case"focusin":case"focusout":u0=null;break;case"dragenter":case"dragleave":u1=null;break;case"mouseover":case"mouseout":u2=null;break;case"pointerover":case"pointerout":u3.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":u4.delete(t.pointerId)}}function u8(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&null!==(t=eW(t))&&uj(t)):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i)),e}function u7(e){var t=ej(e.target);if(null!==t){var n=O(t);if(null!==n){if(13===(t=n.tag)){if(null!==(t=N(n))){e.blockedOn=t,function(e,t){var n=z.p;try{return z.p=e,t()}finally{z.p=n}}(e.priority,function(){if(13===n.tag){var e=s1(),t=n1(n,e);null!==t&&s3(t,n,e),uV(n,e)}});return}}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=3===n.tag?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ce(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=uK(e.nativeEvent);if(null!==n)return null!==(t=eW(n))&&uj(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);tv=r,n.target.dispatchEvent(r),tv=null,t.shift()}return!0}function ct(e,t,n){ce(e)&&n.delete(t)}function cn(){uZ=!1,null!==u0&&ce(u0)&&(u0=null),null!==u1&&ce(u1)&&(u1=null),null!==u2&&ce(u2)&&(u2=null),u3.forEach(ct),u4.forEach(ct)}function cr(e,t){e.blockedOn===t&&(e.blockedOn=null,uZ||(uZ=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,cn)))}var ci=null;function ca(e){ci!==e&&(ci=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){ci===e&&(ci=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!=typeof r){if(null===u$(r||n))continue;break}var a=eW(n);null!==a&&(e.splice(t,3),t-=3,i4(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function co(e){function t(t){return cr(t,e)}null!==u0&&cr(u0,e),null!==u1&&cr(u1,e),null!==u2&&cr(u2,e),u3.forEach(t),u4.forEach(t);for(var n=0;n<u5.length;n++){var r=u5[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<u5.length&&null===(n=u5[0]).blockedOn;)u7(n),null===n.blockedOn&&u5.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[eO]||null;if("function"==typeof a)o||ca(n);else if(o){var s=null;if(a&&a.hasAttribute("formAction")){if(i=a,o=a[eO]||null)s=o.formAction;else if(null!==u$(i))continue}else s=o.action;"function"==typeof s?n[r+1]=s:(n.splice(r,3),r-=3),ca(n)}}}function cs(e){this._internalRoot=e}function cl(e){this._internalRoot=e}cl.prototype.render=cs.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(l(409));uH(t.current,s1(),e,t,null,null)},cl.prototype.unmount=cs.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;0===e.tag&&lf(),uH(e.current,2,null,e,null,null),s8(),t[eN]=null}},cl.prototype.unstable_scheduleHydration=function(e){if(e){var t=eL();e={blockedOn:null,target:e,priority:t};for(var n=0;n<u5.length&&0!==t&&t<u5[n].priority;n++);u5.splice(n,0,e),0===n&&u7(e)}};var cu=o.version;if("19.0.0-rc-7283a213-20241206"!==cu)throw Error(l(527,cu,"19.0.0-rc-7283a213-20241206"));if(z.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(l(188));throw Error(l(268,e=Object.keys(e).join(",")))}return e=null===(e=null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=O(e)))throw Error(l(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return F(i),e;if(a===r)return F(i),t;a=a.sibling}throw Error(l(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o)throw Error(l(189))}}if(n.alternate!==r)throw Error(l(190))}if(3!==n.tag)throw Error(l(188));return n.stateNode.current===n?e:t}(t))?function e(t){var n=t.tag;if(5===n||26===n||27===n||6===n)return t;for(t=t.child;null!==t;){if(null!==(n=e(t)))return n;t=t.sibling}return null}(e):null)?null:e.stateNode},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cc.isDisabled&&cc.supportsFiber)try{em=cc.inject({bundleType:0,version:"19.0.0-rc-7283a213-20241206",rendererPackageName:"react-dom",currentDispatcherRef:P,findFiberByHostInstance:ej,reconcilerVersion:"19.0.0-rc-7283a213-20241206"}),eg=cc}catch(e){}}t.createRoot=function(e,t){if(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)throw Error(l(299));var n,r,i,a=!1,o="",s=ak,u=aO,c=aN,d=null;return null!=t&&(!0===t.unstable_strictMode&&(a=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(u=t.onCaughtError),void 0!==t.onRecoverableError&&(c=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),n=e,r=1,i=a,n=new uz(n,r,!1,o,s,u,c,null),r=1,!0===i&&(r|=24),i=sl(3,null,null,r),n.current=i,i.stateNode=n,r=rO(),r.refCount++,n.pooledCache=r,r.refCount++,i.memoizedState={element:null,isDehydrated:!1,cache:r},ob(i),t=n,e[eN]=t.current,lj(8===e.nodeType?e.parentNode:e),new cs(t)}},35750:(e,t,n)=>{"use strict";var r=n(14205);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var o={d:{f:a,r:function(){throw Error(i(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},s=Symbol.for("react.portal"),l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"==typeof e&&(t=t?"string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"==typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,r=u(n,t.crossOrigin),i="string"==typeof t.integrity?t.integrity:void 0,a="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:a}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:a,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"==typeof e){if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=u(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)}},t.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,r=u(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"==typeof e){if(t){var n=u(t.as,t.crossOrigin);o.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else o.d.m(e)}},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.0.0-rc-7283a213-20241206"},53413:(e,t,n)=>{"use strict";(function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}})(),e.exports=n(75614)},20100:(e,t,n)=>{"use strict";(function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}})(),e.exports=n(35750)},76014:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var _=Array.isArray,S={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function w(e,t,r,i,a,o){return{$$typeof:n,type:e,key:t,ref:void 0!==(r=o.ref)?r:null,props:o}}function E(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var M=/\/+/g;function C(e,t){var n,r;return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36)}function T(){}function R(e,t,i){if(null==e)return e;var a=[],o=0;return function e(t,i,a,o,s){var l,u,c,d=typeof t;("undefined"===d||"boolean"===d)&&(t=null);var p=!1;if(null===t)p=!0;else switch(d){case"bigint":case"string":case"number":p=!0;break;case"object":switch(t.$$typeof){case n:case r:p=!0;break;case h:return e((p=t._init)(t._payload),i,a,o,s)}}if(p)return s=s(t),p=""===o?"."+C(t,0):o,_(s)?(a="",null!=p&&(a=p.replace(M,"$&/")+"/"),e(s,i,a,"",function(e){return e})):null!=s&&(E(s)&&(l=s,u=a+(null==s.key||t&&t.key===s.key?"":(""+s.key).replace(M,"$&/")+"/")+p,s=w(l.type,u,void 0,void 0,void 0,l.props)),i.push(s)),1;p=0;var m=""===o?".":o+":";if(_(t))for(var g=0;g<t.length;g++)d=m+C(o=t[g],g),p+=e(o,i,a,d,s);else if("function"==typeof(g=null===(c=t)||"object"!=typeof c?null:"function"==typeof(c=f&&c[f]||c["@@iterator"])?c:null))for(t=g.call(t),g=0;!(o=t.next()).done;)d=m+C(o=o.value,g++),p+=e(o,i,a,d,s);else if("object"===d){if("function"==typeof t.then)return e(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(T,T):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(t),i,a,o,s);throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(i=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.")}return p}(e,a,"","",function(e){return t.call(i,e,o++)}),a}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit){process.emit("uncaughtException",e);return}console.error(e)};function B(){}t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={c:function(e){return S.H.useMemoCache(e)}},t.act=function(){throw Error("act(...) is not supported in production builds of React.")},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key,a=void 0;if(null!=t)for(o in void 0!==t.ref&&(a=void 0),void 0!==t.key&&(i=""+t.key),t)A.call(t,o)&&"key"!==o&&"__self"!==o&&"__source"!==o&&("ref"!==o||void 0!==t.ref)&&(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var s=Array(o),l=0;l<o;l++)s[l]=arguments[l+2];r.children=s}return w(e.type,i,void 0,void 0,a,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,i={},a=null;if(null!=t)for(r in void 0!==t.key&&(a=""+t.key),t)A.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var s=Array(o),l=0;l<o;l++)s[l]=arguments[l+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return w(e,a,void 0,void 0,null,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;null!==i&&i(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(B,I)}catch(e){I(e)}finally{S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return S.H.useEffect(e,t)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.0.0-rc-7283a213-20241206"},14205:(e,t,n)=>{"use strict";e.exports=n(76014)},16998:(e,t)=>{"use strict";function n(e,t){var n=e.length;for(e.push(t);0<n;){var r=n-1>>>1,i=e[r];if(0<a(i,t))e[r]=t,e[n]=i,n=r;else break}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else if(u<i&&0>a(c,n))e[r]=c,e[u]=n,r=u;else break}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o,s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var c=[],d=[],h=1,f=null,p=3,m=!1,g=!1,v=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,x="undefined"!=typeof setImmediate?setImmediate:null;function _(e){for(var t=r(d);null!==t;){if(null===t.callback)i(d);else if(t.startTime<=e)i(d),t.sortIndex=t.expirationTime,n(c,t);else break;t=r(d)}}function S(e){if(v=!1,_(e),!g){if(null!==r(c))g=!0,I();else{var t=r(d);null!==t&&B(S,t.startTime-e)}}}var A=!1,w=-1,E=5,M=-1;function C(){return!(t.unstable_now()-M<E)}function T(){if(A){var e=t.unstable_now();M=e;var n=!0;try{t:{g=!1,v&&(v=!1,b(w),w=-1),m=!0;var a=p;try{n:{for(_(e),f=r(c);null!==f&&!(f.expirationTime>e&&C());){var s=f.callback;if("function"==typeof s){f.callback=null,p=f.priorityLevel;var l=s(f.expirationTime<=e);if(e=t.unstable_now(),"function"==typeof l){f.callback=l,_(e),n=!0;break n}f===r(c)&&i(c),_(e)}else i(c);f=r(c)}if(null!==f)n=!0;else{var u=r(d);null!==u&&B(S,u.startTime-e),n=!1}}break t}finally{f=null,p=a,m=!1}n=void 0}}finally{n?o():A=!1}}}if("function"==typeof x)o=function(){x(T)};else if("undefined"!=typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=T,o=function(){P.postMessage(null)}}else o=function(){y(T,0)};function I(){A||(A=!0,o())}function B(e,n){w=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,I())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?o+a:o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=0x3fffffff;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s,sortIndex:-1},a>o?(e.sortIndex=a,n(d,e),null===r(c)&&e===r(d)&&(v?(b(w),w=-1):v=!0,B(S,a-o))):(e.sortIndex=s,n(c,e),g||m||(g=!0,I())),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},51583:(e,t,n)=>{"use strict";e.exports=n(16998)},61518:(e,t,n)=>{"use strict";var r=n(53897);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},28200:(e,t,n)=>{e.exports=n(61518)()},53897:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},61641:(e,t)=>{"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=8,t.DefaultEventPriority=32,t.DiscreteEventPriority=2},14145:(e,t,n)=>{"use strict";e.exports=function(e){function t(e,t,n,r){return new rP(e,t,n,r)}function r(){}function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=ii&&e[ii]||e["@@iterator"])?e:null}function o(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===ia?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case rQ:return"Fragment";case r$:return"Portal";case r0:return"Profiler";case rZ:return"StrictMode";case r5:return"Suspense";case r9:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case r3:return(e.displayName||"Context")+".Provider";case r2:return(e._context.displayName||"Context")+".Consumer";case r4:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case r6:return null!==(t=e.displayName||null)?t:o(e.type)||"Memo";case r8:t=e._payload,e=e._init;try{return o(e(t))}catch(e){}}return null}function s(e){if(void 0===ie)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);ie=t&&t[1]||"",it=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+ie+e+it}function l(e,t){if(!e||is)return"";is=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),o=a[0],l=a[1];if(o&&l){var u=o.split("\n"),c=l.split("\n");for(i=r=0;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===u.length||i===c.length)for(r=u.length-1,i=c.length-1;1<=r&&0<=i&&u[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(u[r]!==c[i]){if(1!==r||1!==i)do if(r--,i--,0>i||u[r]!==c[i]){var d="\n"+u[r].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=r&&0<=i);break}}}finally{is=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?s(n):""}function u(e){try{var t="";do t+=function(e){switch(e.tag){case 26:case 27:case 5:return s(e.type);case 16:return s("Lazy");case 13:return s("Suspense");case 19:return s("SuspenseList");case 0:case 15:return e=l(e.type,!1);case 11:return e=l(e.type.render,!1);case 1:return e=l(e.type,!0);default:return""}}(e),e=e.return;while(e);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function c(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 0!=(4098&(t=e).flags)&&(n=t.return),e=t.return;while(e)}return 3===t.tag?n:null}function d(e){if(c(e)!==e)throw Error(i(188))}function h(e){var t=e.alternate;if(!t){if(null===(t=c(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return d(a),e;if(o===r)return d(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,l=a.child;l;){if(l===n){s=!0,n=a,r=o;break}if(l===r){s=!0,r=a,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=a;break}if(l===r){s=!0,r=o,n=a;break}l=l.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}function f(e){return{current:e}}function p(e){0>a4||(e.current=a3[a4],a3[a4]=null,a4--)}function m(e,t){a3[++a4]=e.current,e.current=t}function g(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 0x1000000:case 0x2000000:return 0x3c00000&e;case 0x4000000:return 0x4000000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0;default:return e}}function v(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=e.warmLanes;e=0!==e.finishedLanes;var s=0x7ffffff&n;return 0!==s?0!=(n=s&~i)?r=g(n):0!=(a&=s)?r=g(a):e||0!=(o=s&~o)&&(r=g(o)):0!=(s=n&~i)?r=g(s):0!==a?r=g(a):e||0!=(o=n&~o)&&(r=g(o)),0===r?0:0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(o=t&-t)||32===i&&0!=(4194176&o))?t:r}function y(e,t){return 0==(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function b(){var e=a7;return 0==(4194176&(a7<<=1))&&(a7=128),e}function x(){var e=oe;return 0==(0x3c00000&(oe<<=1))&&(oe=4194304),e}function _(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function S(e,t){e.pendingLanes|=t,0x10000000!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function A(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-a9(t);e.entangledLanes|=t,e.entanglements[r]=0x40000000|e.entanglements[r]|4194218&n}function w(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-a9(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function E(e){return 2<(e&=-e)?8<e?0!=(0x7ffffff&e)?32:0x10000000:8:2}function M(e){if("function"==typeof oc&&od(e),of&&"function"==typeof of.setStrictMode)try{of.setStrictMode(oh,e)}catch(e){}}function C(e,t){if("object"==typeof e&&null!==e){var n=om.get(e);return void 0!==n?n:(t={value:e,source:t,stack:u(t)},om.set(e,t),t)}return{value:e,source:t,stack:u(t)}}function T(e,t){og[ov++]=ob,og[ov++]=oy,oy=e,ob=t}function R(e,t,n){ox[o_++]=oA,ox[o_++]=ow,ox[o_++]=oS,oS=e;var r=oA;e=ow;var i=32-a9(r)-1;r&=~(1<<i),n+=1;var a=32-a9(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,oA=1<<32-a9(t)+i|n<<i|r,ow=a+e}else oA=1<<a|n<<i|r,ow=e}function P(e){null!==e.return&&(T(e,1),R(e,1,0))}function I(e){for(;e===oy;)oy=og[--ov],og[ov]=null,ob=og[--ov],og[ov]=null;for(;e===oS;)oS=ox[--o_],ox[o_]=null,ow=ox[--o_],ox[o_]=null,oA=ox[--o_],ox[o_]=null}function B(e,t){m(oC,t),m(oM,e),m(oE,null),e=ip(t),p(oE),m(oE,e)}function L(){p(oE),p(oM),p(oC)}function D(e){null!==e.memoizedState&&m(oT,e);var t=oE.current,n=im(t,e.type);t!==n&&(m(oM,e),m(oE,n))}function k(e){oM.current===e&&(p(oE),p(oM)),oT.current===e&&(p(oT),iM?iV._currentValue=iG:iV._currentValue2=iG)}function O(e){throw H(C(Error(i(418,"")),e)),oD}function N(e,t){if(!iR)throw Error(i(175));aM(e.stateNode,e.type,e.memoizedProps,t,e)||O(e)}function F(e){for(oR=e.return;oR;)switch(oR.tag){case 3:case 27:oL=!0;return;case 5:case 13:oL=!1;return;default:oR=oR.return}}function U(e){if(!iR||e!==oR)return!1;if(!oI)return F(e),oI=!0,!1;var t=!1;if(a$?3!==e.tag&&27!==e.tag&&(5!==e.tag||aD(e.type)&&!i_(e.type,e.memoizedProps))&&(t=!0):3!==e.tag&&(5!==e.tag||aD(e.type)&&!i_(e.type,e.memoizedProps))&&(t=!0),t&&oP&&O(e),F(e),13===e.tag){if(!iR)throw Error(i(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));oP=aR(e)}else oP=oR?ab(e.stateNode):null;return!0}function z(){iR&&(oP=oR=null,oI=!1)}function H(e){null===oB?oB=[e]:oB.push(e)}function G(){for(var e=oO,t=oN=oO=0;t<e;){var n=ok[t];ok[t++]=null;var r=ok[t];ok[t++]=null;var i=ok[t];ok[t++]=null;var a=ok[t];if(ok[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==a&&X(n,i,a)}}function V(e,t,n,r){ok[oO++]=e,ok[oO++]=t,ok[oO++]=n,ok[oO++]=r,oN|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function j(e,t,n,r){return V(e,t,n,r),J(e)}function W(e,t){return V(e,null,null,t),J(e)}function X(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(i=!0)),e=a,a=a.return;i&&null!==t&&3===e.tag&&(a=e.stateNode,i=31-a9(n),null===(e=(a=a.hiddenUpdates)[i])?a[i]=[t]:e.push(t),t.lane=0x20000000|n)}function J(e){if(50<lh)throw lh=0,lf=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}function Y(e){var t;e!==oU&&null===e.next&&(null===oU?oF=oU=e:oU=oU.next=e),oH=!0,oz||(oz=!0,t=q,iW?iX(function(){0!=(6&sY)?ot(oo,t):t()}):ot(oo,t))}function K(e,t){if(!oG&&oH){oG=!0;do for(var n=!1,r=oF;null!==r;){if(!t){if(0!==e){var i=r.pendingLanes;if(0===i)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=0xc000055&(a=(1<<31-a9(42|e)+1)-1&(i&~(o&~s)))?0xc000055&a|1:a?2|a:0}0!==a&&(n=!0,Z(r,a))}else a=s$,0==(3&(a=v(r,r===sK?a:0)))||y(r,a)||(n=!0,Z(r,a))}r=r.next}while(n);oG=!1}}function q(){oH=oz=!1;var e=0;0!==oV&&(ik()&&(e=oV),oV=0);for(var t=oa(),n=null,r=oF;null!==r;){var i=r.next,a=$(r,t);0===a?(r.next=null,null===n?oF=i:n.next=i,null===i&&(oU=n)):(n=r,(0!==e||0!=(3&a))&&(oH=!0)),r=i}K(e,!1)}function $(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=-0x3c00001&e.pendingLanes;0<a;){var o=31-a9(a),s=1<<o,l=i[o];-1===l?(0==(s&n)||0!=(s&r))&&(i[o]=function(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}if(t=sK,n=s$,n=v(e,e===t?n:0),r=e.callbackNode,0===n||e===t&&2===sQ||null!==e.cancelPendingCommit)return null!==r&&null!==r&&on(r),e.callbackNode=null,e.callbackPriority=0;if(0==(3&n)||y(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&on(r),E(n)){case 2:case 8:n=os;break;case 32:default:n=ol;break;case 0x10000000:n=ou}return n=ot(n,r=Q.bind(null,e)),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&on(r),e.callbackPriority=2,e.callbackNode=null,2}function Q(e,t){var n=e.callbackNode;if(rS()&&e.callbackNode!==n)return null;var r=s$;return 0===(r=v(e,e===sK?r:0))?null:(rn(e,r,t),$(e,oa()),null!=e.callbackNode&&e.callbackNode===n?Q.bind(null,e):null)}function Z(e,t){if(rS())return null;rn(e,t,!0)}function ee(){return 0===oV&&(oV=b()),oV}function et(){if(0==--oW&&null!==oj){null!==oJ&&(oJ.status="fulfilled");var e=oj;oj=null,oX=0,oJ=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function en(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function er(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ei(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ea(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&sY)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=J(e),X(e,null,n),t}return V(e,r,t,n),J(e)}function eo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194176&n))){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,w(e,n)}}function es(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function el(){if(oK){var e=oJ;if(null!==e)throw e}}function eu(e,t,n,r){oK=!1;var i=e.updateQueue;oY=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&(s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l)}if(null!==a){var d=i.baseState;for(o=0,c=u=l=null,s=a;;){var h=-0x20000001&s.lane,f=h!==s.lane;if(f?(s$&h)===h:(r&h)===h){0!==h&&h===oX&&(oK=!0),null!==c&&(c=c.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});t:{var p=e,m=s;switch(h=t,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(n,d,h);break t}d=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(n,d,h):p))break t;d=rY({},d,h);break t;case 2:oY=!0}}null!==(h=s.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=i.callbacks)?i.callbacks=[h]:f.push(h))}else f={lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null===a&&(i.shared.lanes=0),s5|=o,e.lanes=o,e.memoizedState=d}}function ec(e,t){if("function"!=typeof e)throw Error(i(191,e));e.call(t)}function ed(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ec(n[e],t)}function eh(e,t){if(op(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!oq.call(t,i)||!op(e[i],t[i]))return!1}return!0}function ef(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ep(){}function em(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(ep,ep),t=n),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===o$)throw Error(i(483));throw e;default:if("string"==typeof t.status)t.then(ep,ep);else{if(null!==(e=sK)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===o$)throw Error(i(483));throw e}throw o0=t,o$}}function eg(){if(null===o0)throw Error(i(459));var e=o0;return o0=null,e}function ev(e){var t=o2;return o2+=1,null===o1&&(o1=[]),em(o1,e,t)}function ey(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function eb(e,t){if(t.$$typeof===rK)throw Error(i(525));throw Error(i(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ex(e){return(0,e._init)(e._payload)}function e_(e){function n(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function r(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function o(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=rB(e,t)).index=0,e.sibling=null,e}function l(t,n,r){return(t.index=r,e)?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=0x2000002,n):r:(t.flags|=0x2000002,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=0x2000002),t}function c(e,t,n,r){return null===t||6!==t.tag?(t=rN(n,e.mode,r)).return=e:(t=s(t,n)).return=e,t}function d(e,t,n,r){var i=n.type;return i===rQ?f(e,t,n.props.children,r,n.key):(null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===r8&&ex(i)===t.type)?ey(t=s(t,n.props),n):ey(t=rD(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function h(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=rF(n,e.mode,r)).return=e:(t=s(t,n.children||[])).return=e,t}function f(e,t,n,r,i){return null===t||7!==t.tag?(t=rk(n,e.mode,r,i)).return=e:(t=s(t,n)).return=e,t}function p(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=rN(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case rq:return ey(n=rD(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case r$:return(t=rF(t,e.mode,n)).return=e,t;case r8:return p(e,t=(0,t._init)(t._payload),n)}if(il(t)||a(t))return(t=rk(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return p(e,ev(t),n);if(t.$$typeof===r3)return p(e,nl(e,t),n);eb(e,t)}return null}function m(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:c(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case rq:return n.key===i?d(e,t,n,r):null;case r$:return n.key===i?h(e,t,n,r):null;case r8:return m(e,t,n=(i=n._init)(n._payload),r)}if(il(n)||a(n))return null!==i?null:f(e,t,n,r,null);if("function"==typeof n.then)return m(e,t,ev(n),r);if(n.$$typeof===r3)return m(e,t,nl(e,n),r);eb(e,n)}return null}function g(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case rq:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case r$:return h(t,e=e.get(null===r.key?n:r.key)||null,r,i);case r8:return g(e,t,n,r=(0,r._init)(r._payload),i)}if(il(r)||a(r))return f(t,e=e.get(n)||null,r,i,null);if("function"==typeof r.then)return g(e,t,n,ev(r),i);if(r.$$typeof===r3)return g(e,t,n,nl(t,r),i);eb(t,r)}return null}return function(c,d,h,f){try{o2=0;var v=function t(c,d,h,f){if("object"==typeof h&&null!==h&&h.type===rQ&&null===h.key&&(h=h.props.children),"object"==typeof h&&null!==h){switch(h.$$typeof){case rq:t:{for(var v=h.key;null!==d;){if(d.key===v){if((v=h.type)===rQ){if(7===d.tag){r(c,d.sibling),(f=s(d,h.props.children)).return=c,c=f;break t}}else if(d.elementType===v||"object"==typeof v&&null!==v&&v.$$typeof===r8&&ex(v)===d.type){r(c,d.sibling),ey(f=s(d,h.props),h),f.return=c,c=f;break t}r(c,d);break}n(c,d),d=d.sibling}h.type===rQ?(f=rk(h.props.children,c.mode,f,h.key)).return=c:(ey(f=rD(h.type,h.key,h.props,null,c.mode,f),h),f.return=c),c=f}return u(c);case r$:t:{for(v=h.key;null!==d;){if(d.key===v){if(4===d.tag&&d.stateNode.containerInfo===h.containerInfo&&d.stateNode.implementation===h.implementation){r(c,d.sibling),(f=s(d,h.children||[])).return=c,c=f;break t}r(c,d);break}n(c,d),d=d.sibling}(f=rF(h,c.mode,f)).return=c,c=f}return u(c);case r8:return t(c,d,h=(v=h._init)(h._payload),f)}if(il(h))return function(t,i,a,s){for(var u=null,c=null,d=i,h=i=0,f=null;null!==d&&h<a.length;h++){d.index>h?(f=d,d=null):f=d.sibling;var v=m(t,d,a[h],s);if(null===v){null===d&&(d=f);break}e&&d&&null===v.alternate&&n(t,d),i=l(v,i,h),null===c?u=v:c.sibling=v,c=v,d=f}if(h===a.length)return r(t,d),oI&&T(t,h),u;if(null===d){for(;h<a.length;h++)null!==(d=p(t,a[h],s))&&(i=l(d,i,h),null===c?u=d:c.sibling=d,c=d);return oI&&T(t,h),u}for(d=o(d);h<a.length;h++)null!==(f=g(d,t,h,a[h],s))&&(e&&null!==f.alternate&&d.delete(null===f.key?h:f.key),i=l(f,i,h),null===c?u=f:c.sibling=f,c=f);return e&&d.forEach(function(e){return n(t,e)}),oI&&T(t,h),u}(c,d,h,f);if(a(h)){if("function"!=typeof(v=a(h)))throw Error(i(150));return function(t,a,s,u){if(null==s)throw Error(i(151));for(var c=null,d=null,h=a,f=a=0,v=null,y=s.next();null!==h&&!y.done;f++,y=s.next()){h.index>f?(v=h,h=null):v=h.sibling;var b=m(t,h,y.value,u);if(null===b){null===h&&(h=v);break}e&&h&&null===b.alternate&&n(t,h),a=l(b,a,f),null===d?c=b:d.sibling=b,d=b,h=v}if(y.done)return r(t,h),oI&&T(t,f),c;if(null===h){for(;!y.done;f++,y=s.next())null!==(y=p(t,y.value,u))&&(a=l(y,a,f),null===d?c=y:d.sibling=y,d=y);return oI&&T(t,f),c}for(h=o(h);!y.done;f++,y=s.next())null!==(y=g(h,t,f,y.value,u))&&(e&&null!==y.alternate&&h.delete(null===y.key?f:y.key),a=l(y,a,f),null===d?c=y:d.sibling=y,d=y);return e&&h.forEach(function(e){return n(t,e)}),oI&&T(t,f),c}(c,d,h=v.call(h),f)}if("function"==typeof h.then)return t(c,d,ev(h),f);if(h.$$typeof===r3)return t(c,d,nl(c,h),f);eb(c,h)}return"string"==typeof h&&""!==h||"number"==typeof h||"bigint"==typeof h?(h=""+h,null!==d&&6===d.tag?(r(c,d.sibling),(f=s(d,h)).return=c):(r(c,d),(f=rN(h,c.mode,f)).return=c),u(c=f)):r(c,d)}(c,d,h,f);return o1=null,v}catch(e){if(e===o$)throw e;var y=t(29,e,null,c.mode);return y.lanes=f,y.return=c,y}finally{}}}function eS(e,t){m(o9,e=s3),m(o5,t),s3=e|t.baseLanes}function eA(){m(o9,s3),m(o5,o5.current)}function ew(){s3=o9.current,p(o5),p(o9)}function eE(e){var t=e.alternate;m(o7,1&o7.current),m(o6,e),null===o8&&(null===t||null!==o5.current?o8=e:null!==t.memoizedState&&(o8=e))}function eM(e){if(22===e.tag){if(m(o7,o7.current),m(o6,e),null===o8){var t=e.alternate;null!==t&&null!==t.memoizedState&&(o8=e)}}else eC(e)}function eC(){m(o7,o7.current),m(o6,o6.current)}function eT(e){p(o6),o8===e&&(o8=null),p(o7)}function eR(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||af(n)||ap(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function eP(){throw Error(i(321))}function eI(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!op(e[n],t[n]))return!1;return!0}function eB(e,t,n,r,i,a){return se=a,st=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.H=null===e||null===e.memoizedState?sf:sp,so=!1,a=n(r,i),so=!1,sa&&(a=eD(t,n,r,i)),eL(e),a}function eL(e){io.H=sh;var t=null!==sn&&null!==sn.next;if(se=0,sr=sn=st=null,si=!1,sl=0,su=null,t)throw Error(i(300));null===e||sb||null!==(e=e.dependencies)&&na(e)&&(sb=!0)}function eD(e,t,n,r){st=e;var a=0;do{if(sa&&(su=null),sl=0,sa=!1,25<=a)throw Error(i(301));if(a+=1,sr=sn=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}io.H=sm,o=t(n,r)}while(sa);return o}function ek(){var e=io.H,t=e.useState()[0];return t="function"==typeof t.then?eH(t):t,e=e.useState()[0],(null!==sn?sn.memoizedState:null)!==e&&(st.flags|=1024),t}function eO(){var e=0!==ss;return ss=0,e}function eN(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function eF(e){if(si){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}si=!1}se=0,sr=sn=st=null,sa=!1,sl=ss=0,su=null}function eU(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===sr?st.memoizedState=sr=e:sr=sr.next=e,sr}function ez(){if(null===sn){var e=st.alternate;e=null!==e?e.memoizedState:null}else e=sn.next;var t=null===sr?st.memoizedState:sr.next;if(null!==t)sr=t,sn=e;else{if(null===e){if(null===st.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(sn=e).memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},null===sr?st.memoizedState=sr=e:sr=sr.next=e}return sr}function eH(e){var t=sl;return sl+=1,null===su&&(su=[]),e=em(su,e,t),t=st,null===(null===sr?t.memoizedState:sr.next)&&(t=t.alternate,io.H=null===t||null===t.memoizedState?sf:sp),e}function eG(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return eH(e);if(e.$$typeof===r3)return ns(e)}throw Error(i(438,String(e)))}function eV(e){var t=null,n=st.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=st.alternate;null!==r&&null!==(r=r.updateQueue)&&null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===n&&(n=sd(),st.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=ir;return t.index++,n}function ej(e,t){return"function"==typeof t?t(e):t}function eW(e){return eX(ez(),sn,e)}function eX(e,t,n){var r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,null===a)e.memoizedState=o;else{t=a.next;var l=s=null,u=null,c=t,d=!1;do{var h=-0x20000001&c.lane;if(h!==c.lane?(s$&h)===h:(se&h)===h){var f=c.revertLane;if(0===f)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===oX&&(d=!0);else if((se&f)===f){c=c.next,f===oX&&(d=!0);continue}else h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=h,s=o):u=u.next=h,st.lanes|=f,s5|=f;h=c.action,so&&n(o,h),o=c.hasEagerState?c.eagerState:n(o,h)}else f={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,s=o):u=u.next=f,st.lanes|=h,s5|=h;c=c.next}while(null!==c&&c!==t);if(null===u?s=o:u.next=l,!op(o,e.memoizedState)&&(sb=!0,d&&null!==(n=oJ)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=u,r.lastRenderedState=o}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function eJ(e){var t=ez(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);op(o,t.memoizedState)||(sb=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function eY(e,t,n){var r=st,a=ez(),o=oI;if(o){if(void 0===n)throw Error(i(407));n=n()}else n=t();var s=!op((sn||a).memoizedState,n);if(s&&(a.memoizedState=n,sb=!0),a=a.queue,tu(e$.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||null!==sr&&1&sr.memoizedState.tag){if(r.flags|=2048,ti(9,eq.bind(null,r,a,n,t),{destroy:void 0},null),null===sK)throw Error(i(349));o||0!=(60&se)||eK(r,t,n)}return n}function eK(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=st.updateQueue)?(t=sd(),st.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function eq(e,t,n,r){t.value=n,t.getSnapshot=r,eQ(t)&&eZ(e)}function e$(e,t,n){return n(function(){eQ(t)&&eZ(e)})}function eQ(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!op(e,n)}catch(e){return!0}}function eZ(e){var t=W(e,2);null!==t&&rt(t,e,2)}function e0(e){var t=eU();if("function"==typeof e){var n=e;if(e=n(),so){M(!0);try{n()}finally{M(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ej,lastRenderedState:e},t}function e1(e,t,n,r){return e.baseState=n,eX(e,sn,"function"==typeof r?r:ej)}function e2(e,t,n,r,a){if(tR(e))throw Error(i(485));if(null!==(e=t.action)){var o={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==io.T?n(!0):o.isTransition=!1,r(o),null===(n=t.pending)?(o.next=t.pending=o,e3(t,o)):(o.next=n.next,t.pending=n.next=o)}}function e3(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=io.T,o={};io.T=o;try{var s=n(i,r),l=io.S;null!==l&&l(o,s),e4(e,t,s)}catch(n){e9(e,t,n)}finally{io.T=a}}else try{a=n(i,r),e4(e,t,a)}catch(n){e9(e,t,n)}}function e4(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){e5(e,t,n)},function(n){return e9(e,t,n)}):e5(e,t,n)}function e5(e,t,n){t.status="fulfilled",t.value=n,e6(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,e3(e,n)))}function e9(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do t.status="rejected",t.reason=n,e6(t),t=t.next;while(t!==r)}e.action=null}function e6(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function e8(e,t){return t}function e7(e,t){if(oI){var n=sK.formState;if(null!==n){t:{var r=st;if(oI){if(oP){var i=av(oP,oL);if(i){oP=ab(i),r=ay(i);break t}}O(r)}r=!1}r&&(t=n[0])}}(n=eU()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e8,lastRenderedState:t},n.queue=r,n=tM.bind(null,st,r),r.dispatch=n,r=e0(!1);var a=tT.bind(null,st,!1,r.queue);return r=eU(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=e2.bind(null,st,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function te(e){return tt(ez(),sn,e)}function tt(e,t,n){t=eX(e,t,e8)[0],e=eW(ej)[0],t="object"==typeof t&&null!==t&&"function"==typeof t.then?eH(t):t;var r=ez(),i=r.queue,a=i.dispatch;return n!==r.memoizedState&&(st.flags|=2048,ti(9,tn.bind(null,i,n),{destroy:void 0},null)),[t,a,e]}function tn(e,t){e.action=t}function tr(e){var t=ez(),n=sn;if(null!==n)return tt(t,n,e);ez(),t=t.memoizedState;var r=(n=ez()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ti(e,t,n,r){return e={tag:e,create:t,inst:n,deps:r,next:null},null===(t=st.updateQueue)&&(t=sd(),st.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ta(){return ez().memoizedState}function to(e,t,n,r){var i=eU();st.flags|=e,i.memoizedState=ti(1|t,n,{destroy:void 0},void 0===r?null:r)}function ts(e,t,n,r){var i=ez();r=void 0===r?null:r;var a=i.memoizedState.inst;null!==sn&&null!==r&&eI(r,sn.memoizedState.deps)?i.memoizedState=ti(t,n,a,r):(st.flags|=e,i.memoizedState=ti(1|t,n,a,r))}function tl(e,t){to(8390656,8,e,t)}function tu(e,t){ts(2048,8,e,t)}function tc(e,t){return ts(4,2,e,t)}function td(e,t){return ts(4,4,e,t)}function th(e,t){if("function"==typeof t){var n=t(e=e());return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function tf(e,t,n){n=null!=n?n.concat([e]):null,ts(4,4,th.bind(null,t,e),n)}function tp(){}function tm(e,t){var n=ez();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&eI(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function tg(e,t){var n=ez();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&eI(t,r[1]))return r[0];if(r=e(),so){M(!0);try{e()}finally{M(!1)}}return n.memoizedState=[r,t],r}function tv(e,t,n){return void 0===n||0!=(0x40000000&se)?e.memoizedState=t:(e.memoizedState=n,e=re(),st.lanes|=e,s5|=e,n)}function ty(e,t,n,r){return op(n,t)?n:null!==o5.current?(op(e=tv(e,n,r),t)||(sb=!0),e):0==(42&se)?(sb=!0,e.memoizedState=n):(e=re(),st.lanes|=e,s5|=e,t)}function tb(e,t,n,r,i){var a=iL();iB(0!==a&&8>a?a:8);var o=io.T,s={};io.T=s,tT(e,!1,t,n);try{var l=i(),u=io.S;if(null!==u&&u(s,l),null!==l&&"object"==typeof l&&"function"==typeof l.then){var c,d,h=(c=[],d={status:"pending",value:null,reason:null,then:function(e){c.push(e)}},l.then(function(){d.status="fulfilled",d.value=r;for(var e=0;e<c.length;e++)(0,c[e])(r)},function(e){for(d.status="rejected",d.reason=e,e=0;e<c.length;e++)(0,c[e])(void 0)}),d);tC(e,t,h,n7(e))}else tC(e,t,r,n7(e))}catch(n){tC(e,t,{then:function(){},status:"rejected",reason:n},n7())}finally{iB(a),io.T=o}}function tx(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:iG,baseState:iG,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ej,lastRenderedState:iG},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ej,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function t_(){return ns(iV)}function tS(){return ez().memoizedState}function tA(){return ez().memoizedState}function tw(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=n7(),r=ea(t,e=ei(n),n);null!==r&&(rt(r,t,n),eo(r,t,n)),t={cache:nc()},e.payload=t;return}t=t.return}}function tE(e,t,n){var r=n7();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},tR(e)?tP(t,n):null!==(n=j(e,t,n,r))&&(rt(n,e,r),tI(n,t,r))}function tM(e,t,n){tC(e,t,n,n7())}function tC(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(tR(e))tP(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,op(s,o))return V(e,t,i,0),null===sK&&G(),!1}catch(e){}finally{}if(null!==(n=j(e,t,i,r)))return rt(n,e,r),tI(n,t,r),!0}return!1}function tT(e,t,n,r){if(r={lane:2,revertLane:ee(),action:r,hasEagerState:!1,eagerState:null,next:null},tR(e)){if(t)throw Error(i(479))}else null!==(t=j(e,n,r,2))&&rt(t,e,2)}function tR(e){var t=e.alternate;return e===st||null!==t&&t===st}function tP(e,t){sa=si=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tI(e,t,n){if(0!=(4194176&n)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,w(e,n)}}function tB(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:rY({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}function tL(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||!eh(n,r)||!eh(i,a)}function tD(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sg.enqueueReplaceState(t,t.state,null)}function tk(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=rY({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function tO(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function tN(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function tF(e,t,n){return(n=ei(n)).tag=3,n.payload={element:null},n.callback=function(){tO(e,t)},n}function tU(e){return(e=ei(e)).tag=3,e}function tz(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){tN(t,n,r)}}var o=n.stateNode;null!==o&&"function"==typeof o.componentDidCatch&&(e.callback=function(){tN(t,n,r),"function"!=typeof i&&(null===lo?lo=new Set([this]):lo.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}function tH(e,t,n,r){t.child=null===e?o4(t,null,n,r):o3(t,e.child,n,r)}function tG(e,t,n,r,i){n=n.render;var a=t.ref;if("ref"in r){var o={};for(var s in r)"ref"!==s&&(o[s]=r[s])}else o=r;return(no(t),r=eB(e,t,n,o,a,i),s=eO(),null===e||sb)?(oI&&s&&P(t),t.flags|=1,tH(e,t,r,i),t.child):(eN(e,t,i),t6(e,t,i))}function tV(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||rI(a)||void 0!==a.defaultProps||null!==n.compare?((e=rD(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,tj(e,t,a,r,i))}if(a=e.child,!t8(e,i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:eh)(o,r)&&e.ref===t.ref)return t6(e,t,i)}return t.flags|=1,(e=rB(a,r)).ref=t.ref,e.return=t,t.child=e}function tj(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(eh(a,r)&&e.ref===t.ref){if(sb=!1,t.pendingProps=r=a,!t8(e,i))return t.lanes=e.lanes,t6(e,t,i);0!=(131072&e.flags)&&(sb=!0)}}return tY(e,t,n,r,i)}function tW(e,t,n){var r=t.pendingProps,i=r.children,a=0!=(2&t.stateNode._pendingVisibility),o=null!==e?e.memoizedState:null;if(tJ(e,t),"hidden"===r.mode||a){if(0!=(128&t.flags)){if(r=null!==o?o.baseLanes|n:n,null!==e){for(a=0,i=t.child=e.child;null!==i;)a=a|i.lanes|i.childLanes,i=i.sibling;t.childLanes=a&~r}else t.childLanes=0,t.child=null;return tX(e,t,r,n)}if(0==(0x20000000&n))return t.lanes=t.childLanes=0x20000000,tX(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&nf(t,null!==o?o.cachePool:null),null!==o?eS(t,o):eA(),eM(t)}else null!==o?(nf(t,o.cachePool),eS(t,o),eC(t),t.memoizedState=null):(null!==e&&nf(t,null),eA(),eC(t));return tH(e,t,i,n),t.child}function tX(e,t,n,r){var i=nh();return i=null===i?null:{parent:iM?sC._currentValue:sC._currentValue2,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&nf(t,null),eA(),eM(t),null!==e&&ni(e,t,r,!0),null}function tJ(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(i(284));(null===e||e.ref!==n)&&(t.flags|=2097664)}}function tY(e,t,n,r,i){return(no(t),n=eB(e,t,n,r,void 0,i),r=eO(),null===e||sb)?(oI&&r&&P(t),t.flags|=1,tH(e,t,n,i),t.child):(eN(e,t,i),t6(e,t,i))}function tK(e,t,n,r,i,a){return(no(t),t.updateQueue=null,n=eD(t,r,n,i),eL(e),r=eO(),null===e||sb)?(oI&&r&&P(t),t.flags|=1,tH(e,t,n,a),t.child):(eN(e,t,a),t6(e,t,a))}function tq(e,t,n,r,i){if(no(t),null===t.stateNode){var a=a5,o=n.contextType;"object"==typeof o&&null!==o&&(a=ns(o)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=sg,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},en(t),o=n.contextType,a.context="object"==typeof o&&null!==o?ns(o):a5,a.state=t.memoizedState,"function"==typeof(o=n.getDerivedStateFromProps)&&(tB(t,n,o,r),a.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(o=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),o!==a.state&&sg.enqueueReplaceState(a,a.state,null),eu(t,r,a,i),el(),a.state=t.memoizedState),"function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var s=t.memoizedProps,l=tk(n,s);a.props=l;var u=a.context,c=n.contextType;o=a5,"object"==typeof c&&null!==c&&(o=ns(c));var d=n.getDerivedStateFromProps;c="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate,s=t.pendingProps!==s,c||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s||u!==o)&&tD(t,a,r,o),oY=!1;var h=t.memoizedState;a.state=h,eu(t,r,a,i),el(),u=t.memoizedState,s||h!==u||oY?("function"==typeof d&&(tB(t,n,d,r),u=t.memoizedState),(l=oY||tL(t,n,l,r,h,u,o))?(c||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=o,r=l):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,er(e,t),c=tk(n,o=t.memoizedProps),a.props=c,d=t.pendingProps,h=a.context,u=n.contextType,l=a5,"object"==typeof u&&null!==u&&(l=ns(u)),(u="function"==typeof(s=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==d||h!==l)&&tD(t,a,r,l),oY=!1,h=t.memoizedState,a.state=h,eu(t,r,a,i),el();var f=t.memoizedState;o!==d||h!==f||oY||null!==e&&null!==e.dependencies&&na(e.dependencies)?("function"==typeof s&&(tB(t,n,s,r),f=t.memoizedState),(c=oY||tL(t,n,c,r,h,f,l)||null!==e&&null!==e.dependencies&&na(e.dependencies))?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,tJ(e,t),r=0!=(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=o3(t,e.child,null,i),t.child=o3(t,null,n,i)):tH(e,t,n,i),t.memoizedState=a.state,e=t.child):e=t6(e,t,i),e}function t$(e,t,n,r){return z(),t.flags|=256,tH(e,t,n,r),t.child}function tQ(e){return{baseLanes:e,cachePool:np()}}function tZ(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=s8),e}function t0(e,n,r){var a,o=n.pendingProps,s=!1,l=0!=(128&n.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&0!=(2&o7.current)),a&&(s=!0,n.flags&=-129),a=0!=(32&n.flags),n.flags&=-33,null===e){if(oI){if(s?eE(n):eC(n),oI){var u,c=oP;(u=c)&&(null!==(c=aE(c,oL))?(n.memoizedState={dehydrated:c,treeContext:null!==oS?{id:oA,overflow:ow}:null,retryLane:0x20000000},(u=t(18,null,null,0)).stateNode=c,u.return=n,n.child=u,oR=n,oP=null,u=!0):u=!1),u||O(n)}if(null!==(c=n.memoizedState)&&null!==(c=c.dehydrated))return ap(c)?n.lanes=16:n.lanes=0x20000000,null;eT(n)}return(c=o.children,o=o.fallback,s)?(eC(n),c=t2({mode:"hidden",children:c},s=n.mode),o=rk(o,s,r,null),c.return=n,o.return=n,c.sibling=o,n.child=c,(s=n.child).memoizedState=tQ(r),s.childLanes=tZ(e,a,r),n.memoizedState=sx,o):(eE(n),t1(n,c))}if(null!==(u=e.memoizedState)&&null!==(c=u.dehydrated)){if(l)256&n.flags?(eE(n),n.flags&=-257,n=t3(e,n,r)):null!==n.memoizedState?(eC(n),n.child=e.child,n.flags|=128,n=null):(eC(n),s=o.fallback,c=n.mode,o=t2({mode:"visible",children:o.children},c),s=rk(s,c,r,null),s.flags|=2,o.return=n,s.return=n,o.sibling=s,n.child=o,o3(n,e.child,null,r),(o=n.child).memoizedState=tQ(r),o.childLanes=tZ(e,a,r),n.memoizedState=sx,n=s);else if(eE(n),ap(c))a=am(c).digest,(o=Error(i(419))).stack="",o.digest=a,H({value:o,source:null,stack:null}),n=t3(e,n,r);else if(sb||ni(e,n,r,!1),a=0!=(r&e.childLanes),sb||a){if(null!==(a=sK)){if(0!=(42&(o=r&-r)))o=1;else switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:o=64;break;case 0x10000000:o=0x8000000;break;default:o=0}if(0!==(o=0!=(o&(a.suspendedLanes|r))?0:o)&&o!==u.retryLane)throw u.retryLane=o,W(e,o),rt(a,e,o),sy}af(c)||rf(),n=t3(e,n,r)}else af(c)?(n.flags|=128,n.child=e.child,ag(c,n=rT.bind(null,e)),n=null):(e=u.treeContext,iR&&(oP=aS(c),oR=n,oI=!0,oB=null,oL=!1,null!==e&&(ox[o_++]=oA,ox[o_++]=ow,ox[o_++]=oS,oA=e.id,ow=e.overflow,oS=n)),n=t1(n,o.children),n.flags|=4096);return n}return s?(eC(n),s=o.fallback,c=n.mode,l=(u=e.child).sibling,(o=rB(u,{mode:"hidden",children:o.children})).subtreeFlags=0x1e00000&u.subtreeFlags,null!==l?s=rB(l,s):(s=rk(s,c,r,null),s.flags|=2),s.return=n,o.return=n,o.sibling=s,n.child=o,o=s,s=n.child,null===(c=e.child.memoizedState)?c=tQ(r):(null!==(u=c.cachePool)?(l=iM?sC._currentValue:sC._currentValue2,u=u.parent!==l?{parent:l,pool:l}:u):u=np(),c={baseLanes:c.baseLanes|r,cachePool:u}),s.memoizedState=c,s.childLanes=tZ(e,a,r),n.memoizedState=sx,o):(eE(n),e=(r=e.child).sibling,(r=rB(r,{mode:"visible",children:o.children})).return=n,r.sibling=null,null!==e&&(null===(a=n.deletions)?(n.deletions=[e],n.flags|=16):a.push(e)),n.child=r,n.memoizedState=null,r)}function t1(e,t){return(t=t2({mode:"visible",children:t},e.mode)).return=e,e.child=t}function t2(e,t){return rO(e,t,0,null)}function t3(e,t,n){return o3(t,e.child,null,n),e=t1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function t4(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),nn(e.return,t,n)}function t5(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function t9(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(tH(e,t,r.children,n),0!=(2&(r=o7.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))t:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&t4(e,n,t);else if(19===e.tag)t4(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(m(o7,r),i){case"forwards":for(i=null,n=t.child;null!==n;)null!==(e=n.alternate)&&null===eR(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),t5(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eR(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}t5(t,!0,n,null,a);break;case"together":t5(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function t6(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),s5|=t.lanes,0==(n&t.childLanes)&&(null===e||(ni(e,t,n,!1),0==(n&t.childLanes))))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=rB(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=rB(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function t8(e,t){return 0!=(e.lanes&t)||!!(null!==(e=e.dependencies)&&na(e))}function t7(e,t,n){if(null!==e){if(e.memoizedProps!==t.pendingProps)sb=!0;else{if(!t8(e,n)&&0==(128&t.flags))return sb=!1,function(e,t,n){switch(t.tag){case 3:B(t,t.stateNode.containerInfo),ne(t,sC,e.memoizedState.cache),z();break;case 27:case 5:D(t);break;case 4:B(t,t.stateNode.containerInfo);break;case 10:ne(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r){if(null!==r.dehydrated)return eE(t),t.flags|=128,null;if(0!=(n&t.child.childLanes))return t0(e,t,n);return eE(t),null!==(e=t6(e,t,n))?e.sibling:null}eE(t);break;case 19:var i=0!=(128&e.flags);if((r=0!=(n&t.childLanes))||(ni(e,t,n,!1),r=0!=(n&t.childLanes)),i){if(r)return t9(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),m(o7,o7.current),!r)return null;break;case 22:case 23:return t.lanes=0,tW(e,t,n);case 24:ne(t,sC,e.memoizedState.cache)}return t6(e,t,n)}(e,t,n);sb=0!=(131072&e.flags)}}else sb=!1,oI&&0!=(1048576&t.flags)&&R(t,ob,t.index);switch(t.lanes=0,t.tag){case 16:t:{e=t.pendingProps;var r=t.elementType,a=r._init;if(r=a(r._payload),t.type=r,"function"==typeof r)rI(r)?(e=tk(r,e),t.tag=1,t=tq(null,t,r,e,n)):(t.tag=0,t=tY(null,t,r,e,n));else{if(null!=r){if((a=r.$$typeof)===r4){t.tag=11,t=tG(null,t,r,e,n);break t}if(a===r6){t.tag=14,t=tV(null,t,r,e,n);break t}}throw Error(i(306,t=o(r)||r,""))}}return t;case 0:return tY(e,t,t.type,t.pendingProps,n);case 1:return a=tk(r=t.type,t.pendingProps),tq(e,t,r,a,n);case 3:t:{if(B(t,t.stateNode.containerInfo),null===e)throw Error(i(387));var s=t.pendingProps;r=(a=t.memoizedState).element,er(e,t),eu(t,s,null,n);var l=t.memoizedState;if(ne(t,sC,s=l.cache),s!==a.cache&&nr(t,[sC],n,!0),el(),s=l.element,iR&&a.isDehydrated){if(a={element:s,isDehydrated:!1,cache:l.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=t$(e,t,s,n);break t}if(s!==r){H(r=C(Error(i(424)),t)),t=t$(e,t,s,n);break t}for(iR&&(oP=a_(t.stateNode.containerInfo),oR=t,oI=!0,oB=null,oL=!0),n=o4(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(z(),s===r){t=t6(e,t,n);break t}tH(e,t,s,n)}t=t.child}return t;case 26:if(aN)return tJ(e,t),null===e?(n=az(t.type,null,t.pendingProps,null))?t.memoizedState=n:oI||(t.stateNode=aX(t.type,t.pendingProps,oC.current,t)):t.memoizedState=az(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:if(a$)return D(t),null===e&&a$&&oI&&(r=t.stateNode=aQ(t.type,t.pendingProps,oC.current,oE.current,!1),oR=t,oL=!0,oP=ax(r)),r=t.pendingProps.children,null!==e||oI?tH(e,t,r,n):t.child=o3(t,null,r,n),tJ(e,t),t.child;case 5:return null===e&&oI&&(ak(t.type,t.pendingProps,oE.current),(a=r=oP)&&(null!==(r=aA(r,t.type,t.pendingProps,oL))?(t.stateNode=r,oR=t,oP=ax(r),oL=!1,a=!0):a=!1),a||O(t)),D(t),a=t.type,s=t.pendingProps,l=null!==e?e.memoizedProps:null,r=s.children,i_(a,s)?r=null:null!==l&&i_(a,l)&&(t.flags|=32),null!==t.memoizedState&&(a=eB(e,t,ek,null,null,n),iM?iV._currentValue=a:iV._currentValue2=a),tJ(e,t),tH(e,t,r,n),t.child;case 6:return null===e&&oI&&(aO(t.pendingProps,oE.current),(e=n=oP)&&(null!==(n=aw(n,t.pendingProps,oL))?(t.stateNode=n,oR=t,oP=null,e=!0):e=!1),e||O(t)),null;case 13:return t0(e,t,n);case 4:return B(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=o3(t,null,r,n):tH(e,t,r,n),t.child;case 11:return tG(e,t,t.type,t.pendingProps,n);case 7:return tH(e,t,t.pendingProps,n),t.child;case 8:case 12:return tH(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ne(t,t.type,r.value),tH(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,no(t),r=r(a=ns(a)),t.flags|=1,tH(e,t,r,n),t.child;case 14:return tV(e,t,t.type,t.pendingProps,n);case 15:return tj(e,t,t.type,t.pendingProps,n);case 19:return t9(e,t,n);case 22:return tW(e,t,n);case 24:return no(t),r=ns(sC),null===e?(null===(a=nh())&&(a=sK,s=nc(),a.pooledCache=s,s.refCount++,null!==s&&(a.pooledCacheLanes|=n),a=s),t.memoizedState={parent:r,cache:a},en(t),ne(t,sC,a)):(0!=(e.lanes&n)&&(er(e,t),eu(t,null,null,n),el()),a=e.memoizedState,s=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),ne(t,sC,r)):(ne(t,sC,r=s.cache),r!==a.cache&&nr(t,[sC],n,!0))),tH(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function ne(e,t,n){iM?(m(s_,t._currentValue),t._currentValue=n):(m(s_,t._currentValue2),t._currentValue2=n)}function nt(e){var t=s_.current;iM?e._currentValue=t:e._currentValue2=t,p(s_)}function nn(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function nr(e,t,n,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var o=a.dependencies;if(null!==o){var s=a.child;o=o.firstContext;t:for(;null!==o;){var l=o;o=a;for(var u=0;u<t.length;u++)if(l.context===t[u]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),nn(o.return,n,e),r||(s=null);break t}o=l.next}}else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),nn(s,n,e),s=null}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}}function ni(e,t,n,r){e=null;for(var a=t,o=!1;null!==a;){if(!o){if(0!=(524288&a.flags))o=!0;else if(0!=(262144&a.flags))break}if(10===a.tag){var s=a.alternate;if(null===s)throw Error(i(387));if(null!==(s=s.memoizedProps)){var l=a.type;op(a.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(a===oT.current){if(null===(s=a.alternate))throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(iV):e=[iV])}a=a.return}null!==e&&nr(t,e,n,r),t.flags|=262144}function na(e){for(e=e.firstContext;null!==e;){var t=e.context;if(!op(iM?t._currentValue:t._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function no(e){sS=e,sA=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function ns(e){return nu(sS,e)}function nl(e,t){return null===sS&&no(e),nu(e,t)}function nu(e,t){var n=iM?t._currentValue:t._currentValue2;if(t={context:t,memoizedValue:n,next:null},null===sA){if(null===e)throw Error(i(308));sA=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else sA=sA.next=t;return n}function nc(){return{controller:new sw,data:new Map,refCount:0}}function nd(e){e.refCount--,0===e.refCount&&sE(sM,function(){e.controller.abort()})}function nh(){var e=sR.current;return null!==e?e:sK.pooledCache}function nf(e,t){null===t?m(sR,sR.current):m(sR,t.pool)}function np(){var e=nh();return null===e?null:{parent:iM?sC._currentValue:sC._currentValue2,pool:e}}function nm(e){e.flags|=4}function ng(e,t){if(null!==e&&e.child===t.child)return!1;if(0!=(16&t.flags))return!0;for(e=t.child;null!==e;){if(0!=(13878&e.flags)||0!=(13878&e.subtreeFlags))return!0;e=e.sibling}return!1}function nv(e,t,n,r){if(iC)for(n=t.child;null!==n;){if(5===n.tag||6===n.tag)ib(e,n.stateNode);else if(!(4===n.tag||a$&&27===n.tag)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else if(iT)for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=ad(a,i.type,i.memoizedProps)),ib(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=ah(a,i.memoizedProps)),ib(e,a);else if(4!==i.tag){if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),nv(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function ny(e,t){if(iT&&ng(e,t)){var n=(e=t.stateNode).containerInfo,r=as();(function e(t,n,r,i){if(iT)for(var a=n.child;null!==a;){if(5===a.tag){var o=a.stateNode;r&&i&&(o=ad(o,a.type,a.memoizedProps)),al(t,o)}else if(6===a.tag)o=a.stateNode,r&&i&&(o=ah(o,a.memoizedProps)),al(t,o);else if(4!==a.tag){if(22===a.tag&&null!==a.memoizedState)null!==(o=a.child)&&(o.return=a),e(t,a,!(null!==a.memoizedProps&&"manual"===a.memoizedProps.mode),!0);else if(null!==a.child){a.child.return=a,a=a.child;continue}}if(a===n)break;for(;null===a.sibling;){if(null===a.return||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}})(r,t,!1,!1),e.pendingChildren=r,nm(t),au(n,r)}}function nb(e,t,n,r){if(iC)e.memoizedProps!==r&&nm(t);else if(iT){var i=e.stateNode,a=e.memoizedProps;if((e=ng(e,t))||a!==r){var o=oE.current;(a=ao(i,n,a,r,!e,null))===i?t.stateNode=i:(ix(a,n,r,o)&&nm(t),t.stateNode=a,e?nv(a,t,!1,!1):nm(t))}else t.stateNode=i}}function nx(e,t,n){if(iN(t,n)){if(e.flags|=0x1000000,!iF(t,n)){if(rc())e.flags|=8192;else throw o0=oZ,oQ}}else e.flags&=-0x1000001}function n_(e,t){if(aY(t)){if(e.flags|=0x1000000,!aK(t)){if(rc())e.flags|=8192;else throw o0=oZ,oQ}}else e.flags&=-0x1000001}function nS(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?x():0x20000000,e.lanes|=t,s7|=t)}function nA(e,t){if(!oI)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nw(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=0x1e00000&i.subtreeFlags,r|=0x1e00000&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function nE(e,t){switch(I(t),t.tag){case 3:nt(sC),L();break;case 26:case 27:case 5:k(t);break;case 4:L();break;case 13:eT(t);break;case 19:p(o7);break;case 10:nt(t.type);break;case 22:case 23:eT(t),ew(),null!==e&&p(sR);break;case 24:nt(sC)}}function nM(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){rw(t,t.return,e)}}function nC(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(void 0!==s){o.destroy=void 0,i=t;try{s()}catch(e){rw(i,n,e)}}}r=r.next}while(r!==a)}}catch(e){rw(t,t.return,e)}}function nT(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ed(t,n)}catch(t){rw(e,e.return,t)}}}function nR(e,t,n){n.props=tk(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){rw(e,t,n)}}function nP(e,t){try{var n=e.ref;if(null!==n){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var i=ih(r);break;default:i=r}"function"==typeof n?e.refCleanup=n(i):n.current=i}}catch(n){rw(e,t,n)}}function nI(e,t){var n=e.ref,r=e.refCleanup;if(null!==n){if("function"==typeof r)try{r()}catch(n){rw(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(n){rw(e,t,n)}else n.current=null}}function nB(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{i4(r,t,n,e)}catch(t){rw(e,e.return,t)}}function nL(e,t,n){try{i5(e.stateNode,e.type,n,t,e)}catch(t){rw(e,e.return,t)}}function nD(e){return 5===e.tag||3===e.tag||!!aN&&26===e.tag||!!a$&&27===e.tag||4===e.tag}function nk(e){t:for(;;){for(;null===e.sibling;){if(null===e.return||nD(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&(a$?27!==e.tag:1)&&18!==e.tag;){if(2&e.flags||null===e.child||4===e.tag)continue t;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function nO(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?i9(n,e,t):i1(n,e);else if(!(4===r||a$&&27===r)&&null!==(e=e.child))for(nO(e,t,n),e=e.sibling;null!==e;)nO(e,t,n),e=e.sibling}function nN(e,t,n){e=e.containerInfo;try{ac(e,n)}catch(e){rw(t,t.return,e)}}function nF(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:nX(e,n),4&r&&nM(5,n);break;case 1:if(nX(e,n),4&r){if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(e){rw(n,n.return,e)}else{var i=tk(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){rw(n,n.return,e)}}}64&r&&nT(n),512&r&&nP(n,n.return);break;case 3:if(nX(e,n),64&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:e=ih(n.child.stateNode);break;case 1:e=n.child.stateNode}try{ed(r,e)}catch(e){rw(n,n.return,e)}}break;case 26:if(aN){nX(e,n),512&r&&nP(n,n.return);break}case 27:case 5:nX(e,n),null===t&&4&r&&nB(n),512&r&&nP(n,n.return);break;case 12:default:nX(e,n);break;case 13:nX(e,n),4&r&&nH(e,n);break;case 22:if(!(i=null!==n.memoizedState||sP)){t=null!==t&&null!==t.memoizedState||sI;var a=sP,o=sI;sP=i,(sI=t)&&!o?function e(t,n,r){for(r=r&&0!=(8772&n.subtreeFlags),n=n.child;null!==n;){var i=n.alternate,a=t,o=n,s=o.flags;switch(o.tag){case 0:case 11:case 15:e(a,o,r),nM(4,o);break;case 1:if(e(a,o,r),"function"==typeof(a=(i=o).stateNode).componentDidMount)try{a.componentDidMount()}catch(e){rw(i,i.return,e)}if(null!==(a=(i=o).updateQueue)){var l=i.stateNode;try{var u=a.shared.hiddenCallbacks;if(null!==u)for(a.shared.hiddenCallbacks=null,a=0;a<u.length;a++)ec(u[a],l)}catch(e){rw(i,i.return,e)}}r&&64&s&&nT(o),nP(o,o.return);break;case 26:case 27:case 5:e(a,o,r),r&&null===i&&4&s&&nB(o),nP(o,o.return);break;case 12:default:e(a,o,r);break;case 13:e(a,o,r),r&&4&s&&nH(a,o);break;case 22:null===o.memoizedState&&e(a,o,r),nP(o,o.return)}n=n.sibling}}(e,n,0!=(8772&n.subtreeFlags)):nX(e,n),sP=a,sI=o}512&r&&("manual"===n.memoizedProps.mode?nP(n,n.return):nI(n,n.return))}}function nU(e,t,n){for(n=n.child;null!==n;)nz(e,t,n),n=n.sibling}function nz(e,t,n){if(of&&"function"==typeof of.onCommitFiberUnmount)try{of.onCommitFiberUnmount(oh,n)}catch(e){}switch(n.tag){case 26:if(aN){sI||nI(n,t),nU(e,t,n),n.memoizedState?aG(n.memoizedState):n.stateNode&&aW(n.stateNode);break}case 27:if(a$){sI||nI(n,t);var r=sO,i=sN;sO=n.stateNode,nU(e,t,n),a1(n.stateNode),sO=r,sN=i;break}case 5:sI||nI(n,t);case 6:if(iC){if(r=sO,i=sN,sO=null,nU(e,t,n),sO=r,sN=i,null!==sO){if(sN)try{i7(sO,n.stateNode)}catch(e){rw(n,t,e)}else try{i8(sO,n.stateNode)}catch(e){rw(n,t,e)}}}else nU(e,t,n);break;case 18:iC&&null!==sO&&(sN?aL(sO,n.stateNode):aB(sO,n.stateNode));break;case 4:iC?(r=sO,i=sN,sO=n.stateNode.containerInfo,sN=!0,nU(e,t,n),sO=r,sN=i):(iT&&nN(n.stateNode,n,as()),nU(e,t,n));break;case 0:case 11:case 14:case 15:sI||nC(2,n,t),sI||nC(4,n,t),nU(e,t,n);break;case 1:sI||(nI(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&nR(n,t,r)),nU(e,t,n);break;case 21:default:nU(e,t,n);break;case 22:sI||nI(n,t),sI=(r=sI)||null!==n.memoizedState,nU(e,t,n),sI=r}}function nH(e,t){if(iR&&null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{aI(e)}catch(e){rw(t,t.return,e)}}function nG(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new sL),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new sL),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){var r=rR.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function nV(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t;if(iC){var l=s;t:for(;null!==l;){switch(l.tag){case 27:case 5:sO=l.stateNode,sN=!1;break t;case 3:case 4:sO=l.stateNode.containerInfo,sN=!0;break t}l=l.return}if(null===sO)throw Error(i(160));nz(o,s,a),sO=null,sN=!1}else nz(o,s,a);null!==(o=a.alternate)&&(o.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)nj(t,e),t=t.sibling}function nj(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:nV(t,e),nW(e),4&r&&(nC(3,e,e.return),nM(3,e),nC(5,e,e.return));break;case 1:nV(t,e),nW(e),512&r&&(sI||null===n||nI(n,n.return)),64&r&&sP&&null!==(e=e.updateQueue)&&null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r));break;case 26:if(aN){var a=sF;nV(t,e),nW(e),512&r&&(sI||null===n||nI(n,n.return)),4&r&&(r=null!==n?n.memoizedState:null,t=e.memoizedState,null===n?null===t?null===e.stateNode?e.stateNode=aV(a,e.type,e.memoizedProps,e):aj(a,e.type,e.stateNode):e.stateNode=aH(a,t,e.memoizedProps):r!==t?(null===r?null!==n.stateNode&&aW(n.stateNode):aG(r),null===t?aj(a,e.type,e.stateNode):aH(a,t,e.memoizedProps)):null===t&&null!==e.stateNode&&nL(e,e.memoizedProps,n.memoizedProps));break}case 27:if(a$&&4&r&&null===e.alternate){a=e.stateNode;var o=e.memoizedProps;try{aZ(a),a0(e.type,o,a,e)}catch(t){rw(e,e.return,t)}}case 5:if(nV(t,e),nW(e),512&r&&(sI||null===n||nI(n,n.return)),iC){if(32&e.flags){t=e.stateNode;try{ae(t)}catch(t){rw(e,e.return,t)}}4&r&&null!=e.stateNode&&(t=e.memoizedProps,nL(e,t,null!==n?n.memoizedProps:t)),1024&r&&(sB=!0)}break;case 6:if(nV(t,e),nW(e),4&r&&iC){if(null===e.stateNode)throw Error(i(162));r=e.memoizedProps,n=null!==n?n.memoizedProps:r,t=e.stateNode;try{i3(t,n,r)}catch(t){rw(e,e.return,t)}}break;case 3:if(aN?(aJ(),a=sF,sF=aU(t.containerInfo),nV(t,e),sF=a):nV(t,e),nW(e),4&r){if(iC&&iR&&null!==n&&n.memoizedState.isDehydrated)try{aP(t.containerInfo)}catch(t){rw(e,e.return,t)}if(iT){r=t.containerInfo,n=t.pendingChildren;try{ac(r,n)}catch(t){rw(e,e.return,t)}}}sB&&(sB=!1,function e(t){if(1024&t.subtreeFlags)for(t=t.child;null!==t;){var n=t;e(n),5===n.tag&&1024&n.flags&&ij(n.stateNode),t=t.sibling}}(e));break;case 4:aN?(n=sF,sF=aU(e.stateNode.containerInfo),nV(t,e),nW(e),sF=n):(nV(t,e),nW(e)),4&r&&iT&&nN(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:default:nV(t,e),nW(e);break;case 13:nV(t,e),nW(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(lr=oa()),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,nG(e,r));break;case 22:512&r&&(sI||null===n||nI(n,n.return)),a=null!==e.memoizedState;var s=null!==n&&null!==n.memoizedState,l=sP,u=sI;if(sP=l||a,sI=u||s,nV(t,e),sI=u,sP=l,nW(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&r&&(t._visibility=a?-2&t._visibility:1|t._visibility,a&&(t=sP||sI,null===n||s||t||function e(t){for(t=t.child;null!==t;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:nC(4,n,n.return),e(n);break;case 1:nI(n,n.return);var r=n.stateNode;"function"==typeof r.componentWillUnmount&&nR(n,n.return,r),e(n);break;case 26:case 27:case 5:nI(n,n.return),e(n);break;case 22:nI(n,n.return),null===n.memoizedState&&e(n);break;default:e(n)}t=t.sibling}}(e)),iC&&(null===e.memoizedProps||"manual"!==e.memoizedProps.mode))){t:if(n=null,iC)for(t=e;;){if(5===t.tag||aN&&26===t.tag||a$&&27===t.tag){if(null===n){s=n=t;try{o=s.stateNode,a?at(o):ar(s.stateNode,s.memoizedProps)}catch(e){rw(s,s.return,e)}}}else if(6===t.tag){if(null===n){s=t;try{var c=s.stateNode;a?an(c):ai(c,s.memoizedProps)}catch(e){rw(s,s.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}}4&r&&null!==(r=e.updateQueue)&&null!==(n=r.retryQueue)&&(r.retryQueue=null,nG(e,n));break;case 19:nV(t,e),nW(e),4&r&&null!==(r=e.updateQueue)&&(e.updateQueue=null,nG(e,r));case 21:}}function nW(e){var t=e.flags;if(2&t){try{if(iC&&(!a$||27!==e.tag)){t:{for(var n=e.return;null!==n;){if(nD(n)){var r=n;break t}n=n.return}throw Error(i(160))}switch(r.tag){case 27:if(a$){var a=r.stateNode,o=nk(e);nO(e,o,a);break}case 5:var s=r.stateNode;32&r.flags&&(ae(s),r.flags&=-33);var l=nk(e);nO(e,l,s);break;case 3:case 4:var u=r.stateNode.containerInfo,c=nk(e);!function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?i6(r,t,n):i2(r,t);else if(!(4===i||a$&&27===i)&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,c,u);break;default:throw Error(i(161))}}}catch(t){rw(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function nX(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)nF(e,t.alternate,t),t=t.sibling}function nJ(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&nd(n))}function nY(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&nd(e))}function nK(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)nq(e,t,n,r),t=t.sibling}function nq(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:nK(e,t,n,r),2048&i&&nM(9,t);break;case 3:nK(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&nd(e)));break;case 12:if(2048&i){nK(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;"function"==typeof s&&s(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){rw(t,t.return,e)}}else nK(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,null!==t.memoizedState?4&a._visibility?nK(e,t,n,r):n$(e,t):4&a._visibility?nK(e,t,n,r):(a._visibility|=4,function e(t,n,r,i,a){for(a=a&&0!=(10256&n.subtreeFlags),n=n.child;null!==n;){var o=n,s=o.flags;switch(o.tag){case 0:case 11:case 15:e(t,o,r,i,a),nM(8,o);break;case 23:break;case 22:var l=o.stateNode;null!==o.memoizedState?4&l._visibility?e(t,o,r,i,a):n$(t,o):(l._visibility|=4,e(t,o,r,i,a)),a&&2048&s&&nJ(o.alternate,o);break;case 24:e(t,o,r,i,a),a&&2048&s&&nY(o.alternate,o);break;default:e(t,o,r,i,a)}n=n.sibling}}(e,t,n,r,0!=(10256&t.subtreeFlags))),2048&i&&nJ(t.alternate,t);break;case 24:nK(e,t,n,r),2048&i&&nY(t.alternate,t);break;default:nK(e,t,n,r)}}function n$(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=t,r=n.flags;switch(n.tag){case 22:n$(e,n),2048&r&&nJ(n.alternate,n);break;case 24:n$(e,n),2048&r&&nY(n.alternate,n);break;default:n$(e,n)}t=t.sibling}}function nQ(e){if(e.subtreeFlags&sU)for(e=e.child;null!==e;)nZ(e),e=e.sibling}function nZ(e){switch(e.tag){case 26:nQ(e),e.flags&sU&&(null!==e.memoizedState?aq(sF,e.memoizedState,e.memoizedProps):iz(e.type,e.memoizedProps));break;case 5:nQ(e),e.flags&sU&&iz(e.type,e.memoizedProps);break;case 3:case 4:if(aN){var t=sF;sF=aU(e.stateNode.containerInfo),nQ(e),sF=t}else nQ(e);break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=sU,sU=0x1000000,nQ(e),sU=t):nQ(e));break;default:nQ(e)}}function n0(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(null!==e)}}function n1(e){var t=e.deletions;if(0!=(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];sD=r,n3(r,e)}n0(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)n2(e),e=e.sibling}function n2(e){switch(e.tag){case 0:case 11:case 15:n1(e),2048&e.flags&&nC(9,e,e.return);break;case 3:case 12:default:n1(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,function e(t){var n=t.deletions;if(0!=(16&t.flags)){if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];sD=i,n3(i,t)}n0(t)}for(t=t.child;null!==t;){switch((n=t).tag){case 0:case 11:case 15:nC(8,n,n.return),e(n);break;case 22:4&(r=n.stateNode)._visibility&&(r._visibility&=-5,e(n));break;default:e(n)}t=t.sibling}}(e)):n1(e)}}function n3(e,t){for(;null!==sD;){var n=sD;switch(n.tag){case 0:case 11:case 15:nC(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:nd(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,sD=r;else for(n=e;null!==sD;){var i=(r=sD).sibling,a=r.return;if(function e(t){var n=t.alternate;null!==n&&(t.alternate=null,e(n)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(n=t.stateNode)&&iO(n),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}(r),r===n){sD=null;break}if(null!==i){i.return=a,sD=i;break}sD=a}}}function n4(e){var t=iP(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(i(364));return t}if(null===(e=iY(e)))throw Error(i(362));return e.stateNode.current}function n5(e,t){var n=e.tag;switch(t.$$typeof){case sH:if(e.type===t.value)return!0;break;case sG:t:{for(n=0,t=t.value,e=[e,0];n<e.length;){var r=e[n++],a=r.tag,o=e[n++],s=t[o];if(5!==a&&26!==a&&27!==a||!i$(r)){for(;null!=s&&n5(r,s);)s=t[++o];if(o===t.length){t=!0;break t}for(r=r.child;null!==r;)e.push(r,o),r=r.sibling}}t=!1}return t;case sV:if((5===n||26===n||27===n)&&iQ(e.stateNode,t.value))return!0;break;case sW:if((5===n||6===n||26===n||27===n)&&null!==(e=iq(e))&&0<=e.indexOf(t.value))return!0;break;case sj:if((5===n||26===n||27===n)&&"string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase())return!0;break;default:throw Error(i(365))}return!1}function n9(e){switch(e.$$typeof){case sH:return"<"+(o(e.value)||"Unknown")+">";case sG:return":has("+(n9(e)||"")+")";case sV:return'[role="'+e.value+'"]';case sW:return'"'+e.value+'"';case sj:return'[data-testname="'+e.value+'"]';default:throw Error(i(365))}}function n6(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],a=i.tag,o=e[r++],s=t[o];if(5!==a&&26!==a&&27!==a||!i$(i)){for(;null!=s&&n5(i,s);)s=t[++o];if(o===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,o),i=i.sibling}}return n}function n8(e,t){if(!iJ)throw Error(i(363));e=n6(e=n4(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++],a=r.tag;if(5===a||26===a||27===a)i$(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}function n7(){if(0!=(2&sY)&&0!==s$)return s$&-s$;if(null!==io.T){var e=oX;return 0!==e?e:ee()}return iD()}function re(){0===s8&&(s8=0==(0x20000000&s$)||oI?b():0x20000000);var e=o6.current;return null!==e&&(e.flags|=32),s8}function rt(e,t,n){(e===sK&&2===sQ||null!==e.cancelPendingCommit)&&(rl(e,0),ra(e,s$,s8,!1)),S(e,n),(0==(2&sY)||e!==sK)&&(e===sK&&(0==(2&sY)&&(s9|=n),4===s4&&ra(e,s$,s8,!1)),Y(e))}function rn(e,t,n){if(0!=(6&sY))throw Error(i(327));for(var r=!n&&0==(60&t)&&0==(t&e.expiredLanes)||y(e,t),a=r?function(e,t){var n=sY;sY|=2;var r=rd(),a=rh();sK!==e||s$!==t?(la=null,li=oa()+500,rl(e,t)):s1=y(e,t);t:for(;;)try{if(0!==sQ&&null!==sq){t=sq;var o=sZ;n:switch(sQ){case 1:sQ=0,sZ=null,rv(e,t,o,1);break;case 2:if(ef(o)){sQ=0,sZ=null,rg(t);break}t=function(){2===sQ&&sK===e&&(sQ=7),Y(e)},o.then(t,t);break t;case 3:sQ=7;break t;case 4:sQ=5;break t;case 7:ef(o)?(sQ=0,sZ=null,rg(t)):(sQ=0,sZ=null,rv(e,t,o,7));break;case 5:var s=null;switch(sq.tag){case 26:s=sq.memoizedState;case 5:case 27:var l=sq,u=l.type,c=l.pendingProps;if(s?aK(s):iF(u,c)){sQ=0,sZ=null;var d=l.sibling;if(null!==d)sq=d;else{var h=l.return;null!==h?(sq=h,ry(h)):sq=null}break n}}sQ=0,sZ=null,rv(e,t,o,5);break;case 6:sQ=0,sZ=null,rv(e,t,o,6);break;case 8:rs(),s4=6;break t;default:throw Error(i(462))}}(function(){for(;null!==sq&&!or();)rm(sq)})();break}catch(t){ru(e,t)}return(sA=sS=null,io.H=r,io.A=a,sY=n,null!==sq)?0:(sK=null,s$=0,G(),s4)}(e,t):rp(e,t,!0),o=r;;){if(0===a)s1&&!r&&ra(e,t,0,!1);else if(6===a)ra(e,t,0,!s0);else{if(n=e.current.alternate,o&&!function(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&null!==(n=t.updateQueue)&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!op(a(),i))return!1}catch(e){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)){a=rp(e,t,!1),o=!1;continue}if(2===a){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=0!=(s=-0x20000001&e.pendingLanes)?s:0x20000000&s?0x20000000:0;if(0!==s){t=s;t:{a=le;var l=iR&&e.current.memoizedState.isDehydrated;if(l&&(rl(e,s).flags|=256),2!==(s=rp(e,s,!1))){if(s2&&!l){e.errorRecoveryDisabledLanes|=o,s9|=o,a=4;break t}o=lt,lt=a,null!==o&&rr(o)}a=s}if(o=!1,2!==a)continue}}if(1===a){rl(e,0),ra(e,t,0,!0);break}t:{switch(r=e,a){case 0:case 1:throw Error(i(345));case 4:if((4194176&t)===t){ra(r,t,s8,!s0);break t}break;case 2:lt=null;break;case 3:case 5:break;default:throw Error(i(329))}if(r.finishedWork=n,r.finishedLanes=t,(0x3c00000&t)===t&&10<(o=lr+300-oa())){if(ra(r,t,s8,!s0),0!==v(r,0))break t;r.timeoutHandle=iA(ri.bind(null,r,n,lt,la,ln,t,s8,s9,s7,s0,2,-0,0),o);break t}ri(r,n,lt,la,ln,t,s8,s9,s7,s0,0,-0,0)}}break}Y(e)}function rr(e){null===lt?lt=e:lt.push.apply(lt,e)}function ri(e,t,n,r,i,a,o,s,l,u,c,d,h){var f=t.subtreeFlags;if((8192&f||0x1002000==(0x1002000&f))&&(iU(),nZ(t),null!==(t=iH()))){e.cancelPendingCommit=t(rx.bind(null,e,n,r,i,o,s,l,1,d,h)),ra(e,a,o,!u);return}rx(e,n,r,i,o,s,l,c,d,h)}function ra(e,t,n,r){t&=~s6,t&=~s9,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-a9(i),o=1<<a;r[a]=-1,i&=~o}0!==n&&A(e,n,t)}function ro(){return 0!=(6&sY)||(K(0,!1),!1)}function rs(){if(null!==sq){if(0===sQ)var e=sq.return;else e=sq,sA=sS=null,eF(e),o1=null,o2=0,e=sq;for(;null!==e;)nE(e.alternate,e),e=e.return;sq=null}}function rl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==iE&&(e.timeoutHandle=iE,iw(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),rs(),sK=e,sq=n=rB(e.current,null),s$=t,sQ=0,sZ=null,s0=!1,s1=y(e,t),s2=!1,s7=s8=s6=s9=s5=s4=0,lt=le=null,ln=!1,0!=(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-a9(r),a=1<<i;t|=e[i],r&=~a}return s3=t,G(),n}function ru(e,t){st=null,io.H=sh,t===o$?(t=eg(),sQ=3):t===oQ?(t=eg(),sQ=4):sQ=t===sy?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,sZ=t,null===sq&&(s4=1,tO(e,C(t,e.current)))}function rc(){var e=o6.current;return null===e||((4194176&s$)===s$?null===o8:((0x3c00000&s$)===s$||0!=(0x20000000&s$))&&e===o8)}function rd(){var e=io.H;return io.H=sh,null===e?sh:e}function rh(){var e=io.A;return io.A=sz,e}function rf(){s4=4,s0||(4194176&s$)!==s$&&null!==o6.current||(s1=!0),0==(0x7ffffff&s5)&&0==(0x7ffffff&s9)||null===sK||ra(sK,s$,s8,!1)}function rp(e,t,n){var r=sY;sY|=2;var i=rd(),a=rh();(sK!==e||s$!==t)&&(la=null,rl(e,t)),t=!1;var o=s4;t:for(;;)try{if(0!==sQ&&null!==sq){var s=sq,l=sZ;switch(sQ){case 8:rs(),o=6;break t;case 3:case 2:case 6:null===o6.current&&(t=!0);var u=sQ;if(sQ=0,sZ=null,rv(e,s,l,u),n&&s1){o=0;break t}break;default:u=sQ,sQ=0,sZ=null,rv(e,s,l,u)}}(function(){for(;null!==sq;)rm(sq)})(),o=s4;break}catch(t){ru(e,t)}return t&&e.shellSuspendCounter++,sA=sS=null,sY=r,io.H=i,io.A=a,null===sq&&(sK=null,s$=0,G()),o}function rm(e){var t=t7(e.alternate,e,s3);e.memoizedProps=e.pendingProps,null===t?ry(e):sq=t}function rg(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=tK(n,t,t.pendingProps,t.type,void 0,s$);break;case 11:t=tK(n,t,t.pendingProps,t.type.render,t.ref,s$);break;case 5:eF(t);default:nE(n,t),t=t7(n,t=sq=rL(t,s3),s3)}e.memoizedProps=e.pendingProps,null===t?ry(e):sq=t}function rv(e,t,n,r){sA=sS=null,eF(t),o1=null,o2=0;var a=t.return;try{if(function(e,t,n,r,a){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=n.alternate)&&ni(t,n,a,!0),null!==(n=o6.current)){switch(n.tag){case 13:return null===o8?rf():null===n.alternate&&0===s4&&(s4=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===oZ?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),rE(e,r,a)),!1;case 22:return n.flags|=65536,r===oZ?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),rE(e,r,a)),!1}throw Error(i(435,n.tag))}return rE(e,r,a),rf(),!1}if(oI)return null!==(t=o6.current)?(0==(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==oD&&H(C(e=Error(i(422),{cause:r}),n))):(r!==oD&&H(C(t=Error(i(423),{cause:r}),n)),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=C(r,n),a=tF(e.stateNode,r,a),es(e,a),4!==s4&&(s4=2)),!1;var o=Error(i(520),{cause:r});if(o=C(o,n),null===le?le=[o]:le.push(o),4!==s4&&(s4=2),null===t)return!0;r=C(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=tF(n.stateNode,r,e),es(n,e),!1;case 1:if(t=n.type,o=n.stateNode,0==(128&n.flags)&&("function"==typeof t.getDerivedStateFromError||null!==o&&"function"==typeof o.componentDidCatch&&(null===lo||!lo.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,tz(a=tU(a),e,n,r),es(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,s$)){s4=1,tO(e,C(n,e.current)),sq=null;return}}catch(t){if(null!==a)throw sq=a,t;s4=1,tO(e,C(n,e.current)),sq=null;return}32768&t.flags?(oI||1===r?e=!0:s1||0!=(0x20000000&s$)?e=!1:(s0=e=!0,(2===r||3===r||6===r)&&null!==(r=o6.current)&&13===r.tag&&(r.flags|=16384)),rb(t,e)):ry(t)}function ry(e){var t=e;do{if(0!=(32768&t.flags)){rb(t,s0);return}e=t.return;var n=function(e,t,n){var r=t.pendingProps;switch(I(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nw(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),nt(sC),L(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(null===e||null===e.child)&&(U(t)?nm(t):null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==oB&&(rr(oB),oB=null))),ny(e,t),nw(t),null;case 26:if(aN){n=t.type;var a=t.memoizedState;return null===e?(nm(t),null!==a?(nw(t),n_(t,a)):(nw(t),nx(t,n,r))):a?a!==e.memoizedState?(nm(t),nw(t),n_(t,a)):(nw(t),t.flags&=-0x1000001):(iC?e.memoizedProps!==r&&nm(t):nb(e,t,n,r),nw(t),nx(t,n,r)),null}case 27:if(a$){if(k(t),n=oC.current,a=t.type,null!==e&&null!=t.stateNode)iC?e.memoizedProps!==r&&nm(t):nb(e,t,a,r);else{if(!r){if(null===t.stateNode)throw Error(i(166));return nw(t),null}e=oE.current,U(t)?N(t,e):(e=aQ(a,r,n,e,!0),t.stateNode=e,nm(t))}return nw(t),null}case 5:if(k(t),n=t.type,null!==e&&null!=t.stateNode)nb(e,t,n,r);else{if(!r){if(null===t.stateNode)throw Error(i(166));return nw(t),null}e=oE.current,U(t)?N(t,e):(nv(a=iy(n,r,oC.current,e,t),t,!1,!1),t.stateNode=a,ix(a,n,r,e)&&nm(t))}return nw(t),nx(t,t.type,t.pendingProps),null;case 6:if(e&&null!=t.stateNode)n=e.memoizedProps,iC?n!==r&&nm(t):iT&&(n!==r?(t.stateNode=iS(r,oC.current,oE.current,t),nm(t)):t.stateNode=e.stateNode);else{if("string"!=typeof r&&null===t.stateNode)throw Error(i(166));if(e=oC.current,n=oE.current,U(t)){if(!iR)throw Error(i(176));if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(a=oR))switch(a.tag){case 27:case 5:r=a.memoizedProps}aC(e,n,t,r)||O(t)}else t.stateNode=iS(r,e,n,t)}return nw(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=U(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!iR)throw Error(i(344));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));aT(a,t)}else z(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nw(t),a=!1}else null!==oB&&(rr(oB),oB=null),a=!0;if(!a){if(256&t.flags)return eT(t),t;return eT(t),null}}if(eT(t),0!=(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){r=t.child,a=null,null!==r.alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),nS(t,t.updateQueue),nw(t),null;case 4:return L(),ny(e,t),null===e&&iI(t.stateNode.containerInfo),nw(t),null;case 10:return nt(t.type),nw(t),null;case 19:if(p(o7),null===(a=t.memoizedState))return nw(t),null;if(r=0!=(128&t.flags),null===(o=a.rendering)){if(r)nA(a,!1);else{if(0!==s4||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=eR(e))){for(t.flags|=128,nA(a,!1),e=o.updateQueue,t.updateQueue=e,nS(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)rL(n,e),n=n.sibling;return m(o7,1&o7.current|2),t.child}e=e.sibling}null!==a.tail&&oa()>li&&(t.flags|=128,r=!0,nA(a,!1),t.lanes=4194304)}}else{if(!r){if(null!==(e=eR(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,nS(t,e),nA(a,!0),null===a.tail&&"hidden"===a.tailMode&&!o.alternate&&!oI)return nw(t),null}else 2*oa()-a.renderingStartTime>li&&0x20000000!==n&&(t.flags|=128,r=!0,nA(a,!1),t.lanes=4194304)}a.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=a.last)?e.sibling=o:t.child=o,a.last=o)}if(null!==a.tail)return t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=oa(),t.sibling=null,e=o7.current,m(o7,r?1&e|2:1&e),t;return nw(t),null;case 22:case 23:return eT(t),ew(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!=(0x20000000&n)&&0==(128&t.flags)&&(nw(t),6&t.subtreeFlags&&(t.flags|=8192)):nw(t),null!==(n=t.updateQueue)&&nS(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&p(sR),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),nt(sC),nw(t),null;case 25:return null}throw Error(i(156,t.tag))}(t.alternate,t,s3);if(null!==n){sq=n;return}if(null!==(t=t.sibling)){sq=t;return}sq=t=e}while(null!==t);0===s4&&(s4=5)}function rb(e,t){do{var n=function(e,t){switch(I(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return nt(sC),L(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return k(t),null;case 13:if(eT(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));z()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return p(o7),null;case 4:return L(),null;case 10:return nt(t.type),null;case 22:case 23:return eT(t),ew(),null!==e&&p(sR),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return nt(sC),null;default:return null}}(e.alternate,e);if(null!==n){n.flags&=32767,sq=n;return}if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling)){sq=e;return}sq=e=n}while(null!==e);s4=6,sq=null}function rx(e,t,n,r,a,o,s,l,u,c){var d=io.T,h=iL();try{iB(2),io.T=null,function(e,t,n,r,a,o,s,l){do rS();while(null!==ll);if(0!=(6&sY))throw Error(i(327));var u,c=e.finishedWork;if(r=e.finishedLanes,null!==c){if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var d=c.lanes|c.childLanes;if(function(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=o&~n;0<n;){var c=31-a9(n),d=1<<c;s[c]=0,l[c]=-1;var h=u[c];if(null!==h)for(u[c]=null,c=0;c<h.length;c++){var f=h[c];null!==f&&(f.lane&=-0x20000001)}n&=~d}0!==r&&A(e,r,0),0!==a&&0===i&&0!==e.tag&&(e.suspendedLanes|=a&~(o&~t))}(e,r,d|=oN,o,s,l),e===sK&&(sq=sK=null,s$=0),0==(10256&c.subtreeFlags)&&0==(10256&c.flags)||ls||(ls=!0,lc=d,ld=n,u=function(){return rS(!0),null},ot(ol,u)),n=0!=(15990&c.flags),0!=(15990&c.subtreeFlags)||n?(n=io.T,io.T=null,o=iL(),iB(2),s=sY,sY|=4,function(e,t){for(ig(e.containerInfo),sD=t;null!==sD;)if(t=(e=sD).child,0!=(1028&e.subtreeFlags)&&null!==t)t.return=e,sD=t;else for(;null!==sD;){var n=(e=sD).alternate;switch(t=e.flags,e.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!=(1024&t)&&null!==n){t=void 0;var r=e,a=n.memoizedProps;n=n.memoizedState;var o=r.stateNode;try{var s=tk(r.type,a,r.elementType===r.type);t=o.getSnapshotBeforeUpdate(s,n),o.__reactInternalSnapshotBeforeUpdate=t}catch(e){rw(r,r.return,e)}}break;case 3:0!=(1024&t)&&iC&&aa(e.stateNode.containerInfo);break;default:if(0!=(1024&t))throw Error(i(163))}if(null!==(t=e.sibling)){t.return=e.return,sD=t;break}sD=e.return}s=sk,sk=!1}(e,c),nj(c,e),iv(e.containerInfo),e.current=c,nF(e,c.alternate,c),oi(),sY=s,iB(o),io.T=n):e.current=c,ls?(ls=!1,ll=e,lu=r):r_(e,d),0===(d=e.pendingLanes)&&(lo=null),function(e){if(of&&"function"==typeof of.onCommitFiberRoot)try{of.onCommitFiberRoot(oh,e,void 0,128==(128&e.current.flags))}catch(e){}}(c.stateNode,a),Y(e),null!==t)for(a=e.onRecoverableError,c=0;c<t.length;c++)a((d=t[c]).value,{componentStack:d.stack});0!=(3&lu)&&rS(),d=e.pendingLanes,0!=(4194218&r)&&0!=(42&d)?e===lf?lh++:(lh=0,lf=e):lh=0,K(0,!1)}}(e,t,n,r,h,a,o,s,l,u,c)}finally{io.T=d,iB(h)}}function r_(e,t){0==(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,nd(t))}function rS(){if(null!==ll){var e=ll,t=lc;lc=0;var n=E(lu),r=32>n?32:n;n=io.T;var a=iL();try{if(iB(r),io.T=null,null===ll)var o=!1;else{r=ld,ld=null;var s=ll,l=lu;if(ll=null,lu=0,0!=(6&sY))throw Error(i(331));var u=sY;if(sY|=4,n2(s.current),nq(s,s.current,l,r),sY=u,K(0,!1),of&&"function"==typeof of.onPostCommitFiberRoot)try{of.onPostCommitFiberRoot(oh,s)}catch(e){}o=!0}return o}finally{iB(a),io.T=n,r_(e,t)}}return!1}function rA(e,t,n){t=C(n,t),t=tF(e.stateNode,t,2),null!==(e=ea(e,t,2))&&(S(e,2),Y(e))}function rw(e,t,n){if(3===e.tag)rA(e,e,n);else for(;null!==t;){if(3===t.tag){rA(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===lo||!lo.has(r))){e=C(n,e),null!==(r=ea(t,n=tU(2),2))&&(tz(n,r,t,e),S(r,2),Y(r));break}}t=t.return}}function rE(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new sJ;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(s2=!0,i.add(n),e=rM.bind(null,e,t,n),t.then(e,e))}function rM(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,sK===e&&(s$&n)===n&&(4===s4||3===s4&&(0x3c00000&s$)===s$&&300>oa()-lr?0==(2&sY)&&rl(e,0):s6|=n,s7===s$&&(s7=0)),Y(e)}function rC(e,t){0===t&&(t=x()),null!==(e=W(e,t))&&(S(e,t),Y(e))}function rT(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),rC(e,n)}function rR(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==r&&r.delete(t),rC(e,n)}function rP(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rI(e){return!(!(e=e.prototype)||!e.isReactComponent)}function rB(e,n){var r=e.alternate;return null===r?((r=t(e.tag,n,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=0x1e00000&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function rL(e,t){e.flags&=0x1e00002;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function rD(e,n,r,a,o,s){var l=0;if(a=e,"function"==typeof e)rI(e)&&(l=1);else if("string"==typeof e)l=aN&&a$?aF(e,r,oE.current)?26:a2(e)?27:5:aN?aF(e,r,oE.current)?26:5:a$&&a2(e)?27:5;else t:switch(e){case rQ:return rk(r.children,o,s,n);case rZ:l=8,o|=24;break;case r0:return(e=t(12,r,n,2|o)).elementType=r0,e.lanes=s,e;case r5:return(e=t(13,r,n,o)).elementType=r5,e.lanes=s,e;case r9:return(e=t(19,r,n,o)).elementType=r9,e.lanes=s,e;case r7:return rO(r,o,s,n);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case r1:case r3:l=10;break t;case r2:l=9;break t;case r4:l=11;break t;case r6:l=14;break t;case r8:l=16,a=null;break t}l=29,r=Error(i(130,null===e?"null":typeof e,"")),a=null}return(n=t(l,r,n,o)).elementType=e,n.type=a,n.lanes=s,n}function rk(e,n,r,i){return(e=t(7,e,i,n)).lanes=r,e}function rO(e,n,r,a){(e=t(22,e,a,n)).elementType=r7,e.lanes=r;var o={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=o._current;if(null===e)throw Error(i(456));if(0==(2&o._pendingVisibility)){var t=W(e,2);null!==t&&(o._pendingVisibility|=2,rt(t,e,2))}},attach:function(){var e=o._current;if(null===e)throw Error(i(456));if(0!=(2&o._pendingVisibility)){var t=W(e,2);null!==t&&(o._pendingVisibility&=-3,rt(t,e,2))}}};return e.stateNode=o,e}function rN(e,n,r){return(e=t(6,e,null,n)).lanes=r,e}function rF(e,n,r){return(n=t(4,null!==e.children?e.children:[],e.key,n)).lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function rU(e,t,n,r,i,a,o,s){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=iE,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_(0),this.hiddenUpdates=_(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function rz(e,n,r,i,a,o,s,l,u,c,d,h){return e=new rU(e,n,r,s,l,u,c,h),n=1,!0===o&&(n|=24),o=t(3,null,null,n),e.current=o,o.stateNode=e,n=nc(),n.refCount++,e.pooledCache=n,n.refCount++,o.memoizedState={element:i,isDehydrated:r,cache:n},en(o),e}function rH(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw Error(i(268,e=Object.keys(e).join(",")))}return null===(e=null!==(e=h(t))?function e(t){var n=t.tag;if(5===n||26===n||27===n||6===n)return t;for(t=t.child;null!==t;){if(null!==(n=e(t)))return n;t=t.sibling}return null}(e):null)?null:ih(e.stateNode)}function rG(e,t,n,r,i,a){var o;i=a5,null===r.context?r.context=i:r.pendingContext=i,(r=ei(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=ea(e,r,t))&&(rt(n,e,t),eo(n,e,t))}function rV(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rj(e,t){rV(e,t),(e=e.alternate)&&rV(e,t)}var rW={},rX=n(58009),rJ=n(76830),rY=Object.assign,rK=Symbol.for("react.element"),rq=Symbol.for("react.transitional.element"),r$=Symbol.for("react.portal"),rQ=Symbol.for("react.fragment"),rZ=Symbol.for("react.strict_mode"),r0=Symbol.for("react.profiler"),r1=Symbol.for("react.provider"),r2=Symbol.for("react.consumer"),r3=Symbol.for("react.context"),r4=Symbol.for("react.forward_ref"),r5=Symbol.for("react.suspense"),r9=Symbol.for("react.suspense_list"),r6=Symbol.for("react.memo"),r8=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var r7=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var ie,it,ir=Symbol.for("react.memo_cache_sentinel"),ii=Symbol.iterator,ia=Symbol.for("react.client.reference"),io=rX.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,is=!1,il=Array.isArray,iu=e.rendererVersion,ic=e.rendererPackageName,id=e.extraDevToolsConfig,ih=e.getPublicInstance,ip=e.getRootHostContext,im=e.getChildHostContext,ig=e.prepareForCommit,iv=e.resetAfterCommit,iy=e.createInstance,ib=e.appendInitialChild,ix=e.finalizeInitialChildren,i_=e.shouldSetTextContent,iS=e.createTextInstance,iA=e.scheduleTimeout,iw=e.cancelTimeout,iE=e.noTimeout,iM=e.isPrimaryRenderer;e.warnsIfNotActing;var iC=e.supportsMutation,iT=e.supportsPersistence,iR=e.supportsHydration,iP=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var iI=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var iB=e.setCurrentUpdatePriority,iL=e.getCurrentUpdatePriority,iD=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var ik=e.shouldAttemptEagerTransition,iO=e.detachDeletedInstance;e.requestPostPaintCallback;var iN=e.maySuspendCommit,iF=e.preloadInstance,iU=e.startSuspendingCommit,iz=e.suspendInstance,iH=e.waitForCommitToBeReady,iG=e.NotPendingTransition,iV=e.HostTransitionContext,ij=e.resetFormInstance;e.bindToConsole;var iW=e.supportsMicrotasks,iX=e.scheduleMicrotask,iJ=e.supportsTestSelectors,iY=e.findFiberRoot,iK=e.getBoundingRect,iq=e.getTextContent,i$=e.isHiddenSubtree,iQ=e.matchAccessibilityRole,iZ=e.setFocusIfFocusable,i0=e.setupIntersectionObserver,i1=e.appendChild,i2=e.appendChildToContainer,i3=e.commitTextUpdate,i4=e.commitMount,i5=e.commitUpdate,i9=e.insertBefore,i6=e.insertInContainerBefore,i8=e.removeChild,i7=e.removeChildFromContainer,ae=e.resetTextContent,at=e.hideInstance,an=e.hideTextInstance,ar=e.unhideInstance,ai=e.unhideTextInstance,aa=e.clearContainer,ao=e.cloneInstance,as=e.createContainerChildSet,al=e.appendChildToContainerChildSet,au=e.finalizeContainerChildren,ac=e.replaceContainerChildren,ad=e.cloneHiddenInstance,ah=e.cloneHiddenTextInstance,af=e.isSuspenseInstancePending,ap=e.isSuspenseInstanceFallback,am=e.getSuspenseInstanceFallbackErrorDetails,ag=e.registerSuspenseInstanceRetry,av=e.canHydrateFormStateMarker,ay=e.isFormStateMarkerMatching,ab=e.getNextHydratableSibling,ax=e.getFirstHydratableChild,a_=e.getFirstHydratableChildWithinContainer,aS=e.getFirstHydratableChildWithinSuspenseInstance,aA=e.canHydrateInstance,aw=e.canHydrateTextInstance,aE=e.canHydrateSuspenseInstance,aM=e.hydrateInstance,aC=e.hydrateTextInstance,aT=e.hydrateSuspenseInstance,aR=e.getNextHydratableInstanceAfterSuspenseInstance,aP=e.commitHydratedContainer,aI=e.commitHydratedSuspenseInstance,aB=e.clearSuspenseBoundary,aL=e.clearSuspenseBoundaryFromContainer,aD=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var ak=e.validateHydratableInstance,aO=e.validateHydratableTextInstance,aN=e.supportsResources,aF=e.isHostHoistableType,aU=e.getHoistableRoot,az=e.getResource,aH=e.acquireResource,aG=e.releaseResource,aV=e.hydrateHoistable,aj=e.mountHoistable,aW=e.unmountHoistable,aX=e.createHoistableInstance,aJ=e.prepareToCommitHoistables,aY=e.mayResourceSuspendCommit,aK=e.preloadResource,aq=e.suspendResource,a$=e.supportsSingletons,aQ=e.resolveSingletonInstance,aZ=e.clearSingleton,a0=e.acquireSingletonInstance,a1=e.releaseSingletonInstance,a2=e.isHostSingletonType,a3=[],a4=-1,a5={},a9=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(a6(e)/a8|0)|0},a6=Math.log,a8=Math.LN2,a7=128,oe=4194304,ot=rJ.unstable_scheduleCallback,on=rJ.unstable_cancelCallback,or=rJ.unstable_shouldYield,oi=rJ.unstable_requestPaint,oa=rJ.unstable_now,oo=rJ.unstable_ImmediatePriority,os=rJ.unstable_UserBlockingPriority,ol=rJ.unstable_NormalPriority,ou=rJ.unstable_IdlePriority,oc=rJ.log,od=rJ.unstable_setDisableYieldValue,oh=null,of=null,op="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},om=new WeakMap,og=[],ov=0,oy=null,ob=0,ox=[],o_=0,oS=null,oA=1,ow="",oE=f(null),oM=f(null),oC=f(null),oT=f(null),oR=null,oP=null,oI=!1,oB=null,oL=!1,oD=Error(i(519)),ok=[],oO=0,oN=0,oF=null,oU=null,oz=!1,oH=!1,oG=!1,oV=0,oj=null,oW=0,oX=0,oJ=null,oY=!1,oK=!1,oq=Object.prototype.hasOwnProperty,o$=Error(i(460)),oQ=Error(i(474)),oZ={then:function(){}},o0=null,o1=null,o2=0,o3=e_(!0),o4=e_(!1),o5=f(null),o9=f(0),o6=f(null),o8=null,o7=f(0),se=0,st=null,sn=null,sr=null,si=!1,sa=!1,so=!1,ss=0,sl=0,su=null,sc=0,sd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},sh={readContext:ns,use:eG,useCallback:eP,useContext:eP,useEffect:eP,useImperativeHandle:eP,useLayoutEffect:eP,useInsertionEffect:eP,useMemo:eP,useReducer:eP,useRef:eP,useState:eP,useDebugValue:eP,useDeferredValue:eP,useTransition:eP,useSyncExternalStore:eP,useId:eP};sh.useCacheRefresh=eP,sh.useMemoCache=eP,sh.useHostTransitionStatus=eP,sh.useFormState=eP,sh.useActionState=eP,sh.useOptimistic=eP;var sf={readContext:ns,use:eG,useCallback:function(e,t){return eU().memoizedState=[e,void 0===t?null:t],e},useContext:ns,useEffect:tl,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,to(4194308,4,th.bind(null,t,e),n)},useLayoutEffect:function(e,t){return to(4194308,4,e,t)},useInsertionEffect:function(e,t){to(4,2,e,t)},useMemo:function(e,t){var n=eU();t=void 0===t?null:t;var r=e();if(so){M(!0);try{e()}finally{M(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=eU();if(void 0!==n){var i=n(t);if(so){M(!0);try{n(t)}finally{M(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=tE.bind(null,st,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},eU().memoizedState=e},useState:function(e){var t=(e=e0(e)).queue,n=tM.bind(null,st,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:tp,useDeferredValue:function(e,t){return tv(eU(),e,t)},useTransition:function(){var e=e0(!1);return e=tb.bind(null,st,e.queue,!0,!1),eU().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=st,a=eU();if(oI){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===sK)throw Error(i(349));0!=(60&s$)||eK(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,tl(e$.bind(null,r,o,e),[e]),r.flags|=2048,ti(9,eq.bind(null,r,o,n,t),{destroy:void 0},null),n},useId:function(){var e=eU(),t=sK.identifierPrefix;if(oI){var n=ow,r=oA;t=":"+t+"R"+(n=(r&~(1<<32-a9(r)-1)).toString(32)+n),0<(n=ss++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=sc++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return eU().memoizedState=tw.bind(null,st)}};sf.useMemoCache=eV,sf.useHostTransitionStatus=t_,sf.useFormState=e7,sf.useActionState=e7,sf.useOptimistic=function(e){var t=eU();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=tT.bind(null,st,!0,n),n.dispatch=t,[e,t]};var sp={readContext:ns,use:eG,useCallback:tm,useContext:ns,useEffect:tu,useImperativeHandle:tf,useInsertionEffect:tc,useLayoutEffect:td,useMemo:tg,useReducer:eW,useRef:ta,useState:function(){return eW(ej)},useDebugValue:tp,useDeferredValue:function(e,t){return ty(ez(),sn.memoizedState,e,t)},useTransition:function(){var e=eW(ej)[0],t=ez().memoizedState;return["boolean"==typeof e?e:eH(e),t]},useSyncExternalStore:eY,useId:tS};sp.useCacheRefresh=tA,sp.useMemoCache=eV,sp.useHostTransitionStatus=t_,sp.useFormState=te,sp.useActionState=te,sp.useOptimistic=function(e,t){return e1(ez(),sn,e,t)};var sm={readContext:ns,use:eG,useCallback:tm,useContext:ns,useEffect:tu,useImperativeHandle:tf,useInsertionEffect:tc,useLayoutEffect:td,useMemo:tg,useReducer:eJ,useRef:ta,useState:function(){return eJ(ej)},useDebugValue:tp,useDeferredValue:function(e,t){var n=ez();return null===sn?tv(n,e,t):ty(n,sn.memoizedState,e,t)},useTransition:function(){var e=eJ(ej)[0],t=ez().memoizedState;return["boolean"==typeof e?e:eH(e),t]},useSyncExternalStore:eY,useId:tS};sm.useCacheRefresh=tA,sm.useMemoCache=eV,sm.useHostTransitionStatus=t_,sm.useFormState=tr,sm.useActionState=tr,sm.useOptimistic=function(e,t){var n=ez();return null!==sn?e1(n,sn,e,t):(n.baseState=e,[e,n.queue.dispatch])};var sg={isMounted:function(e){return!!(e=e._reactInternals)&&c(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=n7(),i=ei(r);i.payload=t,null!=n&&(i.callback=n),null!==(t=ea(e,i,r))&&(rt(t,e,r),eo(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=n7(),i=ei(r);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=ea(e,i,r))&&(rt(t,e,r),eo(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=n7(),r=ei(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=ea(e,r,n))&&(rt(t,e,n),eo(t,e,n))}},sv="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit){process.emit("uncaughtException",e);return}console.error(e)},sy=Error(i(461)),sb=!1,sx={dehydrated:null,treeContext:null,retryLane:0},s_=f(null),sS=null,sA=null,sw="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},sE=rJ.unstable_scheduleCallback,sM=rJ.unstable_NormalPriority,sC={$$typeof:r3,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},sT=io.S;io.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===oj){var n=oj=[];oW=0,oX=ee(),oJ={status:"pending",value:void 0,then:function(e){n.push(e)}}}oW++,t.then(et,et)}(0,t),null!==sT&&sT(e,t)};var sR=f(null),sP=!1,sI=!1,sB=!1,sL="function"==typeof WeakSet?WeakSet:Set,sD=null,sk=!1,sO=null,sN=!1,sF=null,sU=8192,sz={getCacheForType:function(e){var t=ns(sC),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},sH=0,sG=1,sV=2,sj=3,sW=4;if("function"==typeof Symbol&&Symbol.for){var sX=Symbol.for;sH=sX("selector.component"),sG=sX("selector.has_pseudo_class"),sV=sX("selector.role"),sj=sX("selector.test_id"),sW=sX("selector.text")}var sJ="function"==typeof WeakMap?WeakMap:Map,sY=0,sK=null,sq=null,s$=0,sQ=0,sZ=null,s0=!1,s1=!1,s2=!1,s3=0,s4=0,s5=0,s9=0,s6=0,s8=0,s7=0,le=null,lt=null,ln=!1,lr=0,li=1/0,la=null,lo=null,ls=!1,ll=null,lu=0,lc=0,ld=null,lh=0,lf=null;return rW.attemptContinuousHydration=function(e){if(13===e.tag){var t=W(e,0x4000000);null!==t&&rt(t,e,0x4000000),rj(e,0x4000000)}},rW.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=n7(),n=W(e,t);null!==n&&rt(n,e,t),rj(e,t)}},rW.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if((e=e.stateNode).current.memoizedState.isDehydrated){var t=g(e.pendingLanes);if(0!==t){for(e.pendingLanes|=2,e.entangledLanes|=2;t;){var n=1<<31-a9(t);e.entanglements[1]|=n,t&=~n}Y(e),0==(6&sY)&&(li=oa()+500,K(0,!1))}}break;case 13:null!==(t=W(e,2))&&rt(t,e,2),ro(),rj(e,2)}},rW.batchedUpdates=function(e,t){return e(t)},rW.createComponentSelector=function(e){return{$$typeof:sH,value:e}},rW.createContainer=function(e,t,n,r,i,a,o,s,l,u){return rz(e,t,!1,null,n,r,a,o,s,l,u,null)},rW.createHasPseudoClassSelector=function(e){return{$$typeof:sG,value:e}},rW.createHydrationContainer=function(e,t,n,r,i,a,o,s,l,u,c,d,h){return(e=rz(n,r,!0,e,i,a,s,l,u,c,d,h)).context=a5,n=e.current,(i=ei(r=n7())).callback=null!=t?t:null,ea(n,i,r),e.current.lanes=r,S(e,r),Y(e),e},rW.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:r$,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},rW.createRoleSelector=function(e){return{$$typeof:sV,value:e}},rW.createTestNameSelector=function(e){return{$$typeof:sj,value:e}},rW.createTextSelector=function(e){return{$$typeof:sW,value:e}},rW.defaultOnCaughtError=function(e){console.error(e)},rW.defaultOnRecoverableError=function(e){sv(e)},rW.defaultOnUncaughtError=function(e){sv(e)},rW.deferredUpdates=function(e){var t=io.T,n=iL();try{return iB(32),io.T=null,e()}finally{iB(n),io.T=t}},rW.discreteUpdates=function(e,t,n,r,i){var a=io.T,o=iL();try{return iB(2),io.T=null,e(t,n,r,i)}finally{iB(o),io.T=a,0===sY&&(li=oa()+500)}},rW.findAllNodes=n8,rW.findBoundingRects=function(e,t){if(!iJ)throw Error(i(363));t=n8(e,t),e=[];for(var n=0;n<t.length;n++)e.push(iK(t[n]));for(t=e.length-1;0<t;t--){n=e[t];for(var r=n.x,a=r+n.width,o=n.y,s=o+n.height,l=t-1;0<=l;l--)if(t!==l){var u=e[l],c=u.x,d=c+u.width,h=u.y,f=h+u.height;if(r>=c&&o>=h&&a<=d&&s<=f){e.splice(t,1);break}if(r!==c||n.width!==u.width||f<o||h>s){if(!(o!==h||n.height!==u.height||d<r||c>a)){c>r&&(u.width+=c-r,u.x=r),d<a&&(u.width=a-c),e.splice(t,1);break}}else{h>o&&(u.height+=h-o,u.y=o),f<s&&(u.height=s-h),e.splice(t,1);break}}}return e},rW.findHostInstance=rH,rW.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=h(e))?function e(t){var n=t.tag;if(5===n||26===n||27===n||6===n)return t;for(t=t.child;null!==t;){if(4!==t.tag&&null!==(n=e(t)))return n;t=t.sibling}return null}(e):null)?null:ih(e.stateNode)},rW.findHostInstanceWithWarning=function(e){return rH(e)},rW.flushPassiveEffects=rS,rW.flushSyncFromReconciler=function(e){var t=sY;sY|=1;var n=io.T,r=iL();try{if(iB(2),io.T=null,e)return e()}finally{iB(r),io.T=n,0==(6&(sY=t))&&K(0,!1)}},rW.flushSyncWork=ro,rW.focusWithin=function(e,t){if(!iJ)throw Error(i(363));for(t=Array.from(t=n6(e=n4(e),t)),e=0;e<t.length;){var n=t[e++],r=n.tag;if(!i$(n)){if((5===r||26===r||27===r)&&iZ(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},rW.getFindAllNodesFailureDescription=function(e,t){if(!iJ)throw Error(i(363));var n=0,r=[];e=[n4(e),0];for(var a=0;a<e.length;){var o=e[a++],s=o.tag,l=e[a++],u=t[l];if((5!==s&&26!==s&&27!==s||!i$(o))&&(n5(o,u)&&(r.push(n9(u)),++l>n&&(n=l)),l<t.length))for(o=o.child;null!==o;)e.push(o,l),o=o.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(n9(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},rW.getPublicRootInstance=function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 27:case 5:return ih(e.child.stateNode);default:return e.child.stateNode}},rW.injectIntoDevTools=function(){var e={bundleType:0,version:iu,rendererPackageName:ic,currentDispatcherRef:io,findFiberByHostInstance:iP,reconcilerVersion:"19.0.0"};if(null!==id&&(e.rendererConfig=id),"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{oh=t.inject(e),of=t}catch(e){}e=!!t.checkDCE}}return e},rW.isAlreadyRendering=function(){return!1},rW.observeVisibleRects=function(e,t,n,r){if(!iJ)throw Error(i(363));var a=i0(e=n8(e,t),n,r).disconnect;return{disconnect:function(){a()}}},rW.shouldError=function(){return null},rW.shouldSuspend=function(){return!1},rW.startHostTransition=function(e,t,n,a){if(5!==e.tag)throw Error(i(476));var o=tx(e).queue;tb(e,o,t,iG,null===n?r:function(){var t=tx(e).next.queue;return tC(e,t,{},n7()),n(a)})},rW.updateContainer=function(e,t,n,r){var i=t.current,a=n7();return rG(i,a,e,t,n,r),a},rW.updateContainerSync=function(e,t,n,r){return 0===t.tag&&rS(),rG(t.current,2,e,t,n,r),2},rW},e.exports.default=e.exports,Object.defineProperty(e.exports,"__esModule",{value:!0})},95944:(e,t,n)=>{"use strict";e.exports=n(61641)},49145:(e,t,n)=>{"use strict";e.exports=n(14145)},46849:(e,t)=>{"use strict";function n(e,t){var n=e.length;for(e.push(t);0<n;){var r=n-1>>>1,i=e[r];if(0<a(i,t))e[r]=t,e[n]=i,n=r;else break}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else if(u<i&&0>a(c,n))e[r]=c,e[u]=n,r=u;else break}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o,s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var c=[],d=[],h=1,f=null,p=3,m=!1,g=!1,v=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,x="undefined"!=typeof setImmediate?setImmediate:null;function _(e){for(var t=r(d);null!==t;){if(null===t.callback)i(d);else if(t.startTime<=e)i(d),t.sortIndex=t.expirationTime,n(c,t);else break;t=r(d)}}function S(e){if(v=!1,_(e),!g){if(null!==r(c))g=!0,I();else{var t=r(d);null!==t&&B(S,t.startTime-e)}}}var A=!1,w=-1,E=5,M=-1;function C(){return!(t.unstable_now()-M<E)}function T(){if(A){var e=t.unstable_now();M=e;var n=!0;try{t:{g=!1,v&&(v=!1,b(w),w=-1),m=!0;var a=p;try{n:{for(_(e),f=r(c);null!==f&&!(f.expirationTime>e&&C());){var s=f.callback;if("function"==typeof s){f.callback=null,p=f.priorityLevel;var l=s(f.expirationTime<=e);if(e=t.unstable_now(),"function"==typeof l){f.callback=l,_(e),n=!0;break n}f===r(c)&&i(c),_(e)}else i(c);f=r(c)}if(null!==f)n=!0;else{var u=r(d);null!==u&&B(S,u.startTime-e),n=!1}}break t}finally{f=null,p=a,m=!1}n=void 0}}finally{n?o():A=!1}}}if("function"==typeof x)o=function(){x(T)};else if("undefined"!=typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=T,o=function(){P.postMessage(null)}}else o=function(){y(T,0)};function I(){A||(A=!0,o())}function B(e,n){w=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,I())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?o+a:o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=0x3fffffff;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s,sortIndex:-1},a>o?(e.sortIndex=a,n(d,e),null===r(c)&&e===r(d)&&(v?(b(w),w=-1):v=!0,B(S,a-o))):(e.sortIndex=s,n(c,e),g||m||(g=!0,I())),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},76830:(e,t,n)=>{"use strict";e.exports=n(46849)},75839:(e,t,n)=>{"use strict";var r=n(78127),i=n(13092),a=n(89092),o=n(89926);function s(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}e.exports=function(e,t,n){if(!o(e)||(Array.isArray(t)&&(t=[].concat.apply([],t).join(".")),"string"!=typeof t))return e;for(var l=r(t,{sep:".",brackets:!0}).filter(s),u=l.length,c=-1,d=e;++c<u;){var h=l[c];if(c!==u-1){o(d[h])||(d[h]={}),d=d[h];continue}a(d[h])&&a(n)?d[h]=i({},d[h],n):d[h]=n}return e}},89926:e=>{"use strict";e.exports=function(e){return null!=e&&("object"==typeof e||"function"==typeof e)}},78127:(e,t,n)=>{"use strict";var r=n(91681);function i(e,t,n,r){var a=e.indexOf(t,n);return"\\"===e.charAt(a-1)?i(e,t,a+1):a}e.exports=function(e,t,n){if("string"!=typeof e)throw TypeError("expected a string");"function"==typeof t&&(n=t,t=null),"string"==typeof t&&(t={sep:t});var a,o,s=r({sep:"."},t),l=s.quotes||['"',"'","`"];!0===s.brackets?a={"<":">","(":")","[":"]","{":"}"}:s.brackets&&(a=s.brackets);var u=[],c=[],d=[""],h=s.sep,f=e.length,p=-1;function m(){if(a&&c.length)return a[c[c.length-1]]}for(;++p<f;){var g,v,y=e[p],b=e[p+1],x={val:y,idx:p,arr:d,str:e};if(u.push(x),"\\"===y){x.val=!0===(g=p,"function"==typeof s.keepEscaping?s.keepEscaping(e,g):!0===s.keepEscaping||"\\"===e[g+1])?y+b:b,x.escaped=!0,"function"==typeof n&&n(x),d[d.length-1]+=x.val,p++;continue}if(a&&a[y]){c.push(y);var _=m(),S=p+1;if(-1!==e.indexOf(_,S+1))for(;c.length&&S<f;){var A=e[++S];if("\\"===A){A++;continue}if(-1!==l.indexOf(A)){S=i(e,A,S+1);continue}if(_=m(),c.length&&-1===e.indexOf(_,S+1))break;if(a[A]){c.push(A);continue}_===A&&c.pop()}if(-1===(o=S)){d[d.length-1]+=y;continue}y=e.slice(p,o+1),x.val=y,x.idx=p=o}if(-1!==l.indexOf(y)){if(-1===(o=i(e,y,p+1))){d[d.length-1]+=y;continue}y=!0===(v=y,!0===s.keepDoubleQuotes&&'"'===v||!0===s.keepSingleQuotes&&"'"===v||s.keepQuotes)?e.slice(p,o+1):e.slice(p+1,o),x.val=y,x.idx=p=o}if("function"==typeof n&&(n(x,u),y=x.val,p=x.idx),x.val===h&&!1!==x.split){d.push("");continue}d[d.length-1]+=x.val}return d}},91681:(e,t,n)=>{"use strict";var r=n(29260),i=n(76);function a(e){return e&&"object"==typeof e||r(e)}e.exports=Object.assign||function(e){if(null==e)throw TypeError("Cannot convert undefined or null to object");a(e)||(e={});for(var t=1;t<arguments.length;t++){var n,r=arguments[t];(n=r)&&"string"==typeof n&&(r=function(e){var t={};for(var n in e)t[n]=e[n];return t}(r)),a(r)&&(function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}(e,r),i(e,r))}return e}},10681:(e,t,n)=>{"use strict";var r=n(58009),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,o=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,c=r[1];return s(function(){i.value=n,i.getSnapshot=t,u(i)&&c({inst:i})},[e,n,t]),o(function(){return u(i)&&c({inst:i}),e(function(){u(i)&&c({inst:i})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},23058:(e,t,n)=>{"use strict";var r=n(58009),i=n(94924),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=i.useSyncExternalStore,s=r.useRef,l=r.useEffect,u=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;var f=o(e,(d=u(function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return s=t}return s=e}if(t=s,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(o=e,t):(o=e,s=n)}var o,s,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,n,r,i]))[0],d[1]);return l(function(){h.hasValue=!0,h.value=f},[f]),c(f),f}},94924:(e,t,n)=>{"use strict";e.exports=n(10681)},73450:(e,t,n)=>{"use strict";e.exports=n(23058)},11855:(e,t,n)=>{"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}n.d(t,{A:()=>r})},50043:(e,t,n)=>{"use strict";n.d(t,{Af:()=>s,Nz:()=>i,u5:()=>l,y3:()=>d});var r=n(58009);function i(e,t,n){if(!e)return;if(!0===n(e))return e;let r=t?e.return:e.child;for(;r;){let e=i(r,t,n);if(e)return e;r=t?null:r.sibling}}function a(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}(()=>{var e,t;return"undefined"!=typeof window&&((null==(e=window.document)?void 0:e.createElement)||(null==(t=window.navigator)?void 0:t.product)==="ReactNative")})()?r.useLayoutEffect:r.useEffect;let o=a(r.createContext(null));class s extends r.Component{render(){return r.createElement(o.Provider,{value:this._reactInternals},this.props.children)}}function l(){let e=r.useContext(o);if(null===e)throw Error("its-fine: useFiber must be called within a <FiberProvider />!");let t=r.useId();return r.useMemo(()=>{for(let n of[e,null==e?void 0:e.alternate]){if(!n)continue;let e=i(n,!1,e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}});if(e)return e}},[e,t])}let u=Symbol.for("react.context"),c=e=>null!==e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===u;function d(){let e=function(){let e=l(),[t]=r.useState(()=>new Map);t.clear();let n=e;for(;n;){let e=n.type;c(e)&&e!==o&&!t.has(e)&&t.set(e,r.use(a(e))),n=n.return}return t}();return r.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>i=>r.createElement(t,null,r.createElement(n.Provider,{...i,value:e.get(n)})),e=>r.createElement(s,{...e})),[e])}},90780:(e,t,n)=>{"use strict";n.d(t,{r:()=>r});let r=parseInt(n(29).sPf.replace(/\D+/g,""))},29:(e,t,n)=>{"use strict";let r,i,a,o,s;n.d(t,{$EB:()=>_,$Ed:()=>oA,$Kf:()=>aq,$NF:()=>lD,$O9:()=>eM,$Yl:()=>W,$_I:()=>eB,$ei:()=>B,$p8:()=>l0,A$4:()=>iN,AKb:()=>ld,ALV:()=>ri,AQS:()=>nH,Am1:()=>ui,B69:()=>r7,B6O:()=>o6,BER:()=>ef,BH$:()=>oF,BKk:()=>ai,BND:()=>cg,BRH:()=>lO,BXX:()=>e8,B_h:()=>ts,CMB:()=>eq,CR7:()=>t7,CSG:()=>ln,CV9:()=>so,CVz:()=>tr,CWW:()=>tM,Cfg:()=>eC,CmU:()=>l9,CwR:()=>uA,D$Q:()=>s5,DAe:()=>tN,DXC:()=>oO,Df:()=>s7,Dmk:()=>eW,E0M:()=>cb,EAD:()=>a0,EQC:()=>tB,EZo:()=>w,EdD:()=>M,F1T:()=>ac,F1l:()=>u7,FCc:()=>oN,FFZ:()=>nd,FNr:()=>li,FV:()=>eu,FXf:()=>R,FZo:()=>l3,Fn:()=>tx,Fpm:()=>u4,FvD:()=>oY,Fvi:()=>ep,Fvt:()=>la,G3T:()=>tC,GBG:()=>lx,GJx:()=>e_,GOR:()=>o$,GWd:()=>eY,GYF:()=>a$,GZZ:()=>sr,G_z:()=>lt,Gu$:()=>sq,Gwm:()=>Z,GxU:()=>iT,H23:()=>t_,H2z:()=>cS,HIg:()=>eJ,HLH:()=>t1,HO_:()=>tE,HPb:()=>t9,HXV:()=>tt,HgN:()=>n2,HiM:()=>lq,Hit:()=>lb,Ho_:()=>sp,Hrb:()=>iO,Hrq:()=>ny,I46:()=>aK,I9Y:()=>nF,IE4:()=>e5,IUQ:()=>n8,IWo:()=>cm,Iit:()=>at,Ipv:()=>oZ,Iw4:()=>uN,IzY:()=>cx,Jnc:()=>f,K52:()=>ee,KDk:()=>ta,KLL:()=>t$,KPJ:()=>lM,KRh:()=>er,Ke9:()=>tO,Kef:()=>tA,Ktl:()=>np,Kwu:()=>E,Kzg:()=>un,Kzv:()=>eK,LAk:()=>ed,Ld9:()=>c_,LiQ:()=>O,LlO:()=>ar,LoY:()=>iK,LuO:()=>uV,MBL:()=>l_,MOq:()=>nb,MSw:()=>sK,MW4:()=>iU,Mjd:()=>es,Mmk:()=>nq,N1A:()=>oB,N2s:()=>uw,N5j:()=>tG,NRn:()=>ru,NTi:()=>A,NZq:()=>eL,Nex:()=>cA,Nt7:()=>z,Nv2:()=>oW,Nwf:()=>uL,Nz6:()=>e9,O0B:()=>n7,O3Y:()=>sQ,O49:()=>tU,O9p:()=>rX,ONl:()=>oV,OUM:()=>eD,Oax:()=>iz,Om:()=>ex,OuU:()=>F,P5j:()=>uD,PFK:()=>cu,PJ3:()=>tI,PPD:()=>oo,PTz:()=>ra,Pdi:()=>lf,Pem:()=>oJ,Pf$:()=>ug,Pq0:()=>ro,Q1f:()=>ix,QCA:()=>sV,QP0:()=>g,Qev:()=>nM,Qrf:()=>tc,R1W:()=>cr,R3r:()=>am,RJ4:()=>tF,ROr:()=>t2,RQf:()=>ez,RcT:()=>ne,RiT:()=>lA,Riy:()=>ti,Rkk:()=>tH,RlV:()=>rk,RoJ:()=>aS,RrE:()=>j,Ru$:()=>t3,RyA:()=>y,S$4:()=>tb,S20:()=>o0,SUR:()=>l6,SYV:()=>oX,ScU:()=>lk,T6I:()=>ly,TDQ:()=>sS,THS:()=>iB,TMh:()=>nn,Tap:()=>lN,TdN:()=>nA,TiK:()=>ns,TkQ:()=>e2,U3G:()=>Q,UJ6:()=>lg,UPV:()=>sZ,UTZ:()=>em,Ufg:()=>sX,UpK:()=>aU,UtB:()=>uZ,UtX:()=>ur,V3x:()=>ej,V9B:()=>iw,VCu:()=>oQ,VGF:()=>e3,VT0:()=>eZ,VVr:()=>tZ,Vb5:()=>h,VnP:()=>si,Vnu:()=>nf,Vwu:()=>cw,VxR:()=>tq,W9U:()=>tS,WBB:()=>sW,WNZ:()=>d,WTh:()=>ch,Wdf:()=>nS,Wew:()=>eG,Wk7:()=>v,Wyr:()=>n_,XG_:()=>tw,XIg:()=>S,XJ7:()=>s1,XMJ:()=>uF,XTe:()=>l8,XrR:()=>ei,Y9S:()=>lI,YHV:()=>uK,YJl:()=>af,YOZ:()=>lv,YRT:()=>lL,Yhb:()=>lm,Yuy:()=>eF,Z0B:()=>st,Z58:()=>ay,ZLX:()=>a7,ZM4:()=>cv,ZQM:()=>e0,Zcv:()=>or,Zpd:()=>s$,Zr2:()=>tK,ZyN:()=>lZ,_4j:()=>s9,_QJ:()=>tf,_Ut:()=>an,_xc:()=>u8,a$r:()=>eT,a55:()=>nP,a5J:()=>th,aEY:()=>G,aHM:()=>lT,aJ8:()=>eh,aMy:()=>tT,aVO:()=>lr,agE:()=>nh,amv:()=>ni,b4q:()=>ad,bC7:()=>tg,bCz:()=>C,bI3:()=>tW,bTm:()=>m,baL:()=>iD,bdM:()=>sJ,bkx:()=>eU,brA:()=>q,bw0:()=>et,c5h:()=>oq,c90:()=>e4,cHt:()=>eN,cRK:()=>ag,cZY:()=>u2,caT:()=>en,cj9:()=>nN,czI:()=>tl,dAo:()=>sa,dYF:()=>rr,dcC:()=>eQ,dhZ:()=>tk,dth:()=>lU,dwI:()=>nU,dzP:()=>uG,e0p:()=>X,eB$:()=>ab,eHc:()=>Y,eHs:()=>a_,eaF:()=>i6,eoi:()=>nl,er$:()=>tY,ezk:()=>lp,f4X:()=>k,fBL:()=>eO,fJr:()=>t4,fP5:()=>uv,fTw:()=>ci,fc6:()=>ik,g7M:()=>ec,gJ2:()=>eV,gO9:()=>T,gPd:()=>n6,gWB:()=>nc,ghU:()=>eS,h2z:()=>tD,hB5:()=>b,hIf:()=>ng,hZF:()=>lS,h_9:()=>lC,hdd:()=>U,hgQ:()=>V,hjs:()=>uq,hsX:()=>x,hxR:()=>ew,hy7:()=>eg,hzE:()=>ca,i7d:()=>aa,i7u:()=>nw,iNn:()=>i7,iOZ:()=>oK,iUH:()=>eI,ibB:()=>o1,ie2:()=>N,imn:()=>iA,ix0:()=>eH,iyt:()=>rC,j6:()=>s0,jGm:()=>su,jR7:()=>e6,jUj:()=>av,jej:()=>nY,jf0:()=>tJ,jsO:()=>t8,jut:()=>l4,jzd:()=>nu,k6Q:()=>e7,k6q:()=>eR,k8v:()=>tj,kBv:()=>u,kEx:()=>lB,kG0:()=>t0,kLi:()=>n4,kO0:()=>no,kRr:()=>eP,kTW:()=>eA,kTp:()=>te,kYr:()=>t6,k_V:()=>u$,keZ:()=>ul,klZ:()=>nt,kn4:()=>rO,kqe:()=>tQ,kxk:()=>ak,kyO:()=>eo,l2R:()=>lE,lGu:()=>K,lGw:()=>lh,lMl:()=>im,lPF:()=>nW,lc7:()=>tR,ljd:()=>tP,lxW:()=>ae,lyL:()=>tm,mcG:()=>nJ,mrM:()=>ow,nCl:()=>lW,nEu:()=>sv,nNL:()=>el,nST:()=>P,nWS:()=>re,nZQ:()=>uu,nc$:()=>uz,nzx:()=>sd,o6l:()=>ah,oVO:()=>t5,oh6:()=>uj,ojh:()=>L,ojs:()=>ty,ov9:()=>J,pBf:()=>tn,pFK:()=>sg,pHI:()=>eE,pPE:()=>uk,paN:()=>e1,ppV:()=>nZ,psI:()=>td,q2:()=>s4,qBx:()=>le,qFE:()=>sm,qU7:()=>sh,qUd:()=>l$,qa3:()=>to,qad:()=>D,qq$:()=>nj,qtW:()=>iH,r6x:()=>l5,rFo:()=>rt,rKP:()=>sY,rOG:()=>nx,rQf:()=>tL,rSH:()=>tu,rYR:()=>tz,rrX:()=>uU,s0K:()=>sn,sKt:()=>nr,sPf:()=>l,tBo:()=>uX,tJf:()=>ek,tXL:()=>s8,tcD:()=>sf,tz3:()=>lw,uB5:()=>tp,uSd:()=>s6,uV5:()=>eb,uWO:()=>a1,uXQ:()=>nm,ubm:()=>au,uov:()=>nv,ure:()=>l1,v9J:()=>nE,veJ:()=>lF,vim:()=>na,vmz:()=>iF,vyJ:()=>tX,wAk:()=>sc,wTz:()=>tV,wfO:()=>ey,wn6:()=>H,wrO:()=>eX,wtR:()=>c,wvS:()=>iL,xFO:()=>ev,xJ6:()=>sz,xOk:()=>l2,xSv:()=>$,xZx:()=>uS,xfg:()=>ss,xiE:()=>nK,y3Z:()=>tv,y9J:()=>rn,y_p:()=>ea,ypk:()=>sA,ywQ:()=>p,zD7:()=>uc,zdS:()=>e$,zgK:()=>rJ,znC:()=>I});let l="174",u={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},c={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},d=0,h=1,f=2,p=3,m=0,g=1,v=2,y=3,b=0,x=1,_=2,S=0,A=1,w=2,E=3,M=4,C=5,T=100,R=101,P=102,I=103,B=104,L=200,D=201,k=202,O=203,N=204,F=205,U=206,z=207,H=208,G=209,V=210,j=211,W=212,X=213,J=214,Y=0,K=1,q=2,$=3,Q=4,Z=5,ee=6,et=7,en=0,er=1,ei=2,ea=0,eo=1,es=2,el=3,eu=4,ec=5,ed=6,eh=7,ef="attached",ep="detached",em=300,eg=301,ev=302,ey=303,eb=304,ex=306,e_=1e3,eS=1001,eA=1002,ew=1003,eE=1004,eM=1004,eC=1005,eT=1005,eR=1006,eP=1007,eI=1007,eB=1008,eL=1008,eD=1009,ek=1010,eO=1011,eN=1012,eF=1013,eU=1014,ez=1015,eH=1016,eG=1017,eV=1018,ej=1020,eW=35902,eX=1021,eJ=1022,eY=1023,eK=1024,eq=1025,e$=1026,eQ=1027,eZ=1028,e0=1029,e1=1030,e2=1031,e3=1032,e4=1033,e5=33776,e9=33777,e6=33778,e8=33779,e7=35840,te=35841,tt=35842,tn=35843,tr=36196,ti=37492,ta=37496,to=37808,ts=37809,tl=37810,tu=37811,tc=37812,td=37813,th=37814,tf=37815,tp=37816,tm=37817,tg=37818,tv=37819,ty=37820,tb=37821,tx=36492,t_=36494,tS=36495,tA=36283,tw=36284,tE=36285,tM=36286,tC=2200,tT=2201,tR=2202,tP=2300,tI=2301,tB=2302,tL=2400,tD=2401,tk=2402,tO=2500,tN=2501,tF=0,tU=1,tz=2,tH=3200,tG=3201,tV=3202,tj=3203,tW=0,tX=1,tJ="",tY="srgb",tK="srgb-linear",tq="linear",t$="srgb",tQ=0,tZ=7680,t0=7681,t1=7682,t2=7683,t3=34055,t4=34056,t5=5386,t9=512,t6=513,t8=514,t7=515,ne=516,nt=517,nn=518,nr=519,ni=512,na=513,no=514,ns=515,nl=516,nu=517,nc=518,nd=519,nh=35044,nf=35048,np=35040,nm=35045,ng=35049,nv=35041,ny=35046,nb=35050,nx=35042,n_="100",nS="300 es",nA=2e3,nw=2001,nE={COMPUTE:"compute",RENDER:"render"};class nM{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){let n=this._listeners;return void 0!==n&&void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){let n=this._listeners;if(void 0===n)return;let r=n[e];if(void 0!==r){let e=r.indexOf(t);-1!==e&&r.splice(e,1)}}dispatchEvent(e){let t=this._listeners;if(void 0===t)return;let n=t[e.type];if(void 0!==n){e.target=this;let t=n.slice(0);for(let n=0,r=t.length;n<r;n++)t[n].call(this,e);e.target=null}}}let nC=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],nT=1234567,nR=Math.PI/180,nP=180/Math.PI;function nI(){let e=0xffffffff*Math.random()|0,t=0xffffffff*Math.random()|0,n=0xffffffff*Math.random()|0,r=0xffffffff*Math.random()|0;return(nC[255&e]+nC[e>>8&255]+nC[e>>16&255]+nC[e>>24&255]+"-"+nC[255&t]+nC[t>>8&255]+"-"+nC[t>>16&15|64]+nC[t>>24&255]+"-"+nC[63&n|128]+nC[n>>8&255]+"-"+nC[n>>16&255]+nC[n>>24&255]+nC[255&r]+nC[r>>8&255]+nC[r>>16&255]+nC[r>>24&255]).toLowerCase()}function nB(e,t,n){return Math.max(t,Math.min(n,e))}function nL(e,t){return(e%t+t)%t}function nD(e,t,n){return(1-n)*e+n*t}function nk(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/0xffffffff;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/0x7fffffff,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw Error("Invalid component type.")}}function nO(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(0xffffffff*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(0x7fffffff*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw Error("Invalid component type.")}}let nN={DEG2RAD:nR,RAD2DEG:nP,generateUUID:nI,clamp:nB,euclideanModulo:nL,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:nD,damp:function(e,t,n,r){return nD(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(nL(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(nT=e);let t=nT+=0x6d2b79f5;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/0x100000000},degToRad:function(e){return e*nR},radToDeg:function(e){return e*nP},isPowerOfTwo:function(e){return(e&e-1)==0&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){let a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),u=a((t+r)/2),c=o((t+r)/2),d=a((t-r)/2),h=o((t-r)/2),f=a((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*c,l*d,l*h,s*u);break;case"YZY":e.set(l*h,s*c,l*d,s*u);break;case"ZXZ":e.set(l*d,l*h,s*c,s*u);break;case"XZX":e.set(s*c,l*p,l*f,s*u);break;case"YXY":e.set(l*f,s*c,l*p,s*u);break;case"ZYZ":e.set(l*p,l*f,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:nO,denormalize:nk};class nF{constructor(e=0,t=0){nF.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=nB(this.x,e.x,t.x),this.y=nB(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=nB(this.x,e,t),this.y=nB(this.y,e,t),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(nB(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:Math.acos(nB(this.dot(e)/t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class nU{constructor(e,t,n,r,i,a,o,s,l){nU.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,o,s,l)}set(e,t,n,r,i,a,o,s,l){let u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],d=n[2],h=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],x=r[2],_=r[5],S=r[8];return i[0]=a*p+o*v+s*x,i[3]=a*m+o*y+s*_,i[6]=a*g+o*b+s*S,i[1]=l*p+u*v+c*x,i[4]=l*m+u*y+c*_,i[7]=l*g+u*b+c*S,i[2]=d*p+h*v+f*x,i[5]=d*m+h*y+f*_,i[8]=d*g+h*b+f*S,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-n*i*u+n*o*s+r*i*l-r*a*s}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=u*a-o*l,d=o*s-u*i,h=l*i-a*s,f=t*c+n*d+r*h;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);let p=1/f;return e[0]=c*p,e[1]=(r*l-u*n)*p,e[2]=(o*n-r*a)*p,e[3]=d*p,e[4]=(u*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=h*p,e[7]=(n*s-l*t)*p,e[8]=(a*t-n*i)*p,this}transpose(){let e;let t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,a,o){let s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-r*l,r*s,-r*(-l*a+s*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(nz.makeScale(e,t)),this}rotate(e){return this.premultiply(nz.makeRotation(-e)),this}translate(e,t){return this.premultiply(nz.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}let nz=new nU;function nH(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}let nG={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function nV(e,t){return new nG[e](t)}function nj(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function nW(){let e=nj("canvas");return e.style.display="block",e}let nX={};function nJ(e){e in nX||(nX[e]=!0,console.warn(e))}function nY(e,t,n){return new Promise(function(r,i){setTimeout(function a(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:i();break;case e.TIMEOUT_EXPIRED:setTimeout(a,n);break;default:r()}},n)})}function nK(e){let t=e.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function nq(e){let t=e.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}let n$=new nU().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),nQ=new nU().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715),nZ=function(){let e={enabled:!0,workingColorSpace:tK,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n&&(this.spaces[t].transfer===t$&&(e.r=n0(e.r),e.g=n0(e.g),e.b=n0(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===t$&&(e.r=n1(e.r),e.g=n1(e.g),e.b=n1(e.b))),e},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===tJ?tq:this.spaces[e].transfer},getLuminanceCoefficients:function(e,t=this.workingColorSpace){return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(e=this.workingColorSpace){return this.spaces[e].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return e.define({[tK]:{primaries:t,whitePoint:r,transfer:tq,toXYZ:n$,fromXYZ:nQ,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:tY},outputColorSpaceConfig:{drawingBufferColorSpace:tY}},[tY]:{primaries:t,whitePoint:r,transfer:t$,toXYZ:n$,fromXYZ:nQ,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:tY}}}),e}();function n0(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function n1(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class n2{static getDataURL(e){let t;if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===r&&(r=nj("canvas")),r.width=e.width,r.height=e.height;let n=r.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=r}return t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){let t=nj("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);let r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*n0(i[e]/255);return n.putImageData(r,0,0),t}if(!e.data)return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e;{let t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*n0(t[e]/255)):t[e]=n0(t[e]);return{data:t,width:e.width,height:e.height}}}}let n3=0;class n4{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:n3++}),this.uuid=nI(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];let n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(n5(r[t].image)):e.push(n5(r[t]))}else e=n5(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function n5(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?n2.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let n9=0;class n6 extends nM{constructor(e=n6.DEFAULT_IMAGE,t=n6.DEFAULT_MAPPING,n=eS,r=eS,i=eR,a=eB,o=eY,s=eD,l=n6.DEFAULT_ANISOTROPY,u=tJ){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:n9++}),this.uuid=nI(),this.name="",this.source=new n4(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=s,this.offset=new nF(0,0),this.repeat=new nF(1,1),this.center=new nF(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new nU,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];let n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==em)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case e_:e.x=e.x-Math.floor(e.x);break;case eS:e.x=e.x<0?0:1;break;case eA:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case e_:e.y=e.y-Math.floor(e.y);break;case eS:e.y=e.y<0?0:1;break;case eA:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}n6.DEFAULT_IMAGE=null,n6.DEFAULT_MAPPING=em,n6.DEFAULT_ANISOTROPY=1;class n8{constructor(e=0,t=0,n=0,r=1){n8.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;let a=e.elements,o=a[0],s=a[4],l=a[8],u=a[1],c=a[5],d=a[9],h=a[2],f=a[6],p=a[10];if(.01>Math.abs(s-u)&&.01>Math.abs(l-h)&&.01>Math.abs(d-f)){if(.1>Math.abs(s+u)&&.1>Math.abs(l+h)&&.1>Math.abs(d+f)&&.1>Math.abs(o+c+p-3))return this.set(1,0,0,0),this;t=Math.PI;let e=(o+1)/2,a=(c+1)/2,m=(p+1)/2,g=(s+u)/4,v=(l+h)/4,y=(d+f)/4;return e>a&&e>m?e<.01?(n=0,r=.707106781,i=.707106781):(r=g/(n=Math.sqrt(e)),i=v/n):a>m?a<.01?(n=.707106781,r=0,i=.707106781):(n=g/(r=Math.sqrt(a)),i=y/r):m<.01?(n=.707106781,r=.707106781,i=0):(n=v/(i=Math.sqrt(m)),r=y/i),this.set(n,r,i,t),this}let m=Math.sqrt((f-d)*(f-d)+(l-h)*(l-h)+(u-s)*(u-s));return .001>Math.abs(m)&&(m=1),this.x=(f-d)/m,this.y=(l-h)/m,this.z=(u-s)/m,this.w=Math.acos((o+c+p-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=nB(this.x,e.x,t.x),this.y=nB(this.y,e.y,t.y),this.z=nB(this.z,e.z,t.z),this.w=nB(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=nB(this.x,e,t),this.y=nB(this.y,e,t),this.z=nB(this.z,e,t),this.w=nB(this.w,e,t),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(nB(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class n7 extends nM{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new n8(0,0,e,t),this.scissorTest=!1,this.viewport=new n8(0,0,e,t);let r=new n6({width:e,height:t,depth:1},(n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:eR,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n)).mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);r.flipY=!1,r.generateMipmaps=n.generateMipmaps,r.internalFormat=n.internalFormat,this.textures=[];let i=n.count;for(let e=0;e<i;e++)this.textures[e]=r.clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;let n=Object.assign({},e.textures[t].image);this.textures[t].source=new n4(n)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class re extends n7{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class rt extends n6{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ew,this.minFilter=ew,this.wrapR=eS,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class rn extends re{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new rt(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class rr extends n6{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ew,this.minFilter=ew,this.wrapR=eS,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ri extends re{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new rr(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class ra{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,a,o){let s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],d=i[a+0],h=i[a+1],f=i[a+2],p=i[a+3];if(0===o){e[t+0]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c;return}if(1===o){e[t+0]=d,e[t+1]=h,e[t+2]=f,e[t+3]=p;return}if(c!==p||s!==d||l!==h||u!==f){let e=1-o,t=s*d+l*h+u*f+c*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){let i=Math.sqrt(r),a=Math.atan2(i,t*n);e=Math.sin(e*a)/i,o=Math.sin(o*a)/i}let i=o*n;if(s=s*e+d*i,l=l*e+h*i,u=u*e+f*i,c=c*e+p*i,e===1-o){let e=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=e,l*=e,u*=e,c*=e}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}static multiplyQuaternionsFlat(e,t,n,r,i,a){let o=n[r],s=n[r+1],l=n[r+2],u=n[r+3],c=i[a],d=i[a+1],h=i[a+2],f=i[a+3];return e[t]=o*f+u*c+s*h-l*d,e[t+1]=s*f+u*d+l*c-o*h,e[t+2]=l*f+u*h+o*d-s*c,e[t+3]=u*f-o*c-s*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(r/2),c=o(i/2),d=s(n/2),h=s(r/2),f=s(i/2);switch(a){case"XYZ":this._x=d*u*c+l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c-d*h*f;break;case"YXZ":this._x=d*u*c+l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c+d*h*f;break;case"ZXY":this._x=d*u*c-l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c-d*h*f;break;case"ZYX":this._x=d*u*c-l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c+d*h*f;break;case"YZX":this._x=d*u*c+l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c-d*h*f;break;case"XZY":this._x=d*u*c-l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c+d*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],c=t[10],d=n+o+c;if(d>0){let e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(u-s)*e,this._y=(i-l)*e,this._z=(a-r)*e}else if(n>o&&n>c){let e=2*Math.sqrt(1+n-o-c);this._w=(u-s)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(i+l)/e}else if(o>c){let e=2*Math.sqrt(1+o-n-c);this._w=(i-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(s+u)/e}else{let e=2*Math.sqrt(1+c-n-o);this._w=(a-r)/e,this._x=(i+l)/e,this._y=(s+u)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x),this._w=n,this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(nB(this.dot(e),-1,1)))}rotateTowards(e,t){let n=this.angleTo(e);if(0===n)return this;let r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+a*o+r*l-i*s,this._y=r*u+a*s+i*o-n*l,this._z=i*u+a*l+n*s-r*o,this._w=a*u-n*o-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);let n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;let s=1-o*o;if(s<=Number.EPSILON){let e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this}let l=Math.sqrt(s),u=Math.atan2(l,o),c=Math.sin((1-t)*u)/l,d=Math.sin(t*u)/l;return this._w=a*c+this._w*d,this._x=n*c+this._x*d,this._y=r*c+this._y*d,this._z=i*c+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),i*Math.sin(t),i*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ro{constructor(e=0,t=0,n=0){ro.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(rl.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(rl.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(e){let t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=2*(a*r-o*n),u=2*(o*t-i*r),c=2*(i*n-a*t);return this.x=t+s*l+a*c-o*u,this.y=n+s*u+o*l-i*c,this.z=r+s*c+i*u-a*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=nB(this.x,e.x,t.x),this.y=nB(this.y,e.y,t.y),this.z=nB(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=nB(this.x,e,t),this.y=nB(this.y,e,t),this.z=nB(this.z,e,t),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(nB(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}projectOnVector(e){let t=e.lengthSq();if(0===t)return this.set(0,0,0);let n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return rs.copy(this).projectOnVector(e),this.sub(rs)}reflect(e){return this.sub(rs.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:Math.acos(nB(this.dot(e)/t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){let r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}let rs=new ro,rl=new ra;class ru{constructor(e=new ro(Infinity,Infinity,Infinity),t=new ro(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(rd.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(rd.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=rd.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let n=e.geometry;if(void 0!==n){let r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,rd):rd.fromBufferAttribute(r,t),rd.applyMatrix4(e.matrixWorld),this.expandByPoint(rd);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),rh.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),rh.copy(n.boundingBox)),rh.applyMatrix4(e.matrixWorld),this.union(rh)}let r=e.children;for(let e=0,n=r.length;e<n;e++)this.expandByObject(r[e],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,rd),rd.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(rb),rx.subVectors(this.max,rb),rf.subVectors(e.a,rb),rp.subVectors(e.b,rb),rm.subVectors(e.c,rb),rg.subVectors(rp,rf),rv.subVectors(rm,rp),ry.subVectors(rf,rm);let t=[0,-rg.z,rg.y,0,-rv.z,rv.y,0,-ry.z,ry.y,rg.z,0,-rg.x,rv.z,0,-rv.x,ry.z,0,-ry.x,-rg.y,rg.x,0,-rv.y,rv.x,0,-ry.y,ry.x,0];return!!(rA(t,rf,rp,rm,rx)&&rA(t=[1,0,0,0,1,0,0,0,1],rf,rp,rm,rx))&&(r_.crossVectors(rg,rv),rA(t=[r_.x,r_.y,r_.z],rf,rp,rm,rx))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,rd).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(rd).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(rc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),rc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),rc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),rc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),rc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),rc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),rc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),rc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(rc)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}let rc=[new ro,new ro,new ro,new ro,new ro,new ro,new ro,new ro],rd=new ro,rh=new ru,rf=new ro,rp=new ro,rm=new ro,rg=new ro,rv=new ro,ry=new ro,rb=new ro,rx=new ro,r_=new ro,rS=new ro;function rA(e,t,n,r,i){for(let a=0,o=e.length-3;a<=o;a+=3){rS.fromArray(e,a);let o=i.x*Math.abs(rS.x)+i.y*Math.abs(rS.y)+i.z*Math.abs(rS.z),s=t.dot(rS),l=n.dot(rS),u=r.dot(rS);if(Math.max(-Math.max(s,l,u),Math.min(s,l,u))>o)return!1}return!0}let rw=new ru,rE=new ro,rM=new ro;class rC{constructor(e=new ro,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let n=this.center;void 0!==t?n.copy(t):rw.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?e.makeEmpty():(e.set(this.center,this.center),e.expandByScalar(this.radius)),e}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;rE.subVectors(e,this.center);let t=rE.lengthSq();if(t>this.radius*this.radius){let e=Math.sqrt(t),n=(e-this.radius)*.5;this.center.addScaledVector(rE,n/e),this.radius+=n}return this}union(e){return e.isEmpty()||(this.isEmpty()?this.copy(e):!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(rM.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(rE.copy(e.center).add(rM)),this.expandByPoint(rE.copy(e.center).sub(rM)))),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}let rT=new ro,rR=new ro,rP=new ro,rI=new ro,rB=new ro,rL=new ro,rD=new ro;class rk{constructor(e=new ro,t=new ro(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,rT)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=rT.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(rT.copy(this.origin).addScaledVector(this.direction,t),rT.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){let i,a,o,s;rR.copy(e).add(t).multiplyScalar(.5),rP.copy(t).sub(e).normalize(),rI.copy(this.origin).sub(rR);let l=.5*e.distanceTo(t),u=-this.direction.dot(rP),c=rI.dot(this.direction),d=-rI.dot(rP),h=rI.lengthSq(),f=Math.abs(1-u*u);if(f>0){if(i=u*d-c,a=u*c-d,s=l*f,i>=0){if(a>=-s){if(a<=s){let e=1/f;i*=e,a*=e,o=i*(i+u*a+2*c)+a*(u*i+a+2*d)+h}else o=-(i=Math.max(0,-(u*(a=l)+c)))*i+a*(a+2*d)+h}else o=-(i=Math.max(0,-(u*(a=-l)+c)))*i+a*(a+2*d)+h}else a<=-s?(a=(i=Math.max(0,-(-u*l+c)))>0?-l:Math.min(Math.max(-l,-d),l),o=-i*i+a*(a+2*d)+h):a<=s?(i=0,o=(a=Math.min(Math.max(-l,-d),l))*(a+2*d)+h):(a=(i=Math.max(0,-(u*l+c)))>0?l:Math.min(Math.max(-l,-d),l),o=-i*i+a*(a+2*d)+h)}else a=u>0?-l:l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*d)+h;return n&&n.copy(this.origin).addScaledVector(this.direction,i),r&&r.copy(rR).addScaledVector(rP,a),o}intersectSphere(e,t){rT.subVectors(e.center,this.origin);let n=rT.dot(this.direction),r=rT.dot(rT)-n*n,i=e.radius*e.radius;if(r>i)return null;let a=Math.sqrt(i-r),o=n-a,s=n+a;return s<0?null:o<0?this.at(s,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;let n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){let n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return!!(0===t||e.normal.dot(this.direction)*t<0)}intersectBox(e,t){let n,r,i,a,o,s;let l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,d=this.origin;return(l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),u>=0?(i=(e.min.y-d.y)*u,a=(e.max.y-d.y)*u):(i=(e.max.y-d.y)*u,a=(e.min.y-d.y)*u),n>a||i>r)?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),c>=0?(o=(e.min.z-d.z)*c,s=(e.max.z-d.z)*c):(o=(e.max.z-d.z)*c,s=(e.min.z-d.z)*c),n>s||o>r)?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return null!==this.intersectBox(e,rT)}intersectTriangle(e,t,n,r,i){let a;rB.subVectors(t,e),rL.subVectors(n,e),rD.crossVectors(rB,rL);let o=this.direction.dot(rD);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}rI.subVectors(this.origin,e);let s=a*this.direction.dot(rL.crossVectors(rI,rL));if(s<0)return null;let l=a*this.direction.dot(rB.cross(rI));if(l<0||s+l>o)return null;let u=-a*rI.dot(rD);return u<0?null:this.at(u/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class rO{constructor(e,t,n,r,i,a,o,s,l,u,c,d,h,f,p,m){rO.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,o,s,l,u,c,d,h,f,p,m)}set(e,t,n,r,i,a,o,s,l,u,c,d,h,f,p,m){let g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=u,g[10]=c,g[14]=d,g[3]=h,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new rO().fromArray(this.elements)}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){let t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,n=e.elements,r=1/rN.setFromMatrixColumn(e,0).length(),i=1/rN.setFromMatrixColumn(e,1).length(),a=1/rN.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){let e=a*u,n=a*c,r=o*u,i=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-o*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=a*s}else if("YXZ"===e.order){let e=s*u,n=s*c,r=l*u,i=l*c;t[0]=e+i*o,t[4]=r*o-n,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=n*o-r,t[6]=i+e*o,t[10]=a*s}else if("ZXY"===e.order){let e=s*u,n=s*c,r=l*u,i=l*c;t[0]=e-i*o,t[4]=-a*c,t[8]=r+n*o,t[1]=n+r*o,t[5]=a*u,t[9]=i-e*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){let e=a*u,n=a*c,r=o*u,i=o*c;t[0]=s*u,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*c,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){let e=a*s,n=a*l,r=o*s,i=o*l;t[0]=s*u,t[4]=i-e*c,t[8]=r*c+n,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=n*c+r,t[10]=e-i*c}else if("XZY"===e.order){let e=a*s,n=a*l,r=o*s,i=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=e*c+i,t[5]=a*u,t[9]=n*c-r,t[2]=r*c-n,t[6]=o*u,t[10]=i*c+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(rU,e,rz)}lookAt(e,t,n){let r=this.elements;return rV.subVectors(e,t),0===rV.lengthSq()&&(rV.z=1),rV.normalize(),rH.crossVectors(n,rV),0===rH.lengthSq()&&(1===Math.abs(n.z)?rV.x+=1e-4:rV.z+=1e-4,rV.normalize(),rH.crossVectors(n,rV)),rH.normalize(),rG.crossVectors(rV,rH),r[0]=rH.x,r[4]=rG.x,r[8]=rV.x,r[1]=rH.y,r[5]=rG.y,r[9]=rV.y,r[2]=rH.z,r[6]=rG.z,r[10]=rV.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],d=n[9],h=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],x=n[15],_=r[0],S=r[4],A=r[8],w=r[12],E=r[1],M=r[5],C=r[9],T=r[13],R=r[2],P=r[6],I=r[10],B=r[14],L=r[3],D=r[7],k=r[11],O=r[15];return i[0]=a*_+o*E+s*R+l*L,i[4]=a*S+o*M+s*P+l*D,i[8]=a*A+o*C+s*I+l*k,i[12]=a*w+o*T+s*B+l*O,i[1]=u*_+c*E+d*R+h*L,i[5]=u*S+c*M+d*P+h*D,i[9]=u*A+c*C+d*I+h*k,i[13]=u*w+c*T+d*B+h*O,i[2]=f*_+p*E+m*R+g*L,i[6]=f*S+p*M+m*P+g*D,i[10]=f*A+p*C+m*I+g*k,i[14]=f*w+p*T+m*B+g*O,i[3]=v*_+y*E+b*R+x*L,i[7]=v*S+y*M+b*P+x*D,i[11]=v*A+y*C+b*I+x*k,i[15]=v*w+y*T+b*B+x*O,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],d=e[10],h=e[14],f=e[3];return f*(+i*s*c-r*l*c-i*o*d+n*l*d+r*o*h-n*s*h)+e[7]*(+t*s*h-t*l*d+i*a*d-r*a*h+r*l*u-i*s*u)+e[11]*(+t*l*c-t*o*h-i*a*c+n*a*h+i*o*u-n*l*u)+e[15]*(-r*o*u-t*s*c+t*o*d+r*a*c-n*a*d+n*s*u)}transpose(){let e;let t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(e,t,n){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=c*m*l-p*d*l+p*s*h-o*m*h-c*s*g+o*d*g,y=f*d*l-u*m*l-f*s*h+a*m*h+u*s*g-a*d*g,b=u*p*l-f*c*l+f*o*h-a*p*h-u*o*g+a*c*g,x=f*c*s-u*p*s-f*o*d+a*p*d+u*o*m-a*c*m,_=t*v+n*y+r*b+i*x;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let S=1/_;return e[0]=v*S,e[1]=(p*d*i-c*m*i-p*r*h+n*m*h+c*r*g-n*d*g)*S,e[2]=(o*m*i-p*s*i+p*r*l-n*m*l-o*r*g+n*s*g)*S,e[3]=(c*s*i-o*d*i-c*r*l+n*d*l+o*r*h-n*s*h)*S,e[4]=y*S,e[5]=(u*m*i-f*d*i+f*r*h-t*m*h-u*r*g+t*d*g)*S,e[6]=(f*s*i-a*m*i-f*r*l+t*m*l+a*r*g-t*s*g)*S,e[7]=(a*d*i-u*s*i+u*r*l-t*d*l-a*r*h+t*s*h)*S,e[8]=b*S,e[9]=(f*c*i-u*p*i-f*n*h+t*p*h+u*n*g-t*c*g)*S,e[10]=(a*p*i-f*o*i+f*n*l-t*p*l-a*n*g+t*o*g)*S,e[11]=(u*o*i-a*c*i-u*n*l+t*c*l+a*n*h-t*o*h)*S,e[12]=x*S,e[13]=(u*p*r-f*c*r+f*n*d-t*p*d-u*n*m+t*c*m)*S,e[14]=(f*o*r-a*p*r-f*n*s+t*p*s+a*n*m-t*o*m)*S,e[15]=(a*c*r-u*o*r+u*n*s-t*c*s-a*n*d+t*o*d)*S,this}scale(e){let t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){let e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,l=i*a,u=i*o;return this.set(l*a+n,l*o-r*s,l*s+r*o,0,l*o+r*s,u*o+n,u*s-r*a,0,l*s-r*o,u*s+r*a,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){let r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,l=i+i,u=a+a,c=o+o,d=i*l,h=i*u,f=i*c,p=a*u,m=a*c,g=o*c,v=s*l,y=s*u,b=s*c,x=n.x,_=n.y,S=n.z;return r[0]=(1-(p+g))*x,r[1]=(h+b)*x,r[2]=(f-y)*x,r[3]=0,r[4]=(h-b)*_,r[5]=(1-(d+g))*_,r[6]=(m+v)*_,r[7]=0,r[8]=(f+y)*S,r[9]=(m-v)*S,r[10]=(1-(d+p))*S,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){let r=this.elements,i=rN.set(r[0],r[1],r[2]).length(),a=rN.set(r[4],r[5],r[6]).length(),o=rN.set(r[8],r[9],r[10]).length();0>this.determinant()&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],rF.copy(this);let s=1/i,l=1/a,u=1/o;return rF.elements[0]*=s,rF.elements[1]*=s,rF.elements[2]*=s,rF.elements[4]*=l,rF.elements[5]*=l,rF.elements[6]*=l,rF.elements[8]*=u,rF.elements[9]*=u,rF.elements[10]*=u,t.setFromRotationMatrix(rF),n.x=i,n.y=a,n.z=o,this}makePerspective(e,t,n,r,i,a,o=nA){let s,l;let u=this.elements;if(o===nA)s=-(a+i)/(a-i),l=-2*a*i/(a-i);else if(o===nw)s=-a/(a-i),l=-a*i/(a-i);else throw Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return u[0]=2*i/(t-e),u[4]=0,u[8]=(t+e)/(t-e),u[12]=0,u[1]=0,u[5]=2*i/(n-r),u[9]=(n+r)/(n-r),u[13]=0,u[2]=0,u[6]=0,u[10]=s,u[14]=l,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,n,r,i,a,o=nA){let s,l;let u=this.elements,c=1/(t-e),d=1/(n-r),h=1/(a-i);if(o===nA)s=(a+i)*h,l=-2*h;else if(o===nw)s=i*h,l=-1*h;else throw Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return u[0]=2*c,u[4]=0,u[8]=0,u[12]=-((t+e)*c),u[1]=0,u[5]=2*d,u[9]=0,u[13]=-((n+r)*d),u[2]=0,u[6]=0,u[10]=l,u[14]=-s,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){let t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}let rN=new ro,rF=new rO,rU=new ro(0,0,0),rz=new ro(1,1,1),rH=new ro,rG=new ro,rV=new ro,rj=new rO,rW=new ra;class rX{constructor(e=0,t=0,n=0,r=rX.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){let r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],l=r[5],u=r[9],c=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(nB(o,-1,1)),.9999999>Math.abs(o)?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-nB(u,-1,1)),.9999999>Math.abs(u)?(this._y=Math.atan2(o,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(nB(d,-1,1)),.9999999>Math.abs(d)?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-nB(c,-1,1)),.9999999>Math.abs(c)?(this._x=Math.atan2(d,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(nB(s,-1,1)),.9999999>Math.abs(s)?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-nB(a,-1,1)),.9999999>Math.abs(a)?(this._x=Math.atan2(d,l),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return rj.makeRotationFromQuaternion(e),this.setFromRotationMatrix(rj,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return rW.setFromEuler(this),this.setFromQuaternion(rW,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}rX.DEFAULT_ORDER="XYZ";class rJ{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}isEnabled(e){return(this.mask&(1<<e|0))!=0}}let rY=0,rK=new ro,rq=new ra,r$=new rO,rQ=new ro,rZ=new ro,r0=new ro,r1=new ra,r2=new ro(1,0,0),r3=new ro(0,1,0),r4=new ro(0,0,1),r5={type:"added"},r9={type:"removed"},r6={type:"childadded",child:null},r8={type:"childremoved",child:null};class r7 extends nM{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:rY++}),this.uuid=nI(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=r7.DEFAULT_UP.clone();let e=new ro,t=new rX,n=new ra,r=new ro(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new rO},normalMatrix:{value:new nU}}),this.matrix=new rO,this.matrixWorld=new rO,this.matrixAutoUpdate=r7.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=r7.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new rJ,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return rq.setFromAxisAngle(e,t),this.quaternion.multiply(rq),this}rotateOnWorldAxis(e,t){return rq.setFromAxisAngle(e,t),this.quaternion.premultiply(rq),this}rotateX(e){return this.rotateOnAxis(r2,e)}rotateY(e){return this.rotateOnAxis(r3,e)}rotateZ(e){return this.rotateOnAxis(r4,e)}translateOnAxis(e,t){return rK.copy(e).applyQuaternion(this.quaternion),this.position.add(rK.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(r2,e)}translateY(e){return this.translateOnAxis(r3,e)}translateZ(e){return this.translateOnAxis(r4,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(r$.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?rQ.copy(e):rQ.set(e,t,n);let r=this.parent;this.updateWorldMatrix(!0,!1),rZ.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?r$.lookAt(rZ,rQ,this.up):r$.lookAt(rQ,rZ,this.up),this.quaternion.setFromRotationMatrix(r$),r&&(r$.extractRotation(r.matrixWorld),rq.setFromRotationMatrix(r$),this.quaternion.premultiply(rq.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",e):e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(r5),r6.child=e,this.dispatchEvent(r6),r6.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}let t=this.children.indexOf(e);return -1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(r9),r8.child=e,this.dispatchEvent(r8),r8.child=null),this}removeFromParent(){let e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),r$.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),r$.multiply(e.parent.matrixWorld)),e.applyMatrix4(r$),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(r5),r6.child=e,this.dispatchEvent(r6),r6.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){let r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);let r=this.children;for(let i=0,a=r.length;i<a;i++)r[i].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rZ,e,r0),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rZ,r1,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){let t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){let n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){let e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){let t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);let t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){let n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){let r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material){if(Array.isArray(this.material)){let t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material)}if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){let n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){let t=a(e.geometries),r=a(e.materials),i=a(e.textures),o=a(e.images),s=a(e.shapes),l=a(e.skeletons),u=a(e.animations),c=a(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),o.length>0&&(n.images=o),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=r,n;function a(e){let t=[];for(let n in e){let r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){let n=e.children[t];this.add(n.clone())}return this}}r7.DEFAULT_UP=new ro(0,1,0),r7.DEFAULT_MATRIX_AUTO_UPDATE=!0,r7.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;let ie=new ro,it=new ro,ir=new ro,ii=new ro,ia=new ro,io=new ro,is=new ro,il=new ro,iu=new ro,ic=new ro,id=new n8,ih=new n8,ip=new n8;class im{constructor(e=new ro,t=new ro,n=new ro){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),ie.subVectors(e,t),r.cross(ie);let i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){ie.subVectors(r,t),it.subVectors(n,t),ir.subVectors(e,t);let a=ie.dot(ie),o=ie.dot(it),s=ie.dot(ir),l=it.dot(it),u=it.dot(ir),c=a*l-o*o;if(0===c)return i.set(0,0,0),null;let d=1/c,h=(l*s-o*u)*d,f=(a*u-o*s)*d;return i.set(1-h-f,f,h)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,ii)&&ii.x>=0&&ii.y>=0&&ii.x+ii.y<=1}static getInterpolation(e,t,n,r,i,a,o,s){return null===this.getBarycoord(e,t,n,r,ii)?(s.x=0,s.y=0,"z"in s&&(s.z=0),"w"in s&&(s.w=0),null):(s.setScalar(0),s.addScaledVector(i,ii.x),s.addScaledVector(a,ii.y),s.addScaledVector(o,ii.z),s)}static getInterpolatedAttribute(e,t,n,r,i,a){return id.setScalar(0),ih.setScalar(0),ip.setScalar(0),id.fromBufferAttribute(e,t),ih.fromBufferAttribute(e,n),ip.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(id,i.x),a.addScaledVector(ih,i.y),a.addScaledVector(ip,i.z),a}static isFrontFacing(e,t,n,r){return ie.subVectors(n,t),it.subVectors(e,t),0>ie.cross(it).dot(r)}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ie.subVectors(this.c,this.b),it.subVectors(this.a,this.b),.5*ie.cross(it).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return im.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return im.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,i){return im.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return im.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return im.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let n,r;let i=this.a,a=this.b,o=this.c;ia.subVectors(a,i),io.subVectors(o,i),il.subVectors(e,i);let s=ia.dot(il),l=io.dot(il);if(s<=0&&l<=0)return t.copy(i);iu.subVectors(e,a);let u=ia.dot(iu),c=io.dot(iu);if(u>=0&&c<=u)return t.copy(a);let d=s*c-u*l;if(d<=0&&s>=0&&u<=0)return n=s/(s-u),t.copy(i).addScaledVector(ia,n);ic.subVectors(e,o);let h=ia.dot(ic),f=io.dot(ic);if(f>=0&&h<=f)return t.copy(o);let p=h*l-s*f;if(p<=0&&l>=0&&f<=0)return r=l/(l-f),t.copy(i).addScaledVector(io,r);let m=u*f-h*c;if(m<=0&&c-u>=0&&h-f>=0)return is.subVectors(o,a),r=(c-u)/(c-u+(h-f)),t.copy(a).addScaledVector(is,r);let g=1/(m+p+d);return n=p*g,r=d*g,t.copy(i).addScaledVector(ia,n).addScaledVector(io,r)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let ig={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32},iv={h:0,s:0,l:0},iy={h:0,s:0,l:0};function ib(e,t,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*6*(2/3-n):e}class ix{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){return void 0===t&&void 0===n?e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e):this.setRGB(e,t,n),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=tY){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,nZ.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=nZ.workingColorSpace){return this.r=e,this.g=t,this.b=n,nZ.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=nZ.workingColorSpace){if(e=nL(e,1),t=nB(t,0,1),n=nB(n,0,1),0===t)this.r=this.g=this.b=n;else{let r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=ib(i,r,e+1/3),this.g=ib(i,r,e),this.b=ib(i,r,e-1/3)}return nZ.toWorkingColorSpace(this,r),this}setStyle(e,t=tY){let n;function r(t){void 0!==t&&1>parseFloat(t)&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(n=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;let a=n[1],o=n[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,t);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){let r=n[1],i=r.length;if(3===i)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(6===i)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=tY){let n=ig[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=n0(e.r),this.g=n0(e.g),this.b=n0(e.b),this}copyLinearToSRGB(e){return this.r=n1(e.r),this.g=n1(e.g),this.b=n1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=tY){return nZ.fromWorkingColorSpace(i_.copy(this),e),65536*Math.round(nB(255*i_.r,0,255))+256*Math.round(nB(255*i_.g,0,255))+Math.round(nB(255*i_.b,0,255))}getHexString(e=tY){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=nZ.workingColorSpace){let n,r;nZ.fromWorkingColorSpace(i_.copy(this),t);let i=i_.r,a=i_.g,o=i_.b,s=Math.max(i,a,o),l=Math.min(i,a,o),u=(l+s)/2;if(l===s)n=0,r=0;else{let e=s-l;switch(r=u<=.5?e/(s+l):e/(2-s-l),s){case i:n=(a-o)/e+(a<o?6:0);break;case a:n=(o-i)/e+2;break;case o:n=(i-a)/e+4}n/=6}return e.h=n,e.s=r,e.l=u,e}getRGB(e,t=nZ.workingColorSpace){return nZ.fromWorkingColorSpace(i_.copy(this),t),e.r=i_.r,e.g=i_.g,e.b=i_.b,e}getStyle(e=tY){nZ.fromWorkingColorSpace(i_.copy(this),e);let t=i_.r,n=i_.g,r=i_.b;return e!==tY?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(iv),this.setHSL(iv.h+e,iv.s+t,iv.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(iv),e.getHSL(iy);let n=nD(iv.h,iy.h,t),r=nD(iv.s,iy.s,t),i=nD(iv.l,iy.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let i_=new ix;ix.NAMES=ig;let iS=0;class iA extends nM{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:iS++}),this.uuid=nI(),this.name="",this.type="Material",this.blending=A,this.side=b,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=N,this.blendDst=F,this.blendEquation=T,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ix(0,0,0),this.blendAlpha=0,this.depthFunc=$,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=nr,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=tZ,this.stencilZFail=tZ,this.stencilZPass=tZ,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(let t in e){let n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(void 0===r){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){let t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});let n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){let t=[];for(let n in e){let r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==A&&(n.blending=this.blending),this.side!==b&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==N&&(n.blendSrc=this.blendSrc),this.blendDst!==F&&(n.blendDst=this.blendDst),this.blendEquation!==T&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==$&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==nr&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==tZ&&(n.stencilFail=this.stencilFail),this.stencilZFail!==tZ&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==tZ&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){let t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,n=null;if(null!==t){let e=t.length;n=Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class iw extends iA{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ix(0xffffff),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new rX,this.combine=en,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}let iE=function(){let e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let e=0;e<256;++e){let t=e-127;t<-27?(r[e]=0,r[256|e]=32768,i[e]=24,i[256|e]=24):t<-14?(r[e]=1024>>-t-14,r[256|e]=1024>>-t-14|32768,i[e]=-t-1,i[256|e]=-t-1):t<=15?(r[e]=t+15<<10,r[256|e]=t+15<<10|32768,i[e]=13,i[256|e]=13):t<128?(r[e]=31744,r[256|e]=64512,i[e]=24,i[256|e]=24):(r[e]=31744,r[256|e]=64512,i[e]=13,i[256|e]=13)}let a=new Uint32Array(2048),o=new Uint32Array(64),s=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;(8388608&t)==0;)t<<=1,n-=8388608;t&=-8388609,n+=0x38800000,a[e]=t|n}for(let e=1024;e<2048;++e)a[e]=0x38000000+(e-1024<<13);for(let e=1;e<31;++e)o[e]=e<<23;o[31]=0x47800000,o[32]=0x80000000;for(let e=33;e<63;++e)o[e]=0x80000000+(e-32<<23);o[63]=0xc7800000;for(let e=1;e<64;++e)32!==e&&(s[e]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:o,offsetTable:s}}();function iM(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=nB(e,-65504,65504),iE.floatView[0]=e;let t=iE.uint32View[0],n=t>>23&511;return iE.baseTable[n]+((8388607&t)>>iE.shiftTable[n])}function iC(e){let t=e>>10;return iE.uint32View[0]=iE.mantissaTable[iE.offsetTable[t]+(1023&e)]+iE.exponentTable[t],iE.floatView[0]}class iT{static toHalfFloat(e){return iM(e)}static fromHalfFloat(e){return iC(e)}}let iR=new ro,iP=new nF,iI=0;class iB{constructor(e,t,n=!1){if(Array.isArray(e))throw TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:iI++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=nh,this.updateRanges=[],this.gpuType=ez,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)iP.fromBufferAttribute(this,t),iP.applyMatrix3(e),this.setXY(t,iP.x,iP.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)iR.fromBufferAttribute(this,t),iR.applyMatrix3(e),this.setXYZ(t,iR.x,iR.y,iR.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)iR.fromBufferAttribute(this,t),iR.applyMatrix4(e),this.setXYZ(t,iR.x,iR.y,iR.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)iR.fromBufferAttribute(this,t),iR.applyNormalMatrix(e),this.setXYZ(t,iR.x,iR.y,iR.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)iR.fromBufferAttribute(this,t),iR.transformDirection(e),this.setXYZ(t,iR.x,iR.y,iR.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=nk(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=nO(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=nk(t,this.array)),t}setX(e,t){return this.normalized&&(t=nO(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=nk(t,this.array)),t}setY(e,t){return this.normalized&&(t=nO(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=nk(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nO(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=nk(t,this.array)),t}setW(e,t){return this.normalized&&(t=nO(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=nO(t,this.array),n=nO(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=nO(t,this.array),n=nO(n,this.array),r=nO(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=nO(t,this.array),n=nO(n,this.array),r=nO(r,this.array),i=nO(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==nh&&(e.usage=this.usage),e}}class iL extends iB{constructor(e,t,n){super(new Int8Array(e),t,n)}}class iD extends iB{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class ik extends iB{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class iO extends iB{constructor(e,t,n){super(new Int16Array(e),t,n)}}class iN extends iB{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class iF extends iB{constructor(e,t,n){super(new Int32Array(e),t,n)}}class iU extends iB{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class iz extends iB{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=iC(this.array[e*this.itemSize]);return this.normalized&&(t=nk(t,this.array)),t}setX(e,t){return this.normalized&&(t=nO(t,this.array)),this.array[e*this.itemSize]=iM(t),this}getY(e){let t=iC(this.array[e*this.itemSize+1]);return this.normalized&&(t=nk(t,this.array)),t}setY(e,t){return this.normalized&&(t=nO(t,this.array)),this.array[e*this.itemSize+1]=iM(t),this}getZ(e){let t=iC(this.array[e*this.itemSize+2]);return this.normalized&&(t=nk(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nO(t,this.array)),this.array[e*this.itemSize+2]=iM(t),this}getW(e){let t=iC(this.array[e*this.itemSize+3]);return this.normalized&&(t=nk(t,this.array)),t}setW(e,t){return this.normalized&&(t=nO(t,this.array)),this.array[e*this.itemSize+3]=iM(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=nO(t,this.array),n=nO(n,this.array)),this.array[e+0]=iM(t),this.array[e+1]=iM(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=nO(t,this.array),n=nO(n,this.array),r=nO(r,this.array)),this.array[e+0]=iM(t),this.array[e+1]=iM(n),this.array[e+2]=iM(r),this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=nO(t,this.array),n=nO(n,this.array),r=nO(r,this.array),i=nO(i,this.array)),this.array[e+0]=iM(t),this.array[e+1]=iM(n),this.array[e+2]=iM(r),this.array[e+3]=iM(i),this}}class iH extends iB{constructor(e,t,n){super(new Float32Array(e),t,n)}}let iG=0,iV=new rO,ij=new r7,iW=new ro,iX=new ru,iJ=new ru,iY=new ro;class iK extends nM{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:iG++}),this.uuid=nI(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(nH(e)?iU:iN)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);let n=this.attributes.normal;if(void 0!==n){let t=new nU().getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}let r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return iV.makeRotationFromQuaternion(e),this.applyMatrix4(iV),this}rotateX(e){return iV.makeRotationX(e),this.applyMatrix4(iV),this}rotateY(e){return iV.makeRotationY(e),this.applyMatrix4(iV),this}rotateZ(e){return iV.makeRotationZ(e),this.applyMatrix4(iV),this}translate(e,t,n){return iV.makeTranslation(e,t,n),this.applyMatrix4(iV),this}scale(e,t,n){return iV.makeScale(e,t,n),this.applyMatrix4(iV),this}lookAt(e){return ij.lookAt(e),ij.updateMatrix(),this.applyMatrix4(ij.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(iW).negate(),this.translate(iW.x,iW.y,iW.z),this}setFromPoints(e){let t=this.getAttribute("position");if(void 0===t){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n];t.push(r.x,r.y,r.z||0)}this.setAttribute("position",new iH(t,3))}else{let n=Math.min(e.length,t.count);for(let r=0;r<n;r++){let n=e[r];t.setXYZ(r,n.x,n.y,n.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ru);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ro(-1/0,-1/0,-1/0),new ro(Infinity,Infinity,Infinity));return}if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){let n=t[e];iX.setFromBufferAttribute(n),this.morphTargetsRelative?(iY.addVectors(this.boundingBox.min,iX.min),this.boundingBox.expandByPoint(iY),iY.addVectors(this.boundingBox.max,iX.max),this.boundingBox.expandByPoint(iY)):(this.boundingBox.expandByPoint(iX.min),this.boundingBox.expandByPoint(iX.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new rC);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ro,1/0);return}if(e){let n=this.boundingSphere.center;if(iX.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){let n=t[e];iJ.setFromBufferAttribute(n),this.morphTargetsRelative?(iY.addVectors(iX.min,iJ.min),iX.expandByPoint(iY),iY.addVectors(iX.max,iJ.max),iX.expandByPoint(iY)):(iX.expandByPoint(iJ.min),iX.expandByPoint(iJ.max))}iX.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)iY.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(iY));if(t)for(let i=0,a=t.length;i<a;i++){let a=t[i],o=this.morphTargetsRelative;for(let t=0,i=a.count;t<i;t++)iY.fromBufferAttribute(a,t),o&&(iW.fromBufferAttribute(e,t),iY.add(iW)),r=Math.max(r,n.distanceToSquared(iY))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let n=t.position,r=t.normal,i=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new iB(new Float32Array(4*n.count),4));let a=this.getAttribute("tangent"),o=[],s=[];for(let e=0;e<n.count;e++)o[e]=new ro,s[e]=new ro;let l=new ro,u=new ro,c=new ro,d=new nF,h=new nF,f=new nF,p=new ro,m=new ro,g=this.groups;0===g.length&&(g=[{start:0,count:e.count}]);for(let t=0,r=g.length;t<r;++t){let r=g[t],a=r.start,v=r.count;for(let t=a,r=a+v;t<r;t+=3)!function(e,t,r){l.fromBufferAttribute(n,e),u.fromBufferAttribute(n,t),c.fromBufferAttribute(n,r),d.fromBufferAttribute(i,e),h.fromBufferAttribute(i,t),f.fromBufferAttribute(i,r),u.sub(l),c.sub(l),h.sub(d),f.sub(d);let a=1/(h.x*f.y-f.x*h.y);isFinite(a)&&(p.copy(u).multiplyScalar(f.y).addScaledVector(c,-h.y).multiplyScalar(a),m.copy(c).multiplyScalar(h.x).addScaledVector(u,-f.x).multiplyScalar(a),o[e].add(p),o[t].add(p),o[r].add(p),s[e].add(m),s[t].add(m),s[r].add(m))}(e.getX(t+0),e.getX(t+1),e.getX(t+2))}let v=new ro,y=new ro,b=new ro,x=new ro;function _(e){b.fromBufferAttribute(r,e),x.copy(b);let t=o[e];v.copy(t),v.sub(b.multiplyScalar(b.dot(t))).normalize(),y.crossVectors(x,t);let n=y.dot(s[e]);a.setXYZW(e,v.x,v.y,v.z,n<0?-1:1)}for(let t=0,n=g.length;t<n;++t){let n=g[t],r=n.start,i=n.count;for(let t=r,n=r+i;t<n;t+=3)_(e.getX(t+0)),_(e.getX(t+1)),_(e.getX(t+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new iB(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);let r=new ro,i=new ro,a=new ro,o=new ro,s=new ro,l=new ro,u=new ro,c=new ro;if(e)for(let d=0,h=e.count;d<h;d+=3){let h=e.getX(d+0),f=e.getX(d+1),p=e.getX(d+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,f),a.fromBufferAttribute(t,p),u.subVectors(a,i),c.subVectors(r,i),u.cross(c),o.fromBufferAttribute(n,h),s.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),o.add(u),s.add(u),l.add(u),n.setXYZ(h,o.x,o.y,o.z),n.setXYZ(f,s.x,s.y,s.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,o=t.count;e<o;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),u.subVectors(a,i),c.subVectors(r,i),u.cross(c),n.setXYZ(e+0,u.x,u.y,u.z),n.setXYZ(e+1,u.x,u.y,u.z),n.setXYZ(e+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)iY.fromBufferAttribute(e,t),iY.normalize(),e.setXYZ(t,iY.x,iY.y,iY.z)}toNonIndexed(){function e(e,t){let n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0;for(let i=0,l=t.length;i<l;i++){o=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)a[s++]=n[o++]}return new iB(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new iK,n=this.index.array,r=this.attributes;for(let i in r){let a=e(r[i],n);t.setAttribute(i,a)}let i=this.morphAttributes;for(let r in i){let a=[],o=i[r];for(let t=0,r=o.length;t<r;t++){let r=e(o[t],n);a.push(r)}t.morphAttributes[r]=a}t.morphTargetsRelative=this.morphTargetsRelative;let a=this.groups;for(let e=0,n=a.length;e<n;e++){let n=a[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){let t=this.parameters;for(let n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};let t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let n=this.attributes;for(let t in n){let r=n[t];e.data.attributes[t]=r.toJSON(e.data)}let r={},i=!1;for(let t in this.morphAttributes){let n=this.morphAttributes[t],a=[];for(let t=0,r=n.length;t<r;t++){let r=n[t];a.push(r.toJSON(e.data))}a.length>0&&(r[t]=a,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));let o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let n=e.index;null!==n&&this.setIndex(n.clone(t));let r=e.attributes;for(let e in r){let n=r[e];this.setAttribute(e,n.clone(t))}let i=e.morphAttributes;for(let e in i){let n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;let a=e.groups;for(let e=0,t=a.length;e<t;e++){let t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}let o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());let s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}let iq=new rO,i$=new rk,iQ=new rC,iZ=new ro,i0=new ro,i1=new ro,i2=new ro,i3=new ro,i4=new ro,i5=new ro,i9=new ro;class i6 extends r7{constructor(e=new iK,t=new iw){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){let n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);let o=this.morphTargetInfluences;if(i&&o){i4.set(0,0,0);for(let n=0,r=i.length;n<r;n++){let r=o[n],s=i[n];0!==r&&(i3.fromBufferAttribute(s,e),a?i4.addScaledVector(i3,r):i4.addScaledVector(i3.sub(t),r))}t.add(i4)}return t}raycast(e,t){let n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),iQ.copy(n.boundingSphere),iQ.applyMatrix4(i),i$.copy(e.ray).recast(e.near),!1===iQ.containsPoint(i$.origin)&&(null===i$.intersectSphere(iQ,iZ)||i$.origin.distanceToSquared(iZ)>(e.far-e.near)**2)||(iq.copy(i).invert(),i$.copy(e.ray).applyMatrix4(iq),null!==n.boundingBox&&!1===i$.intersectsBox(n.boundingBox)))return;this._computeIntersections(e,t,i$)}}_computeIntersections(e,t,n){let r;let i=this.geometry,a=this.material,o=i.index,s=i.attributes.position,l=i.attributes.uv,u=i.attributes.uv1,c=i.attributes.normal,d=i.groups,h=i.drawRange;if(null!==o){if(Array.isArray(a))for(let i=0,s=d.length;i<s;i++){let s=d[i],f=a[s.materialIndex],p=Math.max(s.start,h.start),m=Math.min(o.count,Math.min(s.start+s.count,h.start+h.count));for(let i=p;i<m;i+=3)(r=i8(this,f,e,n,l,u,c,o.getX(i),o.getX(i+1),o.getX(i+2)))&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=s.materialIndex,t.push(r))}else{let i=Math.max(0,h.start),s=Math.min(o.count,h.start+h.count);for(let d=i;d<s;d+=3)(r=i8(this,a,e,n,l,u,c,o.getX(d),o.getX(d+1),o.getX(d+2)))&&(r.faceIndex=Math.floor(d/3),t.push(r))}}else if(void 0!==s){if(Array.isArray(a))for(let i=0,o=d.length;i<o;i++){let o=d[i],f=a[o.materialIndex],p=Math.max(o.start,h.start),m=Math.min(s.count,Math.min(o.start+o.count,h.start+h.count));for(let i=p;i<m;i+=3)(r=i8(this,f,e,n,l,u,c,i,i+1,i+2))&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=o.materialIndex,t.push(r))}else{let i=Math.max(0,h.start),o=Math.min(s.count,h.start+h.count);for(let s=i;s<o;s+=3)(r=i8(this,a,e,n,l,u,c,s,s+1,s+2))&&(r.faceIndex=Math.floor(s/3),t.push(r))}}}}function i8(e,t,n,r,i,a,o,s,l,u){e.getVertexPosition(s,i0),e.getVertexPosition(l,i1),e.getVertexPosition(u,i2);let c=function(e,t,n,r,i,a,o,s){if(null===(t.side===x?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side===b,s)))return null;i9.copy(s),i9.applyMatrix4(e.matrixWorld);let l=n.ray.origin.distanceTo(i9);return l<n.near||l>n.far?null:{distance:l,point:i9.clone(),object:e}}(e,t,n,r,i0,i1,i2,i5);if(c){let e=new ro;im.getBarycoord(i5,i0,i1,i2,e),i&&(c.uv=im.getInterpolatedAttribute(i,s,l,u,e,new nF)),a&&(c.uv1=im.getInterpolatedAttribute(a,s,l,u,e,new nF)),o&&(c.normal=im.getInterpolatedAttribute(o,s,l,u,e,new ro),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));let t={a:s,b:l,c:u,normal:new ro,materialIndex:0};im.getNormal(i0,i1,i2,t.normal),c.face=t,c.barycoord=e}return c}class i7 extends iK{constructor(e=1,t=1,n=1,r=1,i=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};let o=this;r=Math.floor(r),i=Math.floor(i);let s=[],l=[],u=[],c=[],d=0,h=0;function f(e,t,n,r,i,a,f,p,m,g,v){let y=a/m,b=f/g,x=a/2,_=f/2,S=p/2,A=m+1,w=g+1,E=0,M=0,C=new ro;for(let a=0;a<w;a++){let o=a*b-_;for(let s=0;s<A;s++){let d=s*y-x;C[e]=d*r,C[t]=o*i,C[n]=S,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=p>0?1:-1,u.push(C.x,C.y,C.z),c.push(s/m),c.push(1-a/g),E+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){let n=d+t+A*e,r=d+t+A*(e+1),i=d+(t+1)+A*(e+1),a=d+(t+1)+A*e;s.push(n,r,a),s.push(r,i,a),M+=6}o.addGroup(h,M,v),h+=M,d+=E}f("z","y","x",-1,-1,n,t,e,a=Math.floor(a),i,0),f("z","y","x",1,-1,n,t,-e,a,i,1),f("x","z","y",1,1,e,n,t,r,a,2),f("x","z","y",1,-1,e,n,-t,r,a,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new iH(l,3)),this.setAttribute("normal",new iH(u,3)),this.setAttribute("uv",new iH(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i7(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ae(e){let t={};for(let n in e)for(let r in t[n]={},e[n]){let i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function at(e){let t={};for(let n=0;n<e.length;n++){let r=ae(e[n]);for(let e in r)t[e]=r[e]}return t}function an(e){let t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:nZ.workingColorSpace}let ar={clone:ae,merge:at};class ai extends iA{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ae(e.uniforms),this.uniformsGroups=function(e){let t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);for(let n in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){let r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let n={};for(let e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class aa extends r7{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new rO,this.projectionMatrix=new rO,this.projectionMatrixInverse=new rO,this.coordinateSystem=nA}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let ao=new ro,as=new nF,al=new nF;class au extends aa{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=2*nP*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(.5*nR*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*nP*Math.atan(Math.tan(.5*nR*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){ao.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(ao.x,ao.y).multiplyScalar(-e/ao.z),ao.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(ao.x,ao.y).multiplyScalar(-e/ao.z)}getViewSize(e,t){return this.getViewBounds(e,as,al),t.subVectors(al,as)}setViewOffset(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(.5*nR*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){let e=a.fullWidth,o=a.fullHeight;i+=a.offsetX*r/e,t-=a.offsetY*n/o,r*=a.width/e,n*=a.height/o}let o=this.filmOffset;0!==o&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class ac extends r7{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new au(-90,1,e,t);r.layers=this.layers,this.add(r);let i=new au(-90,1,e,t);i.layers=this.layers,this.add(i);let a=new au(-90,1,e,t);a.layers=this.layers,this.add(a);let o=new au(-90,1,e,t);o.layers=this.layers,this.add(o);let s=new au(-90,1,e,t);s.layers=this.layers,this.add(s);let l=new au(-90,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[n,r,i,a,o,s]=t;for(let e of t)this.remove(e);if(e===nA)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),s.up.set(0,1,0),s.lookAt(0,0,-1);else if(e===nw)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),s.up.set(0,-1,0),s.lookAt(0,0,-1);else throw Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let e of t)this.add(e),e.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();let{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[i,a,o,s,l,u]=this.children,c=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),f=e.xr.enabled;e.xr.enabled=!1;let p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,i),e.setRenderTarget(n,1,r),e.render(t,a),e.setRenderTarget(n,2,r),e.render(t,o),e.setRenderTarget(n,3,r),e.render(t,s),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=p,e.setRenderTarget(n,5,r),e.render(t,u),e.setRenderTarget(c,d,h),e.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}class ad extends n6{constructor(e,t,n,r,i,a,o,s,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:eg,n,r,i,a,o,s,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ah extends re{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let n={width:e,height:e,depth:1};this.texture=new ad([n,n,n,n,n,n],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:eR}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new i7(5,5,5),i=new ai({name:"CubemapFromEquirect",uniforms:ae(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:x,blending:S});i.uniforms.tEquirect.value=t;let a=new i6(r,i),o=t.minFilter;return t.minFilter===eB&&(t.minFilter=eR),new ac(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,r){let i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}class af extends r7{constructor(){super(),this.isGroup=!0,this.type="Group"}}let ap={type:"move"};class am{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new af,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new af,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ro,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ro),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new af,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ro,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ro),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,a=null,o=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){for(let r of(a=!0,e.hand.values())){let e=t.getJointPose(r,n),i=this._getHandJoint(l,r);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}let r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],o=r.position.distanceTo(i.position);l.inputState.pinching&&o>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&o<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1);null!==o&&(null===(r=t.getPose(e.targetRaySpace,n))&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(ap)))}return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){let n=new af;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class ag{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ix(e),this.density=t}clone(){return new ag(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class av{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new ix(e),this.near=t,this.far=n}clone(){return new av(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class ay extends r7{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new rX,this.environmentIntensity=1,this.environmentRotation=new rX,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class ab{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=nh,this.updateRanges=[],this.version=0,this.uuid=nI()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=nI()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=nI()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}let ax=new ro;class a_{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ax.fromBufferAttribute(this,t),ax.applyMatrix4(e),this.setXYZ(t,ax.x,ax.y,ax.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ax.fromBufferAttribute(this,t),ax.applyNormalMatrix(e),this.setXYZ(t,ax.x,ax.y,ax.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ax.fromBufferAttribute(this,t),ax.transformDirection(e),this.setXYZ(t,ax.x,ax.y,ax.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=nk(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=nO(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=nO(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=nO(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=nO(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=nO(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=nk(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=nk(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=nk(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=nk(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=nO(t,this.array),n=nO(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=nO(t,this.array),n=nO(n,this.array),r=nO(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=nO(t,this.array),n=nO(n,this.array),r=nO(r,this.array),i=nO(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new a_(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);{console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let t=0;t<this.count;t++){let n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new iB(new this.array.constructor(e),this.itemSize,this.normalized)}}toJSON(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};{console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let t=0;t<this.count;t++){let n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}}}class aS extends iA{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ix(0xffffff),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let aA=new ro,aw=new ro,aE=new ro,aM=new nF,aC=new nF,aT=new rO,aR=new ro,aP=new ro,aI=new ro,aB=new nF,aL=new nF,aD=new nF;class ak extends r7{constructor(e=new aS){if(super(),this.isSprite=!0,this.type="Sprite",void 0===i){i=new iK;let e=new ab(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);i.setIndex([0,1,2,0,2,3]),i.setAttribute("position",new a_(e,3,0,!1)),i.setAttribute("uv",new a_(e,2,3,!1))}this.geometry=i,this.material=e,this.center=new nF(.5,.5)}raycast(e,t){let n,r;null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),aw.setFromMatrixScale(this.matrixWorld),aT.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),aE.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&aw.multiplyScalar(-aE.z);let i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));let a=this.center;aO(aR.set(-.5,-.5,0),aE,a,aw,n,r),aO(aP.set(.5,-.5,0),aE,a,aw,n,r),aO(aI.set(.5,.5,0),aE,a,aw,n,r),aB.set(0,0),aL.set(1,0),aD.set(1,1);let o=e.ray.intersectTriangle(aR,aP,aI,!1,aA);if(null===o&&(aO(aP.set(-.5,.5,0),aE,a,aw,n,r),aL.set(0,1),null===(o=e.ray.intersectTriangle(aR,aI,aP,!1,aA))))return;let s=e.ray.origin.distanceTo(aA);s<e.near||s>e.far||t.push({distance:s,point:aA.clone(),uv:im.getInterpolation(aA,aR,aP,aI,aB,aL,aD,new nF),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function aO(e,t,n,r,i,a){aM.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(aC.x=a*aM.x-i*aM.y,aC.y=i*aM.x+a*aM.y):aC.copy(aM),e.copy(t),e.x+=aC.x,e.y+=aC.y,e.applyMatrix4(aT)}let aN=new ro,aF=new ro;class aU extends r7{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);let t=e.levels;for(let e=0,n=t.length;e<n;e++){let n=t[e];this.addLevel(n.object.clone(),n.distance,n.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){let r;t=Math.abs(t);let i=this.levels;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){let t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){let e=t.splice(n,1);return this.remove(e[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){let t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){aN.setFromMatrixPosition(this.matrixWorld);let n=e.ray.origin.distanceTo(aN);this.getObjectForDistance(n).raycast(e,t)}}update(e){let t=this.levels;if(t.length>1){let n,r;aN.setFromMatrixPosition(e.matrixWorld),aF.setFromMatrixPosition(this.matrixWorld);let i=aN.distanceTo(aF)/e.zoom;for(n=1,t[0].object.visible=!0,r=t.length;n<r;n++){let e=t[n].distance;if(t[n].object.visible&&(e-=e*t[n].hysteresis),i>=e)t[n-1].object.visible=!1,t[n].object.visible=!0;else break}for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}}toJSON(e){let t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];let n=this.levels;for(let e=0,r=n.length;e<r;e++){let r=n[e];t.object.levels.push({object:r.object.uuid,distance:r.distance,hysteresis:r.hysteresis})}return t}}let az=new ro,aH=new n8,aG=new n8,aV=new ro,aj=new rO,aW=new ro,aX=new rC,aJ=new rO,aY=new rk;class aK extends i6{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=ef,this.bindMatrix=new rO,this.bindMatrixInverse=new rO,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;null===this.boundingBox&&(this.boundingBox=new ru),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let e=0;e<t.count;e++)this.getVertexPosition(e,aW),this.boundingBox.expandByPoint(aW)}computeBoundingSphere(){let e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new rC),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let e=0;e<t.count;e++)this.getVertexPosition(e,aW),this.boundingSphere.expandByPoint(aW)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let n=this.material,r=this.matrixWorld;if(void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),aX.copy(this.boundingSphere),aX.applyMatrix4(r),!1!==e.ray.intersectsSphere(aX))){if(aJ.copy(r).invert(),aY.copy(e.ray).applyMatrix4(aJ),null!==this.boundingBox&&!1===aY.intersectsBox(this.boundingBox))return;this._computeIntersections(e,t,aY)}}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new n8,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);let r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===ef?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===ep?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let n=this.skeleton,r=this.geometry;aH.fromBufferAttribute(r.attributes.skinIndex,e),aG.fromBufferAttribute(r.attributes.skinWeight,e),az.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){let r=aG.getComponent(e);if(0!==r){let i=aH.getComponent(e);aj.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(aV.copy(az).applyMatrix4(aj),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}class aq extends r7{constructor(){super(),this.isBone=!0,this.type="Bone"}}class a$ extends n6{constructor(e=null,t=1,n=1,r,i,a,o,s,l=ew,u=ew,c,d){super(null,a,o,s,l,u,r,i,c,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}let aQ=new rO,aZ=new rO;class a0{constructor(e=[],t=[]){this.uuid=nI(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new rO)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let t=new rO;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){let e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){let i=e[r]?e[r].matrixWorld:aZ;aQ.multiplyMatrices(i,t[r]),aQ.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new a0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length),t=new Float32Array((e=Math.max(e=4*Math.ceil(e/4),4))*e*4);t.set(this.boneMatrices);let n=new a$(t,e,e,eY,ez);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){let n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){let r=e.bones[n],i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new aq),this.bones.push(i),this.boneInverses.push(new rO().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){let i=t[r];e.bones.push(i.uuid);let a=n[r];e.boneInverses.push(a.toArray())}return e}}class a1 extends iB{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}let a2=new rO,a3=new rO,a4=[],a5=new ru,a9=new rO,a6=new i6,a8=new rC;class a7 extends i6{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new a1(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let e=0;e<n;e++)this.setMatrixAt(e,a9)}computeBoundingBox(){let e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new ru),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,a2),a5.copy(e.boundingBox).applyMatrix4(a2),this.boundingBox.union(a5)}computeBoundingSphere(){let e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new rC),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,a2),a8.copy(e.boundingSphere).applyMatrix4(a2),this.boundingSphere.union(a8)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){let n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,i=e*(n.length+1)+1;for(let e=0;e<n.length;e++)n[e]=r[i+e]}raycast(e,t){let n=this.matrixWorld,r=this.count;if(a6.geometry=this.geometry,a6.material=this.material,void 0!==a6.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),a8.copy(this.boundingSphere),a8.applyMatrix4(n),!1!==e.ray.intersectsSphere(a8)))for(let i=0;i<r;i++){this.getMatrixAt(i,a2),a3.multiplyMatrices(n,a2),a6.matrixWorld=a3,a6.raycast(e,a4);for(let e=0,n=a4.length;e<n;e++){let n=a4[e];n.instanceId=i,n.object=this,t.push(n)}a4.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new a1(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){let n=t.morphTargetInfluences,r=n.length+1;null===this.morphTexture&&(this.morphTexture=new a$(new Float32Array(r*this.count),r,this.count,eZ,ez));let i=this.morphTexture.source.data.data,a=0;for(let e=0;e<n.length;e++)a+=n[e];let o=this.geometry.morphTargetsRelative?1:1-a,s=r*e;i[s]=o,i.set(n,s+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null)}}let oe=new ro,ot=new ro,on=new nU;class or{constructor(e=new ro(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){let r=oe.subVectors(n,t).cross(ot.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let n=e.delta(oe),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;let i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){let t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let n=t||on.getNormalMatrix(e),r=this.coplanarPoint(oe).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}let oi=new rC,oa=new ro;class oo{constructor(e=new or,t=new or,n=new or,r=new or,i=new or,a=new or){this.planes=[e,t,n,r,i,a]}set(e,t,n,r,i,a){let o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}copy(e){let t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=nA){let n=this.planes,r=e.elements,i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],d=r[7],h=r[8],f=r[9],p=r[10],m=r[11],g=r[12],v=r[13],y=r[14],b=r[15];if(n[0].setComponents(s-i,d-l,m-h,b-g).normalize(),n[1].setComponents(s+i,d+l,m+h,b+g).normalize(),n[2].setComponents(s+a,d+u,m+f,b+v).normalize(),n[3].setComponents(s-a,d-u,m-f,b-v).normalize(),n[4].setComponents(s-o,d-c,m-p,b-y).normalize(),t===nA)n[5].setComponents(s+o,d+c,m+p,b+y).normalize();else if(t===nw)n[5].setComponents(o,c,p,y).normalize();else throw Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),oi.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),oi.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(oi)}intersectsSprite(e){return oi.center.set(0,0,0),oi.radius=.7071067811865476,oi.applyMatrix4(e.matrixWorld),this.intersectsSphere(oi)}intersectsSphere(e){let t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let n=0;n<6;n++){let r=t[n];if(oa.x=r.normal.x>0?e.max.x:e.min.x,oa.y=r.normal.y>0?e.max.y:e.min.y,oa.z=r.normal.z>0?e.max.z:e.min.z,0>r.distanceToPoint(oa))return!1}return!0}containsPoint(e){let t=this.planes;for(let n=0;n<6;n++)if(0>t[n].distanceToPoint(e))return!1;return!0}clone(){return new this.constructor().copy(this)}}function os(e,t){return e-t}function ol(e,t){return e.z-t.z}function ou(e,t){return t.z-e.z}class oc{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){let i=this.pool,a=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1,index:-1});let o=i[this.index];a.push(o),this.index++,o.start=e,o.count=t,o.z=n,o.index=r}reset(){this.list.length=0,this.index=0}}let od=new rO,oh=new ix(1,1,1),of=new oo,op=new ru,om=new rC,og=new ro,ov=new ro,oy=new ro,ob=new oc,ox=new i6,o_=[];function oS(e,t){if(e.constructor!==t.constructor){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++)t[r]=e[r]}else{let n=Math.min(e.length,t.length);t.set(new e.constructor(e.buffer,0,n))}}class oA extends i6{constructor(e,t,n=2*t,r){super(new iK,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(4*this._maxInstanceCount),t=new a$(new Float32Array((e=Math.max(e=4*Math.ceil(e/4),4))*e*4),e,e,eY,ez);this._matricesTexture=t}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount),t=new a$(new Uint32Array((e=Math.ceil(e))*e),e,e,e0,eU);this._indirectTexture=t}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount),t=new a$(new Float32Array((e=Math.ceil(e))*e*4).fill(1),e,e,eY,ez);t.colorSpace=nZ.workingColorSpace,this._colorsTexture=t}_initializeGeometry(e){let t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(!1===this._geometryInitialized){for(let r in e.attributes){let{array:i,itemSize:a,normalized:o}=e.getAttribute(r),s=new iB(new i.constructor(n*a),a,o);t.setAttribute(r,s)}if(null!==e.getIndex()){let e=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new iB(e,1))}this._geometryInitialized=!0}}_validateGeometry(e){let t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(let n in t.attributes){if(!e.hasAttribute(n))throw Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);let r=e.getAttribute(n),i=t.getAttribute(n);if(r.itemSize!==i.itemSize||r.normalized!==i.normalized)throw Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){let t=this._instanceInfo;if(e<0||e>=t.length||!1===t[e].active)throw Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){let t=this._geometryInfo;if(e<0||e>=t.length||!1===t[e].active)throw Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ru);let e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(!1===t[n].active)continue;let r=t[n].geometryIndex;this.getMatrixAt(n,od),this.getBoundingBoxAt(r,op).applyMatrix4(od),e.union(op)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new rC);let e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(!1===t[n].active)continue;let r=t[n].geometryIndex;this.getMatrixAt(n,od),this.getBoundingSphereAt(r,om).applyMatrix4(od),e.union(om)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw Error("THREE.BatchedMesh: Maximum item count reached.");let t={visible:!0,active:!0,geometryIndex:e},n=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(os),n=this._availableInstanceIds.shift(),this._instanceInfo[n]=t):(n=this._instanceInfo.length,this._instanceInfo.push(t));let r=this._matricesTexture;od.identity().toArray(r.image.data,16*n),r.needsUpdate=!0;let i=this._colorsTexture;return i&&(oh.toArray(i.image.data,4*n),i.needsUpdate=!0),this._visibilityChanged=!0,n}addGeometry(e,t=-1,n=-1){let r;this._initializeGeometry(e),this._validateGeometry(e);let i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=-1===t?e.getAttribute("position").count:t;let o=e.getIndex();if(null!==o&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=-1===n?o.count:n),-1!==i.indexStart&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(os),a[r=this._availableGeometryIds.shift()]=i):(r=this._geometryCount,this._geometryCount++,a.push(i)),this.setGeometryAt(r,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,r}setGeometryAt(e,t){if(e>=this._geometryCount)throw Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);let n=this.geometry,r=null!==n.getIndex(),i=n.getIndex(),a=t.getIndex(),o=this._geometryInfo[e];if(r&&a.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");let s=o.vertexStart,l=o.reservedVertexCount;for(let e in o.vertexCount=t.getAttribute("position").count,n.attributes){let r=t.getAttribute(e),i=n.getAttribute(e);!function(e,t,n=0){let r=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){let i=e.count;for(let a=0;a<i;a++)for(let i=0;i<r;i++)t.setComponent(a+n,i,e.getComponent(a,i))}else t.array.set(e.array,n*r);t.needsUpdate=!0}(r,i,s);let a=r.itemSize;for(let e=r.count;e<l;e++){let t=s+e;for(let e=0;e<a;e++)i.setComponent(t,e,0)}i.needsUpdate=!0,i.addUpdateRange(s*a,l*a)}if(r){let e=o.indexStart,n=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let t=0;t<a.count;t++)i.setX(e+t,s+a.getX(t));for(let t=a.count;t<n;t++)i.setX(e+t,s);i.needsUpdate=!0,i.addUpdateRange(e,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,null!==t.boundingBox&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,null!==t.boundingSphere&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){let t=this._geometryInfo;if(e>=t.length||!1===t[e].active)return this;let n=this._instanceInfo;for(let t=0,r=n.length;t<r;t++)n[t].active&&n[t].geometryIndex===e&&this.deleteInstance(t);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0,n=this._geometryInfo,r=n.map((e,t)=>t).sort((e,t)=>n[e].vertexStart-n[t].vertexStart),i=this.geometry;for(let a=0,o=n.length;a<o;a++){let o=n[r[a]];if(!1!==o.active){if(null!==i.index){if(o.indexStart!==t){let{indexStart:n,vertexStart:r,reservedIndexCount:a}=o,s=i.index,l=s.array,u=e-r;for(let e=n;e<n+a;e++)l[e]=l[e]+u;s.array.copyWithin(t,n,n+a),s.addUpdateRange(t,a),o.indexStart=t}t+=o.reservedIndexCount}if(o.vertexStart!==e){let{vertexStart:t,reservedVertexCount:n}=o,r=i.attributes;for(let i in r){let a=r[i],{array:o,itemSize:s}=a;o.copyWithin(e*s,t*s,(t+n)*s),a.addUpdateRange(e*s,n*s)}o.vertexStart=e}e+=o.reservedVertexCount,o.start=i.index?o.indexStart:o.vertexStart,this._nextIndexStart=i.index?o.indexStart+o.reservedIndexCount:0,this._nextVertexStart=o.vertexStart+o.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;let n=this.geometry,r=this._geometryInfo[e];if(null===r.boundingBox){let e=new ru,t=n.index,i=n.attributes.position;for(let n=r.start,a=r.start+r.count;n<a;n++){let r=n;t&&(r=t.getX(r)),e.expandByPoint(og.fromBufferAttribute(i,r))}r.boundingBox=e}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;let n=this.geometry,r=this._geometryInfo[e];if(null===r.boundingSphere){let t=new rC;this.getBoundingBoxAt(e,op),op.getCenter(t.center);let i=n.index,a=n.attributes.position,o=0;for(let e=r.start,n=r.start+r.count;e<n;e++){let n=e;i&&(n=i.getX(n)),og.fromBufferAttribute(a,n),o=Math.max(o,t.center.distanceToSquared(og))}t.radius=Math.sqrt(o),r.boundingSphere=t}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);let n=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,16*e),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,16*e)}setColorAt(e,t){return this.validateInstanceId(e),null===this._colorsTexture&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,4*e),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,4*e)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t||(this._instanceInfo[e].visible=t,this._visibilityChanged=!0),this}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);let n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){let t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(os);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);let r=new Int32Array(e),i=new Int32Array(e);oS(this._multiDrawCounts,r),oS(this._multiDrawStarts,i),this._multiDrawCounts=r,this._multiDrawStarts=i,this._maxInstanceCount=e;let a=this._indirectTexture,o=this._matricesTexture,s=this._colorsTexture;a.dispose(),this._initIndirectTexture(),oS(a.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),oS(o.image.data,this._matricesTexture.image.data),s&&(s.dispose(),this._initColorsTexture(),oS(s.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){let n=[...this._geometryInfo].filter(e=>e.active);if(Math.max(...n.map(e=>e.vertexStart+e.reservedVertexCount))>e)throw Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(e=>e.indexStart+e.reservedIndexCount))>t)throw Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);let r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new iK,this._initializeGeometry(r));let i=this.geometry;for(let e in r.index&&oS(r.index.array,i.index.array),r.attributes)oS(r.attributes[e].array,i.attributes[e].array)}raycast(e,t){let n=this._instanceInfo,r=this._geometryInfo,i=this.matrixWorld,a=this.geometry;ox.material=this.material,ox.geometry.index=a.index,ox.geometry.attributes=a.attributes,null===ox.geometry.boundingBox&&(ox.geometry.boundingBox=new ru),null===ox.geometry.boundingSphere&&(ox.geometry.boundingSphere=new rC);for(let a=0,o=n.length;a<o;a++){if(!n[a].visible||!n[a].active)continue;let o=n[a].geometryIndex,s=r[o];ox.geometry.setDrawRange(s.start,s.count),this.getMatrixAt(a,ox.matrixWorld).premultiply(i),this.getBoundingBoxAt(o,ox.geometry.boundingBox),this.getBoundingSphereAt(o,ox.geometry.boundingSphere),ox.raycast(e,o_);for(let e=0,n=o_.length;e<n;e++){let n=o_[e];n.object=this,n.batchId=a,t.push(n)}o_.length=0}ox.material=null,ox.geometry.index=null,ox.geometry.attributes={},ox.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(e=>({...e,boundingBox:null!==e.boundingBox?e.boundingBox.clone():null,boundingSphere:null!==e.boundingSphere?e.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(e=>({...e})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,r,i){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;let a=r.getIndex(),o=null===a?1:a.array.BYTES_PER_ELEMENT,s=this._instanceInfo,l=this._multiDrawStarts,u=this._multiDrawCounts,c=this._geometryInfo,d=this.perObjectFrustumCulled,h=this._indirectTexture,f=h.image.data;d&&(od.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),of.setFromProjectionMatrix(od,e.coordinateSystem));let p=0;if(this.sortObjects){od.copy(this.matrixWorld).invert(),og.setFromMatrixPosition(n.matrixWorld).applyMatrix4(od),ov.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(od);for(let e=0,t=s.length;e<t;e++)if(s[e].visible&&s[e].active){let t=s[e].geometryIndex;this.getMatrixAt(e,od),this.getBoundingSphereAt(t,om).applyMatrix4(od);let n=!1;if(d&&(n=!of.intersectsSphere(om)),!n){let n=c[t],r=oy.subVectors(om.center,og).dot(ov);ob.push(n.start,n.count,r,e)}}let e=ob.list,t=this.customSort;null===t?e.sort(i.transparent?ou:ol):t.call(this,e,n);for(let t=0,n=e.length;t<n;t++){let n=e[t];l[p]=n.start*o,u[p]=n.count,f[p]=n.index,p++}ob.reset()}else for(let e=0,t=s.length;e<t;e++)if(s[e].visible&&s[e].active){let t=s[e].geometryIndex,n=!1;if(d&&(this.getMatrixAt(e,od),this.getBoundingSphereAt(t,om).applyMatrix4(od),n=!of.intersectsSphere(om)),!n){let n=c[t];l[p]=n.start*o,u[p]=n.count,f[p]=e,p++}}h.needsUpdate=!0,this._multiDrawCount=p,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,i,a){this.onBeforeRender(e,null,r,i,a)}}class ow extends iA{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ix(0xffffff),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}let oE=new ro,oM=new ro,oC=new rO,oT=new rk,oR=new rC,oP=new ro,oI=new ro;class oB extends r7{constructor(e=new iK,t=new ow){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)oE.fromBufferAttribute(t,e-1),oM.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=oE.distanceTo(oM);e.setAttribute("lineDistance",new iH(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),oR.copy(n.boundingSphere),oR.applyMatrix4(r),oR.radius+=i,!1===e.ray.intersectsSphere(oR))return;oC.copy(r).invert(),oT.copy(e.ray).applyMatrix4(oC);let o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=this.isLineSegments?2:1,u=n.index,c=n.attributes.position;if(null!==u){let n=Math.max(0,a.start),r=Math.min(u.count,a.start+a.count);for(let i=n,a=r-1;i<a;i+=l){let n=oL(this,e,oT,s,u.getX(i),u.getX(i+1),i);n&&t.push(n)}if(this.isLineLoop){let i=oL(this,e,oT,s,u.getX(r-1),u.getX(n),r-1);i&&t.push(i)}}else{let n=Math.max(0,a.start),r=Math.min(c.count,a.start+a.count);for(let i=n,a=r-1;i<a;i+=l){let n=oL(this,e,oT,s,i,i+1,i);n&&t.push(n)}if(this.isLineLoop){let i=oL(this,e,oT,s,r-1,n,r-1);i&&t.push(i)}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function oL(e,t,n,r,i,a,o){let s=e.geometry.attributes.position;if(oE.fromBufferAttribute(s,i),oM.fromBufferAttribute(s,a),n.distanceSqToSegment(oE,oM,oP,oI)>r)return;oP.applyMatrix4(e.matrixWorld);let l=t.ray.origin.distanceTo(oP);if(!(l<t.near)&&!(l>t.far))return{distance:l,point:oI.clone().applyMatrix4(e.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:e}}let oD=new ro,ok=new ro;class oO extends oB{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)oD.fromBufferAttribute(t,e),ok.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+oD.distanceTo(ok);e.setAttribute("lineDistance",new iH(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class oN extends oB{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class oF extends iA{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ix(0xffffff),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let oU=new rO,oz=new rk,oH=new rC,oG=new ro;class oV extends r7{constructor(e=new iK,t=new oF){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),oH.copy(n.boundingSphere),oH.applyMatrix4(r),oH.radius+=i,!1===e.ray.intersectsSphere(oH))return;oU.copy(r).invert(),oz.copy(e.ray).applyMatrix4(oU);let o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=n.index,u=n.attributes.position;if(null!==l){let n=Math.max(0,a.start),i=Math.min(l.count,a.start+a.count);for(let a=n;a<i;a++){let n=l.getX(a);oG.fromBufferAttribute(u,n),oj(oG,n,s,r,e,t,this)}}else{let n=Math.max(0,a.start),i=Math.min(u.count,a.start+a.count);for(let a=n;a<i;a++)oG.fromBufferAttribute(u,a),oj(oG,a,s,r,e,t,this)}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){let t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function oj(e,t,n,r,i,a,o){let s=oz.distanceSqToPoint(e);if(s<n){let n=new ro;oz.closestPointToPoint(e,n),n.applyMatrix4(r);let l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,faceIndex:null,barycoord:null,object:o})}}class oW extends n6{constructor(e,t,n,r,i,a,o,s,l){super(e,t,n,r,i,a,o,s,l),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:eR,this.magFilter=void 0!==i?i:eR,this.generateMipmaps=!1;let u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function t(){u.needsUpdate=!0,e.requestVideoFrameCallback(t)})}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class oX extends oW{constructor(e,t,n,r,i,a,o,s){super({},e,t,n,r,i,a,o,s),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class oJ extends n6{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ew,this.minFilter=ew,this.generateMipmaps=!1,this.needsUpdate=!0}}class oY extends n6{constructor(e,t,n,r,i,a,o,s,l,u,c,d){super(null,a,o,s,l,u,r,i,c,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class oK extends oY{constructor(e,t,n,r,i,a){super(e,t,n,i,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=eS,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class oq extends oY{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,eg),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class o$ extends n6{constructor(e,t,n,r,i,a,o,s,l){super(e,t,n,r,i,a,o,s,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class oQ extends n6{constructor(e,t,n,r,i,a,o,s,l,u=e$){if(u!==e$&&u!==eQ)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===e$&&(n=eU),void 0===n&&u===eQ&&(n=ej),super(null,r,i,a,o,s,u,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==o?o:ew,this.minFilter=void 0!==s?s:ew,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new n4(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class oZ{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){let n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],n,r=this.getPoint(0),i=0;t.push(0);for(let a=1;a<=e;a++)t.push(i+=(n=this.getPoint(a/e)).distanceTo(r)),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){let n;let r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];let o=0,s=a-1,l;for(;o<=s;)if((l=r[i=Math.floor(o+(s-o)/2)]-n)<0)o=i+1;else if(l>0)s=i-1;else{s=i;break}if(r[i=s]===n)return i/(a-1);let u=r[i],c=r[i+1];return(i+(n-u)/(c-u))/(a-1)}getTangent(e,t){let n=e-1e-4,r=e+1e-4;n<0&&(n=0),r>1&&(r=1);let i=this.getPoint(n),a=this.getPoint(r),o=t||(i.isVector2?new nF:new ro);return o.copy(a).sub(i).normalize(),o}getTangentAt(e,t){let n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){let n=new ro,r=[],i=[],a=[],o=new ro,s=new rO;for(let t=0;t<=e;t++){let n=t/e;r[t]=this.getTangentAt(n,new ro)}i[0]=new ro,a[0]=new ro;let l=Number.MAX_VALUE,u=Math.abs(r[0].x),c=Math.abs(r[0].y),d=Math.abs(r[0].z);u<=l&&(l=u,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),d<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),a[t]=a[t-1].clone(),o.crossVectors(r[t-1],r[t]),o.length()>Number.EPSILON){o.normalize();let e=Math.acos(nB(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(s.makeRotationAxis(o,e))}a[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(nB(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),a[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class o0 extends oZ{constructor(e=0,t=0,n=1,r=1,i=0,a=2*Math.PI,o=!1,s=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s}getPoint(e,t=new nF){let n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,i=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=i?0:n),!0!==this.aClockwise||i||(r===n?r=-n:r-=n);let a=this.aStartAngle+e*r,o=this.aX+this.xRadius*Math.cos(a),s=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){let e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,r=s-this.aY;o=n*e-r*t+this.aX,s=n*t+r*e+this.aY}return t.set(o,s)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class o1 extends o0{constructor(e,t,n,r,i,a){super(e,t,n,n,r,i,a),this.isArcCurve=!0,this.type="ArcCurve"}}function o2(){let e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){let l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,u=(n-t)/o-(r-t)/(o+s)+(r-n)/s;i(t,n,l*=o,u*=o)},calc:function(i){let a=i*i;return e+t*i+n*a+a*i*r}}}let o3=new ro,o4=new o2,o5=new o2,o9=new o2;class o6 extends oZ{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new ro){let n,r;let i=this.points,a=i.length,o=(a-(this.closed?0:1))*e,s=Math.floor(o),l=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/a)+1)*a:0===l&&s===a-1&&(s=a-2,l=1),this.closed||s>0?n=i[(s-1)%a]:(o3.subVectors(i[0],i[1]).add(i[0]),n=o3);let u=i[s%a],c=i[(s+1)%a];if(this.closed||s+2<a?r=i[(s+2)%a]:(o3.subVectors(i[a-1],i[a-2]).add(i[a-1]),r=o3),"centripetal"===this.curveType||"chordal"===this.curveType){let e="chordal"===this.curveType?.5:.25,t=Math.pow(n.distanceToSquared(u),e),i=Math.pow(u.distanceToSquared(c),e),a=Math.pow(c.distanceToSquared(r),e);i<1e-4&&(i=1),t<1e-4&&(t=i),a<1e-4&&(a=i),o4.initNonuniformCatmullRom(n.x,u.x,c.x,r.x,t,i,a),o5.initNonuniformCatmullRom(n.y,u.y,c.y,r.y,t,i,a),o9.initNonuniformCatmullRom(n.z,u.z,c.z,r.z,t,i,a)}else"catmullrom"===this.curveType&&(o4.initCatmullRom(n.x,u.x,c.x,r.x,this.tension),o5.initCatmullRom(n.y,u.y,c.y,r.y,this.tension),o9.initCatmullRom(n.z,u.z,c.z,r.z,this.tension));return t.set(o4.calc(l),o5.calc(l),o9.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(new ro().fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function o8(e,t,n,r,i){let a=(r-t)*.5,o=(i-n)*.5,s=e*e;return e*s*(2*n-2*r+a+o)+(-3*n+3*r-2*a-o)*s+a*e+n}function o7(e,t,n,r){return function(e,t){let n=1-e;return n*n*t}(e,t)+2*(1-e)*e*n+e*e*r}function se(e,t,n,r,i){return function(e,t){let n=1-e;return n*n*n*t}(e,t)+function(e,t){let n=1-e;return 3*n*n*e*t}(e,n)+3*(1-e)*e*e*r+e*e*e*i}class st extends oZ{constructor(e=new nF,t=new nF,n=new nF,r=new nF){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new nF){let n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(se(e,n.x,r.x,i.x,a.x),se(e,n.y,r.y,i.y,a.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class sn extends oZ{constructor(e=new ro,t=new ro,n=new ro,r=new ro){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new ro){let n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(se(e,n.x,r.x,i.x,a.x),se(e,n.y,r.y,i.y,a.y),se(e,n.z,r.z,i.z,a.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class sr extends oZ{constructor(e=new nF,t=new nF){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new nF){return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new nF){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class si extends oZ{constructor(e=new ro,t=new ro){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ro){return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ro){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sa extends oZ{constructor(e=new nF,t=new nF,n=new nF){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new nF){let n=this.v0,r=this.v1,i=this.v2;return t.set(o7(e,n.x,r.x,i.x),o7(e,n.y,r.y,i.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class so extends oZ{constructor(e=new ro,t=new ro,n=new ro){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new ro){let n=this.v0,r=this.v1,i=this.v2;return t.set(o7(e,n.x,r.x,i.x),o7(e,n.y,r.y,i.y),o7(e,n.z,r.z,i.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ss extends oZ{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new nF){let n=this.points,r=(n.length-1)*e,i=Math.floor(r),a=r-i,o=n[0===i?i:i-1],s=n[i],l=n[i>n.length-2?n.length-1:i+1],u=n[i>n.length-3?n.length-1:i+2];return t.set(o8(a,o.x,s.x,l.x,u.x),o8(a,o.y,s.y,l.y,u.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(new nF().fromArray(n))}return this}}var sl=Object.freeze({__proto__:null,ArcCurve:o1,CatmullRomCurve3:o6,CubicBezierCurve:st,CubicBezierCurve3:sn,EllipseCurve:o0,LineCurve:sr,LineCurve3:si,QuadraticBezierCurve:sa,QuadraticBezierCurve3:so,SplineCurve:ss});class su extends oZ{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){let n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new sl[n](t,e))}return this}getPoint(e,t){let n=e*this.getLength(),r=this.getCurveLengths(),i=0;for(;i<r.length;){if(r[i]>=n){let e=r[i]-n,a=this.curves[i],o=a.getLength(),s=0===o?0:1-e/o;return a.getPointAt(s,t)}i++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let n=0,r=this.curves.length;n<r;n++)e.push(t+=this.curves[n].getLength());return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t;let n=[];for(let r=0,i=this.curves;r<i.length;r++){let a=i[r],o=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o);for(let e=0;e<s.length;e++){let r=s[e];t&&t.equals(r)||(n.push(r),t=r)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){let n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let n=e.curves[t];this.curves.push(new sl[n.type]().fromJSON(n))}return this}}class sc extends su{constructor(e){super(),this.type="Path",this.currentPoint=new nF,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let n=new sr(this.currentPoint.clone(),new nF(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){let i=new sa(this.currentPoint.clone(),new nF(e,t),new nF(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,a){let o=new st(this.currentPoint.clone(),new nF(e,t),new nF(n,r),new nF(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}splineThru(e){let t=new ss([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,a){let o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this}absarc(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}ellipse(e,t,n,r,i,a,o,s){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,r,i,a,o,s),this}absellipse(e,t,n,r,i,a,o,s){let l=new o0(e,t,n,r,i,a,o,s);if(this.curves.length>0){let e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class sd extends iK{constructor(e=[new nF(0,-.5),new nF(.5,0),new nF(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=nB(r,0,2*Math.PI);let i=[],a=[],o=[],s=[],l=[],u=1/t,c=new ro,d=new nF,h=new ro,f=new ro,p=new ro,m=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-m,h.z=0*g,p.copy(h),h.normalize(),s.push(h.x,h.y,h.z);break;case e.length-1:s.push(p.x,p.y,p.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-m,h.z=0*g,f.copy(h),h.x+=p.x,h.y+=p.y,h.z+=p.z,h.normalize(),s.push(h.x,h.y,h.z),p.copy(f)}for(let i=0;i<=t;i++){let h=n+i*u*r,f=Math.sin(h),p=Math.cos(h);for(let n=0;n<=e.length-1;n++){c.x=e[n].x*f,c.y=e[n].y,c.z=e[n].x*p,a.push(c.x,c.y,c.z),d.x=i/t,d.y=n/(e.length-1),o.push(d.x,d.y);let r=s[3*n+0]*f,u=s[3*n+1],h=s[3*n+0]*p;l.push(r,u,h)}}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){let r=t+n*e.length,a=r+e.length,o=r+e.length+1,s=r+1;i.push(r,a,s),i.push(o,s,a)}this.setIndex(i),this.setAttribute("position",new iH(a,3)),this.setAttribute("uv",new iH(o,2)),this.setAttribute("normal",new iH(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sd(e.points,e.segments,e.phiStart,e.phiLength)}}class sh extends sd{constructor(e=1,t=1,n=4,r=8){let i=new sc;i.absarc(0,-t/2,e,1.5*Math.PI,0),i.absarc(0,t/2,e,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new sh(e.radius,e.length,e.capSegments,e.radialSegments)}}class sf extends iK{constructor(e=1,t=32,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);let i=[],a=[],o=[],s=[],l=new ro,u=new nF;a.push(0,0,0),o.push(0,0,1),s.push(.5,.5);for(let i=0,c=3;i<=t;i++,c+=3){let d=n+i/t*r;l.x=e*Math.cos(d),l.y=e*Math.sin(d),a.push(l.x,l.y,l.z),o.push(0,0,1),u.x=(a[c]/e+1)/2,u.y=(a[c+1]/e+1)/2,s.push(u.x,u.y)}for(let e=1;e<=t;e++)i.push(e,e+1,0);this.setIndex(i),this.setAttribute("position",new iH(a,3)),this.setAttribute("normal",new iH(o,3)),this.setAttribute("uv",new iH(s,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sf(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class sp extends iK{constructor(e=1,t=1,n=1,r=32,i=1,a=!1,o=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};let l=this;r=Math.floor(r),i=Math.floor(i);let u=[],c=[],d=[],h=[],f=0,p=[],m=n/2,g=0;function v(n){let i=f,a=new nF,p=new ro,v=0,y=!0===n?e:t,b=!0===n?1:-1;for(let e=1;e<=r;e++)c.push(0,m*b,0),d.push(0,b,0),h.push(.5,.5),f++;let x=f;for(let e=0;e<=r;e++){let t=e/r*s+o,n=Math.cos(t),i=Math.sin(t);p.x=y*i,p.y=m*b,p.z=y*n,c.push(p.x,p.y,p.z),d.push(0,b,0),a.x=.5*n+.5,a.y=.5*i*b+.5,h.push(a.x,a.y),f++}for(let e=0;e<r;e++){let t=i+e,r=x+e;!0===n?u.push(r,r+1,t):u.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}(function(){let a=new ro,v=new ro,y=0,b=(t-e)/n;for(let l=0;l<=i;l++){let u=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){let t=e/r,i=t*s+o,l=Math.sin(i),p=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*p,c.push(v.x,v.y,v.z),a.set(l,b,p).normalize(),d.push(a.x,a.y,a.z),h.push(t,1-g),u.push(f++)}p.push(u)}for(let n=0;n<r;n++)for(let r=0;r<i;r++){let a=p[r][n],o=p[r+1][n],s=p[r+1][n+1],l=p[r][n+1];(e>0||0!==r)&&(u.push(a,o,l),y+=3),(t>0||r!==i-1)&&(u.push(o,s,l),y+=3)}l.addGroup(g,y,0),g+=y})(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(u),this.setAttribute("position",new iH(c,3)),this.setAttribute("normal",new iH(d,3)),this.setAttribute("uv",new iH(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sp(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class sm extends sp{constructor(e=1,t=1,n=32,r=1,i=!1,a=0,o=2*Math.PI){super(0,e,t,n,r,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}static fromJSON(e){return new sm(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class sg extends iK{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};let i=[],a=[];function o(e){i.push(e.x,e.y,e.z)}function s(t,n){let r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function l(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}(function(e){let n=new ro,r=new ro,i=new ro;for(let a=0;a<t.length;a+=3)s(t[a+0],n),s(t[a+1],r),s(t[a+2],i),function(e,t,n,r){let i=r+1,a=[];for(let r=0;r<=i;r++){a[r]=[];let o=e.clone().lerp(n,r/i),s=t.clone().lerp(n,r/i),l=i-r;for(let e=0;e<=l;e++)0===e&&r===i?a[r][e]=o:a[r][e]=o.clone().lerp(s,e/l)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){let n=Math.floor(t/2);t%2==0?(o(a[e][n+1]),o(a[e+1][n]),o(a[e][n])):(o(a[e][n+1]),o(a[e+1][n+1]),o(a[e+1][n]))}}(n,r,i,e)})(r),function(e){let t=new ro;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){let e=new ro;for(let t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];let n=u(e)/2/Math.PI+.5,r=Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5;a.push(n,1-r)}(function(){let e=new ro,t=new ro,n=new ro,r=new ro,o=new nF,s=new nF,c=new nF;for(let d=0,h=0;d<i.length;d+=9,h+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),o.set(a[h+0],a[h+1]),s.set(a[h+2],a[h+3]),c.set(a[h+4],a[h+5]),r.copy(e).add(t).add(n).divideScalar(3);let f=u(r);l(o,h+0,e,f),l(s,h+2,t,f),l(c,h+4,n,f)}})(),function(){for(let e=0;e<a.length;e+=6){let t=a[e+0],n=a[e+2],r=a[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new iH(i,3)),this.setAttribute("normal",new iH(i.slice(),3)),this.setAttribute("uv",new iH(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sg(e.vertices,e.indices,e.radius,e.details)}}class sv extends sg{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sv(e.radius,e.detail)}}let sy=new ro,sb=new ro,sx=new ro,s_=new im;class sS extends iK{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){let n=Math.cos(nR*t),r=e.getIndex(),i=e.getAttribute("position"),a=r?r.count:i.count,o=[0,0,0],s=["a","b","c"],l=[,,,],u={},c=[];for(let e=0;e<a;e+=3){r?(o[0]=r.getX(e),o[1]=r.getX(e+1),o[2]=r.getX(e+2)):(o[0]=e,o[1]=e+1,o[2]=e+2);let{a:t,b:a,c:d}=s_;if(t.fromBufferAttribute(i,o[0]),a.fromBufferAttribute(i,o[1]),d.fromBufferAttribute(i,o[2]),s_.getNormal(sx),l[0]=`${Math.round(1e4*t.x)},${Math.round(1e4*t.y)},${Math.round(1e4*t.z)}`,l[1]=`${Math.round(1e4*a.x)},${Math.round(1e4*a.y)},${Math.round(1e4*a.z)}`,l[2]=`${Math.round(1e4*d.x)},${Math.round(1e4*d.y)},${Math.round(1e4*d.z)}`,l[0]!==l[1]&&l[1]!==l[2]&&l[2]!==l[0])for(let e=0;e<3;e++){let t=(e+1)%3,r=l[e],i=l[t],a=s_[s[e]],d=s_[s[t]],h=`${r}_${i}`,f=`${i}_${r}`;f in u&&u[f]?(sx.dot(u[f].normal)<=n&&(c.push(a.x,a.y,a.z),c.push(d.x,d.y,d.z)),u[f]=null):h in u||(u[h]={index0:o[e],index1:o[t],normal:sx.clone()})}}for(let e in u)if(u[e]){let{index0:t,index1:n}=u[e];sy.fromBufferAttribute(i,t),sb.fromBufferAttribute(i,n),c.push(sy.x,sy.y,sy.z),c.push(sb.x,sb.y,sb.z)}this.setAttribute("position",new iH(c,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class sA extends sc{constructor(e){super(e),this.uuid=nI(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){let n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let n=e.holes[t];this.holes.push(new sc().fromJSON(n))}return this}}class sw{static triangulate(e,t,n=2){let r,i,a,o,s,l,u;let c=t&&t.length,d=c?t[0]*n:e.length,h=sE(e,0,d,n,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=function(e,t,n,r){let i,a,o,s,l;let u=[];for(i=0,a=t.length;i<a;i++)o=t[i]*r,s=i<a-1?t[i+1]*r:e.length,(l=sE(e,o,s,r,!1))===l.next&&(l.steiner=!0),u.push(function(e){let t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}(l));for(u.sort(sC),i=0;i<u.length;i++)n=function(e,t){let n=function(e,t){let n=t,r=-1/0,i,a=e.x,o=e.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){let e=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=a&&e>r&&(r=e,i=n.x<n.next.x?n:n.next,e===a))return i}n=n.next}while(n!==t);if(!i)return null;let s=i,l=i.x,u=i.y,c=1/0,d;n=i;do{var h,f;a>=n.x&&n.x>=l&&a!==n.x&&sR(o<u?a:r,o,l,u,o<u?r:a,o,n.x,n.y)&&(d=Math.abs(o-n.y)/(a-n.x),sk(n,e)&&(d<c||d===c&&(n.x>i.x||n.x===i.x&&(h=i,f=n,0>sP(h.prev,h,f.prev)&&0>sP(f.next,h,h.next))))&&(i=n,c=d)),n=n.next}while(n!==s);return i}(e,t);if(!n)return t;let r=sO(n,e);return sM(r,r.next),sM(n,n.next)}(u[i],n);return n}(e,t,h,n)),e.length>80*n){r=a=e[0],i=o=e[1];for(let t=n;t<d;t+=n)s=e[t],l=e[t+1],s<r&&(r=s),l<i&&(i=l),s>a&&(a=s),l>o&&(o=l);u=0!==(u=Math.max(a-r,o-i))?32767/u:0}return function e(t,n,r,i,a,o,s){if(!t)return;!s&&o&&function(e,t,n,r){let i=e;do 0===i.z&&(i.z=sT(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,a,o,s,l,u=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(o>1)}(i)}(t,i,a,o);let l=t,u,c;for(;t.prev!==t.next;){if(u=t.prev,c=t.next,o?function(e,t,n,r){let i=e.prev,a=e.next;if(sP(i,e,a)>=0)return!1;let o=i.x,s=e.x,l=a.x,u=i.y,c=e.y,d=a.y,h=o<s?o<l?o:l:s<l?s:l,f=u<c?u<d?u:d:c<d?c:d,p=o>s?o>l?o:l:s>l?s:l,m=u>c?u>d?u:d:c>d?c:d,g=sT(h,f,t,n,r),v=sT(p,m,t,n,r),y=e.prevZ,b=e.nextZ;for(;y&&y.z>=g&&b&&b.z<=v;){if(y.x>=h&&y.x<=p&&y.y>=f&&y.y<=m&&y!==i&&y!==a&&sR(o,u,s,c,l,d,y.x,y.y)&&sP(y.prev,y,y.next)>=0||(y=y.prevZ,b.x>=h&&b.x<=p&&b.y>=f&&b.y<=m&&b!==i&&b!==a&&sR(o,u,s,c,l,d,b.x,b.y)&&sP(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;y&&y.z>=g;){if(y.x>=h&&y.x<=p&&y.y>=f&&y.y<=m&&y!==i&&y!==a&&sR(o,u,s,c,l,d,y.x,y.y)&&sP(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=v;){if(b.x>=h&&b.x<=p&&b.y>=f&&b.y<=m&&b!==i&&b!==a&&sR(o,u,s,c,l,d,b.x,b.y)&&sP(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}(t,i,a,o):function(e){let t=e.prev,n=e.next;if(sP(t,e,n)>=0)return!1;let r=t.x,i=e.x,a=n.x,o=t.y,s=e.y,l=n.y,u=r<i?r<a?r:a:i<a?i:a,c=o<s?o<l?o:l:s<l?s:l,d=r>i?r>a?r:a:i>a?i:a,h=o>s?o>l?o:l:s>l?s:l,f=n.next;for(;f!==t;){if(f.x>=u&&f.x<=d&&f.y>=c&&f.y<=h&&sR(r,o,i,s,a,l,f.x,f.y)&&sP(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}(t)){n.push(u.i/r|0),n.push(t.i/r|0),n.push(c.i/r|0),sF(t),t=c.next,l=c.next;continue}if((t=c)===l){s?1===s?e(t=function(e,t,n){let r=e;do{let i=r.prev,a=r.next.next;!sI(i,a)&&sB(i,r,r.next,a)&&sk(i,a)&&sk(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),sF(r),sF(r.next),r=e=a),r=r.next}while(r!==e);return sM(r)}(sM(t),n,r),n,r,i,a,o,2):2===s&&function(t,n,r,i,a,o){let s=t;do{let t=s.next.next;for(;t!==s.prev;){var l,u;if(s.i!==t.i&&(l=s,u=t,l.next.i!==u.i&&l.prev.i!==u.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&sB(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(l,u)&&(sk(l,u)&&sk(u,l)&&function(e,t){let n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}(l,u)&&(sP(l.prev,l,u.prev)||sP(l,u.prev,u))||sI(l,u)&&sP(l.prev,l,l.next)>0&&sP(u.prev,u,u.next)>0))){let l=sO(s,t);s=sM(s,s.next),l=sM(l,l.next),e(s,n,r,i,a,o,0),e(l,n,r,i,a,o,0);return}t=t.next}s=s.next}while(s!==t)}(t,n,r,i,a,o):e(sM(t),n,r,i,a,o,1);break}}}(h,f,n,r,i,u,0),f}}function sE(e,t,n,r,i){let a,o;if(i===function(e,t,n,r){let i=0;for(let a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=sN(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=sN(a,e[a],e[a+1],o);return o&&sI(o,o.next)&&(sF(o),o=o.next),o}function sM(e,t){if(!e)return e;t||(t=e);let n=e,r;do if(r=!1,!n.steiner&&(sI(n,n.next)||0===sP(n.prev,n,n.next))){if(sF(n),(n=t=n.prev)===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t}function sC(e,t){return e.x-t.x}function sT(e,t,n,r,i){return(e=((e=((e=((e=((e=(e-n)*i|0)|e<<8)&0xff00ff)|e<<4)&0xf0f0f0f)|e<<2)&0x33333333)|e<<1)&0x55555555)|(t=((t=((t=((t=((t=(t-r)*i|0)|t<<8)&0xff00ff)|t<<4)&0xf0f0f0f)|t<<2)&0x33333333)|t<<1)&0x55555555)<<1}function sR(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function sP(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function sI(e,t){return e.x===t.x&&e.y===t.y}function sB(e,t,n,r){let i=sD(sP(e,t,n)),a=sD(sP(e,t,r)),o=sD(sP(n,r,e)),s=sD(sP(n,r,t));return!!(i!==a&&o!==s||0===i&&sL(e,n,t)||0===a&&sL(e,r,t)||0===o&&sL(n,e,r)||0===s&&sL(n,t,r))}function sL(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function sD(e){return e>0?1:e<0?-1:0}function sk(e,t){return 0>sP(e.prev,e,e.next)?sP(e,t,e.next)>=0&&sP(e,e.prev,t)>=0:0>sP(e,t,e.prev)||0>sP(e,e.next,t)}function sO(e,t){let n=new sU(e.i,e.x,e.y),r=new sU(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function sN(e,t,n,r){let i=new sU(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function sF(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function sU(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class sz{static area(e){let t=e.length,n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return .5*n}static isClockWise(e){return 0>sz.area(e)}static triangulateShape(e,t){let n=[],r=[],i=[];sH(e),sG(n,e);let a=e.length;t.forEach(sH);for(let e=0;e<t.length;e++)r.push(a),a+=t[e].length,sG(n,t[e]);let o=sw.triangulate(n,r);for(let e=0;e<o.length;e+=3)i.push(o.slice(e,e+3));return i}}function sH(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function sG(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class sV extends iK{constructor(e=new sA([new nF(.5,.5),new nF(-.5,.5),new nF(-.5,-.5),new nF(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let n=this,r=[],i=[];for(let a=0,o=e.length;a<o;a++)(function(e){let a,o,s,l;let u=[],c=void 0!==t.curveSegments?t.curveSegments:12,d=void 0!==t.steps?t.steps:1,h=void 0!==t.depth?t.depth:1,f=void 0===t.bevelEnabled||t.bevelEnabled,p=void 0!==t.bevelThickness?t.bevelThickness:.2,m=void 0!==t.bevelSize?t.bevelSize:p-.1,g=void 0!==t.bevelOffset?t.bevelOffset:0,v=void 0!==t.bevelSegments?t.bevelSegments:3,y=t.extrudePath,b=void 0!==t.UVGenerator?t.UVGenerator:sj,x,_=!1;y&&(x=y.getSpacedPoints(d),_=!0,f=!1,a=y.computeFrenetFrames(d,!1),o=new ro,s=new ro,l=new ro),f||(v=0,p=0,m=0,g=0);let S=e.extractPoints(c),A=S.shape,w=S.holes;if(!sz.isClockWise(A)){A=A.reverse();for(let e=0,t=w.length;e<t;e++){let t=w[e];sz.isClockWise(t)&&(w[e]=t.reverse())}}let E=sz.triangulateShape(A,w),M=A;for(let e=0,t=w.length;e<t;e++){let t=w[e];A=A.concat(t)}function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}let T=A.length,R=E.length;function P(e,t,n){let r,i,a;let o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=o*o+s*s;if(Math.abs(o*u-s*l)>Number.EPSILON){let d=Math.sqrt(c),h=Math.sqrt(l*l+u*u),f=t.x-s/d,p=t.y+o/d,m=((n.x-u/h-f)*u-(n.y+l/h-p)*l)/(o*u-s*l),g=(r=f+o*m-e.x)*r+(i=p+s*m-e.y)*i;if(g<=2)return new nF(r,i);a=Math.sqrt(g/2)}else{let e=!1;o>Number.EPSILON?l>Number.EPSILON&&(e=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(u)&&(e=!0),e?(r=-s,i=o,a=Math.sqrt(c)):(r=o,i=s,a=Math.sqrt(c/2))}return new nF(r/a,i/a)}let I=[];for(let e=0,t=M.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),I[e]=P(M[e],M[n],M[r]);let B=[],L,D=I.concat();for(let e=0,t=w.length;e<t;e++){let t=w[e];L=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),L[e]=P(t[e],t[r],t[i]);B.push(L),D=D.concat(L)}for(let e=0;e<v;e++){let t=e/v,n=p*Math.cos(t*Math.PI/2),r=m*Math.sin(t*Math.PI/2)+g;for(let e=0,t=M.length;e<t;e++){let t=C(M[e],I[e],r);N(t.x,t.y,-n)}for(let e=0,t=w.length;e<t;e++){let t=w[e];L=B[e];for(let e=0,i=t.length;e<i;e++){let i=C(t[e],L[e],r);N(i.x,i.y,-n)}}}let k=m+g;for(let e=0;e<T;e++){let t=f?C(A[e],D[e],k):A[e];_?(s.copy(a.normals[0]).multiplyScalar(t.x),o.copy(a.binormals[0]).multiplyScalar(t.y),l.copy(x[0]).add(s).add(o),N(l.x,l.y,l.z)):N(t.x,t.y,0)}for(let e=1;e<=d;e++)for(let t=0;t<T;t++){let n=f?C(A[t],D[t],k):A[t];_?(s.copy(a.normals[e]).multiplyScalar(n.x),o.copy(a.binormals[e]).multiplyScalar(n.y),l.copy(x[e]).add(s).add(o),N(l.x,l.y,l.z)):N(n.x,n.y,h/d*e)}for(let e=v-1;e>=0;e--){let t=e/v,n=p*Math.cos(t*Math.PI/2),r=m*Math.sin(t*Math.PI/2)+g;for(let e=0,t=M.length;e<t;e++){let t=C(M[e],I[e],r);N(t.x,t.y,h+n)}for(let e=0,t=w.length;e<t;e++){let t=w[e];L=B[e];for(let e=0,i=t.length;e<i;e++){let i=C(t[e],L[e],r);_?N(i.x,i.y+x[d-1].y,x[d-1].x+n):N(i.x,i.y,h+n)}}}function O(e,t){let i=e.length;for(;--i>=0;){let a=i,o=i-1;o<0&&(o=e.length-1);for(let e=0,i=d+2*v;e<i;e++){let i=T*e,s=T*(e+1);(function(e,t,i,a){U(e),U(t),U(a),U(t),U(i),U(a);let o=r.length/3,s=b.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);z(s[0]),z(s[1]),z(s[3]),z(s[1]),z(s[2]),z(s[3])})(t+a+i,t+o+i,t+o+s,t+a+s)}}}function N(e,t,n){u.push(e),u.push(t),u.push(n)}function F(e,t,i){U(e),U(t),U(i);let a=r.length/3,o=b.generateTopUV(n,r,a-3,a-2,a-1);z(o[0]),z(o[1]),z(o[2])}function U(e){r.push(u[3*e+0]),r.push(u[3*e+1]),r.push(u[3*e+2])}function z(e){i.push(e.x),i.push(e.y)}(function(){let e=r.length/3;if(f){let e=0*T;for(let t=0;t<R;t++){let n=E[t];F(n[2]+e,n[1]+e,n[0]+e)}e=T*(d+2*v);for(let t=0;t<R;t++){let n=E[t];F(n[0]+e,n[1]+e,n[2]+e)}}else{for(let e=0;e<R;e++){let t=E[e];F(t[2],t[1],t[0])}for(let e=0;e<R;e++){let t=E[e];F(t[0]+T*d,t[1]+T*d,t[2]+T*d)}}n.addGroup(e,r.length/3-e,0)})(),function(){let e=r.length/3,t=0;O(M,0),t+=M.length;for(let e=0,n=w.length;e<n;e++){let n=w[e];O(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()})(e[a]);this.setAttribute("position",new iH(r,3)),this.setAttribute("uv",new iH(i,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){let r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){let n=[];for(let r=0,i=e.shapes.length;r<i;r++){let i=t[e.shapes[r]];n.push(i)}let r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=new sl[r.type]().fromJSON(r)),new sV(n,e.options)}}let sj={generateTopUV:function(e,t,n,r,i){let a=t[3*n],o=t[3*n+1],s=t[3*r],l=t[3*r+1],u=t[3*i],c=t[3*i+1];return[new nF(a,o),new nF(s,l),new nF(u,c)]},generateSideWallUV:function(e,t,n,r,i,a){let o=t[3*n],s=t[3*n+1],l=t[3*n+2],u=t[3*r],c=t[3*r+1],d=t[3*r+2],h=t[3*i],f=t[3*i+1],p=t[3*i+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(s-c)<Math.abs(o-u)?[new nF(o,1-l),new nF(u,1-d),new nF(h,1-p),new nF(m,1-v)]:[new nF(s,1-l),new nF(c,1-d),new nF(f,1-p),new nF(g,1-v)]}};class sW extends sg{constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sW(e.radius,e.detail)}}class sX extends sg{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sX(e.radius,e.detail)}}class sJ extends iK{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};let i=e/2,a=t/2,o=Math.floor(n),s=Math.floor(r),l=o+1,u=s+1,c=e/o,d=t/s,h=[],f=[],p=[],m=[];for(let e=0;e<u;e++){let t=e*d-a;for(let n=0;n<l;n++){let r=n*c-i;f.push(r,-t,0),p.push(0,0,1),m.push(n/o),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<o;t++){let n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),a=t+1+l*e;h.push(n,r,a),h.push(r,i,a)}this.setIndex(h),this.setAttribute("position",new iH(f,3)),this.setAttribute("normal",new iH(p,3)),this.setAttribute("uv",new iH(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sJ(e.width,e.height,e.widthSegments,e.heightSegments)}}class sY extends iK{constructor(e=.5,t=1,n=32,r=1,i=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},n=Math.max(3,n);let o=[],s=[],l=[],u=[],c=e,d=(t-e)/(r=Math.max(1,r)),h=new ro,f=new nF;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){let r=i+e/n*a;h.x=c*Math.cos(r),h.y=c*Math.sin(r),s.push(h.x,h.y,h.z),l.push(0,0,1),f.x=(h.x/t+1)/2,f.y=(h.y/t+1)/2,u.push(f.x,f.y)}c+=d}for(let e=0;e<r;e++){let t=e*(n+1);for(let e=0;e<n;e++){let r=e+t,i=r+n+1,a=r+n+2,s=r+1;o.push(r,i,s),o.push(i,a,s)}}this.setIndex(o),this.setAttribute("position",new iH(s,3)),this.setAttribute("normal",new iH(l,3)),this.setAttribute("uv",new iH(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sY(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class sK extends iK{constructor(e=new sA([new nF(0,.5),new nF(-.5,-.5),new nF(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let n=[],r=[],i=[],a=[],o=0,s=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(o,s,t),o+=s,s=0;function l(e){let o=r.length/3,l=e.extractPoints(t),u=l.shape,c=l.holes;!1===sz.isClockWise(u)&&(u=u.reverse());for(let e=0,t=c.length;e<t;e++){let t=c[e];!0===sz.isClockWise(t)&&(c[e]=t.reverse())}let d=sz.triangulateShape(u,c);for(let e=0,t=c.length;e<t;e++){let t=c[e];u=u.concat(t)}for(let e=0,t=u.length;e<t;e++){let t=u[e];r.push(t.x,t.y,0),i.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=d.length;e<t;e++){let t=d[e],r=t[0]+o,i=t[1]+o,a=t[2]+o;n.push(r,i,a),s+=3}}this.setIndex(n),this.setAttribute("position",new iH(r,3)),this.setAttribute("normal",new iH(i,3)),this.setAttribute("uv",new iH(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){let r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){let n=[];for(let r=0,i=e.shapes.length;r<i;r++){let i=t[e.shapes[r]];n.push(i)}return new sK(n,e.curveSegments)}}class sq extends iK{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));let s=Math.min(a+o,Math.PI),l=0,u=[],c=new ro,d=new ro,h=[],f=[],p=[],m=[];for(let h=0;h<=n;h++){let g=[],v=h/n,y=0;0===h&&0===a?y=.5/t:h===n&&s===Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){let s=n/t;c.x=-e*Math.cos(r+s*i)*Math.sin(a+v*o),c.y=e*Math.cos(a+v*o),c.z=e*Math.sin(r+s*i)*Math.sin(a+v*o),f.push(c.x,c.y,c.z),d.copy(c).normalize(),p.push(d.x,d.y,d.z),m.push(s+y,1-v),g.push(l++)}u.push(g)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){let t=u[e][r+1],i=u[e][r],o=u[e+1][r],l=u[e+1][r+1];(0!==e||a>0)&&h.push(t,i,l),(e!==n-1||s<Math.PI)&&h.push(i,o,l)}this.setIndex(h),this.setAttribute("position",new iH(f,3)),this.setAttribute("normal",new iH(p,3)),this.setAttribute("uv",new iH(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sq(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class s$ extends sg{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new s$(e.radius,e.detail)}}class sQ extends iK{constructor(e=1,t=.4,n=12,r=48,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);let a=[],o=[],s=[],l=[],u=new ro,c=new ro,d=new ro;for(let a=0;a<=n;a++)for(let h=0;h<=r;h++){let f=h/r*i,p=a/n*Math.PI*2;c.x=(e+t*Math.cos(p))*Math.cos(f),c.y=(e+t*Math.cos(p))*Math.sin(f),c.z=t*Math.sin(p),o.push(c.x,c.y,c.z),u.x=e*Math.cos(f),u.y=e*Math.sin(f),d.subVectors(c,u).normalize(),s.push(d.x,d.y,d.z),l.push(h/r),l.push(a/n)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){let n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,o=(r+1)*(e-1)+t,s=(r+1)*e+t;a.push(n,i,s),a.push(i,o,s)}this.setIndex(a),this.setAttribute("position",new iH(o,3)),this.setAttribute("normal",new iH(s,3)),this.setAttribute("uv",new iH(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sQ(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class sZ extends iK{constructor(e=1,t=.4,n=64,r=8,i=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},n=Math.floor(n),r=Math.floor(r);let o=[],s=[],l=[],u=[],c=new ro,d=new ro,h=new ro,f=new ro,p=new ro,m=new ro,g=new ro;for(let o=0;o<=n;++o){let y=o/n*i*Math.PI*2;v(y,i,a,e,h),v(y+.01,i,a,e,f),m.subVectors(f,h),g.addVectors(f,h),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let e=0;e<=r;++e){let i=e/r*Math.PI*2,a=-t*Math.cos(i),f=t*Math.sin(i);c.x=h.x+(a*g.x+f*p.x),c.y=h.y+(a*g.y+f*p.y),c.z=h.z+(a*g.z+f*p.z),s.push(c.x,c.y,c.z),d.subVectors(c,h).normalize(),l.push(d.x,d.y,d.z),u.push(o/n),u.push(e/r)}}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){let n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,s=(r+1)*(e-1)+t;o.push(n,i,s),o.push(i,a,s)}function v(e,t,n,r,i){let a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*a,i.y=r*(2+l)*o*.5,i.z=r*Math.sin(s)*.5}this.setIndex(o),this.setAttribute("position",new iH(s,3)),this.setAttribute("normal",new iH(l,3)),this.setAttribute("uv",new iH(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sZ(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class s0 extends iK{constructor(e=new so(new ro(-1,-1,0),new ro(-1,1,0),new ro(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};let a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;let o=new ro,s=new ro,l=new nF,u=new ro,c=[],d=[],h=[],f=[];function p(i){u=e.getPointAt(i/t,u);let l=a.normals[i],h=a.binormals[i];for(let e=0;e<=r;e++){let t=e/r*Math.PI*2,i=Math.sin(t),a=-Math.cos(t);s.x=a*l.x+i*h.x,s.y=a*l.y+i*h.y,s.z=a*l.z+i*h.z,s.normalize(),d.push(s.x,s.y,s.z),o.x=u.x+n*s.x,o.y=u.y+n*s.y,o.z=u.z+n*s.z,c.push(o.x,o.y,o.z)}}(function(){for(let e=0;e<t;e++)p(e);p(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,h.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){let n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,o=(r+1)*(e-1)+t;f.push(n,i,o),f.push(i,a,o)}}()})(),this.setIndex(f),this.setAttribute("position",new iH(c,3)),this.setAttribute("normal",new iH(d,3)),this.setAttribute("uv",new iH(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new s0(new sl[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class s1 extends iK{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){let t=[],n=new Set,r=new ro,i=new ro;if(null!==e.index){let a=e.attributes.position,o=e.index,s=e.groups;0===s.length&&(s=[{start:0,count:o.count,materialIndex:0}]);for(let e=0,l=s.length;e<l;++e){let l=s[e],u=l.start,c=l.count;for(let e=u,s=u+c;e<s;e+=3)for(let s=0;s<3;s++){let l=o.getX(e+s),u=o.getX(e+(s+1)%3);r.fromBufferAttribute(a,l),i.fromBufferAttribute(a,u),!0===s2(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{let a=e.attributes.position;for(let e=0,o=a.count/3;e<o;e++)for(let o=0;o<3;o++){let s=3*e+o,l=3*e+(o+1)%3;r.fromBufferAttribute(a,s),i.fromBufferAttribute(a,l),!0===s2(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new iH(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function s2(e,t,n){let r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var s3=Object.freeze({__proto__:null,BoxGeometry:i7,CapsuleGeometry:sh,CircleGeometry:sf,ConeGeometry:sm,CylinderGeometry:sp,DodecahedronGeometry:sv,EdgesGeometry:sS,ExtrudeGeometry:sV,IcosahedronGeometry:sW,LatheGeometry:sd,OctahedronGeometry:sX,PlaneGeometry:sJ,PolyhedronGeometry:sg,RingGeometry:sY,ShapeGeometry:sK,SphereGeometry:sq,TetrahedronGeometry:s$,TorusGeometry:sQ,TorusKnotGeometry:sZ,TubeGeometry:s0,WireframeGeometry:s1});class s4 extends iA{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ix(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class s5 extends ai{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class s9 extends iA{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ix(0xffffff),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ix(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tW,this.normalScale=new nF(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new rX,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class s6 extends s9{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new nF(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return nB(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ix(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ix(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ix(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class s8 extends iA{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ix(0xffffff),this.specular=new ix(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ix(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tW,this.normalScale=new nF(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new rX,this.combine=en,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class s7 extends iA{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ix(0xffffff),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ix(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tW,this.normalScale=new nF(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class le extends iA{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tW,this.normalScale=new nF(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class lt extends iA{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ix(0xffffff),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ix(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tW,this.normalScale=new nF(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new rX,this.combine=en,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ln extends iA{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=tH,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class lr extends iA{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class li extends iA{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ix(0xffffff),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tW,this.normalScale=new nF(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class la extends ow{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function lo(e,t,n){return e&&(n||e.constructor!==t)?"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function ls(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ll(e){let t=e.length,n=Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort(function(t,n){return e[t]-e[n]}),n}function lu(e,t,n){let r=e.length,i=new e.constructor(r);for(let a=0,o=0;o!==r;++a){let r=n[a]*t;for(let n=0;n!==t;++n)i[o++]=e[r+n]}return i}function lc(e,t,n,r){let i=1,a=e[0];for(;void 0!==a&&void 0===a[r];)a=e[i++];if(void 0===a)return;let o=a[r];if(void 0!==o){if(Array.isArray(o))do void 0!==(o=a[r])&&(t.push(a.time),n.push(...o)),a=e[i++];while(void 0!==a);else if(void 0!==o.toArray)do void 0!==(o=a[r])&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++];while(void 0!==a);else do void 0!==(o=a[r])&&(t.push(a.time),n.push(o)),a=e[i++];while(void 0!==a)}}let ld={convertArray:lo,isTypedArray:ls,getKeyframeOrder:ll,sortedArray:lu,flattenJSON:lc,subclip:function(e,t,n,r,i=30){let a=e.clone();a.name=t;let o=[];for(let e=0;e<a.tracks.length;++e){let t=a.tracks[e],s=t.getValueSize(),l=[],u=[];for(let e=0;e<t.times.length;++e){let a=t.times[e]*i;if(!(a<n)&&!(a>=r)){l.push(t.times[e]);for(let n=0;n<s;++n)u.push(t.values[e*s+n])}}0!==l.length&&(t.times=lo(l,t.times.constructor),t.values=lo(u,t.values.constructor),o.push(t))}a.tracks=o;let s=1/0;for(let e=0;e<a.tracks.length;++e)s>a.tracks[e].times[0]&&(s=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*s);return a.resetDuration(),a},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);let i=n.tracks.length,a=t/r;for(let t=0;t<i;++t){let r;let i=n.tracks[t],o=i.ValueTypeName;if("bool"===o||"string"===o)continue;let s=e.tracks.find(function(e){return e.name===i.name&&e.ValueTypeName===o});if(void 0===s)continue;let l=0,u=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=u/3);let c=0,d=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=d/3);let h=i.times.length-1;if(a<=i.times[0]){let e=l,t=u-l;r=i.values.slice(e,t)}else if(a>=i.times[h]){let e=h*u+l,t=e+u-l;r=i.values.slice(e,t)}else{let e=i.createInterpolant(),t=l,n=u-l;e.evaluate(a),r=e.resultBuffer.slice(t,n)}"quaternion"===o&&new ra().fromArray(r).normalize().conjugate().toArray(r);let f=s.times.length;for(let e=0;e<f;++e){let t=e*d+c;if("quaternion"===o)ra.multiplyQuaternionsFlat(s.values,t,r,0,s.values,t);else{let e=d-2*c;for(let n=0;n<e;++n)s.values[t+n]-=r[n]}}}return e.blendMode=tN,e}};class lh{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];i:{a:{let a;o:{s:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<i)break s;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,e<(r=t[++n]))break a}a=t.length;break o}if(!(e>=i)){let o=t[1];e<o&&(n=2,i=o);for(let a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(r=i,e>=(i=t[--n-1]))break a}a=n,n=0;break o}break i}for(;n<a;){let r=n+a>>>1;e<t[r]?a=r:n=r+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw Error("call to abstract method")}intervalChanged_(){}}class lf extends lh{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:tL,endingEnd:tL}}intervalChanged_(e,t,n){let r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case tD:i=e,o=2*t-n;break;case tk:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case tD:a=e,s=2*n-t;break;case tk:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}let l=(n-t)*.5,u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=a*u}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,g=-d*m+2*d*p-d*f,v=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*f+1,y=(-1-h)*m+(1.5+h)*p+.5*f,b=h*m-h*p;for(let e=0;e!==o;++e)i[e]=g*a[u+e]+v*a[l+e]+y*a[s+e]+b*a[c+e];return i}}class lp extends lh{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(n-t)/(r-t),c=1-u;for(let e=0;e!==o;++e)i[e]=a[l+e]*c+a[s+e]*u;return i}}class lm extends lh{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class lg{constructor(e,t,n,r){if(void 0===e)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=lo(t,this.TimeBufferType),this.values=lo(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t;let n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:lo(e.times,Array),values:lo(e.values,Array)};let n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new lm(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new lp(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new lf(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case tP:t=this.InterpolantFactoryMethodDiscrete;break;case tI:t=this.InterpolantFactoryMethodLinear;break;case tB:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){let t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(t)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return tP;case this.InterpolantFactoryMethodLinear:return tI;case this.InterpolantFactoryMethodSmooth:return tB}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){let n=this.times,r=n.length,i=0,a=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);let e=this.getValueSize();this.times=n.slice(i,a),this.values=this.values.slice(i*e,a*e)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==i;t++){let r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==a&&a>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,a),e=!1;break}a=r}if(void 0!==r&&ls(r))for(let t=0,n=r.length;t!==n;++t){let n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===tB,i=e.length-1,a=1;for(let o=1;o<i;++o){let i=!1,s=e[o];if(s!==e[o+1]&&(1!==o||s!==e[0])){if(r)i=!0;else{let e=o*n,r=e-n,a=e+n;for(let o=0;o!==n;++o){let n=t[e+o];if(n!==t[r+o]||n!==t[a+o]){i=!0;break}}}}if(i){if(o!==a){e[a]=e[o];let r=o*n,i=a*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++a}}if(i>0){e[a]=e[i];for(let e=i*n,r=a*n,o=0;o!==n;++o)t[r+o]=t[e+o];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),n=new this.constructor(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}lg.prototype.TimeBufferType=Float32Array,lg.prototype.ValueBufferType=Float32Array,lg.prototype.DefaultInterpolation=tI;class lv extends lg{constructor(e,t,n){super(e,t,n)}}lv.prototype.ValueTypeName="bool",lv.prototype.ValueBufferType=Array,lv.prototype.DefaultInterpolation=tP,lv.prototype.InterpolantFactoryMethodLinear=void 0,lv.prototype.InterpolantFactoryMethodSmooth=void 0;class ly extends lg{}ly.prototype.ValueTypeName="color";class lb extends lg{}lb.prototype.ValueTypeName="number";class lx extends lh{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),l=e*o;for(let e=l+o;l!==e;l+=4)ra.slerpFlat(i,0,a,l-o,a,l,s);return i}}class l_ extends lg{InterpolantFactoryMethodLinear(e){return new lx(this.times,this.values,this.getValueSize(),e)}}l_.prototype.ValueTypeName="quaternion",l_.prototype.InterpolantFactoryMethodSmooth=void 0;class lS extends lg{constructor(e,t,n){super(e,t,n)}}lS.prototype.ValueTypeName="string",lS.prototype.ValueBufferType=Array,lS.prototype.DefaultInterpolation=tP,lS.prototype.InterpolantFactoryMethodLinear=void 0,lS.prototype.InterpolantFactoryMethodSmooth=void 0;class lA extends lg{}lA.prototype.ValueTypeName="vector";class lw{constructor(e="",t=-1,n=[],r=tO){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=nI(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push((function(e){if(void 0===e.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return lb;case"vector":case"vector2":case"vector3":case"vector4":return lA;case"color":return ly;case"quaternion":return l_;case"bool":case"boolean":return lv;case"string":return lS}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){let t=[],n=[];lc(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)})(n[e]).scale(r));let i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){let t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(lg.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){let i=t.length,a=[];for(let e=0;e<i;e++){let o=[],s=[];o.push((e+i-1)%i,e,(e+1)%i),s.push(0,1,0);let l=ll(o);o=lu(o,1,l),s=lu(s,1,l),r||0!==o[0]||(o.push(i),s.push(s[0])),a.push(new lb(".morphTargetInfluences["+t[e].name+"]",o,s).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;Array.isArray(e)||(n=e.geometry&&e.geometry.animations||e.animations);for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){let r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){let n=e[t],a=n.name.match(i);if(a&&a.length>1){let e=a[1],t=r[e];t||(r[e]=t=[]),t.push(n)}}let a=[];for(let e in r)a.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let n=function(e,t,n,r,i){if(0!==n.length){let a=[],o=[];lc(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,l=e.hierarchy||[];for(let e=0;e<l.length;e++){let i=l[e].keys;if(i&&0!==i.length){if(i[0].morphTargets){let e;let t={};for(e=0;e<i.length;e++)if(i[e].morphTargets)for(let n=0;n<i[e].morphTargets.length;n++)t[i[e].morphTargets[n]]=-1;for(let n in t){let t=[],a=[];for(let r=0;r!==i[e].morphTargets.length;++r){let r=i[e];t.push(r.time),a.push(r.morphTarget===n?1:0)}r.push(new lb(".morphTargetInfluence["+n+"]",t,a))}s=t.length*a}else{let a=".bones["+t[e].name+"]";n(lA,a+".position",i,"pos",r),n(l_,a+".quaternion",i,"rot",r),n(lA,a+".scale",i,"scl",r)}}}return 0===r.length?null:new this(i,s,r,o)}resetDuration(){let e=this.tracks,t=0;for(let n=0,r=e.length;n!==r;++n){let e=this.tracks[n];t=Math.max(t,e.times[e.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}let lE={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class lM{constructor(e,t,n){let r;let i=this,a=!1,o=0,s=0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){let t=l.indexOf(e);return -1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){let n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}let lC=new lM;class lT{constructor(e){this.manager=void 0!==e?e:lC,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let n=this;return new Promise(function(r,i){n.load(e,r,t,i)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}lT.DEFAULT_MATERIAL_NAME="__DEFAULT";let lR={};class lP extends Error{constructor(e,t){super(e),this.response=t}}class lI extends lT{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=lE.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout(()=>{t&&t(i),this.manager.itemEnd(e)},0),i;if(void 0!==lR[e]){lR[e].push({onLoad:t,onProgress:n,onError:r});return}lR[e]=[],lR[e].push({onLoad:t,onProgress:n,onError:r});let a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,s=this.responseType;fetch(a).then(t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;let n=lR[e],r=t.body.getReader(),i=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),a=i?parseInt(i):0,o=0!==a,s=0;return new Response(new ReadableStream({start(e){(function t(){r.read().then(({done:r,value:i})=>{if(r)e.close();else{let r=new ProgressEvent("progress",{lengthComputable:o,loaded:s+=i.byteLength,total:a});for(let e=0,t=n.length;e<t;e++){let t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}},t=>{e.error(t)})})()}}))}throw new lP(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)}).then(e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>new DOMParser().parseFromString(e,o));case"json":return e.json();default:if(void 0===o)return e.text();{let t=/charset="?([^;"\s]*)"?/i.exec(o),n=new TextDecoder(t&&t[1]?t[1].toLowerCase():void 0);return e.arrayBuffer().then(e=>n.decode(e))}}}).then(t=>{lE.add(e,t);let n=lR[e];delete lR[e];for(let e=0,r=n.length;e<r;e++){let r=n[e];r.onLoad&&r.onLoad(t)}}).catch(t=>{let n=lR[e];if(void 0===n)throw this.manager.itemError(e),t;delete lR[e];for(let e=0,r=n.length;e<r;e++){let r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class lB extends lT{constructor(e){super(e)}load(e,t,n,r){let i=this,a=new lI(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}},n,r)}parse(e){let t=[];for(let n=0;n<e.length;n++){let r=lw.parse(e[n]);t.push(r)}return t}}class lL extends lT{constructor(e){super(e)}load(e,t,n,r){let i=this,a=[],o=new oY,s=new lI(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);let l=0;if(Array.isArray(e))for(let u=0,c=e.length;u<c;++u)!function(u){s.load(e[u],function(e){let n=i.parse(e,!0);a[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(o.minFilter=eR),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))},n,r)}(u);else s.load(e,function(e){let n=i.parse(e,!0);if(n.isCubemap){let e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)a[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),a[t].format=n.format,a[t].width=n.width,a[t].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=eR),o.format=n.format,o.needsUpdate=!0,t&&t(o)},n,r);return o}}class lD extends lT{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=this,a=lE.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;let o=nj("img");function s(){u(),lE.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){u(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function u(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}class lk extends lT{constructor(e){super(e)}load(e,t,n,r){let i=new ad;i.colorSpace=tY;let a=new lD(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;for(let n=0;n<e.length;++n)!function(n){a.load(e[n],function(e){i.images[n]=e,6==++o&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}(n);return i}}class lO extends lT{constructor(e){super(e)}load(e,t,n,r){let i=this,a=new a$,o=new lI(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,function(e){let n;try{n=i.parse(e)}catch(e){if(void 0!==r)r(e);else{console.error(e);return}}void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:eS,a.wrapT=void 0!==n.wrapT?n.wrapT:eS,a.magFilter=void 0!==n.magFilter?n.magFilter:eR,a.minFilter=void 0!==n.minFilter?n.minFilter:eR,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(a.colorSpace=n.colorSpace),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=eB),1===n.mipmapCount&&(a.minFilter=eR),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n)},n,r),a}}class lN extends lT{constructor(e){super(e)}load(e,t,n,r){let i=new n6,a=new lD(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i}}class lF extends r7{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ix(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}class lU extends lF{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(r7.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ix(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}let lz=new rO,lH=new ro,lG=new ro;class lV{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new nF(512,512),this.map=null,this.mapPass=null,this.matrix=new rO,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new oo,this._frameExtents=new nF(1,1),this._viewportCount=1,this._viewports=[new n8(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,n=this.matrix;lH.setFromMatrixPosition(e.matrixWorld),t.position.copy(lH),lG.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(lG),t.updateMatrixWorld(),lz.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lz),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(lz)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class lj extends lV{constructor(){super(new au(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,n=2*nP*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;(n!==t.fov||r!==t.aspect||i!==t.far)&&(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class lW extends lF{constructor(e,t,n=0,r=Math.PI/3,i=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(r7.DEFAULT_UP),this.updateMatrix(),this.target=new r7,this.distance=n,this.angle=r,this.penumbra=i,this.decay=a,this.map=null,this.shadow=new lj}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}let lX=new rO,lJ=new ro,lY=new ro;class lK extends lV{constructor(){super(new au(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new nF(4,2),this._viewportCount=6,this._viewports=[new n8(2,1,1,1),new n8(0,1,1,1),new n8(3,1,1,1),new n8(1,1,1,1),new n8(3,0,1,1),new n8(1,0,1,1)],this._cubeDirections=[new ro(1,0,0),new ro(-1,0,0),new ro(0,0,1),new ro(0,0,-1),new ro(0,1,0),new ro(0,-1,0)],this._cubeUps=[new ro(0,1,0),new ro(0,1,0),new ro(0,1,0),new ro(0,1,0),new ro(0,0,1),new ro(0,0,-1)]}updateMatrices(e,t=0){let n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),lJ.setFromMatrixPosition(e.matrixWorld),n.position.copy(lJ),lY.copy(n.position),lY.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(lY),n.updateMatrixWorld(),r.makeTranslation(-lJ.x,-lJ.y,-lJ.z),lX.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lX)}}class lq extends lF{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new lK}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class l$ extends aa{constructor(e=-1,t=1,n=1,r=-1,i=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){let e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,a=i+e*this.view.width,o-=t*this.view.offsetY,s=o-t*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class lQ extends lV{constructor(){super(new l$(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class lZ extends lF{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(r7.DEFAULT_UP),this.updateMatrix(),this.target=new r7,this.shadow=new lQ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class l0 extends lF{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class l1 extends lF{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){let t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class l2{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ro)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){let n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){let n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){let n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){let n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){let n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class l3 extends lF{constructor(e=new l2,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){let t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class l4 extends lT{constructor(e){super(e),this.textures={}}load(e,t,n,r){let i=this,a=new lI(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}},n,r)}parse(e){let t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}let r=this.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=new ix().setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(r.dispersion=e.dispersion),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(r.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(r.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(r.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(r.depthFunc=e.depthFunc),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(r.blendSrc=e.blendSrc),void 0!==e.blendDst&&(r.blendDst=e.blendDst),void 0!==e.blendEquation&&(r.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(r.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(r.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(r.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(r.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),void 0!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(let t in e.uniforms){let i=e.uniforms[t];switch(r.uniforms[t]={},i.type){case"t":r.uniforms[t].value=n(i.value);break;case"c":r.uniforms[t].value=new ix().setHex(i.value);break;case"v2":r.uniforms[t].value=new nF().fromArray(i.value);break;case"v3":r.uniforms[t].value=new ro().fromArray(i.value);break;case"v4":r.uniforms[t].value=new n8().fromArray(i.value);break;case"m3":r.uniforms[t].value=new nU().fromArray(i.value);break;case"m4":r.uniforms[t].value=new rO().fromArray(i.value);break;default:r.uniforms[t].value=i.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(let t in e.extensions)r.extensions[t]=e.extensions[t];if(void 0!==e.lights&&(r.lights=e.lights),void 0!==e.clipping&&(r.clipping=e.clipping),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=new nF().fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapRotation&&r.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=new nF().fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(r.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return l4.createMaterialFromType(e)}static createMaterialFromType(e){return new({ShadowMaterial:s4,SpriteMaterial:aS,RawShaderMaterial:s5,ShaderMaterial:ai,PointsMaterial:oF,MeshPhysicalMaterial:s6,MeshStandardMaterial:s9,MeshPhongMaterial:s8,MeshToonMaterial:s7,MeshNormalMaterial:le,MeshLambertMaterial:lt,MeshDepthMaterial:ln,MeshDistanceMaterial:lr,MeshBasicMaterial:iw,MeshMatcapMaterial:li,LineDashedMaterial:la,LineBasicMaterial:ow,Material:iA})[e]}}class l5{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),"undefined"!=typeof TextDecoder)return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){let t=e.lastIndexOf("/");return -1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e))?e:t+e}}class l9 extends iK{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class l6 extends lT{constructor(e){super(e)}load(e,t,n,r){let i=this,a=new lI(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}},n,r)}parse(e){let t={},n={};function r(e,r){if(void 0!==t[r])return t[r];let i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];let r=new Uint32Array(e.arrayBuffers[t]).buffer;return n[t]=r,r}(e,i.buffer),o=new ab(nV(i.type,a),i.stride);return o.uuid=i.uuid,t[r]=o,o}let i=e.isInstancedBufferGeometry?new l9:new iK,a=e.data.index;if(void 0!==a){let e=nV(a.type,a.array);i.setIndex(new iB(e,1))}let o=e.data.attributes;for(let t in o){let n;let a=o[t];if(a.isInterleavedBufferAttribute)n=new a_(r(e.data,a.data),a.itemSize,a.offset,a.normalized);else{let e=nV(a.type,a.array);n=new(a.isInstancedBufferAttribute?a1:iB)(e,a.itemSize,a.normalized)}void 0!==a.name&&(n.name=a.name),void 0!==a.usage&&n.setUsage(a.usage),i.setAttribute(t,n)}let s=e.data.morphAttributes;if(s)for(let t in s){let n=s[t],a=[];for(let t=0,i=n.length;t<i;t++){let i;let o=n[t];i=o.isInterleavedBufferAttribute?new a_(r(e.data,o.data),o.itemSize,o.offset,o.normalized):new iB(nV(o.type,o.array),o.itemSize,o.normalized),void 0!==o.name&&(i.name=o.name),a.push(i)}i.morphAttributes[t]=a}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);let l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){let t=l[e];i.addGroup(t.start,t.count,t.materialIndex)}let u=e.data.boundingSphere;if(void 0!==u){let e=new ro;void 0!==u.center&&e.fromArray(u.center),i.boundingSphere=new rC(e,u.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class l8 extends lT{constructor(e){super(e)}load(e,t,n,r){let i=this,a=""===this.path?l5.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;let o=new lI(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(n){let a=null;try{a=JSON.parse(n)}catch(t){void 0!==r&&r(t),console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message);return}let o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase()){void 0!==r&&r(Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}i.parse(a,t)},n,r)}async loadAsync(e,t){let n=""===this.path?l5.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;let r=new lI(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);let i=JSON.parse(await r.loadAsync(e,t)),a=i.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(i)}parse(e,t){let n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){void 0!==t&&t(l)}),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,s,o,n),u=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,u),this.bindLightTargets(l),void 0!==t){let e=!1;for(let t in a)if(a[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){let t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,r,o,a,t),l=this.parseSkeletons(e.skeletons,s);return this.bindSkeletons(s,l),this.bindLightTargets(s),s}parseShapes(e){let t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){let r=new sA().fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){let n={},r={};if(t.traverse(function(e){e.isBone&&(r[e.uuid]=e)}),void 0!==e)for(let t=0,i=e.length;t<i;t++){let i=new a0().fromJSON(e[t],r);n[i.uuid]=i}return n}parseGeometries(e,t){let n={};if(void 0!==e){let r=new l6;for(let i=0,a=e.length;i<a;i++){let a;let o=e[i];switch(o.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(o);break;default:o.type in s3?a=s3[o.type].fromJSON(o,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${o.type}"`)}a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.userData&&(a.userData=o.userData),n[o.uuid]=a}}return n}parseMaterials(e,t){let n={},r={};if(void 0!==e){let i=new l4;i.setTextures(t);for(let t=0,a=e.length;t<a;t++){let a=e[t];void 0===n[a.uuid]&&(n[a.uuid]=i.parse(a)),r[a.uuid]=n[a.uuid]}}return r}parseAnimations(e){let t={};if(void 0!==e)for(let n=0;n<e.length;n++){let r=e[n],i=lw.parse(r);t[i.uuid]=i}return t}parseImages(e,t){let n;let r=this,i={};function a(e){if("string"==typeof e){var t;return t=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:r.resourcePath+e,r.manager.itemStart(t),n.load(t,function(){r.manager.itemEnd(t)},void 0,function(){r.manager.itemError(t),r.manager.itemEnd(t)})}return e.data?{data:nV(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){(n=new lD(new lM(t))).setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){let n=e[t],r=n.url;if(Array.isArray(r)){let e=[];for(let t=0,n=r.length;t<n;t++){let n=a(r[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new a$(n.data,n.width,n.height)))}i[n.uuid]=new n4(e)}else{let e=a(n.url);i[n.uuid]=new n4(e)}}}return i}async parseImagesAsync(e){let t;let n=this,r={};async function i(e){if("string"==typeof e){let r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e;return await t.loadAsync(r)}return e.data?{data:nV(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){(t=new lD(this.manager)).setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){let n=e[t],a=n.url;if(Array.isArray(a)){let e=[];for(let t=0,n=a.length;t<n;t++){let n=a[t],r=await i(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new a$(r.data,r.width,r.height)))}r[n.uuid]=new n4(e)}else{let e=await i(n.url);r[n.uuid]=new n4(e)}}}return r}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}let r={};if(void 0!==e)for(let i=0,a=e.length;i<a;i++){let a;let o=e[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);let s=t[o.image],l=s.data;Array.isArray(l)?(a=new ad,6===l.length&&(a.needsUpdate=!0)):(a=l&&l.data?new a$:new n6,l&&(a.needsUpdate=!0)),a.source=s,a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.mapping&&(a.mapping=n(o.mapping,l7)),void 0!==o.channel&&(a.channel=o.channel),void 0!==o.offset&&a.offset.fromArray(o.offset),void 0!==o.repeat&&a.repeat.fromArray(o.repeat),void 0!==o.center&&a.center.fromArray(o.center),void 0!==o.rotation&&(a.rotation=o.rotation),void 0!==o.wrap&&(a.wrapS=n(o.wrap[0],ue),a.wrapT=n(o.wrap[1],ue)),void 0!==o.format&&(a.format=o.format),void 0!==o.internalFormat&&(a.internalFormat=o.internalFormat),void 0!==o.type&&(a.type=o.type),void 0!==o.colorSpace&&(a.colorSpace=o.colorSpace),void 0!==o.minFilter&&(a.minFilter=n(o.minFilter,ut)),void 0!==o.magFilter&&(a.magFilter=n(o.magFilter,ut)),void 0!==o.anisotropy&&(a.anisotropy=o.anisotropy),void 0!==o.flipY&&(a.flipY=o.flipY),void 0!==o.generateMipmaps&&(a.generateMipmaps=o.generateMipmaps),void 0!==o.premultiplyAlpha&&(a.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(a.unpackAlignment=o.unpackAlignment),void 0!==o.compareFunction&&(a.compareFunction=o.compareFunction),void 0!==o.userData&&(a.userData=o.userData),r[o.uuid]=a}return r}parseObject(e,t,n,r,i){let a,o,s;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function u(e){if(void 0!==e){if(Array.isArray(e)){let t=[];for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function c(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":a=new ay,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new ix(e.background):a.background=c(e.background)),void 0!==e.environment&&(a.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new av(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new ag(e.fog.color,e.fog.density)),""!==e.fog.name&&(a.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&a.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(a.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new au(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new l$(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new l0(e.color,e.intensity);break;case"DirectionalLight":(a=new lZ(e.color,e.intensity)).target=e.target||"";break;case"PointLight":a=new lq(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new l1(e.color,e.intensity,e.width,e.height);break;case"SpotLight":(a=new lW(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay)).target=e.target||"";break;case"HemisphereLight":a=new lU(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new l3().fromJSON(e);break;case"SkinnedMesh":a=new aK(o=l(e.geometry),s=u(e.material)),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":a=new i6(o=l(e.geometry),s=u(e.material));break;case"InstancedMesh":o=l(e.geometry),s=u(e.material);let d=e.count,h=e.instanceMatrix,f=e.instanceColor;(a=new a7(o,s,d)).instanceMatrix=new a1(new Float32Array(h.array),16),void 0!==f&&(a.instanceColor=new a1(new Float32Array(f.array),f.itemSize));break;case"BatchedMesh":o=l(e.geometry),s=u(e.material),(a=new oA(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,s)).geometry=o,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(e=>{let t=new ru;t.min.fromArray(e.boxMin),t.max.fromArray(e.boxMax);let n=new rC;return n.radius=e.sphereRadius,n.center.fromArray(e.sphereCenter),{boxInitialized:e.boxInitialized,box:t,sphereInitialized:e.sphereInitialized,sphere:n}}),a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=c(e.matricesTexture.uuid),void 0!==e.colorsTexture&&(a._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":a=new aU;break;case"Line":a=new oB(l(e.geometry),u(e.material));break;case"LineLoop":a=new oN(l(e.geometry),u(e.material));break;case"LineSegments":a=new oO(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":a=new oV(l(e.geometry),u(e.material));break;case"Sprite":a=new ak(u(e.material));break;case"Group":a=new af;break;case"Bone":a=new aq;break;default:a=new r7}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.intensity&&(a.shadow.intensity=e.shadow.intensity),void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){let o=e.children;for(let e=0;e<o.length;e++)a.add(this.parseObject(o[e],t,n,r,i))}if(void 0!==e.animations){let t=e.animations;for(let e=0;e<t.length;e++){let n=t[e];a.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);let t=e.levels;for(let e=0;e<t.length;e++){let n=t[e],r=a.getObjectByProperty("uuid",n.object);void 0!==r&&a.addLevel(r,n.distance,n.hysteresis)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){let n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){let n=t.target,r=e.getObjectByProperty("uuid",n);void 0!==r?t.target=r:t.target=new r7}})}}let l7={UVMapping:em,CubeReflectionMapping:eg,CubeRefractionMapping:ev,EquirectangularReflectionMapping:ey,EquirectangularRefractionMapping:eb,CubeUVReflectionMapping:ex},ue={RepeatWrapping:e_,ClampToEdgeWrapping:eS,MirroredRepeatWrapping:eA},ut={NearestFilter:ew,NearestMipmapNearestFilter:eE,NearestMipmapLinearFilter:eC,LinearFilter:eR,LinearMipmapNearestFilter:eP,LinearMipmapLinearFilter:eB};class un extends lT{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=this,a=lE.get(e);if(void 0!==a){if(i.manager.itemStart(e),a.then){a.then(n=>{t&&t(n),i.manager.itemEnd(e)}).catch(e=>{r&&r(e)});return}return setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a}let o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader;let s=fetch(e,o).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))}).then(function(n){return lE.add(e,n),t&&t(n),i.manager.itemEnd(e),n}).catch(function(t){r&&r(t),lE.remove(e),i.manager.itemError(e),i.manager.itemEnd(e)});lE.add(e,s),i.manager.itemStart(e)}}class ur{static getContext(){return void 0===a&&(a=new(window.AudioContext||window.webkitAudioContext)),a}static setContext(e){a=e}}class ui extends lT{constructor(e){super(e)}load(e,t,n,r){let i=this,a=new lI(this.manager);function o(t){r?r(t):console.error(t),i.manager.itemError(e)}a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(e){try{let n=e.slice(0);ur.getContext().decodeAudioData(n,function(e){t(e)}).catch(o)}catch(e){o(e)}},n,r)}}let ua=new rO,uo=new rO,us=new rO;class ul{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new au,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new au,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){let t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){let n,r;t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,us.copy(e.projectionMatrix);let i=t.eyeSep/2,a=i*t.near/t.focus,o=t.near*Math.tan(nR*t.fov*.5)/t.zoom;uo.elements[12]=-i,ua.elements[12]=i,n=-o*t.aspect+a,r=o*t.aspect+a,us.elements[0]=2*t.near/(r-n),us.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(us),n=-o*t.aspect-a,r=o*t.aspect-a,us.elements[0]=2*t.near/(r-n),us.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(us)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(uo),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ua)}}class uu extends au{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class uc{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ud(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=ud();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function ud(){return performance.now()}let uh=new ro,uf=new ra,up=new ro,um=new ro;class ug extends r7{constructor(){super(),this.type="AudioListener",this.context=ur.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new uc}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);let t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(uh,uf,up),um.set(0,0,-1).applyQuaternion(uf),t.positionX){let e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(uh.x,e),t.positionY.linearRampToValueAtTime(uh.y,e),t.positionZ.linearRampToValueAtTime(uh.z,e),t.forwardX.linearRampToValueAtTime(um.x,e),t.forwardY.linearRampToValueAtTime(um.y,e),t.forwardZ.linearRampToValueAtTime(um.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(uh.x,uh.y,uh.z),t.setOrientation(um.x,um.y,um.z,n.x,n.y,n.z)}}class uv extends r7{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying){console.warn("THREE.Audio: Audio is already playing.");return}if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;let t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1===this.hasPlaybackControl){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return(super.copy(e,t),"buffer"!==e.sourceType)?console.warn("THREE.Audio: Audio source type cannot be copied."):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice()),this}clone(e){return new this.constructor(this.listener).copy(this,e)}}let uy=new ro,ub=new ra,ux=new ro,u_=new ro;class uS extends uv{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(uy,ub,ux),u_.set(0,0,1).applyQuaternion(ub);let t=this.panner;if(t.positionX){let e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(uy.x,e),t.positionY.linearRampToValueAtTime(uy.y,e),t.positionZ.linearRampToValueAtTime(uy.z,e),t.orientationX.linearRampToValueAtTime(u_.x,e),t.orientationY.linearRampToValueAtTime(u_.y,e),t.orientationZ.linearRampToValueAtTime(u_.z,e)}else t.setPosition(uy.x,uy.y,uy.z),t.setOrientation(u_.x,u_.y,u_.z)}}class uA{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0,t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class uw{constructor(e,t,n){let r,i,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(let e=0;e!==r;++e)n[i+e]=n[e];a=t}else{a+=t;let e=t/a;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=a}accumulateAdditive(e){let t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){let e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){o.setValue(n,r);break}}saveOriginalState(){let e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n;e!==r;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}_slerp(e,t,n,r){ra.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){let a=this._workIndex*i;ra.multiplyQuaternionsFlat(e,a,e,t,e,n),ra.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,n,r,i){let a=1-r;for(let o=0;o!==i;++o){let i=t+o;e[i]=e[i]*a+e[n+o]*r}}_lerpAdditive(e,t,n,r,i){for(let a=0;a!==i;++a){let i=t+a;e[i]=e[i]+e[n+a]*r}}}let uE="\\[\\]\\.:\\/",uM=RegExp("["+uE+"]","g"),uC="[^"+uE+"]",uT="[^"+uE.replace("\\.","")+"]",uR=/((?:WC+[\/:])*)/.source.replace("WC",uC),uP=RegExp("^"+uR+/(WCOD+)?/.source.replace("WCOD",uT)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",uC)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",uC)+"$"),uI=["material","materials","bones","map"];class uB{constructor(e,t,n){let r=n||uL.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){let n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class uL{constructor(e,t,n){this.path=t,this.parsedPath=n||uL.parseTrackName(t),this.node=uL.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new uL.Composite(e,t,n):new uL(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(uM,"")}static parseTrackName(e){let t=uP.exec(e);if(null===t)throw Error("PropertyBinding: Cannot parse trackName: "+e);let n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){let e=n.nodeName.substring(r+1);-1!==uI.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){let n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){let n=function(e){for(let r=0;r<e.length;r++){let i=e[r];if(i.name===t||i.uuid===t)return i;let a=n(i.children);if(a)return a}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=uL.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(void 0===e[n]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(void 0!==r){if(void 0===e[r]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[r]}}let a=e[r];if(void 0===a){console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?o=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(o=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(s=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}uL.Composite=uB,uL.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},uL.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},uL.prototype.GetterByBindingType=[uL.prototype._getValue_direct,uL.prototype._getValue_array,uL.prototype._getValue_arrayElement,uL.prototype._getValue_toArray],uL.prototype.SetterByBindingTypeAndVersioning=[[uL.prototype._setValue_direct,uL.prototype._setValue_direct_setNeedsUpdate,uL.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[uL.prototype._setValue_array,uL.prototype._setValue_array_setNeedsUpdate,uL.prototype._setValue_array_setMatrixWorldNeedsUpdate],[uL.prototype._setValue_arrayElement,uL.prototype._setValue_arrayElement_setNeedsUpdate,uL.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[uL.prototype._setValue_fromArray,uL.prototype._setValue_fromArray_setNeedsUpdate,uL.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class uD{constructor(){this.isAnimationObjectGroup=!0,this.uuid=nI(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;let e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};let t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){let e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,o,s=e.length,l=this.nCachedObjects_;for(let u=0,c=arguments.length;u!==c;++u){let c=arguments[u],d=c.uuid,h=t[d];if(void 0===h){h=s++,t[d]=h,e.push(c);for(let e=0;e!==a;++e)i[e].push(new uL(c,n[e],r[e]))}else if(h<l){o=e[h];let s=--l,u=e[s];t[u.uuid]=h,e[h]=u,t[d]=s,e[s]=c;for(let e=0;e!==a;++e){let t=i[e],a=t[s],o=t[h];t[h]=a,void 0===o&&(o=new uL(c,n[e],r[e])),t[s]=o}}else e[h]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){let e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){let o=arguments[a],s=o.uuid,l=t[s];if(void 0!==l&&l>=i){let a=i++,u=e[a];t[u.uuid]=l,e[l]=u,t[s]=a,e[a]=o;for(let e=0;e!==r;++e){let t=n[e],r=t[a],i=t[l];t[l]=r,t[a]=i}}}this.nCachedObjects_=i}uncache(){let e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=e.length;for(let o=0,s=arguments.length;o!==s;++o){let s=arguments[o],l=s.uuid,u=t[l];if(void 0!==u){if(delete t[l],u<i){let o=--i,s=e[o],l=--a,c=e[l];t[s.uuid]=u,e[u]=s,t[c.uuid]=o,e[o]=c,e.pop();for(let e=0;e!==r;++e){let t=n[e],r=t[o],i=t[l];t[u]=r,t[o]=i,t.pop()}}else{let i=--a,o=e[i];i>0&&(t[o.uuid]=u),e[u]=o,e.pop();for(let e=0;e!==r;++e){let t=n[e];t[u]=t[i],t.pop()}}}}this.nCachedObjects_=i}subscribe_(e,t){let n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];let a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=Array(l);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(c);for(let n=u,r=s.length;n!==r;++n){let r=s[n];c[n]=new uL(r,e,t)}return c}unsubscribe_(e){let t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){let r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}class uk{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;let i=t.tracks,a=i.length,o=Array(a),s={endingStart:tL,endingEnd:tL};for(let e=0;e!==a;++e){let t=i[e].createInterpolant(null);o[e]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=tT,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){let n=this._clip.duration,r=e._clip.duration;e.warp(1,r/n,t),this.warp(n/r,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){let e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){let r=this._mixer,i=r.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);let s=o.parameterPositions,l=o.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/a,l[1]=t/a,this}stopWarping(){let e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}let i=this._startTime;if(null!==i){let r=(e-i)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);let a=this._updateTime(t),o=this._updateWeight(e);if(o>0){let e=this._interpolants,t=this._propertyBindings;if(this.blendMode===tN)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulateAdditive(o);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulate(r,o)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let n=this._weightInterpolant;if(null!==n){let r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,a=n===tR;if(0===e)return -1===i?r:a&&(1&i)==1?t-r:r;if(n===tC){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));l:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break l}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){let n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);let o=this.repetitions-i;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){let t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(a&&(1&i)==1)return t-r}return r}_setEndings(e,t,n){let r=this._interpolantSettings;n?(r.endingStart=tD,r.endingEnd=tD):(e?r.endingStart=this.zeroSlopeAtStart?tD:tL:r.endingStart=tk,t?r.endingEnd=this.zeroSlopeAtEnd?tD:tL:r.endingEnd=tk)}_scheduleFading(e,t,n){let r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);let o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}let uO=new Float32Array(1);class uN extends nM{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(let e=0;e!==i;++e){let i=r[e],l=i.name,c=u[l];if(void 0!==c)++c.referenceCount,a[e]=c;else{if(void 0!==(c=a[e])){null===c._cacheIndex&&(++c.referenceCount,this._addInactiveBinding(c,s,l));continue}let r=t&&t._propertyBindings[e].binding.parsedPath;c=new uw(uL.create(n,l,r),i.ValueTypeName,i.getValueSize()),++c.referenceCount,this._addInactiveBinding(c,s,l),a[e]=c}o[e].resultBuffer=c.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){let t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}let t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){let n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){let n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){let r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{let t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){let t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;let i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null;let c=o.actionByRoot,d=(e._localRoot||this._root).uuid;delete c[d],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){let n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){let t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){let t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){let r=this._bindingsByRootAndName,i=this._bindings,a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){let t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]}_lendBinding(e){let t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){let t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new lp(new Float32Array(2),new Float32Array(2),1,uO)).__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){let t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){let r=t||this._root,i=r.uuid,a="string"==typeof e?lw.findByName(r,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],l=null;if(void 0===n&&(n=null!==a?a.blendMode:tO),void 0!==s){let e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;let u=new uk(this,a,t,n);return this._bindAction(u,l),this._addInactiveAction(u,o,i),u}existingAction(e,t){let n=t||this._root,r=n.uuid,i="string"==typeof e?lw.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;let t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1;for(let o=0;o!==n;++o)t[o]._update(r,e,i,a);let o=this._bindings,s=this._nActiveBindings;for(let e=0;e!==s;++e)o[e].apply(a);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){let e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){let r=e[n];this._deactivateAction(r);let i=r._cacheIndex,a=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,a._cacheIndex=i,t[i]=a,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){let t=e.uuid,n=this._actionsByClip;for(let e in n){let r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}let r=this._bindingsByRootAndName[t];if(void 0!==r)for(let e in r){let t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){let n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class uF extends n7{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=n,this.texture=new rr(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class uU extends n7{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isRenderTargetArray=!0,this.depth=n,this.texture=new rt(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class uz{constructor(e){this.value=e}clone(){return new uz(void 0===this.value.clone?this.value:this.value.clone())}}let uH=0;class uG extends nM{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:uH++}),this.name="",this.usage=nh,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){let t=this.uniforms.indexOf(e);return -1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;let t=e.uniforms;this.uniforms.length=0;for(let e=0,n=t.length;e<n;e++){let n=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0;e<n.length;e++)this.uniforms.push(n[e].clone())}return this}clone(){return new this.constructor().copy(this)}}class uV extends ab{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){let t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){let t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class uj{constructor(e,t,n,r,i){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}let uW=new rO;class uX{constructor(e,t,n=0,r=1/0){this.ray=new rk(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new rJ,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return uW.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(uW),this}intersectObject(e,t=!0,n=[]){return uY(e,this,n,t),n.sort(uJ),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)uY(e[r],this,n,t);return n.sort(uJ),n}}function uJ(e,t){return e.distance-t.distance}function uY(e,t,n,r){let i=!0;if(e.layers.test(t.layers)&&!1===e.raycast(t,n)&&(i=!1),!0===i&&!0===r){let r=e.children;for(let e=0,i=r.length;e<i;e++)uY(r[e],t,n,!0)}}class uK{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=nB(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(nB(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class uq{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class u${constructor(e,t,n,r){u$.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==e&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){let i=this.elements;return i[0]=e,i[2]=t,i[1]=n,i[3]=r,this}}let uQ=new nF;class uZ{constructor(e=new nF(Infinity,Infinity),t=new nF(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=uQ.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=Infinity,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,uQ).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}let u0=new ro,u1=new ro;class u2{constructor(e=new ro,t=new ro){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){u0.subVectors(e,this.start),u1.subVectors(this.end,this.start);let n=u1.dot(u1),r=u1.dot(u0)/n;return t&&(r=nB(r,0,1)),r}closestPointToPoint(e,t,n){let r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}let u3=new ro;class u4 extends r7{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let n=new iK,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1;e<32;e++,t++){let n=e/32*Math.PI*2,i=t/32*Math.PI*2;r.push(Math.cos(n),Math.sin(n),1,Math.cos(i),Math.sin(i),1)}n.setAttribute("position",new iH(r,3));let i=new ow({fog:!1,toneMapped:!1});this.cone=new oO(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),u3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(u3),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}let u5=new ro,u9=new rO,u6=new rO;class u8 extends oO{constructor(e){let t=function e(t){let n=[];!0===t.isBone&&n.push(t);for(let r=0;r<t.children.length;r++)n.push(...e(t.children[r]));return n}(e),n=new iK,r=[],i=[],a=new ix(0,0,1),o=new ix(0,1,0);for(let e=0;e<t.length;e++){let n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}n.setAttribute("position",new iH(r,3)),n.setAttribute("color",new iH(i,3)),super(n,new ow({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){let t=this.bones,n=this.geometry,r=n.getAttribute("position");u6.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){let i=t[e];i.parent&&i.parent.isBone&&(u9.multiplyMatrices(u6,i.matrixWorld),u5.setFromMatrixPosition(u9),r.setXYZ(n,u5.x,u5.y,u5.z),u9.multiplyMatrices(u6,i.parent.matrixWorld),u5.setFromMatrixPosition(u9),r.setXYZ(n+1,u5.x,u5.y,u5.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}class u7 extends i6{constructor(e,t,n){super(new sq(t,4,2),new iw({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}let ce=new ro,ct=new ix,cn=new ix;class cr extends r7{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";let r=new sX(t);r.rotateY(.5*Math.PI),this.material=new iw({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);let i=new Float32Array(3*r.getAttribute("position").count);r.setAttribute("color",new iB(i,3)),this.add(new i6(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){let e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{let t=e.geometry.getAttribute("color");ct.copy(this.light.color),cn.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){let r=e<n/2?ct:cn;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(ce.setFromMatrixPosition(this.light.matrixWorld).negate())}}class ci extends oO{constructor(e=10,t=10,n=4473924,r=8947848){n=new ix(n),r=new ix(r);let i=t/2,a=e/t,o=e/2,s=[],l=[];for(let e=0,u=0,c=-o;e<=t;e++,c+=a){s.push(-o,0,c,o,0,c),s.push(c,0,-o,c,0,o);let t=e===i?n:r;t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3}let u=new iK;u.setAttribute("position",new iH(s,3)),u.setAttribute("color",new iH(l,3)),super(u,new ow({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class ca extends oO{constructor(e=10,t=16,n=8,r=64,i=4473924,a=8947848){i=new ix(i),a=new ix(a);let o=[],s=[];if(t>1)for(let n=0;n<t;n++){let r=n/t*(2*Math.PI),l=Math.sin(r)*e,u=Math.cos(r)*e;o.push(0,0,0),o.push(l,0,u);let c=1&n?i:a;s.push(c.r,c.g,c.b),s.push(c.r,c.g,c.b)}for(let t=0;t<n;t++){let l=1&t?i:a,u=e-e/n*t;for(let e=0;e<r;e++){let t=e/r*(2*Math.PI),n=Math.sin(t)*u,i=Math.cos(t)*u;o.push(n,0,i),s.push(l.r,l.g,l.b),n=Math.sin(t=(e+1)/r*(2*Math.PI))*u,i=Math.cos(t)*u,o.push(n,0,i),s.push(l.r,l.g,l.b)}}let l=new iK;l.setAttribute("position",new iH(o,3)),l.setAttribute("color",new iH(s,3)),super(l,new ow({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}let co=new ro,cs=new ro,cl=new ro;class cu extends r7{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new iK;r.setAttribute("position",new iH([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let i=new ow({fog:!1,toneMapped:!1});this.lightPlane=new oB(r,i),this.add(this.lightPlane),(r=new iK).setAttribute("position",new iH([0,0,0,0,0,1],3)),this.targetLine=new oB(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),co.setFromMatrixPosition(this.light.matrixWorld),cs.setFromMatrixPosition(this.light.target.matrixWorld),cl.subVectors(cs,co),this.lightPlane.lookAt(cs),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(cs),this.targetLine.scale.z=cl.length()}}let cc=new ro,cd=new aa;class ch extends oO{constructor(e){let t=new iK,n=new ow({color:0xffffff,vertexColors:!0,toneMapped:!1}),r=[],i=[],a={};function o(e,t){s(e),s(t)}function s(e){r.push(0,0,0),i.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(r.length/3-1)}o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4"),t.setAttribute("position",new iH(r,3)),t.setAttribute("color",new iH(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();let l=new ix(0xffaa00),u=new ix(0xff0000),c=new ix(43775),d=new ix(0xffffff),h=new ix(3355443);this.setColors(l,u,c,d,h)}setColors(e,t,n,r,i){let a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,i.r,i.g,i.b),a.setXYZ(41,i.r,i.g,i.b),a.setXYZ(42,i.r,i.g,i.b),a.setXYZ(43,i.r,i.g,i.b),a.setXYZ(44,i.r,i.g,i.b),a.setXYZ(45,i.r,i.g,i.b),a.setXYZ(46,i.r,i.g,i.b),a.setXYZ(47,i.r,i.g,i.b),a.setXYZ(48,i.r,i.g,i.b),a.setXYZ(49,i.r,i.g,i.b),a.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap;cd.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);let n=this.camera.coordinateSystem===nA?-1:0;cf("c",t,e,cd,0,0,n),cf("t",t,e,cd,0,0,1),cf("n1",t,e,cd,-1,-1,n),cf("n2",t,e,cd,1,-1,n),cf("n3",t,e,cd,-1,1,n),cf("n4",t,e,cd,1,1,n),cf("f1",t,e,cd,-1,-1,1),cf("f2",t,e,cd,1,-1,1),cf("f3",t,e,cd,-1,1,1),cf("f4",t,e,cd,1,1,1),cf("u1",t,e,cd,.7,1.1,n),cf("u2",t,e,cd,-.7,1.1,n),cf("u3",t,e,cd,0,2,n),cf("cf1",t,e,cd,-1,0,1),cf("cf2",t,e,cd,1,0,1),cf("cf3",t,e,cd,0,-1,1),cf("cf4",t,e,cd,0,1,1),cf("cn1",t,e,cd,-1,0,n),cf("cn2",t,e,cd,1,0,n),cf("cn3",t,e,cd,0,-1,n),cf("cn4",t,e,cd,0,1,n),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function cf(e,t,n,r,i,a,o){cc.set(i,a,o).unproject(r);let s=t[e];if(void 0!==s){let e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],cc.x,cc.y,cc.z)}}let cp=new ru;class cm extends oO{constructor(e,t=0xffff00){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new iK;i.setIndex(new iB(n,1)),i.setAttribute("position",new iB(r,3)),super(i,new ow({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(void 0!==this.object&&cp.setFromObject(this.object),cp.isEmpty())return;let e=cp.min,t=cp.max,n=this.geometry.attributes.position,r=n.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class cg extends oO{constructor(e,t=0xffff00){let n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new iK;r.setIndex(new iB(n,1)),r.setAttribute("position",new iH([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new ow({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class cv extends oB{constructor(e,t=1,n=0xffff00){let r=new iK;r.setAttribute("position",new iH([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere(),super(r,new ow({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;let i=new iK;i.setAttribute("position",new iH([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new i6(i,new iw({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}let cy=new ro;class cb extends r7{constructor(e=new ro(0,0,1),t=new ro(0,0,0),n=1,r=0xffff00,i=.2*n,a=.2*i){super(),this.type="ArrowHelper",void 0===o&&((o=new iK).setAttribute("position",new iH([0,0,0,0,1,0],3)),(s=new sp(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new oB(o,new ow({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new i6(s,new iw({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{cy.set(e.z,0,-e.x).normalize();let t=Math.acos(e.y);this.quaternion.setFromAxisAngle(cy,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class cx extends oO{constructor(e=1){let t=new iK;t.setAttribute("position",new iH([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],3)),t.setAttribute("color",new iH([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(t,new ow({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){let r=new ix,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class c_{constructor(){this.type="ShapePath",this.color=new ix,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new sc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){let t,n,r,i,a;let o=sz.isClockWise,s=this.subPaths;if(0===s.length)return[];let l=[];if(1===s.length)return n=s[0],(r=new sA).curves=n.curves,l.push(r),l;let u=!o(s[0].getPoints());u=e?!u:u;let c=[],d=[],h=[],f=0;d[0]=void 0,h[f]=[];for(let r=0,a=s.length;r<a;r++)t=o(i=(n=s[r]).getPoints()),(t=e?!t:t)?(!u&&d[f]&&f++,d[f]={s:new sA,p:i},d[f].s.curves=n.curves,u&&f++,h[f]=[]):h[f].push({h:n,p:i[0]});if(!d[0])return function(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n],i=new sA;i.curves=r.curves,t.push(i)}return t}(s);if(d.length>1){let e=!1,t=0;for(let e=0,t=d.length;e<t;e++)c[e]=[];for(let n=0,r=d.length;n<r;n++){let r=h[n];for(let i=0;i<r.length;i++){let a=r[i],o=!0;for(let r=0;r<d.length;r++)(function(e,t){let n=t.length,r=!1;for(let i=n-1,a=0;a<n;i=a++){let n=t[i],o=t[a],s=o.x-n.x,l=o.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[a],s=-s,o=t[i],l=-l),e.y<n.y||e.y>o.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{let t=l*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(o.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=o.x)return!0}}return r})(a.p,d[r].p)&&(n!==r&&t++,o?(o=!1,c[r].push(a)):e=!0);o&&c[n].push(a)}}t>0&&!1===e&&(h=c)}for(let e=0,t=d.length;e<t;e++){r=d[e].s,l.push(r),a=h[e];for(let e=0,t=a.length;e<t;e++)r.holes.push(a[e].h)}return l}}class cS extends nM{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function cA(e,t,n,r){let i=function(e){switch(e){case eD:case ek:return{byteLength:1,components:1};case eN:case eO:case eH:return{byteLength:2,components:1};case eG:case eV:return{byteLength:2,components:4};case eU:case eF:case ez:return{byteLength:4,components:1};case eW:return{byteLength:4,components:3}}throw Error(`Unknown texture type ${e}.`)}(r);switch(n){case eX:case eK:return e*t;case eq:return e*t*2;case eZ:case e0:return e*t/i.components*i.byteLength;case e1:case e2:return e*t*2/i.components*i.byteLength;case eJ:return e*t*3/i.components*i.byteLength;case eY:case e4:return e*t*4/i.components*i.byteLength;case e5:case e9:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case e6:case e8:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case te:case tn:return Math.max(e,16)*Math.max(t,8)/4;case e7:case tt:return Math.max(e,8)*Math.max(t,8)/2;case tr:case ti:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case ta:case to:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case ts:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case tl:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case tu:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case tc:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case td:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case th:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case tf:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case tp:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case tm:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case tg:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case tv:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case ty:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case tb:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case tx:case t_:case tS:return Math.ceil(e/4)*Math.ceil(t/4)*16;case tA:case tw:return Math.ceil(e/4)*Math.ceil(t/4)*8;case tE:case tM:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw Error(`Unable to determine texture byte length for ${n} format.`)}class cw{static contain(e,t){return function(e,t){let n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2):(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0),e}(e,t)}static cover(e,t){return function(e,t){let n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0):(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2),e}(e,t)}static fill(e){return e.repeat.x=1,e.repeat.y=1,e.offset.x=0,e.offset.y=0,e}static getByteLength(e,t,n,r){return cA(e,t,n,r)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:l}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=l)},46206:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ACESFilmicToneMapping:()=>r.FV,AddEquation:()=>r.gO9,AddOperation:()=>r.XrR,AdditiveAnimationBlendMode:()=>r.DAe,AdditiveBlending:()=>r.EZo,AgXToneMapping:()=>r.LAk,AlphaFormat:()=>r.wrO,AlwaysCompare:()=>r.FFZ,AlwaysDepth:()=>r.lGu,AlwaysStencilFunc:()=>r.sKt,AmbientLight:()=>r.$p8,AnimationAction:()=>r.pPE,AnimationClip:()=>r.tz3,AnimationLoader:()=>r.kEx,AnimationMixer:()=>r.Iw4,AnimationObjectGroup:()=>r.P5j,AnimationUtils:()=>r.AKb,ArcCurve:()=>r.ibB,ArrayCamera:()=>r.nZQ,ArrowHelper:()=>r.E0M,AttachedBindMode:()=>r.BER,Audio:()=>r.fP5,AudioAnalyser:()=>r.CwR,AudioContext:()=>r.UtX,AudioListener:()=>r.Pf$,AudioLoader:()=>r.Am1,AxesHelper:()=>r.IzY,BackSide:()=>r.hsX,BasicDepthPacking:()=>r.Rkk,BasicShadowMap:()=>r.bTm,BatchedMesh:()=>r.$Ed,Bone:()=>r.$Kf,BooleanKeyframeTrack:()=>r.YOZ,Box2:()=>r.UtB,Box3:()=>r.NRn,Box3Helper:()=>r.BND,BoxGeometry:()=>r.iNn,BoxHelper:()=>r.IWo,BufferAttribute:()=>r.THS,BufferGeometry:()=>r.LoY,BufferGeometryLoader:()=>r.SUR,ByteType:()=>r.tJf,Cache:()=>r.l2R,Camera:()=>r.i7d,CameraHelper:()=>r.WTh,CanvasTexture:()=>r.GOR,CapsuleGeometry:()=>r.qU7,CatmullRomCurve3:()=>r.B6O,CineonToneMapping:()=>r.nNL,CircleGeometry:()=>r.tcD,ClampToEdgeWrapping:()=>r.ghU,Clock:()=>r.zD7,Color:()=>r.Q1f,ColorKeyframeTrack:()=>r.T6I,ColorManagement:()=>r.ppV,CompressedArrayTexture:()=>r.iOZ,CompressedCubeTexture:()=>r.c5h,CompressedTexture:()=>r.FvD,CompressedTextureLoader:()=>r.YRT,ConeGeometry:()=>r.qFE,ConstantAlphaFactor:()=>r.e0p,ConstantColorFactor:()=>r.RrE,Controls:()=>r.H2z,CubeCamera:()=>r.F1T,CubeReflectionMapping:()=>r.hy7,CubeRefractionMapping:()=>r.xFO,CubeTexture:()=>r.b4q,CubeTextureLoader:()=>r.ScU,CubeUVReflectionMapping:()=>r.Om,CubicBezierCurve:()=>r.Z0B,CubicBezierCurve3:()=>r.s0K,CubicInterpolant:()=>r.Pdi,CullFaceBack:()=>r.Vb5,CullFaceFront:()=>r.Jnc,CullFaceFrontBack:()=>r.ywQ,CullFaceNone:()=>r.WNZ,Curve:()=>r.Ipv,CurvePath:()=>r.jGm,CustomBlending:()=>r.bCz,CustomToneMapping:()=>r.g7M,CylinderGeometry:()=>r.Ho_,Cylindrical:()=>r.hjs,Data3DTexture:()=>r.dYF,DataArrayTexture:()=>r.rFo,DataTexture:()=>r.GYF,DataTextureLoader:()=>r.BRH,DataUtils:()=>r.GxU,DecrementStencilOp:()=>r.ROr,DecrementWrapStencilOp:()=>r.fJr,DefaultLoadingManager:()=>r.h_9,DepthFormat:()=>r.zdS,DepthStencilFormat:()=>r.dcC,DepthTexture:()=>r.VCu,DetachedBindMode:()=>r.Fvi,DirectionalLight:()=>r.ZyN,DirectionalLightHelper:()=>r.PFK,DiscreteInterpolant:()=>r.Yhb,DodecahedronGeometry:()=>r.nEu,DoubleSide:()=>r.$EB,DstAlphaFactor:()=>r.hdd,DstColorFactor:()=>r.wn6,DynamicCopyUsage:()=>r.MOq,DynamicDrawUsage:()=>r.Vnu,DynamicReadUsage:()=>r.hIf,EdgesGeometry:()=>r.TDQ,EllipseCurve:()=>r.S20,EqualCompare:()=>r.kO0,EqualDepth:()=>r.U3G,EqualStencilFunc:()=>r.jsO,EquirectangularReflectionMapping:()=>r.wfO,EquirectangularRefractionMapping:()=>r.uV5,Euler:()=>r.O9p,EventDispatcher:()=>r.Qev,ExtrudeGeometry:()=>r.QCA,FileLoader:()=>r.Y9S,Float16BufferAttribute:()=>r.Oax,Float32BufferAttribute:()=>r.qtW,FloatType:()=>r.RQf,Fog:()=>r.jUj,FogExp2:()=>r.cRK,FramebufferTexture:()=>r.Pem,FrontSide:()=>r.hB5,Frustum:()=>r.PPD,GLBufferAttribute:()=>r.oh6,GLSL1:()=>r.Wyr,GLSL3:()=>r.Wdf,GreaterCompare:()=>r.eoi,GreaterDepth:()=>r.K52,GreaterEqualCompare:()=>r.gWB,GreaterEqualDepth:()=>r.Gwm,GreaterEqualStencilFunc:()=>r.TMh,GreaterStencilFunc:()=>r.RcT,GridHelper:()=>r.fTw,Group:()=>r.YJl,HalfFloatType:()=>r.ix0,HemisphereLight:()=>r.dth,HemisphereLightHelper:()=>r.R1W,IcosahedronGeometry:()=>r.WBB,ImageBitmapLoader:()=>r.Kzg,ImageLoader:()=>r.$NF,ImageUtils:()=>r.HgN,IncrementStencilOp:()=>r.HLH,IncrementWrapStencilOp:()=>r.Ru$,InstancedBufferAttribute:()=>r.uWO,InstancedBufferGeometry:()=>r.CmU,InstancedInterleavedBuffer:()=>r.LuO,InstancedMesh:()=>r.ZLX,Int16BufferAttribute:()=>r.Hrb,Int32BufferAttribute:()=>r.vmz,Int8BufferAttribute:()=>r.wvS,IntType:()=>r.Yuy,InterleavedBuffer:()=>r.eB$,InterleavedBufferAttribute:()=>r.eHs,Interpolant:()=>r.lGw,InterpolateDiscrete:()=>r.ljd,InterpolateLinear:()=>r.PJ3,InterpolateSmooth:()=>r.EQC,InvertStencilOp:()=>r.oVO,KeepStencilOp:()=>r.VVr,KeyframeTrack:()=>r.UJ6,LOD:()=>r.UpK,LatheGeometry:()=>r.nzx,Layers:()=>r.zgK,LessCompare:()=>r.vim,LessDepth:()=>r.brA,LessEqualCompare:()=>r.TiK,LessEqualDepth:()=>r.xSv,LessEqualStencilFunc:()=>r.CR7,LessStencilFunc:()=>r.kYr,Light:()=>r.veJ,LightProbe:()=>r.FZo,Line:()=>r.N1A,Line3:()=>r.cZY,LineBasicMaterial:()=>r.mrM,LineCurve:()=>r.GZZ,LineCurve3:()=>r.VnP,LineDashedMaterial:()=>r.Fvt,LineLoop:()=>r.FCc,LineSegments:()=>r.DXC,LinearFilter:()=>r.k6q,LinearInterpolant:()=>r.ezk,LinearMipMapLinearFilter:()=>r.NZq,LinearMipMapNearestFilter:()=>r.iUH,LinearMipmapLinearFilter:()=>r.$_I,LinearMipmapNearestFilter:()=>r.kRr,LinearSRGBColorSpace:()=>r.Zr2,LinearToneMapping:()=>r.kyO,LinearTransfer:()=>r.VxR,Loader:()=>r.aHM,LoaderUtils:()=>r.r6x,LoadingManager:()=>r.KPJ,LoopOnce:()=>r.G3T,LoopPingPong:()=>r.lc7,LoopRepeat:()=>r.aMy,LuminanceAlphaFormat:()=>r.CMB,LuminanceFormat:()=>r.Kzv,MOUSE:()=>r.kBv,Material:()=>r.imn,MaterialLoader:()=>r.jut,MathUtils:()=>r.cj9,Matrix2:()=>r.k_V,Matrix3:()=>r.dwI,Matrix4:()=>r.kn4,MaxEquation:()=>r.$ei,Mesh:()=>r.eaF,MeshBasicMaterial:()=>r.V9B,MeshDepthMaterial:()=>r.CSG,MeshDistanceMaterial:()=>r.aVO,MeshLambertMaterial:()=>r.G_z,MeshMatcapMaterial:()=>r.FNr,MeshNormalMaterial:()=>r.qBx,MeshPhongMaterial:()=>r.tXL,MeshPhysicalMaterial:()=>r.uSd,MeshStandardMaterial:()=>r._4j,MeshToonMaterial:()=>r.Df,MinEquation:()=>r.znC,MirroredRepeatWrapping:()=>r.kTW,MixOperation:()=>r.KRh,MultiplyBlending:()=>r.EdD,MultiplyOperation:()=>r.caT,NearestFilter:()=>r.hxR,NearestMipMapLinearFilter:()=>r.a$r,NearestMipMapNearestFilter:()=>r.$O9,NearestMipmapLinearFilter:()=>r.Cfg,NearestMipmapNearestFilter:()=>r.pHI,NeutralToneMapping:()=>r.aJ8,NeverCompare:()=>r.amv,NeverDepth:()=>r.eHc,NeverStencilFunc:()=>r.HPb,NoBlending:()=>r.XIg,NoColorSpace:()=>r.jf0,NoToneMapping:()=>r.y_p,NormalAnimationBlendMode:()=>r.Ke9,NormalBlending:()=>r.NTi,NotEqualCompare:()=>r.jzd,NotEqualDepth:()=>r.bw0,NotEqualStencilFunc:()=>r.klZ,NumberKeyframeTrack:()=>r.Hit,Object3D:()=>r.B69,ObjectLoader:()=>r.XTe,ObjectSpaceNormalMap:()=>r.vyJ,OctahedronGeometry:()=>r.Ufg,OneFactor:()=>r.qad,OneMinusConstantAlphaFactor:()=>r.ov9,OneMinusConstantColorFactor:()=>r.$Yl,OneMinusDstAlphaFactor:()=>r.Nt7,OneMinusDstColorFactor:()=>r.aEY,OneMinusSrcAlphaFactor:()=>r.OuU,OneMinusSrcColorFactor:()=>r.LiQ,OrthographicCamera:()=>r.qUd,PCFShadowMap:()=>r.QP0,PCFSoftShadowMap:()=>r.Wk7,PMREMGenerator:()=>R,Path:()=>r.wAk,PerspectiveCamera:()=>r.ubm,Plane:()=>r.Zcv,PlaneGeometry:()=>r.bdM,PlaneHelper:()=>r.ZM4,PointLight:()=>r.HiM,PointLightHelper:()=>r.F1l,Points:()=>r.ONl,PointsMaterial:()=>r.BH$,PolarGridHelper:()=>r.hzE,PolyhedronGeometry:()=>r.pFK,PositionalAudio:()=>r.xZx,PropertyBinding:()=>r.Nwf,PropertyMixer:()=>r.N2s,QuadraticBezierCurve:()=>r.dAo,QuadraticBezierCurve3:()=>r.CV9,Quaternion:()=>r.PTz,QuaternionKeyframeTrack:()=>r.MBL,QuaternionLinearInterpolant:()=>r.GBG,RED_GREEN_RGTC2_Format:()=>r.HO_,RED_RGTC1_Format:()=>r.Kef,REVISION:()=>r.sPf,RGBADepthPacking:()=>r.N5j,RGBAFormat:()=>r.GWd,RGBAIntegerFormat:()=>r.c90,RGBA_ASTC_10x10_Format:()=>r.y3Z,RGBA_ASTC_10x5_Format:()=>r.uB5,RGBA_ASTC_10x6_Format:()=>r.lyL,RGBA_ASTC_10x8_Format:()=>r.bC7,RGBA_ASTC_12x10_Format:()=>r.ojs,RGBA_ASTC_12x12_Format:()=>r.S$4,RGBA_ASTC_4x4_Format:()=>r.qa3,RGBA_ASTC_5x4_Format:()=>r.B_h,RGBA_ASTC_5x5_Format:()=>r.czI,RGBA_ASTC_6x5_Format:()=>r.rSH,RGBA_ASTC_6x6_Format:()=>r.Qrf,RGBA_ASTC_8x5_Format:()=>r.psI,RGBA_ASTC_8x6_Format:()=>r.a5J,RGBA_ASTC_8x8_Format:()=>r._QJ,RGBA_BPTC_Format:()=>r.Fn,RGBA_ETC2_EAC_Format:()=>r.KDk,RGBA_PVRTC_2BPPV1_Format:()=>r.pBf,RGBA_PVRTC_4BPPV1_Format:()=>r.HXV,RGBA_S3TC_DXT1_Format:()=>r.Nz6,RGBA_S3TC_DXT3_Format:()=>r.jR7,RGBA_S3TC_DXT5_Format:()=>r.BXX,RGBDepthPacking:()=>r.wTz,RGBFormat:()=>r.HIg,RGBIntegerFormat:()=>r.VGF,RGB_BPTC_SIGNED_Format:()=>r.H23,RGB_BPTC_UNSIGNED_Format:()=>r.W9U,RGB_ETC1_Format:()=>r.CVz,RGB_ETC2_Format:()=>r.Riy,RGB_PVRTC_2BPPV1_Format:()=>r.kTp,RGB_PVRTC_4BPPV1_Format:()=>r.k6Q,RGB_S3TC_DXT1_Format:()=>r.IE4,RGDepthPacking:()=>r.k8v,RGFormat:()=>r.paN,RGIntegerFormat:()=>r.TkQ,RawShaderMaterial:()=>r.D$Q,Ray:()=>r.RlV,Raycaster:()=>r.tBo,RectAreaLight:()=>r.ure,RedFormat:()=>r.VT0,RedIntegerFormat:()=>r.ZQM,ReinhardToneMapping:()=>r.Mjd,RenderTarget:()=>r.O0B,RenderTarget3D:()=>r.XMJ,RenderTargetArray:()=>r.rrX,RepeatWrapping:()=>r.GJx,ReplaceStencilOp:()=>r.kG0,ReverseSubtractEquation:()=>r.nST,RingGeometry:()=>r.rKP,SIGNED_RED_GREEN_RGTC2_Format:()=>r.CWW,SIGNED_RED_RGTC1_Format:()=>r.XG_,SRGBColorSpace:()=>r.er$,SRGBTransfer:()=>r.KLL,Scene:()=>r.Z58,ShaderChunk:()=>o,ShaderLib:()=>l,ShaderMaterial:()=>r.BKk,ShadowMaterial:()=>r.q2,Shape:()=>r.ypk,ShapeGeometry:()=>r.MSw,ShapePath:()=>r.Ld9,ShapeUtils:()=>r.xJ6,ShortType:()=>r.fBL,Skeleton:()=>r.EAD,SkeletonHelper:()=>r._xc,SkinnedMesh:()=>r.I46,Source:()=>r.kLi,Sphere:()=>r.iyt,SphereGeometry:()=>r.Gu$,Spherical:()=>r.YHV,SphericalHarmonics3:()=>r.xOk,SplineCurve:()=>r.xfg,SpotLight:()=>r.nCl,SpotLightHelper:()=>r.Fpm,Sprite:()=>r.kxk,SpriteMaterial:()=>r.RoJ,SrcAlphaFactor:()=>r.ie2,SrcAlphaSaturateFactor:()=>r.hgQ,SrcColorFactor:()=>r.f4X,StaticCopyUsage:()=>r.Hrq,StaticDrawUsage:()=>r.agE,StaticReadUsage:()=>r.uXQ,StereoCamera:()=>r.keZ,StreamCopyUsage:()=>r.rOG,StreamDrawUsage:()=>r.Ktl,StreamReadUsage:()=>r.uov,StringKeyframeTrack:()=>r.hZF,SubtractEquation:()=>r.FXf,SubtractiveBlending:()=>r.Kwu,TOUCH:()=>r.wtR,TangentSpaceNormalMap:()=>r.bI3,TetrahedronGeometry:()=>r.Zpd,Texture:()=>r.gPd,TextureLoader:()=>r.Tap,TextureUtils:()=>r.Vwu,TimestampQuery:()=>r.v9J,TorusGeometry:()=>r.O3Y,TorusKnotGeometry:()=>r.UPV,Triangle:()=>r.lMl,TriangleFanDrawMode:()=>r.rYR,TriangleStripDrawMode:()=>r.O49,TrianglesDrawMode:()=>r.RJ4,TubeGeometry:()=>r.j6,UVMapping:()=>r.UTZ,Uint16BufferAttribute:()=>r.A$4,Uint32BufferAttribute:()=>r.MW4,Uint8BufferAttribute:()=>r.baL,Uint8ClampedBufferAttribute:()=>r.fc6,Uniform:()=>r.nc$,UniformsGroup:()=>r.dzP,UniformsLib:()=>s,UniformsUtils:()=>r.LlO,UnsignedByteType:()=>r.OUM,UnsignedInt248Type:()=>r.V3x,UnsignedInt5999Type:()=>r.Dmk,UnsignedIntType:()=>r.bkx,UnsignedShort4444Type:()=>r.Wew,UnsignedShort5551Type:()=>r.gJ2,UnsignedShortType:()=>r.cHt,VSMShadowMap:()=>r.RyA,Vector2:()=>r.I9Y,Vector3:()=>r.Pq0,Vector4:()=>r.IUQ,VectorKeyframeTrack:()=>r.RiT,VideoFrameTexture:()=>r.SYV,VideoTexture:()=>r.Nv2,WebGL3DRenderTarget:()=>r.ALV,WebGLArrayRenderTarget:()=>r.y9J,WebGLCoordinateSystem:()=>r.TdN,WebGLCubeRenderTarget:()=>r.o6l,WebGLRenderTarget:()=>r.nWS,WebGLRenderer:()=>tC,WebGLUtils:()=>ty,WebGPUCoordinateSystem:()=>r.i7u,WebXRController:()=>r.R3r,WireframeGeometry:()=>r.XJ7,WrapAroundEnding:()=>r.dhZ,ZeroCurvatureEnding:()=>r.rQf,ZeroFactor:()=>r.ojh,ZeroSlopeEnding:()=>r.h2z,ZeroStencilOp:()=>r.kqe,createCanvasElement:()=>r.lPF});var r=n(29);function i(){let e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function a(e){let t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);let r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){let e=t.get(n);(!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version});return}let i=t.get(n);if(void 0===i)t.set(n,function(t,n){let r;let i=t.array,a=t.usage,o=i.byteLength,s=e.createBuffer();if(e.bindBuffer(n,s),e.bufferData(n,i,a),t.onUploadCallback(),i instanceof Float32Array)r=e.FLOAT;else if(i instanceof Uint16Array)r=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(i instanceof Int16Array)r=e.SHORT;else if(i instanceof Uint32Array)r=e.UNSIGNED_INT;else if(i instanceof Int32Array)r=e.INT;else if(i instanceof Int8Array)r=e.BYTE;else if(i instanceof Uint8Array)r=e.UNSIGNED_BYTE;else if(i instanceof Uint8ClampedArray)r=e.UNSIGNED_BYTE;else throw Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);return{buffer:s,type:r,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version,size:o}}(n,r));else if(i.version<n.version){if(i.size!==n.array.byteLength)throw Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function(t,n,r){let i=n.array,a=n.updateRanges;if(e.bindBuffer(r,t),0===a.length)e.bufferSubData(r,0,i);else{a.sort((e,t)=>e.start-t.start);let t=0;for(let e=1;e<a.length;e++){let n=a[t],r=a[e];r.start<=n.start+n.count+1?n.count=Math.max(n.count,r.start+r.count-n.start):a[++t]=r}a.length=t+1;for(let t=0,n=a.length;t<n;t++){let n=a[t];e.bufferSubData(r,n.start*i.BYTES_PER_ELEMENT,i,n.start,n.count)}n.clearUpdateRanges()}n.onUploadCallback()})(i.buffer,n,r),i.version=n.version}}}}let o={alphahash_fragment:"#ifdef USE_ALPHAHASH\n	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n	const float ALPHA_HASH_SCALE = 0.05;\n	float hash2D( vec2 value ) {\n		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n	}\n	float hash3D( vec3 value ) {\n		return hash2D( vec2( hash2D( value.xy ), value.z ) );\n	}\n	float getAlphaHashThreshold( vec3 position ) {\n		float maxDeriv = max(\n			length( dFdx( position.xyz ) ),\n			length( dFdy( position.xyz ) )\n		);\n		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n		vec2 pixScales = vec2(\n			exp2( floor( log2( pixScale ) ) ),\n			exp2( ceil( log2( pixScale ) ) )\n		);\n		vec2 alpha = vec2(\n			hash3D( floor( pixScales.x * position.xyz ) ),\n			hash3D( floor( pixScales.y * position.xyz ) )\n		);\n		float lerpFactor = fract( log2( pixScale ) );\n		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n		float a = min( lerpFactor, 1.0 - lerpFactor );\n		vec3 cases = vec3(\n			x * x / ( 2.0 * a * ( 1.0 - a ) ),\n			( x - 0.5 * a ) / ( 1.0 - a ),\n			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n		);\n		float threshold = ( x < ( 1.0 - a ) )\n			? ( ( x < a ) ? cases.x : cases.y )\n			: cases.z;\n		return clamp( threshold , 1.0e-6, 1.0 );\n	}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n	#ifdef ALPHA_TO_COVERAGE\n	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n	if ( diffuseColor.a == 0.0 ) discard;\n	#else\n	if ( diffuseColor.a < alphaTest ) discard;\n	#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n	uniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_CLEARCOAT ) \n		clearcoatSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_SHEEN ) \n		sheenSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD )\n		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n	#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n	#if ! defined( GL_ANGLE_multi_draw )\n	#define gl_DrawID _gl_DrawID\n	uniform int _gl_DrawID;\n	#endif\n	uniform highp sampler2D batchingTexture;\n	uniform highp usampler2D batchingIdTexture;\n	mat4 getBatchingMatrix( const in float i ) {\n		int size = textureSize( batchingTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n	float getIndirectIndex( const in int i ) {\n		int size = textureSize( batchingIdTexture, 0 ).x;\n		int x = i % size;\n		int y = i / size;\n		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n	}\n#endif\n#ifdef USE_BATCHING_COLOR\n	uniform sampler2D batchingColorTexture;\n	vec3 getBatchingColor( const in float i ) {\n		int size = textureSize( batchingColorTexture, 0 ).x;\n		int j = int( i );\n		int x = j % size;\n		int y = j / size;\n		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n	}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n	vPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n	vec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( specularColor, 1.0, dotVH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n	const mat3 XYZ_TO_REC709 = mat3(\n		 3.2404542, -0.9692660,  0.0556434,\n		-1.5371385,  1.8760108, -0.2040259,\n		-0.4985314,  0.0415560,  1.0572252\n	);\n	vec3 Fresnel0ToIor( vec3 fresnel0 ) {\n		vec3 sqrtF0 = sqrt( fresnel0 );\n		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n	}\n	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n	}\n	float IorToFresnel0( float transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n	}\n	vec3 evalSensitivity( float OPD, vec3 shift ) {\n		float phase = 2.0 * PI * OPD * 1.0e-9;\n		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n		xyz /= 1.0685e-7;\n		vec3 rgb = XYZ_TO_REC709 * xyz;\n		return rgb;\n	}\n	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n		vec3 I;\n		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n		float cosTheta2Sq = 1.0 - sinTheta2Sq;\n		if ( cosTheta2Sq < 0.0 ) {\n			return vec3( 1.0 );\n		}\n		float cosTheta2 = sqrt( cosTheta2Sq );\n		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n		float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n		float T121 = 1.0 - R12;\n		float phi12 = 0.0;\n		if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n		float phi21 = PI - phi12;\n		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n		vec3 phi23 = vec3( 0.0 );\n		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n		vec3 phi = vec3( phi21 ) + phi23;\n		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n		vec3 r123 = sqrt( R123 );\n		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n		vec3 C0 = R12 + Rs;\n		I = C0;\n		vec3 Cm = Rs - T121;\n		for ( int m = 1; m <= 2; ++ m ) {\n			Cm *= r123;\n			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n			I += Cm * Sm;\n		}\n		return max( I, vec3( 0.0 ) );\n	}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vBumpMapUv );\n		vec2 dSTdy = dFdy( vBumpMapUv );\n		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 ) * faceDirection;\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#ifdef ALPHA_TO_COVERAGE\n		float distanceToPlane, distanceGradient;\n		float clipOpacity = 1.0;\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n			distanceGradient = fwidth( distanceToPlane ) / 2.0;\n			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			if ( clipOpacity == 0.0 ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			float unionClipOpacity = 1.0;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n				distanceGradient = fwidth( distanceToPlane ) / 2.0;\n				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			}\n			#pragma unroll_loop_end\n			clipOpacity *= 1.0 - unionClipOpacity;\n		#endif\n		diffuseColor.a *= clipOpacity;\n		if ( diffuseColor.a == 0.0 ) discard;\n	#else\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			bool clipped = true;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n			}\n			#pragma unroll_loop_end\n			if ( clipped ) discard;\n		#endif\n	#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n	vClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n	diffuseColor *= vColor;\n#elif defined( USE_COLOR )\n	diffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR )\n	varying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	varying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n	vColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	vColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n	vColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n	vColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n	vColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n	float precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n	float precisionSafeLength( vec3 v ) {\n		float maxComponent = max3( abs( v ) );\n		return length( v / maxComponent ) * maxComponent;\n	}\n#endif\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n	varying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n	mat3 tmp;\n	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n	return tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n	return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	return vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n	#define cubeUV_minMipLevel 4.0\n	#define cubeUV_minTileSize 16.0\n	float getFace( vec3 direction ) {\n		vec3 absDirection = abs( direction );\n		float face = - 1.0;\n		if ( absDirection.x > absDirection.z ) {\n			if ( absDirection.x > absDirection.y )\n				face = direction.x > 0.0 ? 0.0 : 3.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		} else {\n			if ( absDirection.z > absDirection.y )\n				face = direction.z > 0.0 ? 2.0 : 5.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		}\n		return face;\n	}\n	vec2 getUV( vec3 direction, float face ) {\n		vec2 uv;\n		if ( face == 0.0 ) {\n			uv = vec2( direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 1.0 ) {\n			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n		} else if ( face == 2.0 ) {\n			uv = vec2( - direction.x, direction.y ) / abs( direction.z );\n		} else if ( face == 3.0 ) {\n			uv = vec2( - direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 4.0 ) {\n			uv = vec2( - direction.x, direction.z ) / abs( direction.y );\n		} else {\n			uv = vec2( direction.x, direction.y ) / abs( direction.z );\n		}\n		return 0.5 * ( uv + 1.0 );\n	}\n	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n		float face = getFace( direction );\n		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n		mipInt = max( mipInt, cubeUV_minMipLevel );\n		float faceSize = exp2( mipInt );\n		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n		if ( face > 2.0 ) {\n			uv.y += faceSize;\n			face -= 3.0;\n		}\n		uv.x += face * faceSize;\n		uv.x += filterInt * 3.0 * cubeUV_minTileSize;\n		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n		uv.x *= CUBEUV_TEXEL_WIDTH;\n		uv.y *= CUBEUV_TEXEL_HEIGHT;\n		#ifdef texture2DGradEXT\n			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n		#else\n			return texture2D( envMap, uv ).rgb;\n		#endif\n	}\n	#define cubeUV_r0 1.0\n	#define cubeUV_m0 - 2.0\n	#define cubeUV_r1 0.8\n	#define cubeUV_m1 - 1.0\n	#define cubeUV_r4 0.4\n	#define cubeUV_m4 2.0\n	#define cubeUV_r5 0.305\n	#define cubeUV_m5 3.0\n	#define cubeUV_r6 0.21\n	#define cubeUV_m6 4.0\n	float roughnessToMip( float roughness ) {\n		float mip = 0.0;\n		if ( roughness >= cubeUV_r1 ) {\n			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n		} else if ( roughness >= cubeUV_r4 ) {\n			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n		} else if ( roughness >= cubeUV_r5 ) {\n			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n		} else if ( roughness >= cubeUV_r6 ) {\n			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n		} else {\n			mip = - 2.0 * log2( 1.16 * roughness );		}\n		return mip;\n	}\n	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n		float mipF = fract( mip );\n		float mipInt = floor( mip );\n		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n		if ( mipF == 0.0 ) {\n			return vec4( color0, 1.0 );\n		} else {\n			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n			return vec4( mix( color0, color1, mipF ), 1.0 );\n		}\n	}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n	vec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n	mat3 bm = mat3( batchingMatrix );\n	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n	transformedNormal = bm * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = bm * transformedTangent;\n	#endif\n#endif\n#ifdef USE_INSTANCING\n	mat3 im = mat3( instanceMatrix );\n	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n	transformedNormal = im * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = im * transformedTangent;\n	#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n	#ifdef FLIP_SIDED\n		transformedTangent = - transformedTangent;\n	#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n		emissiveColor = sRGBTransferEOTF( emissiveColor );\n	#endif\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n	return value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vec3 cameraToFrag;\n		if ( isOrthographic ) {\n			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToFrag = normalize( vWorldPosition - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToFrag, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float envMapIntensity;\n	uniform float flipEnvMap;\n	uniform mat3 envMapRotation;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float reflectivity;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		varying vec3 vWorldPosition;\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n	vec3 getIBLIrradiance( const in vec3 normal ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n			return PI * envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 reflectVec = reflect( - viewDir, normal );\n			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n			return envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	#ifdef USE_ANISOTROPY\n		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n			#ifdef ENVMAP_TYPE_CUBE_UV\n				vec3 bentNormal = cross( bitangent, viewDir );\n				bentNormal = normalize( cross( bentNormal, bitangent ) );\n				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n				return getIBLRadiance( viewDir, bentNormal, roughness );\n			#else\n				return vec3( 0.0 );\n			#endif\n		}\n	#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex;\n		if ( isOrthographic ) {\n			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n	vFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n	varying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float vFogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n	uniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n	float dotNL = dot( normal, lightDirection );\n	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n	#ifdef USE_GRADIENTMAP\n		return vec3( texture2D( gradientMap, coord ).r );\n	#else\n		vec2 fw = fwidth( coord ) * 0.5;\n		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n	#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n	vec3 diffuseColor;\n	float specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Lambert\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n	uniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n	float x = normal.x, y = normal.y, z = normal.z;\n	vec3 result = shCoefficients[ 0 ] * 0.886227;\n	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n	return result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n	return irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	return irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n	if ( cutoffDistance > 0.0 ) {\n		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n	}\n	return distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n	return smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n		light.color = directionalLight.color;\n		light.direction = directionalLight.direction;\n		light.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = pointLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		light.color = pointLight.color;\n		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n		light.visible = ( light.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = spotLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float angleCos = dot( light.direction, spotLight.direction );\n		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n		if ( spotAttenuation > 0.0 ) {\n			float lightDistance = length( lVector );\n			light.color = spotLight.color * spotAttenuation;\n			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n			light.visible = ( light.color != vec3( 0.0 ) );\n		} else {\n			light.color = vec3( 0.0 );\n			light.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n		float dotNL = dot( normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		return irradiance;\n	}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n	vec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Toon\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n	vec3 diffuseColor;\n	vec3 specularColor;\n	float specularShininess;\n	float specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n	material.ior = ior;\n	#ifdef USE_SPECULAR\n		float specularIntensityFactor = specularIntensity;\n		vec3 specularColorFactor = specularColor;\n		#ifdef USE_SPECULAR_COLORMAP\n			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n		#endif\n		#ifdef USE_SPECULAR_INTENSITYMAP\n			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n		#endif\n		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n	#else\n		float specularIntensityFactor = 1.0;\n		vec3 specularColorFactor = vec3( 1.0 );\n		material.specularF90 = 1.0;\n	#endif\n	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n	material.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n	material.clearcoat = clearcoat;\n	material.clearcoatRoughness = clearcoatRoughness;\n	material.clearcoatF0 = vec3( 0.04 );\n	material.clearcoatF90 = 1.0;\n	#ifdef USE_CLEARCOATMAP\n		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n	#endif\n	#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n	#endif\n	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n	material.clearcoatRoughness += geometryRoughness;\n	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n	material.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	material.iridescence = iridescence;\n	material.iridescenceIOR = iridescenceIOR;\n	#ifdef USE_IRIDESCENCEMAP\n		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n	#endif\n	#ifdef USE_IRIDESCENCE_THICKNESSMAP\n		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n	#else\n		material.iridescenceThickness = iridescenceThicknessMaximum;\n	#endif\n#endif\n#ifdef USE_SHEEN\n	material.sheenColor = sheenColor;\n	#ifdef USE_SHEEN_COLORMAP\n		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n	#endif\n	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	#ifdef USE_ANISOTROPYMAP\n		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n	#else\n		vec2 anisotropyV = anisotropyVector;\n	#endif\n	material.anisotropy = length( anisotropyV );\n	if( material.anisotropy == 0.0 ) {\n		anisotropyV = vec2( 1.0, 0.0 );\n	} else {\n		anisotropyV /= material.anisotropy;\n		material.anisotropy = saturate( material.anisotropy );\n	}\n	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n	vec3 diffuseColor;\n	float roughness;\n	vec3 specularColor;\n	float specularF90;\n	float dispersion;\n	#ifdef USE_CLEARCOAT\n		float clearcoat;\n		float clearcoatRoughness;\n		vec3 clearcoatF0;\n		float clearcoatF90;\n	#endif\n	#ifdef USE_IRIDESCENCE\n		float iridescence;\n		float iridescenceIOR;\n		float iridescenceThickness;\n		vec3 iridescenceFresnel;\n		vec3 iridescenceF0;\n	#endif\n	#ifdef USE_SHEEN\n		vec3 sheenColor;\n		float sheenRoughness;\n	#endif\n	#ifdef IOR\n		float ior;\n	#endif\n	#ifdef USE_TRANSMISSION\n		float transmission;\n		float transmissionAlpha;\n		float thickness;\n		float attenuationDistance;\n		vec3 attenuationColor;\n	#endif\n	#ifdef USE_ANISOTROPY\n		float anisotropy;\n		float alphaT;\n		vec3 anisotropyT;\n		vec3 anisotropyB;\n	#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n		float v = 0.5 / ( gv + gl );\n		return saturate(v);\n	}\n	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n		float a2 = alphaT * alphaB;\n		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n		highp float v2 = dot( v, v );\n		float w2 = a2 / v2;\n		return RECIPROCAL_PI * a2 * pow2 ( w2 );\n	}\n#endif\n#ifdef USE_CLEARCOAT\n	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n		vec3 f0 = material.clearcoatF0;\n		float f90 = material.clearcoatF90;\n		float roughness = material.clearcoatRoughness;\n		float alpha = pow2( roughness );\n		vec3 halfDir = normalize( lightDir + viewDir );\n		float dotNL = saturate( dot( normal, lightDir ) );\n		float dotNV = saturate( dot( normal, viewDir ) );\n		float dotNH = saturate( dot( normal, halfDir ) );\n		float dotVH = saturate( dot( viewDir, halfDir ) );\n		vec3 F = F_Schlick( f0, f90, dotVH );\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n		return F * ( V * D );\n	}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n	vec3 f0 = material.specularColor;\n	float f90 = material.specularF90;\n	float roughness = material.roughness;\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( f0, f90, dotVH );\n	#ifdef USE_IRIDESCENCE\n		F = mix( F, material.iridescenceFresnel, material.iridescence );\n	#endif\n	#ifdef USE_ANISOTROPY\n		float dotTL = dot( material.anisotropyT, lightDir );\n		float dotTV = dot( material.anisotropyT, viewDir );\n		float dotTH = dot( material.anisotropyT, halfDir );\n		float dotBL = dot( material.anisotropyB, lightDir );\n		float dotBV = dot( material.anisotropyB, viewDir );\n		float dotBH = dot( material.anisotropyB, halfDir );\n		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n	#else\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n	#endif\n	return F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n	float alpha = pow2( roughness );\n	float invAlpha = 1.0 / alpha;\n	float cos2h = dotNH * dotNH;\n	float sin2h = max( 1.0 - cos2h, 0.0078125 );\n	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float D = D_Charlie( sheenRoughness, dotNH );\n	float V = V_Neubelt( dotNV, dotNL );\n	return sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float r2 = roughness * roughness;\n	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n	return saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n	return fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	return specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	#ifdef USE_IRIDESCENCE\n		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n	#else\n		vec3 Fr = specularColor;\n	#endif\n	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n	float Ess = fab.x + fab.y;\n	float Ems = 1.0 - Ess;\n	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n	singleScatter += FssEss;\n	multiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometryNormal;\n		vec3 viewDir = geometryViewDir;\n		vec3 position = geometryPosition;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.roughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifdef USE_CLEARCOAT\n		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n		vec3 ccIrradiance = dotNLcc * directLight.color;\n		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n	#endif\n	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n	#ifdef USE_CLEARCOAT\n		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n	#endif\n	vec3 singleScattering = vec3( 0.0 );\n	vec3 multiScattering = vec3( 0.0 );\n	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n	#ifdef USE_IRIDESCENCE\n		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n	#else\n		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n	#endif\n	vec3 totalScattering = singleScattering + multiScattering;\n	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n	reflectedLight.indirectSpecular += radiance * singleScattering;\n	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n	geometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n	float dotNVi = saturate( dot( normal, geometryViewDir ) );\n	if ( material.iridescenceThickness == 0.0 ) {\n		material.iridescence = 0.0;\n	} else {\n		material.iridescence = saturate( material.iridescence );\n	}\n	if ( material.iridescence > 0.0 ) {\n		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n	}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointLightInfo( pointLight, geometryPosition, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n		pointLightShadow = pointLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	vec4 spotColor;\n	vec3 spotLightCoord;\n	bool inSpotLightMap;\n	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotLightInfo( spotLight, geometryPosition, directLight );\n		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n		#else\n		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#endif\n		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n		#endif\n		#undef SPOT_LIGHT_MAP_INDEX\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		spotLightShadow = spotLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalLightInfo( directionalLight, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n		directionalLightShadow = directionalLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 iblIrradiance = vec3( 0.0 );\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#if defined( USE_LIGHT_PROBES )\n		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n	#endif\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n		iblIrradiance += getIBLIrradiance( geometryNormal );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	#ifdef USE_ANISOTROPY\n		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n	#else\n		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n	#endif\n	#ifdef USE_CLEARCOAT\n		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n	#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n	uniform float logDepthBufFC;\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n	vFragDepth = 1.0 + gl_Position.w;\n	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n	vec4 sampledDiffuseColor = texture2D( map, vMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n	#endif\n	diffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n	uniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	#if defined( USE_POINTS_UV )\n		vec2 uv = vUv;\n	#else\n		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n	#endif\n#endif\n#ifdef USE_MAP\n	diffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n	varying vec2 vUv;\n#else\n	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n		uniform mat3 uvTransform;\n	#endif\n#endif\n#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n	metalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n	float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n	}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n	vColor *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		#if defined( USE_COLOR_ALPHA )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n		#elif defined( USE_COLOR )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n		#endif\n	}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n	objectNormal *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n	#ifndef USE_INSTANCING_MORPH\n		uniform float morphTargetBaseInfluence;\n		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	#endif\n	uniform sampler2DArray morphTargetsTexture;\n	uniform ivec2 morphTargetsTextureSize;\n	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n		int y = texelIndex / morphTargetsTextureSize.x;\n		int x = texelIndex - y * morphTargetsTextureSize.x;\n		ivec3 morphUV = ivec3( x, y, morphTargetIndex );\n		return texelFetch( morphTargetsTexture, morphUV, 0 );\n	}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n	transformed *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal *= faceDirection;\n	#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n	#ifdef USE_TANGENT\n		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn = getTangentFrame( - vViewPosition, normal,\n		#if defined( USE_NORMALMAP )\n			vNormalMapUv\n		#elif defined( USE_CLEARCOAT_NORMALMAP )\n			vClearcoatNormalMapUv\n		#else\n			vUv\n		#endif\n		);\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn[0] *= faceDirection;\n		tbn[1] *= faceDirection;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	#ifdef USE_TANGENT\n		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn2[0] *= faceDirection;\n		tbn2[1] *= faceDirection;\n	#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	#ifdef FLIP_SIDED\n		normal = - normal;\n	#endif\n	#ifdef DOUBLE_SIDED\n		normal = normal * faceDirection;\n	#endif\n	normal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	mapN.xy *= normalScale;\n	normal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n	uniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( uv.st );\n		vec2 st1 = dFdy( uv.st );\n		vec3 N = surf_norm;\n		vec3 q1perp = cross( q1, N );\n		vec3 q0perp = cross( N, q0 );\n		vec3 T = q1perp * st0.x + q0perp * st1.x;\n		vec3 B = q1perp * st0.y + q0perp * st1.y;\n		float det = max( dot( T, T ), dot( B, B ) );\n		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n		return mat3( T * scale, B * scale, N );\n	}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n	vec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n	clearcoatMapN.xy *= clearcoatNormalScale;\n	clearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n	uniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform sampler2D clearcoatNormalMap;\n	uniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n	uniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n	if( v <= 0.0 )\n		return vec4( 0., 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec4( 1., 1., 1., 1. );\n	float vuf;\n	float af = modf( v * PackFactors.a, vuf );\n	float bf = modf( vuf * ShiftRight8, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n	if( v <= 0.0 )\n		return vec3( 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec3( 1., 1., 1. );\n	float vuf;\n	float bf = modf( v * PackFactors.b, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n	if( v <= 0.0 )\n		return vec2( 0., 0. );\n	if( v >= 1.0 )\n		return vec2( 1., 1. );\n	float vuf;\n	float gf = modf( v * 256., vuf );\n	return vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n	return dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n	mvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n	mvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n	gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n	roughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n		return unpackRGBATo2Half( texture2D( shadow, uv ) );\n	}\n	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n		float occlusion = 1.0;\n		vec2 distribution = texture2DDistribution( shadow, uv );\n		float hard_shadow = step( compare , distribution.x );\n		if (hard_shadow != 1.0 ) {\n			float distance = compare - distribution.x ;\n			float variance = max( 0.00000, distribution.y * distribution.y );\n			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n		}\n		return occlusion;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			float dx2 = dx0 / 2.0;\n			float dy2 = dy0 / 2.0;\n			float dx3 = dx1 / 2.0;\n			float dy3 = dy1 / 2.0;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 17.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx = texelSize.x;\n			float dy = texelSize.y;\n			vec2 uv = shadowCoord.xy;\n			vec2 f = fract( uv * shadowMapSize + 0.5 );\n			uv -= f * texelSize;\n			shadow = (\n				texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n						  f.x ),\n					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n						  f.x ),\n					 f.y )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_VSM )\n			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		float shadow = 1.0;\n		vec3 lightToPosition = shadowCoord.xyz;\n		\n		float lightToPositionLength = length( lightToPosition );\n		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;\n			vec3 bd3D = normalize( lightToPosition );\n			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n				shadow = (\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n				) * ( 1.0 / 9.0 );\n			#else\n				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n			#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n	vec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n		shadowWorldPosition = worldPosition;\n		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n		#endif\n		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		directionalLight = directionalLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n		spotLight = spotLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		pointLight = pointLightShadows[ i ];\n		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#endif\n	return shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	uniform highp sampler2D boneTexture;\n	mat4 getBoneMatrix( const in float i ) {\n		int size = textureSize( boneTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n	#ifdef USE_TANGENT\n		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n	return saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n	return a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n	const mat3 ACESInputMat = mat3(\n		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),\n		vec3( 0.04823, 0.01566, 0.83777 )\n	);\n	const mat3 ACESOutputMat = mat3(\n		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),\n		vec3( -0.07367, -0.00605,  1.07602 )\n	);\n	color *= toneMappingExposure / 0.6;\n	color = ACESInputMat * color;\n	color = RRTAndODTFit( color );\n	color = ACESOutputMat * color;\n	return saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n	vec3( 1.6605, - 0.1246, - 0.0182 ),\n	vec3( - 0.5876, 1.1329, - 0.1006 ),\n	vec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n	vec3( 0.6274, 0.0691, 0.0164 ),\n	vec3( 0.3293, 0.9195, 0.0880 ),\n	vec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n	vec3 x2 = x * x;\n	vec3 x4 = x2 * x2;\n	return + 15.5 * x4 * x2\n		- 40.14 * x4 * x\n		+ 31.96 * x4\n		- 6.868 * x2 * x\n		+ 0.4298 * x2\n		+ 0.1191 * x\n		- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n	const mat3 AgXInsetMatrix = mat3(\n		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n	);\n	const mat3 AgXOutsetMatrix = mat3(\n		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n	);\n	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;\n	color *= toneMappingExposure;\n	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n	color = AgXInsetMatrix * color;\n	color = max( color, 1e-10 );	color = log2( color );\n	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n	color = clamp( color, 0.0, 1.0 );\n	color = agxDefaultContrastApprox( color );\n	color = AgXOutsetMatrix * color;\n	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n	color = clamp( color, 0.0, 1.0 );\n	return color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n	const float StartCompression = 0.8 - 0.04;\n	const float Desaturation = 0.15;\n	color *= toneMappingExposure;\n	float x = min( color.r, min( color.g, color.b ) );\n	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n	color -= offset;\n	float peak = max( color.r, max( color.g, color.b ) );\n	if ( peak < StartCompression ) return color;\n	float d = 1. - StartCompression;\n	float newPeak = 1. - d * d / ( peak + d - StartCompression );\n	color *= newPeak / peak;\n	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n	return mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n	material.transmission = transmission;\n	material.transmissionAlpha = 1.0;\n	material.thickness = thickness;\n	material.attenuationDistance = attenuationDistance;\n	material.attenuationColor = attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n	#endif\n	vec3 pos = vWorldPosition;\n	vec3 v = normalize( cameraPosition - pos );\n	vec3 n = inverseTransformDirection( normal, viewMatrix );\n	vec4 transmitted = getIBLVolumeRefraction(\n		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n		material.attenuationColor, material.attenuationDistance );\n	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n	uniform float transmission;\n	uniform float thickness;\n	uniform float attenuationDistance;\n	uniform vec3 attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		uniform sampler2D transmissionMap;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		uniform sampler2D thicknessMap;\n	#endif\n	uniform vec2 transmissionSamplerSize;\n	uniform sampler2D transmissionSamplerMap;\n	uniform mat4 modelMatrix;\n	uniform mat4 projectionMatrix;\n	varying vec3 vWorldPosition;\n	float w0( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n	}\n	float w1( float a ) {\n		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n	}\n	float w2( float a ){\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n	}\n	float w3( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * a * a );\n	}\n	float g0( float a ) {\n		return w0( a ) + w1( a );\n	}\n	float g1( float a ) {\n		return w2( a ) + w3( a );\n	}\n	float h0( float a ) {\n		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n	}\n	float h1( float a ) {\n		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n	}\n	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n		uv = uv * texelSize.zw + 0.5;\n		vec2 iuv = floor( uv );\n		vec2 fuv = fract( uv );\n		float g0x = g0( fuv.x );\n		float g1x = g1( fuv.x );\n		float h0x = h0( fuv.x );\n		float h1x = h1( fuv.x );\n		float h0y = h0( fuv.y );\n		float h1y = h1( fuv.y );\n		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n	}\n	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n		vec2 fLodSizeInv = 1.0 / fLodSize;\n		vec2 cLodSizeInv = 1.0 / cLodSize;\n		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n		return mix( fSample, cSample, fract( lod ) );\n	}\n	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n		vec3 modelScale;\n		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n		return normalize( refractionVector ) * thickness * modelScale;\n	}\n	float applyIorToRoughness( const in float roughness, const in float ior ) {\n		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n	}\n	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n	}\n	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n		if ( isinf( attenuationDistance ) ) {\n			return vec3( 1.0 );\n		} else {\n			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;\n		}\n	}\n	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n		const in vec3 attenuationColor, const in float attenuationDistance ) {\n		vec4 transmittedLight;\n		vec3 transmittance;\n		#ifdef USE_DISPERSION\n			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n			for ( int i = 0; i < 3; i ++ ) {\n				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n				vec3 refractedRayExit = position + transmissionRay;\n				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n				vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n				refractionCoords += 1.0;\n				refractionCoords /= 2.0;\n				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n				transmittedLight[ i ] = transmissionSample[ i ];\n				transmittedLight.a += transmissionSample.a;\n				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n			}\n			transmittedLight.a /= 3.0;\n		#else\n			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n			vec3 refractedRayExit = position + transmissionRay;\n			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n			vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n			refractionCoords += 1.0;\n			refractionCoords /= 2.0;\n			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n		#endif\n		vec3 attenuatedColor = transmittance * transmittedLight.rgb;\n		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n	}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	uniform mat3 mapTransform;\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform mat3 alphaMapTransform;\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	uniform mat3 lightMapTransform;\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	uniform mat3 aoMapTransform;\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	uniform mat3 bumpMapTransform;\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	uniform mat3 normalMapTransform;\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	uniform mat3 displacementMapTransform;\n	varying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	uniform mat3 emissiveMapTransform;\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	uniform mat3 metalnessMapTransform;\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	uniform mat3 roughnessMapTransform;\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	uniform mat3 anisotropyMapTransform;\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	uniform mat3 clearcoatMapTransform;\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform mat3 clearcoatNormalMapTransform;\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform mat3 clearcoatRoughnessMapTransform;\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	uniform mat3 sheenColorMapTransform;\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	uniform mat3 sheenRoughnessMapTransform;\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	uniform mat3 iridescenceMapTransform;\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform mat3 iridescenceThicknessMapTransform;\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	uniform mat3 specularMapTransform;\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	uniform mat3 specularColorMapTransform;\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	uniform mat3 specularIntensityMapTransform;\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	vUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n	vec4 worldPosition = vec4( transformed, 1.0 );\n	#ifdef USE_BATCHING\n		worldPosition = batchingMatrix * worldPosition;\n	#endif\n	#ifdef USE_INSTANCING\n		worldPosition = instanceMatrix * worldPosition;\n	#endif\n	worldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	gl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n	vec4 texColor = texture2D( t2D, vUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n	uniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n	uniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n	#elif defined( ENVMAP_TYPE_CUBE_UV )\n		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n	#else\n		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n	gl_FragColor = texColor;\n	gl_FragColor.a *= opacity;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <logdepthbuf_fragment>\n	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( fragCoordZ );\n	#elif DEPTH_PACKING == 3202\n		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n	#elif DEPTH_PACKING == 3203\n		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n	#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV = equirectUv( direction );\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	vLineDistance = scale * lineDistance;\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinbase_vertex>\n		#include <skinnormal_vertex>\n		#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_lambert_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n	vViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	vec3 viewDir = normalize( vViewPosition );\n	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n	vec3 y = cross( viewDir, x );\n	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n	#ifdef USE_MATCAP\n		vec4 matcapColor = texture2D( matcap, uv );\n	#else\n		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n	#endif\n	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n	#ifdef OPAQUE\n		gl_FragColor.a = 1.0;\n	#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n	varying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n	vWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n	#define IOR\n	#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n	uniform float ior;\n#endif\n#ifdef USE_SPECULAR\n	uniform float specularIntensity;\n	uniform vec3 specularColor;\n	#ifdef USE_SPECULAR_COLORMAP\n		uniform sampler2D specularColorMap;\n	#endif\n	#ifdef USE_SPECULAR_INTENSITYMAP\n		uniform sampler2D specularIntensityMap;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT\n	uniform float clearcoat;\n	uniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n	uniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	uniform float iridescence;\n	uniform float iridescenceIOR;\n	uniform float iridescenceThicknessMinimum;\n	uniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n	uniform vec3 sheenColor;\n	uniform float sheenRoughness;\n	#ifdef USE_SHEEN_COLORMAP\n		uniform sampler2D sheenColorMap;\n	#endif\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		uniform sampler2D sheenRoughnessMap;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	uniform vec2 anisotropyVector;\n	#ifdef USE_ANISOTROPYMAP\n		uniform sampler2D anisotropyMap;\n	#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <clearcoat_normal_fragment_begin>\n	#include <clearcoat_normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n	#include <transmission_fragment>\n	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n	#ifdef USE_SHEEN\n		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n	#endif\n	#ifdef USE_CLEARCOAT\n		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n	#endif\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_toon_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n	varying vec2 vUv;\n	uniform mat3 uvTransform;\n#endif\nvoid main() {\n	#ifdef USE_POINTS_UV\n		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	#endif\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	gl_PointSize = size;\n	#ifdef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	vec4 mvPosition = modelViewMatrix[ 3 ];\n	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n	#ifndef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) scale *= - mvPosition.z;\n	#endif\n	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}"},s={common:{diffuse:{value:new r.Q1f(0xffffff)},opacity:{value:1},map:{value:null},mapTransform:{value:new r.dwI},alphaMap:{value:null},alphaMapTransform:{value:new r.dwI},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new r.dwI}},envmap:{envMap:{value:null},envMapRotation:{value:new r.dwI},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new r.dwI}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new r.dwI}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new r.dwI},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new r.dwI},normalScale:{value:new r.I9Y(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new r.dwI},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new r.dwI}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new r.dwI}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new r.dwI}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new r.Q1f(0xffffff)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new r.Q1f(0xffffff)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new r.dwI},alphaTest:{value:0},uvTransform:{value:new r.dwI}},sprite:{diffuse:{value:new r.Q1f(0xffffff)},opacity:{value:1},center:{value:new r.I9Y(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new r.dwI},alphaMap:{value:null},alphaMapTransform:{value:new r.dwI},alphaTest:{value:0}}},l={basic:{uniforms:(0,r.Iit)([s.common,s.specularmap,s.envmap,s.aomap,s.lightmap,s.fog]),vertexShader:o.meshbasic_vert,fragmentShader:o.meshbasic_frag},lambert:{uniforms:(0,r.Iit)([s.common,s.specularmap,s.envmap,s.aomap,s.lightmap,s.emissivemap,s.bumpmap,s.normalmap,s.displacementmap,s.fog,s.lights,{emissive:{value:new r.Q1f(0)}}]),vertexShader:o.meshlambert_vert,fragmentShader:o.meshlambert_frag},phong:{uniforms:(0,r.Iit)([s.common,s.specularmap,s.envmap,s.aomap,s.lightmap,s.emissivemap,s.bumpmap,s.normalmap,s.displacementmap,s.fog,s.lights,{emissive:{value:new r.Q1f(0)},specular:{value:new r.Q1f(1118481)},shininess:{value:30}}]),vertexShader:o.meshphong_vert,fragmentShader:o.meshphong_frag},standard:{uniforms:(0,r.Iit)([s.common,s.envmap,s.aomap,s.lightmap,s.emissivemap,s.bumpmap,s.normalmap,s.displacementmap,s.roughnessmap,s.metalnessmap,s.fog,s.lights,{emissive:{value:new r.Q1f(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:o.meshphysical_vert,fragmentShader:o.meshphysical_frag},toon:{uniforms:(0,r.Iit)([s.common,s.aomap,s.lightmap,s.emissivemap,s.bumpmap,s.normalmap,s.displacementmap,s.gradientmap,s.fog,s.lights,{emissive:{value:new r.Q1f(0)}}]),vertexShader:o.meshtoon_vert,fragmentShader:o.meshtoon_frag},matcap:{uniforms:(0,r.Iit)([s.common,s.bumpmap,s.normalmap,s.displacementmap,s.fog,{matcap:{value:null}}]),vertexShader:o.meshmatcap_vert,fragmentShader:o.meshmatcap_frag},points:{uniforms:(0,r.Iit)([s.points,s.fog]),vertexShader:o.points_vert,fragmentShader:o.points_frag},dashed:{uniforms:(0,r.Iit)([s.common,s.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:o.linedashed_vert,fragmentShader:o.linedashed_frag},depth:{uniforms:(0,r.Iit)([s.common,s.displacementmap]),vertexShader:o.depth_vert,fragmentShader:o.depth_frag},normal:{uniforms:(0,r.Iit)([s.common,s.bumpmap,s.normalmap,s.displacementmap,{opacity:{value:1}}]),vertexShader:o.meshnormal_vert,fragmentShader:o.meshnormal_frag},sprite:{uniforms:(0,r.Iit)([s.sprite,s.fog]),vertexShader:o.sprite_vert,fragmentShader:o.sprite_frag},background:{uniforms:{uvTransform:{value:new r.dwI},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:o.background_vert,fragmentShader:o.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new r.dwI}},vertexShader:o.backgroundCube_vert,fragmentShader:o.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:o.cube_vert,fragmentShader:o.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:o.equirect_vert,fragmentShader:o.equirect_frag},distanceRGBA:{uniforms:(0,r.Iit)([s.common,s.displacementmap,{referencePosition:{value:new r.Pq0},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:o.distanceRGBA_vert,fragmentShader:o.distanceRGBA_frag},shadow:{uniforms:(0,r.Iit)([s.lights,s.fog,{color:{value:new r.Q1f(0)},opacity:{value:1}}]),vertexShader:o.shadow_vert,fragmentShader:o.shadow_frag}};l.physical={uniforms:(0,r.Iit)([l.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new r.dwI},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new r.dwI},clearcoatNormalScale:{value:new r.I9Y(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new r.dwI},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new r.dwI},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new r.dwI},sheen:{value:0},sheenColor:{value:new r.Q1f(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new r.dwI},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new r.dwI},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new r.dwI},transmissionSamplerSize:{value:new r.I9Y},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new r.dwI},attenuationDistance:{value:0},attenuationColor:{value:new r.Q1f(0)},specularColor:{value:new r.Q1f(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new r.dwI},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new r.dwI},anisotropyVector:{value:new r.I9Y},anisotropyMap:{value:null},anisotropyMapTransform:{value:new r.dwI}}]),vertexShader:o.meshphysical_vert,fragmentShader:o.meshphysical_frag};let u={r:0,b:0,g:0},c=new r.O9p,d=new r.kn4;function h(e,t,n,i,a,o,s){let h,f;let p=new r.Q1f(0),m=!0===o?0:1,g=null,v=0,y=null;function b(e){let r=!0===e.isScene?e.background:null;return r&&r.isTexture&&(r=(e.backgroundBlurriness>0?n:t).get(r)),r}function x(t,n){t.getRGB(u,(0,r._Ut)(e)),i.buffers.color.setClear(u.r,u.g,u.b,n,s)}return{getClearColor:function(){return p},setClearColor:function(e,t=1){p.set(e),x(p,m=t)},getClearAlpha:function(){return m},setClearAlpha:function(e){x(p,m=e)},render:function(t){let n=!1,r=b(t);null===r?x(p,m):r&&r.isColor&&(x(r,1),n=!0);let a=e.xr.getEnvironmentBlendMode();"additive"===a?i.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===a&&i.buffers.color.setClear(0,0,0,0,s),(e.autoClear||n)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){let i=b(n);i&&(i.isCubeTexture||i.mapping===r.Om)?(void 0===f&&((f=new r.eaF(new r.iNn(1,1,1),new r.BKk({name:"BackgroundCubeMaterial",uniforms:(0,r.lxW)(l.backgroundCube.uniforms),vertexShader:l.backgroundCube.vertexShader,fragmentShader:l.backgroundCube.fragmentShader,side:r.hsX,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(f)),c.copy(n.backgroundRotation),c.x*=-1,c.y*=-1,c.z*=-1,i.isCubeTexture&&!1===i.isRenderTargetTexture&&(c.y*=-1,c.z*=-1),f.material.uniforms.envMap.value=i,f.material.uniforms.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,f.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(d.makeRotationFromEuler(c)),f.material.toneMapped=r.ppV.getTransfer(i.colorSpace)!==r.KLL,(g!==i||v!==i.version||y!==e.toneMapping)&&(f.material.needsUpdate=!0,g=i,v=i.version,y=e.toneMapping),f.layers.enableAll(),t.unshift(f,f.geometry,f.material,0,0,null)):i&&i.isTexture&&(void 0===h&&((h=new r.eaF(new r.bdM(2,2),new r.BKk({name:"BackgroundMaterial",uniforms:(0,r.lxW)(l.background.uniforms),vertexShader:l.background.vertexShader,fragmentShader:l.background.fragmentShader,side:r.hB5,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(h)),h.material.uniforms.t2D.value=i,h.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,h.material.toneMapped=r.ppV.getTransfer(i.colorSpace)!==r.KLL,!0===i.matrixAutoUpdate&&i.updateMatrix(),h.material.uniforms.uvTransform.value.copy(i.matrix),(g!==i||v!==i.version||y!==e.toneMapping)&&(h.material.needsUpdate=!0,g=i,v=i.version,y=e.toneMapping),h.layers.enableAll(),t.unshift(h,h.geometry,h.material,0,0,null))},dispose:function(){void 0!==f&&(f.geometry.dispose(),f.material.dispose(),f=void 0),void 0!==h&&(h.geometry.dispose(),h.material.dispose(),h=void 0)}}}function f(e,t){let n=e.getParameter(e.MAX_VERTEX_ATTRIBS),i={},a=c(null),o=a,s=!1;function l(t){return e.bindVertexArray(t)}function u(t){return e.deleteVertexArray(t)}function c(e){let t=[],r=[],i=[];for(let e=0;e<n;e++)t[e]=0,r[e]=0,i[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:r,attributeDivisors:i,object:e,attributes:{},index:null}}function d(){let e=o.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function h(e){f(e,0)}function f(t,n){let r=o.newAttributes,i=o.enabledAttributes,a=o.attributeDivisors;r[t]=1,0===i[t]&&(e.enableVertexAttribArray(t),i[t]=1),a[t]!==n&&(e.vertexAttribDivisor(t,n),a[t]=n)}function p(){let t=o.newAttributes,n=o.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function m(t,n,r,i,a,o,s){!0===s?e.vertexAttribIPointer(t,n,r,a,o):e.vertexAttribPointer(t,n,r,i,a,o)}function g(){v(),s=!0,o!==a&&l((o=a).object)}function v(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:function(n,a,u,g,v){let y=!1,b=function(t,n,r){let a=!0===r.wireframe,o=i[t.id];void 0===o&&(o={},i[t.id]=o);let s=o[n.id];void 0===s&&(s={},o[n.id]=s);let l=s[a];return void 0===l&&(l=c(e.createVertexArray()),s[a]=l),l}(g,u,a);o!==b&&l((o=b).object),(y=function(e,t,n,r){let i=o.attributes,a=t.attributes,s=0,l=n.getAttributes();for(let t in l)if(l[t].location>=0){let n=i[t],r=a[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n||n.attribute!==r||r&&n.data!==r.data)return!0;s++}return o.attributesNum!==s||o.index!==r}(n,g,u,v))&&function(e,t,n,r){let i={},a=t.attributes,s=0,l=n.getAttributes();for(let t in l)if(l[t].location>=0){let n=a[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));let r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[t]=r,s++}o.attributes=i,o.attributesNum=s,o.index=r}(n,g,u,v),null!==v&&t.update(v,e.ELEMENT_ARRAY_BUFFER),(y||s)&&(s=!1,function(n,i,a,o){d();let s=o.attributes,l=a.getAttributes(),u=i.defaultAttributeValues;for(let i in l){let a=l[i];if(a.location>=0){let l=s[i];if(void 0===l&&("instanceMatrix"===i&&n.instanceMatrix&&(l=n.instanceMatrix),"instanceColor"===i&&n.instanceColor&&(l=n.instanceColor)),void 0!==l){let i=l.normalized,s=l.itemSize,u=t.get(l);if(void 0===u)continue;let c=u.buffer,d=u.type,p=u.bytesPerElement,g=d===e.INT||d===e.UNSIGNED_INT||l.gpuType===r.Yuy;if(l.isInterleavedBufferAttribute){let t=l.data,r=t.stride,u=l.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<a.locationSize;e++)f(a.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<a.locationSize;e++)h(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<a.locationSize;e++)m(a.location+e,s/a.locationSize,d,i,r*p,(u+s/a.locationSize*e)*p,g)}else{if(l.isInstancedBufferAttribute){for(let e=0;e<a.locationSize;e++)f(a.location+e,l.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=l.meshPerAttribute*l.count)}else for(let e=0;e<a.locationSize;e++)h(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<a.locationSize;e++)m(a.location+e,s/a.locationSize,d,i,s*p,s/a.locationSize*e*p,g)}}else if(void 0!==u){let t=u[i];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(a.location,t);break;case 3:e.vertexAttrib3fv(a.location,t);break;case 4:e.vertexAttrib4fv(a.location,t);break;default:e.vertexAttrib1fv(a.location,t)}}}}p()}(n,a,u,g),null!==v&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(v).buffer))},reset:g,resetDefaultState:v,dispose:function(){for(let e in g(),i){let t=i[e];for(let e in t){let n=t[e];for(let e in n)u(n[e].object),delete n[e];delete t[e]}delete i[e]}},releaseStatesOfGeometry:function(e){if(void 0===i[e.id])return;let t=i[e.id];for(let e in t){let n=t[e];for(let e in n)u(n[e].object),delete n[e];delete t[e]}delete i[e.id]},releaseStatesOfProgram:function(e){for(let t in i){let n=i[t];if(void 0===n[e.id])continue;let r=n[e.id];for(let e in r)u(r[e].object),delete r[e];delete n[e.id]}},initAttributes:d,enableAttribute:h,disableUnusedAttributes:p}}function p(e,t,n){let r;function i(t,i,a){0!==a&&(e.drawArraysInstanced(r,t,i,a),n.update(i,r,a))}this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r,1)},this.renderInstances=i,this.renderMultiDraw=function(e,i,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,e,0,i,0,a);let o=0;for(let e=0;e<a;e++)o+=i[e];n.update(o,r,1)},this.renderMultiDrawInstances=function(e,a,o,s){if(0===o)return;let l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)i(e[t],a[t],s[t]);else{l.multiDrawArraysInstancedWEBGL(r,e,0,a,0,s,0,o);let t=0;for(let e=0;e<o;e++)t+=a[e]*s[e];n.update(t,r,1)}}}function m(e,t,n,i){let a;function o(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let s=void 0!==n.precision?n.precision:"highp",l=o(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);let u=!0===n.logarithmicDepthBuffer,c=!0===n.reverseDepthBuffer&&t.has("EXT_clip_control"),d=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),m=e.getParameter(e.MAX_VERTEX_ATTRIBS),g=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==a)return a;if(!0===t.has("EXT_texture_filter_anisotropic")){let n=t.get("EXT_texture_filter_anisotropic");a=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a},getMaxPrecision:o,textureFormatReadable:function(t){return t===r.GWd||i.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){let a=n===r.ix0&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return n===r.OUM||i.convert(n)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)||n===r.RQf||!!a},precision:s,logarithmicDepthBuffer:u,reverseDepthBuffer:c,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:h>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function g(e){let t=this,n=null,i=0,a=!1,o=!1,s=new r.Zcv,l=new r.dwI,u={value:null,needsUpdate:!1};function c(e,n,r,i){let a=null!==e?e.length:0,o=null;if(0!==a){if(o=u.value,!0!==i||null===o){let t=r+4*a,i=n.matrixWorldInverse;l.getNormalMatrix(i),(null===o||o.length<t)&&(o=new Float32Array(t));for(let t=0,n=r;t!==a;++t,n+=4)s.copy(e[t]).applyMatrix4(i,l),s.normal.toArray(o,n),o[n+3]=s.constant}u.value=o,u.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,o}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){let n=0!==e.length||t||0!==i||a;return a=t,i=e.length,n},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(r,s,l){let d=r.clippingPlanes,h=r.clipIntersection,f=r.clipShadows,p=e.get(r);if(a&&null!==d&&0!==d.length&&(!o||f)){let e=o?0:i,t=4*e,r=p.clippingState||null;u.value=r,r=c(d,s,t,l);for(let e=0;e!==t;++e)r[e]=n[e];p.clippingState=r,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}else o?c(null):(u.value!==n&&(u.value=n,u.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0)}}function v(e){let t=new WeakMap;function n(e,t){return t===r.wfO?e.mapping=r.hy7:t===r.uV5&&(e.mapping=r.xFO),e}function i(e){let n=e.target;n.removeEventListener("dispose",i);let r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(a){if(a&&a.isTexture){let o=a.mapping;if(o===r.wfO||o===r.uV5){if(t.has(a))return n(t.get(a).texture,a.mapping);{let o=a.image;if(!o||!(o.height>0))return null;{let s=new r.o6l(o.height);return s.fromEquirectangularTexture(e,a),t.set(a,s),a.addEventListener("dispose",i),n(s.texture,a.mapping)}}}}return a},dispose:function(){t=new WeakMap}}}let y=[.125,.215,.35,.446,.526,.582],b=new r.qUd,x=new r.Q1f,_=null,S=0,A=0,w=!1,E=(1+Math.sqrt(5))/2,M=1/E,C=[new r.Pq0(-E,M,0),new r.Pq0(E,M,0),new r.Pq0(-M,0,E),new r.Pq0(M,0,E),new r.Pq0(0,E,-M),new r.Pq0(0,E,M),new r.Pq0(-1,1,-1),new r.Pq0(1,1,-1),new r.Pq0(-1,1,1),new r.Pq0(1,1,1)],T=new r.Pq0;class R{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100,i={}){let{size:a=256,position:o=T}=i;_=this._renderer.getRenderTarget(),S=this._renderer.getActiveCubeFace(),A=this._renderer.getActiveMipmapLevel(),w=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);let s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s,o),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=L(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=B(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(_,S,A),this._renderer.xr.enabled=w,e.scissorTest=!1,I(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===r.hy7||e.mapping===r.xFO?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),_=this._renderer.getRenderTarget(),S=this._renderer.getActiveCubeFace(),A=this._renderer.getActiveMipmapLevel(),w=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:r.k6q,minFilter:r.k6q,generateMipmaps:!1,type:r.ix0,format:r.GWd,colorSpace:r.Zr2,depthBuffer:!1},i=P(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=P(e,t,n);let{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){let t=[],n=[],i=[],a=e,o=e-4+1+y.length;for(let s=0;s<o;s++){let o=Math.pow(2,a);n.push(o);let l=1/o;s>e-4?l=y[s-e+4-1]:0===s&&(l=0),i.push(l);let u=1/(o-2),c=-u,d=1+u,h=[c,c,d,c,d,d,c,c,d,d,c,d],f=new Float32Array(108),p=new Float32Array(72),m=new Float32Array(36);for(let e=0;e<6;e++){let t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];f.set(r,18*e),p.set(h,12*e);let i=[e,e,e,e,e,e];m.set(i,6*e)}let g=new r.LoY;g.setAttribute("position",new r.THS(f,3)),g.setAttribute("uv",new r.THS(p,2)),g.setAttribute("faceIndex",new r.THS(m,1)),t.push(g),a>4&&a--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(e,t,n){let i=new Float32Array(20),a=new r.Pq0(0,1,0);return new r.BKk({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:D(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:r.XIg,depthTest:!1,depthWrite:!1})}(i,e,t)}return i}_compileMaterial(e){let t=new r.eaF(this._lodPlanes[0],e);this._renderer.compile(t,b)}_sceneToCubeUV(e,t,n,i,a){let o=new r.ubm(90,1,t,n),s=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,c=u.autoClear,d=u.toneMapping;u.getClearColor(x),u.toneMapping=r.y_p,u.autoClear=!1;let h=new r.V9B({name:"PMREM.Background",side:r.hsX,depthWrite:!1,depthTest:!1}),f=new r.eaF(new r.iNn,h),p=!1,m=e.background;m?m.isColor&&(h.color.copy(m),e.background=null,p=!0):(h.color.copy(x),p=!0);for(let t=0;t<6;t++){let n=t%3;0===n?(o.up.set(0,s[t],0),o.position.set(a.x,a.y,a.z),o.lookAt(a.x+l[t],a.y,a.z)):1===n?(o.up.set(0,0,s[t]),o.position.set(a.x,a.y,a.z),o.lookAt(a.x,a.y+l[t],a.z)):(o.up.set(0,s[t],0),o.position.set(a.x,a.y,a.z),o.lookAt(a.x,a.y,a.z+l[t]));let r=this._cubeSize;I(i,n*r,t>2?r:0,r,r),u.setRenderTarget(i),p&&u.render(f,o),u.render(e,o)}f.geometry.dispose(),f.material.dispose(),u.toneMapping=d,u.autoClear=c,e.background=m}_textureToCubeUV(e,t){let n=this._renderer,i=e.mapping===r.hy7||e.mapping===r.xFO;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=L()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=B());let a=i?this._cubemapMaterial:this._equirectMaterial,o=new r.eaF(this._lodPlanes[0],a);a.uniforms.envMap.value=e;let s=this._cubeSize;I(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(o,b)}_applyPMREM(e){let t=this._renderer,n=t.autoClear;t.autoClear=!1;let r=this._lodPlanes.length;for(let t=1;t<r;t++){let n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),i=C[(r-t-1)%C.length];this._blur(e,t-1,t,n,i)}t.autoClear=n}_blur(e,t,n,r,i){let a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,i,a,o,s){let l=this._renderer,u=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");let c=new r.eaF(this._lodPlanes[i],u),d=u.uniforms,h=this._sizeLods[n]-1,f=isFinite(a)?Math.PI/(2*h):2*Math.PI/39,p=a/f,m=isFinite(a)?1+Math.floor(3*p):20;m>20&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);let g=[],v=0;for(let e=0;e<20;++e){let t=e/p,n=Math.exp(-t*t/2);g.push(n),0===e?v+=n:e<m&&(v+=2*n)}for(let e=0;e<g.length;e++)g[e]=g[e]/v;d.envMap.value=e.texture,d.samples.value=m,d.weights.value=g,d.latitudinal.value="latitudinal"===o,s&&(d.poleAxis.value=s);let{_lodMax:y}=this;d.dTheta.value=f,d.mipInt.value=y-n;let x=this._sizeLods[i],_=4*(this._cubeSize-x);I(t,3*x*(i>y-4?i-y+4:0),_,3*x,2*x),l.setRenderTarget(t),l.render(c,b)}}function P(e,t,n){let i=new r.nWS(e,t,n);return i.texture.mapping=r.Om,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function I(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function B(){return new r.BKk({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:D(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:r.XIg,depthTest:!1,depthWrite:!1})}function L(){return new r.BKk({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:D(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:r.XIg,depthTest:!1,depthWrite:!1})}function D(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function k(e){let t=new WeakMap,n=null;function i(e){let n=e.target;n.removeEventListener("dispose",i);let r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(a){if(a&&a.isTexture){let o=a.mapping,s=o===r.wfO||o===r.uV5,l=o===r.hy7||o===r.xFO;if(s||l){let r=t.get(a),o=void 0!==r?r.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==o)return null===n&&(n=new R(e)),(r=s?n.fromEquirectangular(a,r):n.fromCubemap(a,r)).texture.pmremVersion=a.pmremVersion,t.set(a,r),r.texture;if(void 0!==r)return r.texture;{let o=a.image;return s&&o&&o.height>0||l&&o&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(o)?(null===n&&(n=new R(e)),(r=s?n.fromEquirectangular(a):n.fromCubemap(a)).texture.pmremVersion=a.pmremVersion,t.set(a,r),a.addEventListener("dispose",i),r.texture):null}}}return a},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function O(e){let t={};function n(n){let r;if(void 0!==t[n])return t[n];switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){let t=n(e);return null===t&&(0,r.mcG)("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function N(e,t,n,i){let a={},o=new WeakMap;function s(e){let r=e.target;for(let e in null!==r.index&&t.remove(r.index),r.attributes)t.remove(r.attributes[e]);r.removeEventListener("dispose",s),delete a[r.id];let l=o.get(r);l&&(t.remove(l),o.delete(r)),i.releaseStatesOfGeometry(r),!0===r.isInstancedBufferGeometry&&delete r._maxInstanceCount,n.memory.geometries--}function l(e){let n=[],i=e.index,a=e.attributes.position,s=0;if(null!==i){let e=i.array;s=i.version;for(let t=0,r=e.length;t<r;t+=3){let r=e[t+0],i=e[t+1],a=e[t+2];n.push(r,i,i,a,a,r)}}else{if(void 0===a)return;let e=a.array;s=a.version;for(let t=0,r=e.length/3-1;t<r;t+=3){let e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}let l=new((0,r.AQS)(n)?r.MW4:r.A$4)(n,1);l.version=s;let u=o.get(e);u&&t.remove(u),o.set(e,l)}return{get:function(e,t){return!0===a[t.id]||(t.addEventListener("dispose",s),a[t.id]=!0,n.memory.geometries++),t},update:function(n){let r=n.attributes;for(let n in r)t.update(r[n],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){let t=o.get(e);if(t){let n=e.index;null!==n&&t.version<n.version&&l(e)}else l(e);return o.get(e)}}}function F(e,t,n){let r,i,a;function o(t,o,s){0!==s&&(e.drawElementsInstanced(r,o,i,t*a,s),n.update(o,r,s))}this.setMode=function(e){r=e},this.setIndex=function(e){i=e.type,a=e.bytesPerElement},this.render=function(t,o){e.drawElements(r,o,i,t*a),n.update(o,r,1)},this.renderInstances=o,this.renderMultiDraw=function(e,a,o){if(0===o)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,a,0,i,e,0,o);let s=0;for(let e=0;e<o;e++)s+=a[e];n.update(s,r,1)},this.renderMultiDrawInstances=function(e,s,l,u){if(0===l)return;let c=t.get("WEBGL_multi_draw");if(null===c)for(let t=0;t<e.length;t++)o(e[t]/a,s[t],u[t]);else{c.multiDrawElementsInstancedWEBGL(r,s,0,i,e,0,u,0,l);let t=0;for(let e=0;e<l;e++)t+=s[e]*u[e];n.update(t,r,1)}}}function U(e){let t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=n/3*i;break;case e.LINES:t.lines+=n/2*i;break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function z(e,t,n){let i=new WeakMap,a=new r.IUQ;return{update:function(o,s,l){let u=o.morphTargetInfluences,c=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,d=void 0!==c?c.length:0,h=i.get(s);if(void 0===h||h.count!==d){void 0!==h&&h.texture.dispose();let e=void 0!==s.morphAttributes.position,n=void 0!==s.morphAttributes.normal,o=void 0!==s.morphAttributes.color,l=s.morphAttributes.position||[],u=s.morphAttributes.normal||[],c=s.morphAttributes.color||[],f=0;!0===e&&(f=1),!0===n&&(f=2),!0===o&&(f=3);let p=s.attributes.position.count*f,m=1;p>t.maxTextureSize&&(m=Math.ceil(p/t.maxTextureSize),p=t.maxTextureSize);let g=new Float32Array(p*m*4*d),v=new r.rFo(g,p,m,d);v.type=r.RQf,v.needsUpdate=!0;let y=4*f;for(let t=0;t<d;t++){let r=l[t],i=u[t],s=c[t],d=p*m*4*t;for(let t=0;t<r.count;t++){let l=t*y;!0===e&&(a.fromBufferAttribute(r,t),g[d+l+0]=a.x,g[d+l+1]=a.y,g[d+l+2]=a.z,g[d+l+3]=0),!0===n&&(a.fromBufferAttribute(i,t),g[d+l+4]=a.x,g[d+l+5]=a.y,g[d+l+6]=a.z,g[d+l+7]=0),!0===o&&(a.fromBufferAttribute(s,t),g[d+l+8]=a.x,g[d+l+9]=a.y,g[d+l+10]=a.z,g[d+l+11]=4===s.itemSize?a.w:1)}}h={count:d,texture:v,size:new r.I9Y(p,m)},i.set(s,h),s.addEventListener("dispose",function e(){v.dispose(),i.delete(s),s.removeEventListener("dispose",e)})}if(!0===o.isInstancedMesh&&null!==o.morphTexture)l.getUniforms().setValue(e,"morphTexture",o.morphTexture,n);else{let t=0;for(let e=0;e<u.length;e++)t+=u[e];let n=s.morphTargetsRelative?1:1-t;l.getUniforms().setValue(e,"morphTargetBaseInfluence",n),l.getUniforms().setValue(e,"morphTargetInfluences",u)}l.getUniforms().setValue(e,"morphTargetsTexture",h.texture,n),l.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}}}function H(e,t,n,r){let i=new WeakMap;function a(e){let t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(o){let s=r.render.frame,l=o.geometry,u=t.get(o,l);if(i.get(u)!==s&&(t.update(u),i.set(u,s)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",a)&&o.addEventListener("dispose",a),i.get(o)!==s&&(n.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,e.ARRAY_BUFFER),i.set(o,s))),o.isSkinnedMesh){let e=o.skeleton;i.get(e)!==s&&(e.update(),i.set(e,s))}return u},dispose:function(){i=new WeakMap}}}let G=new r.gPd,V=new r.VCu(1,1),j=new r.rFo,W=new r.dYF,X=new r.b4q,J=[],Y=[],K=new Float32Array(16),q=new Float32Array(9),$=new Float32Array(4);function Q(e,t,n){let r=e[0];if(r<=0||r>0)return e;let i=t*n,a=J[i];if(void 0===a&&(a=new Float32Array(i),J[i]=a),0!==t){r.toArray(a,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(a,i)}return a}function Z(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function ee(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function et(e,t){let n=Y[t];void 0===n&&(n=new Int32Array(t),Y[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function en(e,t){let n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function er(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Z(n,t))return;e.uniform2fv(this.addr,t),ee(n,t)}}function ei(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Z(n,t))return;e.uniform3fv(this.addr,t),ee(n,t)}}function ea(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Z(n,t))return;e.uniform4fv(this.addr,t),ee(n,t)}}function eo(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(Z(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),ee(n,t)}else{if(Z(n,r))return;$.set(r),e.uniformMatrix2fv(this.addr,!1,$),ee(n,r)}}function es(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(Z(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),ee(n,t)}else{if(Z(n,r))return;q.set(r),e.uniformMatrix3fv(this.addr,!1,q),ee(n,r)}}function el(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(Z(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),ee(n,t)}else{if(Z(n,r))return;K.set(r),e.uniformMatrix4fv(this.addr,!1,K),ee(n,r)}}function eu(e,t){let n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function ec(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Z(n,t))return;e.uniform2iv(this.addr,t),ee(n,t)}}function ed(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Z(n,t))return;e.uniform3iv(this.addr,t),ee(n,t)}}function eh(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Z(n,t))return;e.uniform4iv(this.addr,t),ee(n,t)}}function ef(e,t){let n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function ep(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Z(n,t))return;e.uniform2uiv(this.addr,t),ee(n,t)}}function em(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Z(n,t))return;e.uniform3uiv(this.addr,t),ee(n,t)}}function eg(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Z(n,t))return;e.uniform4uiv(this.addr,t),ee(n,t)}}function ev(e,t,n){let i;let a=this.cache,o=n.allocateTextureUnit();a[0]!==o&&(e.uniform1i(this.addr,o),a[0]=o),this.type===e.SAMPLER_2D_SHADOW?(V.compareFunction=r.TiK,i=V):i=G,n.setTexture2D(t||i,o)}function ey(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||W,i)}function eb(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||X,i)}function ex(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||j,i)}function e_(e,t){e.uniform1fv(this.addr,t)}function eS(e,t){let n=Q(t,this.size,2);e.uniform2fv(this.addr,n)}function eA(e,t){let n=Q(t,this.size,3);e.uniform3fv(this.addr,n)}function ew(e,t){let n=Q(t,this.size,4);e.uniform4fv(this.addr,n)}function eE(e,t){let n=Q(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function eM(e,t){let n=Q(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function eC(e,t){let n=Q(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function eT(e,t){e.uniform1iv(this.addr,t)}function eR(e,t){e.uniform2iv(this.addr,t)}function eP(e,t){e.uniform3iv(this.addr,t)}function eI(e,t){e.uniform4iv(this.addr,t)}function eB(e,t){e.uniform1uiv(this.addr,t)}function eL(e,t){e.uniform2uiv(this.addr,t)}function eD(e,t){e.uniform3uiv(this.addr,t)}function ek(e,t){e.uniform4uiv(this.addr,t)}function eO(e,t,n){let r=this.cache,i=t.length,a=et(n,i);Z(r,a)||(e.uniform1iv(this.addr,a),ee(r,a));for(let e=0;e!==i;++e)n.setTexture2D(t[e]||G,a[e])}function eN(e,t,n){let r=this.cache,i=t.length,a=et(n,i);Z(r,a)||(e.uniform1iv(this.addr,a),ee(r,a));for(let e=0;e!==i;++e)n.setTexture3D(t[e]||W,a[e])}function eF(e,t,n){let r=this.cache,i=t.length,a=et(n,i);Z(r,a)||(e.uniform1iv(this.addr,a),ee(r,a));for(let e=0;e!==i;++e)n.setTextureCube(t[e]||X,a[e])}function eU(e,t,n){let r=this.cache,i=t.length,a=et(n,i);Z(r,a)||(e.uniform1iv(this.addr,a),ee(r,a));for(let e=0;e!==i;++e)n.setTexture2DArray(t[e]||j,a[e])}class ez{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return en;case 35664:return er;case 35665:return ei;case 35666:return ea;case 35674:return eo;case 35675:return es;case 35676:return el;case 5124:case 35670:return eu;case 35667:case 35671:return ec;case 35668:case 35672:return ed;case 35669:case 35673:return eh;case 5125:return ef;case 36294:return ep;case 36295:return em;case 36296:return eg;case 35678:case 36198:case 36298:case 36306:case 35682:return ev;case 35679:case 36299:case 36307:return ey;case 35680:case 36300:case 36308:case 36293:return eb;case 36289:case 36303:case 36311:case 36292:return ex}}(t.type)}}class eH{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return e_;case 35664:return eS;case 35665:return eA;case 35666:return ew;case 35674:return eE;case 35675:return eM;case 35676:return eC;case 5124:case 35670:return eT;case 35667:case 35671:return eR;case 35668:case 35672:return eP;case 35669:case 35673:return eI;case 5125:return eB;case 36294:return eL;case 36295:return eD;case 36296:return ek;case 35678:case 36198:case 36298:case 36306:case 35682:return eO;case 35679:case 36299:case 36307:return eN;case 35680:case 36300:case 36308:case 36293:return eF;case 36289:case 36303:case 36311:case 36292:return eU}}(t.type)}}class eG{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){let r=this.seq;for(let i=0,a=r.length;i!==a;++i){let a=r[i];a.setValue(e,t[a.id],n)}}}let eV=/(\w+)(\])?(\[|\.)?/g;function ej(e,t){e.seq.push(t),e.map[t.id]=t}class eW{constructor(e,t){this.seq=[],this.map={};let n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){let n=e.getActiveUniform(t,r),i=e.getUniformLocation(t,n.name);!function(e,t,n){let r=e.name,i=r.length;for(eV.lastIndex=0;;){let a=eV.exec(r),o=eV.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===i){ej(n,void 0===u?new ez(s,e,t):new eH(s,e,t));break}{let e=n.map[s];void 0===e&&ej(n,e=new eG(s)),n=e}}}(n,i,this)}}setValue(e,t,n,r){let i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){let r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,a=t.length;i!==a;++i){let a=t[i],o=n[a.id];!1!==o.needsUpdate&&a.setValue(e,o.value,r)}}static seqWithValue(e,t){let n=[];for(let r=0,i=e.length;r!==i;++r){let i=e[r];i.id in t&&n.push(i)}return n}}function eX(e,t,n){let r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let eJ=0,eY=new r.dwI;function eK(e,t,n){let r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";let a=/ERROR: 0:(\d+)/.exec(i);if(!a)return i;{let r=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){let n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let e=i;e<a;e++){let i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}}let eq=new r.Pq0;function e$(e){return""!==e}function eQ(e,t){let n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function eZ(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}let e0=/^[ \t]*#include +<([\w\d./]+)>/gm;function e1(e){return e.replace(e0,e3)}let e2=new Map;function e3(e,t){let n=o[t];if(void 0===n){let e=e2.get(t);if(void 0!==e)n=o[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e);else throw Error("Can not resolve #include <"+t+">")}return e1(n)}let e4=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function e5(e){return e.replace(e4,e9)}function e9(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function e6(e){let t=`precision ${e.precision} float;
	precision ${e.precision} int;
	precision ${e.precision} sampler2D;
	precision ${e.precision} samplerCube;
	precision ${e.precision} sampler3D;
	precision ${e.precision} sampler2DArray;
	precision ${e.precision} sampler2DShadow;
	precision ${e.precision} samplerCubeShadow;
	precision ${e.precision} sampler2DArrayShadow;
	precision ${e.precision} isampler2D;
	precision ${e.precision} isampler3D;
	precision ${e.precision} isamplerCube;
	precision ${e.precision} isampler2DArray;
	precision ${e.precision} usampler2D;
	precision ${e.precision} usampler3D;
	precision ${e.precision} usamplerCube;
	precision ${e.precision} usampler2DArray;
	`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function e8(e,t,n,i){let a,s,l,u,c,d;let h=e.getContext(),f=n.defines,p=n.vertexShader,m=n.fragmentShader,g=(c="SHADOWMAP_TYPE_BASIC",n.shadowMapType===r.QP0?c="SHADOWMAP_TYPE_PCF":n.shadowMapType===r.Wk7?c="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===r.RyA&&(c="SHADOWMAP_TYPE_VSM"),c),v=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case r.hy7:case r.xFO:t="ENVMAP_TYPE_CUBE";break;case r.Om:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),y=(d="ENVMAP_MODE_REFLECTION",n.envMap&&n.envMapMode===r.xFO&&(d="ENVMAP_MODE_REFRACTION"),d),b=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case r.caT:t="ENVMAP_BLENDING_MULTIPLY";break;case r.KRh:t="ENVMAP_BLENDING_MIX";break;case r.XrR:t="ENVMAP_BLENDING_ADD"}return t}(n),x=function(e){let t=e.envMapCubeUVHeight;if(null===t)return null;let n=Math.log2(t)-2;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:1/t,maxMip:n}}(n),_=[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(e$).join("\n"),S=function(e){let t=[];for(let n in e){let r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(f),A=h.createProgram(),w=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((a=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,S].filter(e$).join("\n")).length>0&&(a+="\n"),(s=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,S].filter(e$).join("\n")).length>0&&(s+="\n")):(a=[e6(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,S,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+y:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+g:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(e$).join("\n"),s=[e6(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,S,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+v:"",n.envMap?"#define "+y:"",n.envMap?"#define "+b:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+g:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==r.y_p?"#define TONE_MAPPING":"",n.toneMapping!==r.y_p?o.tonemapping_pars_fragment:"",n.toneMapping!==r.y_p?function(e,t){let n;switch(t){case r.kyO:n="Linear";break;case r.Mjd:n="Reinhard";break;case r.nNL:n="Cineon";break;case r.FV:n="ACESFilmic";break;case r.LAk:n="AgX";break;case r.aJ8:n="Neutral";break;case r.g7M:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",o.colorspace_pars_fragment,function(e,t){let n=function(e){r.ppV._getMatrix(eY,r.ppV.workingColorSpace,e);let t=`mat3( ${eY.elements.map(e=>e.toFixed(4))} )`;switch(r.ppV.getTransfer(e)){case r.VxR:return[t,"LinearTransferOETF"];case r.KLL:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return`vec4 ${e}( vec4 value ) {
	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );
}`}("linearToOutputTexel",n.outputColorSpace),function(){r.ppV.getLuminanceCoefficients(eq);let e=eq.x.toFixed(4),t=eq.y.toFixed(4),n=eq.z.toFixed(4);return`float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( ${e}, ${t}, ${n} );
	return dot( weights, rgb );
}`}(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(e$).join("\n")),p=eZ(p=eQ(p=e1(p),n),n),m=eZ(m=eQ(m=e1(m),n),n),p=e5(p),m=e5(m),!0!==n.isRawShaderMaterial&&(w="#version 300 es\n",a=[_,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+a,s=["#define varying in",n.glslVersion===r.Wdf?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===r.Wdf?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+s);let E=w+a+p,M=w+s+m,C=eX(h,h.VERTEX_SHADER,E),T=eX(h,h.FRAGMENT_SHADER,M);function R(t){if(e.debug.checkShaderErrors){let n=h.getProgramInfoLog(A).trim(),r=h.getShaderInfoLog(C).trim(),i=h.getShaderInfoLog(T).trim(),o=!0,l=!0;if(!1===h.getProgramParameter(A,h.LINK_STATUS)){if(o=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(h,A,C,T);else{let e=eK(h,C,"vertex"),r=eK(h,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+h.getError()+" - VALIDATE_STATUS "+h.getProgramParameter(A,h.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+r)}}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):(""===r||""===i)&&(l=!1);l&&(t.diagnostics={runnable:o,programLog:n,vertexShader:{log:r,prefix:a},fragmentShader:{log:i,prefix:s}})}h.deleteShader(C),h.deleteShader(T),l=new eW(h,A),u=function(e,t){let n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){let r=e.getActiveAttrib(t,i),a=r.name,o=1;r.type===e.FLOAT_MAT2&&(o=2),r.type===e.FLOAT_MAT3&&(o=3),r.type===e.FLOAT_MAT4&&(o=4),n[a]={type:r.type,location:e.getAttribLocation(t,a),locationSize:o}}return n}(h,A)}h.attachShader(A,C),h.attachShader(A,T),void 0!==n.index0AttributeName?h.bindAttribLocation(A,0,n.index0AttributeName):!0===n.morphTargets&&h.bindAttribLocation(A,0,"position"),h.linkProgram(A),this.getUniforms=function(){return void 0===l&&R(this),l},this.getAttributes=function(){return void 0===u&&R(this),u};let P=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===P&&(P=h.getProgramParameter(A,37297)),P},this.destroy=function(){i.releaseStatesOfProgram(this),h.deleteProgram(A),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=eJ++,this.cacheKey=t,this.usedTimes=1,this.program=A,this.vertexShader=C,this.fragmentShader=T,this}let e7=0;class te{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}remove(e){for(let t of this.materialCache.get(e))t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){let t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new tt(e),t.set(e,n)),n}}class tt{constructor(e){this.id=e7++,this.code=e,this.usedTimes=0}}function tn(e,t,n,i,a,o,s){let u=new r.zgK,c=new te,d=new Set,h=[],f=a.logarithmicDepthBuffer,p=a.vertexTextures,m=a.precision,g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(e){return(d.add(e),0===e)?"uv":`uv${e}`}return{getParameters:function(o,u,h,y,b){let x,_,S,A;let w=y.fog,E=b.geometry,M=o.isMeshStandardMaterial?y.environment:null,C=(o.isMeshStandardMaterial?n:t).get(o.envMap||M),T=C&&C.mapping===r.Om?C.image.height:null,R=g[o.type];null!==o.precision&&(m=a.getMaxPrecision(o.precision))!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",m,"instead.");let P=E.morphAttributes.position||E.morphAttributes.normal||E.morphAttributes.color,I=void 0!==P?P.length:0,B=0;if(void 0!==E.morphAttributes.position&&(B=1),void 0!==E.morphAttributes.normal&&(B=2),void 0!==E.morphAttributes.color&&(B=3),R){let e=l[R];x=e.vertexShader,_=e.fragmentShader}else x=o.vertexShader,_=o.fragmentShader,c.update(o),S=c.getVertexShaderID(o),A=c.getFragmentShaderID(o);let L=e.getRenderTarget(),D=e.state.buffers.depth.getReversed(),k=!0===b.isInstancedMesh,O=!0===b.isBatchedMesh,N=!!o.map,F=!!o.matcap,U=!!C,z=!!o.aoMap,H=!!o.lightMap,G=!!o.bumpMap,V=!!o.normalMap,j=!!o.displacementMap,W=!!o.emissiveMap,X=!!o.metalnessMap,J=!!o.roughnessMap,Y=o.anisotropy>0,K=o.clearcoat>0,q=o.dispersion>0,$=o.iridescence>0,Q=o.sheen>0,Z=o.transmission>0,ee=Y&&!!o.anisotropyMap,et=K&&!!o.clearcoatMap,en=K&&!!o.clearcoatNormalMap,er=K&&!!o.clearcoatRoughnessMap,ei=$&&!!o.iridescenceMap,ea=$&&!!o.iridescenceThicknessMap,eo=Q&&!!o.sheenColorMap,es=Q&&!!o.sheenRoughnessMap,el=!!o.specularMap,eu=!!o.specularColorMap,ec=!!o.specularIntensityMap,ed=Z&&!!o.transmissionMap,eh=Z&&!!o.thicknessMap,ef=!!o.gradientMap,ep=!!o.alphaMap,em=o.alphaTest>0,eg=!!o.alphaHash,ev=!!o.extensions,ey=r.y_p;o.toneMapped&&(null===L||!0===L.isXRRenderTarget)&&(ey=e.toneMapping);let eb={shaderID:R,shaderType:o.type,shaderName:o.name,vertexShader:x,fragmentShader:_,defines:o.defines,customVertexShaderID:S,customFragmentShaderID:A,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:m,batching:O,batchingColor:O&&null!==b._colorsTexture,instancing:k,instancingColor:k&&null!==b.instanceColor,instancingMorph:k&&null!==b.morphTexture,supportsVertexTextures:p,outputColorSpace:null===L?e.outputColorSpace:!0===L.isXRRenderTarget?L.texture.colorSpace:r.Zr2,alphaToCoverage:!!o.alphaToCoverage,map:N,matcap:F,envMap:U,envMapMode:U&&C.mapping,envMapCubeUVHeight:T,aoMap:z,lightMap:H,bumpMap:G,normalMap:V,displacementMap:p&&j,emissiveMap:W,normalMapObjectSpace:V&&o.normalMapType===r.vyJ,normalMapTangentSpace:V&&o.normalMapType===r.bI3,metalnessMap:X,roughnessMap:J,anisotropy:Y,anisotropyMap:ee,clearcoat:K,clearcoatMap:et,clearcoatNormalMap:en,clearcoatRoughnessMap:er,dispersion:q,iridescence:$,iridescenceMap:ei,iridescenceThicknessMap:ea,sheen:Q,sheenColorMap:eo,sheenRoughnessMap:es,specularMap:el,specularColorMap:eu,specularIntensityMap:ec,transmission:Z,transmissionMap:ed,thicknessMap:eh,gradientMap:ef,opaque:!1===o.transparent&&o.blending===r.NTi&&!1===o.alphaToCoverage,alphaMap:ep,alphaTest:em,alphaHash:eg,combine:o.combine,mapUv:N&&v(o.map.channel),aoMapUv:z&&v(o.aoMap.channel),lightMapUv:H&&v(o.lightMap.channel),bumpMapUv:G&&v(o.bumpMap.channel),normalMapUv:V&&v(o.normalMap.channel),displacementMapUv:j&&v(o.displacementMap.channel),emissiveMapUv:W&&v(o.emissiveMap.channel),metalnessMapUv:X&&v(o.metalnessMap.channel),roughnessMapUv:J&&v(o.roughnessMap.channel),anisotropyMapUv:ee&&v(o.anisotropyMap.channel),clearcoatMapUv:et&&v(o.clearcoatMap.channel),clearcoatNormalMapUv:en&&v(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:er&&v(o.clearcoatRoughnessMap.channel),iridescenceMapUv:ei&&v(o.iridescenceMap.channel),iridescenceThicknessMapUv:ea&&v(o.iridescenceThicknessMap.channel),sheenColorMapUv:eo&&v(o.sheenColorMap.channel),sheenRoughnessMapUv:es&&v(o.sheenRoughnessMap.channel),specularMapUv:el&&v(o.specularMap.channel),specularColorMapUv:eu&&v(o.specularColorMap.channel),specularIntensityMapUv:ec&&v(o.specularIntensityMap.channel),transmissionMapUv:ed&&v(o.transmissionMap.channel),thicknessMapUv:eh&&v(o.thicknessMap.channel),alphaMapUv:ep&&v(o.alphaMap.channel),vertexTangents:!!E.attributes.tangent&&(V||Y),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!E.attributes.color&&4===E.attributes.color.itemSize,pointsUvs:!0===b.isPoints&&!!E.attributes.uv&&(N||ep),fog:!!w,useFog:!0===o.fog,fogExp2:!!w&&w.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:f,reverseDepthBuffer:D,skinning:!0===b.isSkinnedMesh,morphTargets:void 0!==E.morphAttributes.position,morphNormals:void 0!==E.morphAttributes.normal,morphColors:void 0!==E.morphAttributes.color,morphTargetsCount:I,morphTextureStride:B,numDirLights:u.directional.length,numPointLights:u.point.length,numSpotLights:u.spot.length,numSpotLightMaps:u.spotLightMap.length,numRectAreaLights:u.rectArea.length,numHemiLights:u.hemi.length,numDirLightShadows:u.directionalShadowMap.length,numPointLightShadows:u.pointShadowMap.length,numSpotLightShadows:u.spotShadowMap.length,numSpotLightShadowsWithMaps:u.numSpotLightShadowsWithMaps,numLightProbes:u.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.length>0,shadowMapType:e.shadowMap.type,toneMapping:ey,decodeVideoTexture:N&&!0===o.map.isVideoTexture&&r.ppV.getTransfer(o.map.colorSpace)===r.KLL,decodeVideoTextureEmissive:W&&!0===o.emissiveMap.isVideoTexture&&r.ppV.getTransfer(o.emissiveMap.colorSpace)===r.KLL,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===r.$EB,flipSided:o.side===r.hsX,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionClipCullDistance:ev&&!0===o.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ev&&!0===o.extensions.multiDraw||O)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:o.customProgramCacheKey()};return eb.vertexUv1s=d.has(1),eb.vertexUv2s=d.has(2),eb.vertexUv3s=d.has(3),d.clear(),eb},getProgramCacheKey:function(t){let n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(let e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(n.push(t.precision),n.push(t.outputColorSpace),n.push(t.envMapMode),n.push(t.envMapCubeUVHeight),n.push(t.mapUv),n.push(t.alphaMapUv),n.push(t.lightMapUv),n.push(t.aoMapUv),n.push(t.bumpMapUv),n.push(t.normalMapUv),n.push(t.displacementMapUv),n.push(t.emissiveMapUv),n.push(t.metalnessMapUv),n.push(t.roughnessMapUv),n.push(t.anisotropyMapUv),n.push(t.clearcoatMapUv),n.push(t.clearcoatNormalMapUv),n.push(t.clearcoatRoughnessMapUv),n.push(t.iridescenceMapUv),n.push(t.iridescenceThicknessMapUv),n.push(t.sheenColorMapUv),n.push(t.sheenRoughnessMapUv),n.push(t.specularMapUv),n.push(t.specularColorMapUv),n.push(t.specularIntensityMapUv),n.push(t.transmissionMapUv),n.push(t.thicknessMapUv),n.push(t.combine),n.push(t.fogExp2),n.push(t.sizeAttenuation),n.push(t.morphTargetsCount),n.push(t.morphAttributeCount),n.push(t.numDirLights),n.push(t.numPointLights),n.push(t.numSpotLights),n.push(t.numSpotLightMaps),n.push(t.numHemiLights),n.push(t.numRectAreaLights),n.push(t.numDirLightShadows),n.push(t.numPointLightShadows),n.push(t.numSpotLightShadows),n.push(t.numSpotLightShadowsWithMaps),n.push(t.numLightProbes),n.push(t.shadowMapType),n.push(t.toneMapping),n.push(t.numClippingPlanes),n.push(t.numClipIntersection),n.push(t.depthPacking),u.disableAll(),t.supportsVertexTextures&&u.enable(0),t.instancing&&u.enable(1),t.instancingColor&&u.enable(2),t.instancingMorph&&u.enable(3),t.matcap&&u.enable(4),t.envMap&&u.enable(5),t.normalMapObjectSpace&&u.enable(6),t.normalMapTangentSpace&&u.enable(7),t.clearcoat&&u.enable(8),t.iridescence&&u.enable(9),t.alphaTest&&u.enable(10),t.vertexColors&&u.enable(11),t.vertexAlphas&&u.enable(12),t.vertexUv1s&&u.enable(13),t.vertexUv2s&&u.enable(14),t.vertexUv3s&&u.enable(15),t.vertexTangents&&u.enable(16),t.anisotropy&&u.enable(17),t.alphaHash&&u.enable(18),t.batching&&u.enable(19),t.dispersion&&u.enable(20),t.batchingColor&&u.enable(21),n.push(u.mask),u.disableAll(),t.fog&&u.enable(0),t.useFog&&u.enable(1),t.flatShading&&u.enable(2),t.logarithmicDepthBuffer&&u.enable(3),t.reverseDepthBuffer&&u.enable(4),t.skinning&&u.enable(5),t.morphTargets&&u.enable(6),t.morphNormals&&u.enable(7),t.morphColors&&u.enable(8),t.premultipliedAlpha&&u.enable(9),t.shadowMapEnabled&&u.enable(10),t.doubleSided&&u.enable(11),t.flipSided&&u.enable(12),t.useDepthPacking&&u.enable(13),t.dithering&&u.enable(14),t.transmission&&u.enable(15),t.sheen&&u.enable(16),t.opaque&&u.enable(17),t.pointsUvs&&u.enable(18),t.decodeVideoTexture&&u.enable(19),t.decodeVideoTextureEmissive&&u.enable(20),t.alphaToCoverage&&u.enable(21),n.push(u.mask),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){let t;let n=g[e.type];if(n){let e=l[n];t=r.LlO.clone(e.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){let r;for(let e=0,t=h.length;e<t;e++){let t=h[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new e8(e,n,t,o),h.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){let t=h.indexOf(e);h[t]=h[h.length-1],h.pop(),e.destroy()}},releaseShaderCache:function(e){c.remove(e)},programs:h,dispose:function(){c.dispose()}}}function tr(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function ti(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ta(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function to(){let e=[],t=0,n=[],r=[],i=[];function a(n,r,i,a,o,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,s,l,u){let c=a(e,t,o,s,l,u);o.transmission>0?r.push(c):!0===o.transparent?i.push(c):n.push(c)},unshift:function(e,t,o,s,l,u){let c=a(e,t,o,s,l,u);o.transmission>0?r.unshift(c):!0===o.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(let n=t,r=e.length;n<r;n++){let t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||ti),r.length>1&&r.sort(t||ta),i.length>1&&i.sort(t||ta)}}}function ts(){let e=new WeakMap;return{get:function(t,n){let r;let i=e.get(t);return void 0===i?(r=new to,e.set(t,[r])):n>=i.length?(r=new to,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function tl(){let e={};return{get:function(t){let n;if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":n={direction:new r.Pq0,color:new r.Q1f};break;case"SpotLight":n={position:new r.Pq0,direction:new r.Pq0,color:new r.Q1f,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new r.Pq0,color:new r.Q1f,distance:0,decay:0};break;case"HemisphereLight":n={direction:new r.Pq0,skyColor:new r.Q1f,groundColor:new r.Q1f};break;case"RectAreaLight":n={color:new r.Q1f,position:new r.Pq0,halfWidth:new r.Pq0,halfHeight:new r.Pq0}}return e[t.id]=n,n}}}let tu=0;function tc(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function td(e){let t=new tl,n=function(){let e={};return{get:function(t){let n;if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new r.I9Y};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new r.I9Y,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let e=0;e<9;e++)i.probe.push(new r.Pq0);let a=new r.Pq0,o=new r.kn4,l=new r.kn4;return{setup:function(r){let a=0,o=0,l=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,c=0,d=0,h=0,f=0,p=0,m=0,g=0,v=0,y=0,b=0;r.sort(tc);for(let e=0,s=r.length;e<s;e++){let s=r[e],x=s.color,_=s.intensity,S=s.distance,A=s.shadow&&s.shadow.map?s.shadow.map.texture:null;if(s.isAmbientLight)a+=x.r*_,o+=x.g*_,l+=x.b*_;else if(s.isLightProbe){for(let e=0;e<9;e++)i.probe[e].addScaledVector(s.sh.coefficients[e],_);b++}else if(s.isDirectionalLight){let e=t.get(s);if(e.color.copy(s.color).multiplyScalar(s.intensity),s.castShadow){let e=s.shadow,t=n.get(s);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,i.directionalShadow[u]=t,i.directionalShadowMap[u]=A,i.directionalShadowMatrix[u]=s.shadow.matrix,p++}i.directional[u]=e,u++}else if(s.isSpotLight){let e=t.get(s);e.position.setFromMatrixPosition(s.matrixWorld),e.color.copy(x).multiplyScalar(_),e.distance=S,e.coneCos=Math.cos(s.angle),e.penumbraCos=Math.cos(s.angle*(1-s.penumbra)),e.decay=s.decay,i.spot[d]=e;let r=s.shadow;if(s.map&&(i.spotLightMap[v]=s.map,v++,r.updateMatrices(s),s.castShadow&&y++),i.spotLightMatrix[d]=r.matrix,s.castShadow){let e=n.get(s);e.shadowIntensity=r.intensity,e.shadowBias=r.bias,e.shadowNormalBias=r.normalBias,e.shadowRadius=r.radius,e.shadowMapSize=r.mapSize,i.spotShadow[d]=e,i.spotShadowMap[d]=A,g++}d++}else if(s.isRectAreaLight){let e=t.get(s);e.color.copy(x).multiplyScalar(_),e.halfWidth.set(.5*s.width,0,0),e.halfHeight.set(0,.5*s.height,0),i.rectArea[h]=e,h++}else if(s.isPointLight){let e=t.get(s);if(e.color.copy(s.color).multiplyScalar(s.intensity),e.distance=s.distance,e.decay=s.decay,s.castShadow){let e=s.shadow,t=n.get(s);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,i.pointShadow[c]=t,i.pointShadowMap[c]=A,i.pointShadowMatrix[c]=s.shadow.matrix,m++}i.point[c]=e,c++}else if(s.isHemisphereLight){let e=t.get(s);e.skyColor.copy(s.color).multiplyScalar(_),e.groundColor.copy(s.groundColor).multiplyScalar(_),i.hemi[f]=e,f++}}h>0&&(!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=s.LTC_FLOAT_1,i.rectAreaLTC2=s.LTC_FLOAT_2):(i.rectAreaLTC1=s.LTC_HALF_1,i.rectAreaLTC2=s.LTC_HALF_2)),i.ambient[0]=a,i.ambient[1]=o,i.ambient[2]=l;let x=i.hash;(x.directionalLength!==u||x.pointLength!==c||x.spotLength!==d||x.rectAreaLength!==h||x.hemiLength!==f||x.numDirectionalShadows!==p||x.numPointShadows!==m||x.numSpotShadows!==g||x.numSpotMaps!==v||x.numLightProbes!==b)&&(i.directional.length=u,i.spot.length=d,i.rectArea.length=h,i.point.length=c,i.hemi.length=f,i.directionalShadow.length=p,i.directionalShadowMap.length=p,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=p,i.pointShadowMatrix.length=m,i.spotLightMatrix.length=g+v-y,i.spotLightMap.length=v,i.numSpotLightShadowsWithMaps=y,i.numLightProbes=b,x.directionalLength=u,x.pointLength=c,x.spotLength=d,x.rectAreaLength=h,x.hemiLength=f,x.numDirectionalShadows=p,x.numPointShadows=m,x.numSpotShadows=g,x.numSpotMaps=v,x.numLightProbes=b,i.version=tu++)},setupView:function(e,t){let n=0,r=0,s=0,u=0,c=0,d=t.matrixWorldInverse;for(let t=0,h=e.length;t<h;t++){let h=e[t];if(h.isDirectionalLight){let e=i.directional[n];e.direction.setFromMatrixPosition(h.matrixWorld),a.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),n++}else if(h.isSpotLight){let e=i.spot[s];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(h.matrixWorld),a.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),s++}else if(h.isRectAreaLight){let e=i.rectArea[u];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),l.identity(),o.copy(h.matrixWorld),o.premultiply(d),l.extractRotation(o),e.halfWidth.set(.5*h.width,0,0),e.halfHeight.set(0,.5*h.height,0),e.halfWidth.applyMatrix4(l),e.halfHeight.applyMatrix4(l),u++}else if(h.isPointLight){let e=i.point[r];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),r++}else if(h.isHemisphereLight){let e=i.hemi[c];e.direction.setFromMatrixPosition(h.matrixWorld),e.direction.transformDirection(d),c++}}},state:i}}function th(e){let t=new td(e),n=[],r=[],i={lightsArray:n,shadowsArray:r,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){i.camera=e,n.length=0,r.length=0},state:i,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function tf(e){let t=new WeakMap;return{get:function(n,r=0){let i;let a=t.get(n);return void 0===a?(i=new th(e),t.set(n,[i])):r>=a.length?(i=new th(e),a.push(i)):i=a[r],i},dispose:function(){t=new WeakMap}}}function tp(e,t,n){let i=new r.PPD,a=new r.I9Y,o=new r.I9Y,s=new r.IUQ,l=new r.CSG({depthPacking:r.N5j}),u=new r.aVO,c={},d=n.maxTextureSize,h={[r.hB5]:r.hsX,[r.hsX]:r.hB5,[r.$EB]:r.$EB},f=new r.BKk({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new r.I9Y},radius:{value:4}},vertexShader:"void main() {\n	gl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n	const float samples = float( VSM_SAMPLES );\n	float mean = 0.0;\n	float squared_mean = 0.0;\n	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n	for ( float i = 0.0; i < samples; i ++ ) {\n		float uvOffset = uvStart + i * uvStride;\n		#ifdef HORIZONTAL_PASS\n			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n			mean += distribution.x;\n			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n		#else\n			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n			mean += depth;\n			squared_mean += depth * depth;\n		#endif\n	}\n	mean = mean / samples;\n	squared_mean = squared_mean / samples;\n	float std_dev = sqrt( squared_mean - mean * mean );\n	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=f.clone();p.defines.HORIZONTAL_PASS=1;let m=new r.LoY;m.setAttribute("position",new r.THS(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let g=new r.eaF(m,f),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=r.QP0;let y=this.type;function b(t,n,i,a){let o=null,s=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)o=s;else if(o=!0===i.isPointLight?u:l,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){let e=o.uuid,t=n.uuid,r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=o.clone(),r[t]=i,n.addEventListener("dispose",x)),o=i}return o.visible=n.visible,o.wireframe=n.wireframe,a===r.RyA?o.side=null!==n.shadowSide?n.shadowSide:n.side:o.side=null!==n.shadowSide?n.shadowSide:h[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===i.isPointLight&&!0===o.isMeshDistanceMaterial&&(e.properties.get(o).light=i),o}function x(e){for(let t in e.target.removeEventListener("dispose",x),c){let n=c[t],r=e.target.uuid;r in n&&(n[r].dispose(),delete n[r])}}this.render=function(n,l,u){if(!1===v.enabled||!1===v.autoUpdate&&!1===v.needsUpdate||0===n.length)return;let c=e.getRenderTarget(),h=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),x=e.state;x.setBlending(r.XIg),x.buffers.color.setClear(1,1,1,1),x.buffers.depth.setTest(!0),x.setScissorTest(!1);let _=y!==r.RyA&&this.type===r.RyA,S=y===r.RyA&&this.type!==r.RyA;for(let c=0,h=n.length;c<h;c++){let h=n[c],m=h.shadow;if(void 0===m){console.warn("THREE.WebGLShadowMap:",h,"has no shadow.");continue}if(!1===m.autoUpdate&&!1===m.needsUpdate)continue;a.copy(m.mapSize);let v=m.getFrameExtents();if(a.multiply(v),o.copy(m.mapSize),(a.x>d||a.y>d)&&(a.x>d&&(o.x=Math.floor(d/v.x),a.x=o.x*v.x,m.mapSize.x=o.x),a.y>d&&(o.y=Math.floor(d/v.y),a.y=o.y*v.y,m.mapSize.y=o.y)),null===m.map||!0===_||!0===S){let e=this.type!==r.RyA?{minFilter:r.hxR,magFilter:r.hxR}:{};null!==m.map&&m.map.dispose(),m.map=new r.nWS(a.x,a.y,e),m.map.texture.name=h.name+".shadowMap",m.camera.updateProjectionMatrix()}e.setRenderTarget(m.map),e.clear();let y=m.getViewportCount();for(let n=0;n<y;n++){let a=m.getViewport(n);s.set(o.x*a.x,o.y*a.y,o.x*a.z,o.y*a.w),x.viewport(s),m.updateMatrices(h,n),i=m.getFrustum(),function n(a,o,s,l,u){if(!1===a.visible)return;if(a.layers.test(o.layers)&&(a.isMesh||a.isLine||a.isPoints)&&(a.castShadow||a.receiveShadow&&u===r.RyA)&&(!a.frustumCulled||i.intersectsObject(a))){a.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,a.matrixWorld);let n=t.update(a),r=a.material;if(Array.isArray(r)){let t=n.groups;for(let i=0,c=t.length;i<c;i++){let c=t[i],d=r[c.materialIndex];if(d&&d.visible){let t=b(a,d,l,u);a.onBeforeShadow(e,a,o,s,n,t,c),e.renderBufferDirect(s,null,n,t,a,c),a.onAfterShadow(e,a,o,s,n,t,c)}}}else if(r.visible){let t=b(a,r,l,u);a.onBeforeShadow(e,a,o,s,n,t,null),e.renderBufferDirect(s,null,n,t,a,null),a.onAfterShadow(e,a,o,s,n,t,null)}}let c=a.children;for(let e=0,t=c.length;e<t;e++)n(c[e],o,s,l,u)}(l,u,m.camera,h,this.type)}!0!==m.isPointLightShadow&&this.type===r.RyA&&function(n,i){let o=t.update(g);f.defines.VSM_SAMPLES!==n.blurSamples&&(f.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,f.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new r.nWS(a.x,a.y)),f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,o,f,g,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,o,p,g,null)}(m,u),m.needsUpdate=!1}y=this.type,v.needsUpdate=!1,e.setRenderTarget(c,h,m)}}let tm={[r.eHc]:r.lGu,[r.brA]:r.K52,[r.U3G]:r.bw0,[r.xSv]:r.Gwm,[r.lGu]:r.eHc,[r.K52]:r.brA,[r.bw0]:r.U3G,[r.Gwm]:r.xSv};function tg(e,t){let n=new function(){let t=!1,n=new r.IUQ,i=null,a=new r.IUQ(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,r,i,o,s){!0===s&&(t*=o,r*=o,i*=o),n.set(t,r,i,o),!1===a.equals(n)&&(e.clearColor(t,r,i,o),a.copy(n))},reset:function(){t=!1,i=null,a.set(-1,0,0,0)}}},i=new function(){let n=!1,i=!1,a=null,o=null,s=null;return{setReversed:function(e){if(i!==e){let e=t.get("EXT_clip_control");i?e.clipControlEXT(e.LOWER_LEFT_EXT,e.ZERO_TO_ONE_EXT):e.clipControlEXT(e.LOWER_LEFT_EXT,e.NEGATIVE_ONE_TO_ONE_EXT);let n=s;s=null,this.setClear(n)}i=e},getReversed:function(){return i},setTest:function(t){t?z(e.DEPTH_TEST):H(e.DEPTH_TEST)},setMask:function(t){a===t||n||(e.depthMask(t),a=t)},setFunc:function(t){if(i&&(t=tm[t]),o!==t){switch(t){case r.eHc:e.depthFunc(e.NEVER);break;case r.lGu:e.depthFunc(e.ALWAYS);break;case r.brA:e.depthFunc(e.LESS);break;case r.xSv:e.depthFunc(e.LEQUAL);break;case r.U3G:e.depthFunc(e.EQUAL);break;case r.Gwm:e.depthFunc(e.GEQUAL);break;case r.K52:e.depthFunc(e.GREATER);break;case r.bw0:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}o=t}},setLocked:function(e){n=e},setClear:function(t){s!==t&&(i&&(t=1-t),e.clearDepth(t),s=t)},reset:function(){n=!1,a=null,o=null,s=null,i=!1}}},a=new function(){let t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(n){t||(n?z(e.STENCIL_TEST):H(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){(r!==t||i!==n||a!==o)&&(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){(o!==t||s!==n||l!==r)&&(e.stencilOp(t,n,r),o=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null}}},o=new WeakMap,s=new WeakMap,l={},u={},c=new WeakMap,d=[],h=null,f=!1,p=null,m=null,g=null,v=null,y=null,b=null,x=null,_=new r.Q1f(0,0,0),S=0,A=!1,w=null,E=null,M=null,C=null,T=null,R=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),P=!1,I=e.getParameter(e.VERSION);-1!==I.indexOf("WebGL")?P=parseFloat(/^WebGL (\d)/.exec(I)[1])>=1:-1!==I.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(I)[1])>=2);let B=null,L={},D=e.getParameter(e.SCISSOR_BOX),k=e.getParameter(e.VIEWPORT),O=new r.IUQ().fromArray(D),N=new r.IUQ().fromArray(k);function F(t,n,r,i){let a=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let o=0;o<r;o++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,i,0,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a);return o}let U={};function z(t){!0!==l[t]&&(e.enable(t),l[t]=!0)}function H(t){!1!==l[t]&&(e.disable(t),l[t]=!1)}U[e.TEXTURE_2D]=F(e.TEXTURE_2D,e.TEXTURE_2D,1),U[e.TEXTURE_CUBE_MAP]=F(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),U[e.TEXTURE_2D_ARRAY]=F(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),U[e.TEXTURE_3D]=F(e.TEXTURE_3D,e.TEXTURE_3D,1,1),n.setClear(0,0,0,1),i.setClear(1),a.setClear(0),z(e.DEPTH_TEST),i.setFunc(r.xSv),W(!1),X(r.Vb5),z(e.CULL_FACE),j(r.XIg);let G={[r.gO9]:e.FUNC_ADD,[r.FXf]:e.FUNC_SUBTRACT,[r.nST]:e.FUNC_REVERSE_SUBTRACT};G[r.znC]=e.MIN,G[r.$ei]=e.MAX;let V={[r.ojh]:e.ZERO,[r.qad]:e.ONE,[r.f4X]:e.SRC_COLOR,[r.ie2]:e.SRC_ALPHA,[r.hgQ]:e.SRC_ALPHA_SATURATE,[r.wn6]:e.DST_COLOR,[r.hdd]:e.DST_ALPHA,[r.LiQ]:e.ONE_MINUS_SRC_COLOR,[r.OuU]:e.ONE_MINUS_SRC_ALPHA,[r.aEY]:e.ONE_MINUS_DST_COLOR,[r.Nt7]:e.ONE_MINUS_DST_ALPHA,[r.RrE]:e.CONSTANT_COLOR,[r.$Yl]:e.ONE_MINUS_CONSTANT_COLOR,[r.e0p]:e.CONSTANT_ALPHA,[r.ov9]:e.ONE_MINUS_CONSTANT_ALPHA};function j(t,n,i,a,o,s,l,u,c,d){if(t===r.XIg){!0===f&&(H(e.BLEND),f=!1);return}if(!1===f&&(z(e.BLEND),f=!0),t!==r.bCz){if(t!==p||d!==A){if((m!==r.gO9||y!==r.gO9)&&(e.blendEquation(e.FUNC_ADD),m=r.gO9,y=r.gO9),d)switch(t){case r.NTi:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case r.EZo:e.blendFunc(e.ONE,e.ONE);break;case r.Kwu:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case r.EdD:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case r.NTi:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case r.EZo:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case r.Kwu:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case r.EdD:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}g=null,v=null,b=null,x=null,_.set(0,0,0),S=0,p=t,A=d}return}o=o||n,s=s||i,l=l||a,(n!==m||o!==y)&&(e.blendEquationSeparate(G[n],G[o]),m=n,y=o),(i!==g||a!==v||s!==b||l!==x)&&(e.blendFuncSeparate(V[i],V[a],V[s],V[l]),g=i,v=a,b=s,x=l),(!1===u.equals(_)||c!==S)&&(e.blendColor(u.r,u.g,u.b,c),_.copy(u),S=c),p=t,A=!1}function W(t){w!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),w=t)}function X(t){t!==r.WNZ?(z(e.CULL_FACE),t!==E&&(t===r.Vb5?e.cullFace(e.BACK):t===r.Jnc?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):H(e.CULL_FACE),E=t}function J(t,n,r){t?(z(e.POLYGON_OFFSET_FILL),(C!==n||T!==r)&&(e.polygonOffset(n,r),C=n,T=r)):H(e.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:i,stencil:a},enable:z,disable:H,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,t===e.DRAW_FRAMEBUFFER&&(u[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(u[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let r=d,i=!1;if(t){void 0===(r=c.get(n))&&(r=[],c.set(n,r));let a=t.textures;if(r.length!==a.length||r[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=a.length;t<n;t++)r[t]=e.COLOR_ATTACHMENT0+t;r.length=a.length,i=!0}}else r[0]!==e.BACK&&(r[0]=e.BACK,i=!0);i&&e.drawBuffers(r)},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:j,setMaterial:function(t,o){t.side===r.$EB?H(e.CULL_FACE):z(e.CULL_FACE);let s=t.side===r.hsX;o&&(s=!s),W(s),t.blending===r.NTi&&!1===t.transparent?j(r.XIg):j(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),i.setFunc(t.depthFunc),i.setTest(t.depthTest),i.setMask(t.depthWrite),n.setMask(t.colorWrite);let l=t.stencilWrite;a.setTest(l),l&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),J(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?z(e.SAMPLE_ALPHA_TO_COVERAGE):H(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:W,setCullFace:X,setLineWidth:function(t){t!==M&&(P&&e.lineWidth(t),M=t)},setPolygonOffset:J,setScissorTest:function(t){t?z(e.SCISSOR_TEST):H(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+R-1),B!==t&&(e.activeTexture(t),B=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===B?e.TEXTURE0+R-1:B);let i=L[r];void 0===i&&(i={type:void 0,texture:void 0},L[r]=i),(i.type!==t||i.texture!==n)&&(B!==r&&(e.activeTexture(r),B=r),e.bindTexture(t,n||U[t]),i.type=t,i.texture=n)},unbindTexture:function(){let t=L[B];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let r=s.get(n);void 0===r&&(r=new WeakMap,s.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){let r=s.get(n).get(t);o.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),o.set(n,r))},texStorage2D:function(){try{e.texStorage2D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D(...arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===O.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),O.copy(t))},viewport:function(t){!1===N.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),N.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),i.setReversed(!1),e.clearDepth(1),e.stencilMask(0xffffffff),e.stencilFunc(e.ALWAYS,0,0xffffffff),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),l={},B=null,L={},u={},c=new WeakMap,d=[],h=null,f=!1,p=null,m=null,g=null,v=null,y=null,b=null,x=null,_=new r.Q1f(0,0,0),S=0,A=!1,w=null,E=null,M=null,C=null,T=null,O.set(0,0,e.canvas.width,e.canvas.height),N.set(0,0,e.canvas.width,e.canvas.height),n.reset(),i.reset(),a.reset()}}}function tv(e,t,n,i,a,o,s){let l;let u=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,c="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),d=new r.I9Y,h=new WeakMap,f=new WeakMap,p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function m(e,t){return p?new OffscreenCanvas(e,t):(0,r.qq$)("canvas")}function g(e,t,n){let r=1,i=H(e);if((i.width>n||i.height>n)&&(r=n/Math.max(i.width,i.height)),r<1){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&e instanceof VideoFrame){let n=Math.floor(r*i.width),a=Math.floor(r*i.height);void 0===l&&(l=m(n,a));let o=t?m(n,a):l;return o.width=n,o.height=a,o.getContext("2d").drawImage(e,0,0,n,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+i.width+"x"+i.height+") to ("+n+"x"+a+")."),o}"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+i.width+"x"+i.height+").")}return e}function v(e){return e.generateMipmaps}function y(t){e.generateMipmap(t)}function b(n,i,a,o,s=!1){if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=i;if(i===e.RED&&(a===e.FLOAT&&(l=e.R32F),a===e.HALF_FLOAT&&(l=e.R16F),a===e.UNSIGNED_BYTE&&(l=e.R8)),i===e.RED_INTEGER&&(a===e.UNSIGNED_BYTE&&(l=e.R8UI),a===e.UNSIGNED_SHORT&&(l=e.R16UI),a===e.UNSIGNED_INT&&(l=e.R32UI),a===e.BYTE&&(l=e.R8I),a===e.SHORT&&(l=e.R16I),a===e.INT&&(l=e.R32I)),i===e.RG&&(a===e.FLOAT&&(l=e.RG32F),a===e.HALF_FLOAT&&(l=e.RG16F),a===e.UNSIGNED_BYTE&&(l=e.RG8)),i===e.RG_INTEGER&&(a===e.UNSIGNED_BYTE&&(l=e.RG8UI),a===e.UNSIGNED_SHORT&&(l=e.RG16UI),a===e.UNSIGNED_INT&&(l=e.RG32UI),a===e.BYTE&&(l=e.RG8I),a===e.SHORT&&(l=e.RG16I),a===e.INT&&(l=e.RG32I)),i===e.RGB_INTEGER&&(a===e.UNSIGNED_BYTE&&(l=e.RGB8UI),a===e.UNSIGNED_SHORT&&(l=e.RGB16UI),a===e.UNSIGNED_INT&&(l=e.RGB32UI),a===e.BYTE&&(l=e.RGB8I),a===e.SHORT&&(l=e.RGB16I),a===e.INT&&(l=e.RGB32I)),i===e.RGBA_INTEGER&&(a===e.UNSIGNED_BYTE&&(l=e.RGBA8UI),a===e.UNSIGNED_SHORT&&(l=e.RGBA16UI),a===e.UNSIGNED_INT&&(l=e.RGBA32UI),a===e.BYTE&&(l=e.RGBA8I),a===e.SHORT&&(l=e.RGBA16I),a===e.INT&&(l=e.RGBA32I)),i===e.RGB&&a===e.UNSIGNED_INT_5_9_9_9_REV&&(l=e.RGB9_E5),i===e.RGBA){let t=s?r.VxR:r.ppV.getTransfer(o);a===e.FLOAT&&(l=e.RGBA32F),a===e.HALF_FLOAT&&(l=e.RGBA16F),a===e.UNSIGNED_BYTE&&(l=t===r.KLL?e.SRGB8_ALPHA8:e.RGBA8),a===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),a===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)}return(l===e.R16F||l===e.R32F||l===e.RG16F||l===e.RG32F||l===e.RGBA16F||l===e.RGBA32F)&&t.get("EXT_color_buffer_float"),l}function x(t,n){let i;return t?null===n||n===r.bkx||n===r.V3x?i=e.DEPTH24_STENCIL8:n===r.RQf?i=e.DEPTH32F_STENCIL8:n===r.cHt&&(i=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===r.bkx||n===r.V3x?i=e.DEPTH_COMPONENT24:n===r.RQf?i=e.DEPTH_COMPONENT32F:n===r.cHt&&(i=e.DEPTH_COMPONENT16),i}function _(e,t){return!0===v(e)||e.isFramebufferTexture&&e.minFilter!==r.hxR&&e.minFilter!==r.k6q?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function S(e){let t=e.target;t.removeEventListener("dispose",S),function(e){let t=i.get(e);if(void 0===t.__webglInit)return;let n=e.source,r=f.get(n);if(r){let i=r[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&w(e),0===Object.keys(r).length&&f.delete(n)}i.remove(e)}(t),t.isVideoTexture&&h.delete(t)}function A(t){let n=t.target;n.removeEventListener("dispose",A),function(t){let n=i.get(t);if(t.depthTexture&&(t.depthTexture.dispose(),i.remove(t.depthTexture)),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++){if(Array.isArray(n.__webglFramebuffer[t]))for(let r=0;r<n.__webglFramebuffer[t].length;r++)e.deleteFramebuffer(n.__webglFramebuffer[t][r]);else e.deleteFramebuffer(n.__webglFramebuffer[t]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}let r=t.textures;for(let t=0,n=r.length;t<n;t++){let n=i.get(r[t]);n.__webglTexture&&(e.deleteTexture(n.__webglTexture),s.memory.textures--),i.remove(r[t])}i.remove(t)}(n)}function w(t){let n=i.get(t);e.deleteTexture(n.__webglTexture);let r=t.source,a=f.get(r);delete a[n.__cacheKey],s.memory.textures--}let E=0;function M(t,r){let a=i.get(t);if(t.isVideoTexture&&function(e){let t=s.render.frame;h.get(e)!==t&&(h.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){let e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(!1===e.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{B(a,t,r);return}}n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+r)}let C={[r.GJx]:e.REPEAT,[r.ghU]:e.CLAMP_TO_EDGE,[r.kTW]:e.MIRRORED_REPEAT},T={[r.hxR]:e.NEAREST,[r.pHI]:e.NEAREST_MIPMAP_NEAREST,[r.Cfg]:e.NEAREST_MIPMAP_LINEAR,[r.k6q]:e.LINEAR,[r.kRr]:e.LINEAR_MIPMAP_NEAREST,[r.$_I]:e.LINEAR_MIPMAP_LINEAR},R={[r.amv]:e.NEVER,[r.FFZ]:e.ALWAYS,[r.vim]:e.LESS,[r.TiK]:e.LEQUAL,[r.kO0]:e.EQUAL,[r.gWB]:e.GEQUAL,[r.eoi]:e.GREATER,[r.jzd]:e.NOTEQUAL};function P(n,o){if(o.type===r.RQf&&!1===t.has("OES_texture_float_linear")&&(o.magFilter===r.k6q||o.magFilter===r.kRr||o.magFilter===r.Cfg||o.magFilter===r.$_I||o.minFilter===r.k6q||o.minFilter===r.kRr||o.minFilter===r.Cfg||o.minFilter===r.$_I)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,C[o.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,C[o.wrapT]),(n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY)&&e.texParameteri(n,e.TEXTURE_WRAP_R,C[o.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,T[o.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,T[o.minFilter]),o.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,R[o.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")&&o.magFilter!==r.hxR&&(o.minFilter===r.Cfg||o.minFilter===r.$_I)&&(o.type!==r.RQf||!1!==t.has("OES_texture_float_linear"))&&(o.anisotropy>1||i.get(o).__currentAnisotropy)){let r=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,r.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,a.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy}}function I(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",S));let i=n.source,a=f.get(i);void 0===a&&(a={},f.set(i,a));let o=function(e){let t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===a[o]&&(a[o]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,r=!0),a[o].usedTimes++;let i=a[t.__cacheKey];void 0!==i&&(a[t.__cacheKey].usedTimes--,0===i.usedTimes&&w(n)),t.__cacheKey=o,t.__webglTexture=a[o].texture}return r}function B(t,s,l){let u=e.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(u=e.TEXTURE_2D_ARRAY),s.isData3DTexture&&(u=e.TEXTURE_3D);let c=I(t,s),d=s.source;n.bindTexture(u,t.__webglTexture,e.TEXTURE0+l);let h=i.get(d);if(d.version!==h.__version||!0===c){let t;n.activeTexture(e.TEXTURE0+l);let i=r.ppV.getPrimaries(r.ppV.workingColorSpace),f=s.colorSpace===r.jf0?null:r.ppV.getPrimaries(s.colorSpace),p=s.colorSpace===r.jf0||i===f?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);let m=g(s.image,!1,a.maxTextureSize);m=z(s,m);let S=o.convert(s.format,s.colorSpace),A=o.convert(s.type),w=b(s.internalFormat,S,A,s.colorSpace,s.isVideoTexture);P(u,s);let E=s.mipmaps,M=!0!==s.isVideoTexture,C=void 0===h.__version||!0===c,T=d.dataReady,R=_(s,m);if(s.isDepthTexture)w=x(s.format===r.dcC,s.type),C&&(M?n.texStorage2D(e.TEXTURE_2D,1,w,m.width,m.height):n.texImage2D(e.TEXTURE_2D,0,w,m.width,m.height,0,S,A,null));else if(s.isDataTexture){if(E.length>0){M&&C&&n.texStorage2D(e.TEXTURE_2D,R,w,E[0].width,E[0].height);for(let r=0,i=E.length;r<i;r++)t=E[r],M?T&&n.texSubImage2D(e.TEXTURE_2D,r,0,0,t.width,t.height,S,A,t.data):n.texImage2D(e.TEXTURE_2D,r,w,t.width,t.height,0,S,A,t.data);s.generateMipmaps=!1}else M?(C&&n.texStorage2D(e.TEXTURE_2D,R,w,m.width,m.height),T&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,m.width,m.height,S,A,m.data)):n.texImage2D(e.TEXTURE_2D,0,w,m.width,m.height,0,S,A,m.data)}else if(s.isCompressedTexture){if(s.isCompressedArrayTexture){M&&C&&n.texStorage3D(e.TEXTURE_2D_ARRAY,R,w,E[0].width,E[0].height,m.depth);for(let i=0,a=E.length;i<a;i++)if(t=E[i],s.format!==r.GWd){if(null!==S){if(M){if(T){if(s.layerUpdates.size>0){let a=(0,r.Nex)(t.width,t.height,s.format,s.type);for(let r of s.layerUpdates){let o=t.data.subarray(r*a/t.data.BYTES_PER_ELEMENT,(r+1)*a/t.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,i,0,0,r,t.width,t.height,1,S,o)}s.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,i,0,0,0,t.width,t.height,m.depth,S,t.data)}}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,i,w,t.width,t.height,m.depth,0,t.data,0,0)}else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()")}else M?T&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,i,0,0,0,t.width,t.height,m.depth,S,A,t.data):n.texImage3D(e.TEXTURE_2D_ARRAY,i,w,t.width,t.height,m.depth,0,S,A,t.data)}else{M&&C&&n.texStorage2D(e.TEXTURE_2D,R,w,E[0].width,E[0].height);for(let i=0,a=E.length;i<a;i++)t=E[i],s.format!==r.GWd?null!==S?M?T&&n.compressedTexSubImage2D(e.TEXTURE_2D,i,0,0,t.width,t.height,S,t.data):n.compressedTexImage2D(e.TEXTURE_2D,i,w,t.width,t.height,0,t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):M?T&&n.texSubImage2D(e.TEXTURE_2D,i,0,0,t.width,t.height,S,A,t.data):n.texImage2D(e.TEXTURE_2D,i,w,t.width,t.height,0,S,A,t.data)}}else if(s.isDataArrayTexture){if(M){if(C&&n.texStorage3D(e.TEXTURE_2D_ARRAY,R,w,m.width,m.height,m.depth),T){if(s.layerUpdates.size>0){let t=(0,r.Nex)(m.width,m.height,s.format,s.type);for(let r of s.layerUpdates){let i=m.data.subarray(r*t/m.data.BYTES_PER_ELEMENT,(r+1)*t/m.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,r,m.width,m.height,1,S,A,i)}s.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,m.width,m.height,m.depth,S,A,m.data)}}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,w,m.width,m.height,m.depth,0,S,A,m.data)}else if(s.isData3DTexture)M?(C&&n.texStorage3D(e.TEXTURE_3D,R,w,m.width,m.height,m.depth),T&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,m.width,m.height,m.depth,S,A,m.data)):n.texImage3D(e.TEXTURE_3D,0,w,m.width,m.height,m.depth,0,S,A,m.data);else if(s.isFramebufferTexture){if(C){if(M)n.texStorage2D(e.TEXTURE_2D,R,w,m.width,m.height);else{let t=m.width,r=m.height;for(let i=0;i<R;i++)n.texImage2D(e.TEXTURE_2D,i,w,t,r,0,S,A,null),t>>=1,r>>=1}}}else if(E.length>0){if(M&&C){let t=H(E[0]);n.texStorage2D(e.TEXTURE_2D,R,w,t.width,t.height)}for(let r=0,i=E.length;r<i;r++)t=E[r],M?T&&n.texSubImage2D(e.TEXTURE_2D,r,0,0,S,A,t):n.texImage2D(e.TEXTURE_2D,r,w,S,A,t);s.generateMipmaps=!1}else if(M){if(C){let t=H(m);n.texStorage2D(e.TEXTURE_2D,R,w,t.width,t.height)}T&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,S,A,m)}else n.texImage2D(e.TEXTURE_2D,0,w,S,A,m);v(s)&&y(u),h.__version=d.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}function L(t,r,a,s,l,c){let d=o.convert(a.format,a.colorSpace),h=o.convert(a.type),f=b(a.internalFormat,d,h,a.colorSpace),p=i.get(r),m=i.get(a);if(m.__renderTarget=r,!p.__hasExternalTextures){let t=Math.max(1,r.width>>c),i=Math.max(1,r.height>>c);l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?n.texImage3D(l,c,f,t,i,r.depth,0,d,h,null):n.texImage2D(l,c,f,t,i,0,d,h,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),U(r)?u.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,s,l,m.__webglTexture,0,F(r)):(l===e.TEXTURE_2D||l>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,s,l,m.__webglTexture,c),n.bindFramebuffer(e.FRAMEBUFFER,null)}function D(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){let i=n.depthTexture,a=i&&i.isDepthTexture?i.type:null,o=x(n.stencilBuffer,a),s=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,l=F(n);U(n)?u.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,l,o,n.width,n.height):r?e.renderbufferStorageMultisample(e.RENDERBUFFER,l,o,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,o,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,s,e.RENDERBUFFER,t)}else{let t=n.textures;for(let i=0;i<t.length;i++){let a=t[i],s=o.convert(a.format,a.colorSpace),l=o.convert(a.type),c=b(a.internalFormat,s,l,a.colorSpace),d=F(n);r&&!1===U(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,d,c,n.width,n.height):U(n)?u.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,d,c,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,c,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function k(t){let a=i.get(t),o=!0===t.isWebGLCubeRenderTarget;if(a.__boundDepthTexture!==t.depthTexture){let e=t.depthTexture;if(a.__depthDisposeCallback&&a.__depthDisposeCallback(),e){let t=()=>{delete a.__boundDepthTexture,delete a.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),a.__depthDisposeCallback=t}a.__boundDepthTexture=e}if(t.depthTexture&&!a.__autoAllocateDepthBuffer){if(o)throw Error("target.depthTexture not supported in Cube render targets");!function(t,a){if(a&&a.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!(a.depthTexture&&a.depthTexture.isDepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let o=i.get(a.depthTexture);o.__renderTarget=a,o.__webglTexture&&a.depthTexture.image.width===a.width&&a.depthTexture.image.height===a.height||(a.depthTexture.image.width=a.width,a.depthTexture.image.height=a.height,a.depthTexture.needsUpdate=!0),M(a.depthTexture,0);let s=o.__webglTexture,l=F(a);if(a.depthTexture.format===r.zdS)U(a)?u.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0);else if(a.depthTexture.format===r.dcC)U(a)?u.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0);else throw Error("Unknown depthTexture format")}(a.__webglFramebuffer,t)}else if(o){a.__webglDepthbuffer=[];for(let r=0;r<6;r++)if(n.bindFramebuffer(e.FRAMEBUFFER,a.__webglFramebuffer[r]),void 0===a.__webglDepthbuffer[r])a.__webglDepthbuffer[r]=e.createRenderbuffer(),D(a.__webglDepthbuffer[r],t,!1);else{let n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,i=a.__webglDepthbuffer[r];e.bindRenderbuffer(e.RENDERBUFFER,i),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,i)}}else if(n.bindFramebuffer(e.FRAMEBUFFER,a.__webglFramebuffer),void 0===a.__webglDepthbuffer)a.__webglDepthbuffer=e.createRenderbuffer(),D(a.__webglDepthbuffer,t,!1);else{let n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,r=a.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,r)}n.bindFramebuffer(e.FRAMEBUFFER,null)}let O=[],N=[];function F(e){return Math.min(a.maxSamples,e.samples)}function U(e){let n=i.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function z(e,t){let n=e.colorSpace,i=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==r.Zr2&&n!==r.jf0&&(r.ppV.getTransfer(n)===r.KLL?(i!==r.GWd||a!==r.OUM)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),t}function H(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?(d.width=e.naturalWidth||e.width,d.height=e.naturalHeight||e.height):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?(d.width=e.displayWidth,d.height=e.displayHeight):(d.width=e.width,d.height=e.height),d}this.allocateTextureUnit=function(){let e=E;return e>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+a.maxTextures),E+=1,e},this.resetTextureUnits=function(){E=0},this.setTexture2D=M,this.setTexture2DArray=function(t,r){let a=i.get(t);if(t.version>0&&a.__version!==t.version){B(a,t,r);return}n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+r)},this.setTexture3D=function(t,r){let a=i.get(t);if(t.version>0&&a.__version!==t.version){B(a,t,r);return}n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+r)},this.setTextureCube=function(t,s){let l=i.get(t);if(t.version>0&&l.__version!==t.version){(function(t,s,l){if(6!==s.image.length)return;let u=I(t,s),c=s.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+l);let d=i.get(c);if(c.version!==d.__version||!0===u){let t;n.activeTexture(e.TEXTURE0+l);let i=r.ppV.getPrimaries(r.ppV.workingColorSpace),h=s.colorSpace===r.jf0?null:r.ppV.getPrimaries(s.colorSpace),f=s.colorSpace===r.jf0||i===h?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,f);let p=s.isCompressedTexture||s.image[0].isCompressedTexture,m=s.image[0]&&s.image[0].isDataTexture,x=[];for(let e=0;e<6;e++)p||m?x[e]=m?s.image[e].image:s.image[e]:x[e]=g(s.image[e],!0,a.maxCubemapSize),x[e]=z(s,x[e]);let S=x[0],A=o.convert(s.format,s.colorSpace),w=o.convert(s.type),E=b(s.internalFormat,A,w,s.colorSpace),M=!0!==s.isVideoTexture,C=void 0===d.__version||!0===u,T=c.dataReady,R=_(s,S);if(P(e.TEXTURE_CUBE_MAP,s),p){M&&C&&n.texStorage2D(e.TEXTURE_CUBE_MAP,R,E,S.width,S.height);for(let i=0;i<6;i++){t=x[i].mipmaps;for(let a=0;a<t.length;a++){let o=t[a];s.format!==r.GWd?null!==A?M?T&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,a,0,0,o.width,o.height,A,o.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,a,E,o.width,o.height,0,o.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):M?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,a,0,0,o.width,o.height,A,w,o.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,a,E,o.width,o.height,0,A,w,o.data)}}}else{if(t=s.mipmaps,M&&C){t.length>0&&R++;let r=H(x[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,R,E,r.width,r.height)}for(let r=0;r<6;r++)if(m){M?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,0,0,x[r].width,x[r].height,A,w,x[r].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,E,x[r].width,x[r].height,0,A,w,x[r].data);for(let i=0;i<t.length;i++){let a=t[i].image[r].image;M?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,0,0,a.width,a.height,A,w,a.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,E,a.width,a.height,0,A,w,a.data)}}else{M?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,0,0,A,w,x[r]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,E,A,w,x[r]);for(let i=0;i<t.length;i++){let a=t[i];M?T&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,0,0,A,w,a.image[r]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,E,A,w,a.image[r])}}}v(s)&&y(e.TEXTURE_CUBE_MAP),d.__version=c.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version})(l,t,s);return}n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture,e.TEXTURE0+s)},this.rebindTextures=function(t,n,r){let a=i.get(t);void 0!==n&&L(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==r&&k(t)},this.setupRenderTarget=function(t){let r=t.texture,a=i.get(t),l=i.get(r);t.addEventListener("dispose",A);let u=t.textures,c=!0===t.isWebGLCubeRenderTarget,d=u.length>1;if(!d&&(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=r.version,s.memory.textures++),c){a.__webglFramebuffer=[];for(let t=0;t<6;t++)if(r.mipmaps&&r.mipmaps.length>0){a.__webglFramebuffer[t]=[];for(let n=0;n<r.mipmaps.length;n++)a.__webglFramebuffer[t][n]=e.createFramebuffer()}else a.__webglFramebuffer[t]=e.createFramebuffer()}else{if(r.mipmaps&&r.mipmaps.length>0){a.__webglFramebuffer=[];for(let t=0;t<r.mipmaps.length;t++)a.__webglFramebuffer[t]=e.createFramebuffer()}else a.__webglFramebuffer=e.createFramebuffer();if(d)for(let t=0,n=u.length;t<n;t++){let n=i.get(u[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),s.memory.textures++)}if(t.samples>0&&!1===U(t)){a.__webglMultisampledFramebuffer=e.createFramebuffer(),a.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,a.__webglMultisampledFramebuffer);for(let n=0;n<u.length;n++){let r=u[n];a.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,a.__webglColorRenderbuffer[n]);let i=o.convert(r.format,r.colorSpace),s=o.convert(r.type),l=b(r.internalFormat,i,s,r.colorSpace,!0===t.isXRRenderTarget),c=F(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,c,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,a.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(a.__webglDepthRenderbuffer=e.createRenderbuffer(),D(a.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(c){n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),P(e.TEXTURE_CUBE_MAP,r);for(let n=0;n<6;n++)if(r.mipmaps&&r.mipmaps.length>0)for(let i=0;i<r.mipmaps.length;i++)L(a.__webglFramebuffer[n][i],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,i);else L(a.__webglFramebuffer[n],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);v(r)&&y(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(d){for(let r=0,o=u.length;r<o;r++){let o=u[r],s=i.get(o);n.bindTexture(e.TEXTURE_2D,s.__webglTexture),P(e.TEXTURE_2D,o),L(a.__webglFramebuffer,t,o,e.COLOR_ATTACHMENT0+r,e.TEXTURE_2D,0),v(o)&&y(e.TEXTURE_2D)}n.unbindTexture()}else{let i=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(i=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(i,l.__webglTexture),P(i,r),r.mipmaps&&r.mipmaps.length>0)for(let n=0;n<r.mipmaps.length;n++)L(a.__webglFramebuffer[n],t,r,e.COLOR_ATTACHMENT0,i,n);else L(a.__webglFramebuffer,t,r,e.COLOR_ATTACHMENT0,i,0);v(r)&&y(i),n.unbindTexture()}t.depthBuffer&&k(t)},this.updateRenderTargetMipmap=function(t){let r=t.textures;for(let a=0,o=r.length;a<o;a++){let o=r[a];if(v(o)){let r=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D,a=i.get(o).__webglTexture;n.bindTexture(r,a),y(r),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0){if(!1===U(t)){let r=t.textures,a=t.width,o=t.height,s=e.COLOR_BUFFER_BIT,l=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=i.get(t),d=r.length>1;if(d)for(let t=0;t<r.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<r.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),d){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]);let t=i.get(r[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,e.NEAREST),!0===c&&(O.length=0,N.length=0,O.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(O.push(l),N.push(l),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,N)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,O))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),d)for(let t=0;t<r.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);let a=i.get(r[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&c){let n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}}},this.setupDepthRenderbuffer=k,this.setupFrameBufferTexture=L,this.useMultisampledRTT=U}function ty(e,t){return{convert:function(n,i=r.jf0){let a;let o=r.ppV.getTransfer(i);if(n===r.OUM)return e.UNSIGNED_BYTE;if(n===r.Wew)return e.UNSIGNED_SHORT_4_4_4_4;if(n===r.gJ2)return e.UNSIGNED_SHORT_5_5_5_1;if(n===r.Dmk)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===r.tJf)return e.BYTE;if(n===r.fBL)return e.SHORT;if(n===r.cHt)return e.UNSIGNED_SHORT;if(n===r.Yuy)return e.INT;if(n===r.bkx)return e.UNSIGNED_INT;if(n===r.RQf)return e.FLOAT;if(n===r.ix0)return e.HALF_FLOAT;if(n===r.wrO)return e.ALPHA;if(n===r.HIg)return e.RGB;if(n===r.GWd)return e.RGBA;if(n===r.Kzv)return e.LUMINANCE;if(n===r.CMB)return e.LUMINANCE_ALPHA;if(n===r.zdS)return e.DEPTH_COMPONENT;if(n===r.dcC)return e.DEPTH_STENCIL;if(n===r.VT0)return e.RED;if(n===r.ZQM)return e.RED_INTEGER;if(n===r.paN)return e.RG;if(n===r.TkQ)return e.RG_INTEGER;if(n===r.c90)return e.RGBA_INTEGER;if(n===r.IE4||n===r.Nz6||n===r.jR7||n===r.BXX){if(o===r.KLL){if(null===(a=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===r.IE4)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===r.Nz6)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===r.jR7)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===r.BXX)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(a=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===r.IE4)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===r.Nz6)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===r.jR7)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===r.BXX)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}}if(n===r.k6Q||n===r.kTp||n===r.HXV||n===r.pBf){if(null===(a=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===r.k6Q)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===r.kTp)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===r.HXV)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===r.pBf)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===r.CVz||n===r.Riy||n===r.KDk){if(null===(a=t.get("WEBGL_compressed_texture_etc")))return null;if(n===r.CVz||n===r.Riy)return o===r.KLL?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===r.KDk)return o===r.KLL?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(n===r.qa3||n===r.B_h||n===r.czI||n===r.rSH||n===r.Qrf||n===r.psI||n===r.a5J||n===r._QJ||n===r.uB5||n===r.lyL||n===r.bC7||n===r.y3Z||n===r.ojs||n===r.S$4){if(null===(a=t.get("WEBGL_compressed_texture_astc")))return null;if(n===r.qa3)return o===r.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===r.B_h)return o===r.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===r.czI)return o===r.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===r.rSH)return o===r.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===r.Qrf)return o===r.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===r.psI)return o===r.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===r.a5J)return o===r.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===r._QJ)return o===r.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===r.uB5)return o===r.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===r.lyL)return o===r.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===r.bC7)return o===r.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===r.y3Z)return o===r.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===r.ojs)return o===r.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===r.S$4)return o===r.KLL?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===r.Fn||n===r.H23||n===r.W9U){if(null===(a=t.get("EXT_texture_compression_bptc")))return null;if(n===r.Fn)return o===r.KLL?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===r.H23)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===r.W9U)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===r.Kef||n===r.XG_||n===r.HO_||n===r.CWW){if(null===(a=t.get("EXT_texture_compression_rgtc")))return null;if(n===r.Fn)return a.COMPRESSED_RED_RGTC1_EXT;if(n===r.XG_)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===r.HO_)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===r.CWW)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===r.V3x?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}let tb=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,tx=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class t_{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(null===this.texture){let i=new r.gPd;e.properties.get(i).__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(null!==this.texture&&null===this.mesh){let t=e.cameras[0].viewport,n=new r.BKk({vertexShader:tb,fragmentShader:tx,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new r.eaF(new r.bdM(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class tS extends r.Qev{constructor(e,t){super();let n=this,a=null,o=1,s=null,l="local-floor",u=1,c=null,d=null,h=null,f=null,p=null,m=null,g=new t_,v=t.getContextAttributes(),y=null,b=null,x=[],_=[],S=new r.I9Y,A=null,w=new r.ubm;w.viewport=new r.IUQ;let E=new r.ubm;E.viewport=new r.IUQ;let M=[w,E],C=new r.nZQ,T=null,R=null;function P(e){let t=_.indexOf(e.inputSource);if(-1===t)return;let n=x[t];void 0!==n&&(n.update(e.inputSource,e.frame,c||s),n.dispatchEvent({type:e.type,data:e.inputSource}))}function I(){a.removeEventListener("select",P),a.removeEventListener("selectstart",P),a.removeEventListener("selectend",P),a.removeEventListener("squeeze",P),a.removeEventListener("squeezestart",P),a.removeEventListener("squeezeend",P),a.removeEventListener("end",I),a.removeEventListener("inputsourceschange",B);for(let e=0;e<x.length;e++){let t=_[e];null!==t&&(_[e]=null,x[e].disconnect(t))}T=null,R=null,g.reset(),e.setRenderTarget(y),p=null,f=null,h=null,a=null,b=null,N.stop(),n.isPresenting=!1,e.setPixelRatio(A),e.setSize(S.width,S.height,!1),n.dispatchEvent({type:"sessionend"})}function B(e){for(let t=0;t<e.removed.length;t++){let n=e.removed[t],r=_.indexOf(n);r>=0&&(_[r]=null,x[r].disconnect(n))}for(let t=0;t<e.added.length;t++){let n=e.added[t],r=_.indexOf(n);if(-1===r){for(let e=0;e<x.length;e++){if(e>=_.length){_.push(n),r=e;break}if(null===_[e]){_[e]=n,r=e;break}}if(-1===r)break}let i=x[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=x[e];return void 0===t&&(t=new r.R3r,x[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=x[e];return void 0===t&&(t=new r.R3r,x[e]=t),t.getGripSpace()},this.getHand=function(e){let t=x[e];return void 0===t&&(t=new r.R3r,x[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){l=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||s},this.setReferenceSpace=function(e){c=e},this.getBaseLayer=function(){return null!==f?f:p},this.getBinding=function(){return h},this.getFrame=function(){return m},this.getSession=function(){return a},this.setSession=async function(i){if(null!==(a=i)){if(y=e.getRenderTarget(),a.addEventListener("select",P),a.addEventListener("selectstart",P),a.addEventListener("selectend",P),a.addEventListener("squeeze",P),a.addEventListener("squeezestart",P),a.addEventListener("squeezeend",P),a.addEventListener("end",I),a.addEventListener("inputsourceschange",B),!0!==v.xrCompatible&&await t.makeXRCompatible(),A=e.getPixelRatio(),e.getSize(S),"undefined"!=typeof XRWebGLBinding&&"createProjectionLayer"in XRWebGLBinding.prototype){let n=null,i=null,s=null;v.depth&&(s=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=v.stencil?r.dcC:r.zdS,i=v.stencil?r.V3x:r.bkx);let l={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:o};f=(h=new XRWebGLBinding(a,t)).createProjectionLayer(l),a.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),b=new r.nWS(f.textureWidth,f.textureHeight,{format:r.GWd,type:r.OUM,depthTexture:new r.VCu(f.textureWidth,f.textureHeight,i,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:!1===f.ignoreDepthValues,resolveStencilBuffer:!1===f.ignoreDepthValues})}else{let n={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:o};p=new XRWebGLLayer(a,t,n),a.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),b=new r.nWS(p.framebufferWidth,p.framebufferHeight,{format:r.GWd,type:r.OUM,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil,resolveDepthBuffer:!1===p.ignoreDepthValues,resolveStencilBuffer:!1===p.ignoreDepthValues})}b.isXRRenderTarget=!0,this.setFoveation(u),c=null,s=await a.requestReferenceSpace(l),N.setContext(a),N.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==a)return a.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};let L=new r.Pq0,D=new r.Pq0;function k(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===a)return;let t=e.near,n=e.far;null!==g.texture&&(g.depthNear>0&&(t=g.depthNear),g.depthFar>0&&(n=g.depthFar)),C.near=E.near=w.near=t,C.far=E.far=w.far=n,(T!==C.near||R!==C.far)&&(a.updateRenderState({depthNear:C.near,depthFar:C.far}),T=C.near,R=C.far),w.layers.mask=2|e.layers.mask,E.layers.mask=4|e.layers.mask,C.layers.mask=w.layers.mask|E.layers.mask;let i=e.parent,o=C.cameras;k(C,i);for(let e=0;e<o.length;e++)k(o[e],i);2===o.length?function(e,t,n){L.setFromMatrixPosition(t.matrixWorld),D.setFromMatrixPosition(n.matrixWorld);let r=L.distanceTo(D),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],d=(a[8]+1)/a[0],h=r/(-c+d),f=-(h*c);if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(f),e.translateZ(h),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===i[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{let t=o+h,n=s+h;e.projectionMatrix.makePerspective(o*c-f,o*d+(r-f),l*s/n*t,u*s/n*t,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(C,w,E):C.projectionMatrix.copy(w.projectionMatrix),null===i?e.matrix.copy(C.matrixWorld):(e.matrix.copy(i.matrixWorld),e.matrix.invert(),e.matrix.multiply(C.matrixWorld)),e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(C.projectionMatrix),e.projectionMatrixInverse.copy(C.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*r.a55*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)},this.getCamera=function(){return C},this.getFoveation=function(){if(null!==f||null!==p)return u},this.setFoveation=function(e){u=e,null!==f&&(f.fixedFoveation=e),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==g.texture},this.getDepthSensingMesh=function(){return g.getMesh(C)};let O=null,N=new i;N.setAnimationLoop(function(t,i){if(d=i.getViewerPose(c||s),m=i,null!==d){let t=d.views;null!==p&&(e.setRenderTargetFramebuffer(b,p.framebuffer),e.setRenderTarget(b));let n=!1;t.length!==C.cameras.length&&(C.cameras.length=0,n=!0);for(let i=0;i<t.length;i++){let a=t[i],o=null;if(null!==p)o=p.getViewport(a);else{let t=h.getViewSubImage(f,a);o=t.viewport,0===i&&(e.setRenderTargetTextures(b,t.colorTexture,f.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(b))}let s=M[i];void 0===s&&((s=new r.ubm).layers.enable(i),s.viewport=new r.IUQ,M[i]=s),s.matrix.fromArray(a.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(a.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(o.x,o.y,o.width,o.height),0===i&&(C.matrix.copy(s.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),!0===n&&C.cameras.push(s)}let i=a.enabledFeatures;if(i&&i.includes("depth-sensing")&&"gpu-optimized"==a.depthUsage&&h){let n=h.getDepthInformation(t[0]);n&&n.isValid&&n.texture&&g.init(e,n,a.renderState)}}for(let e=0;e<x.length;e++){let t=_[e],n=x[e];null!==t&&void 0!==n&&n.update(t,i,c||s)}O&&O(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),m=null}),this.setAnimationLoop=function(e){O=e},this.dispose=function(){}}}let tA=new r.O9p,tw=new r.kn4;function tE(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(e,i){e.opacity.value=i.opacity,i.color&&e.diffuse.value.copy(i.color),i.emissive&&e.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(e.map.value=i.map,n(i.map,e.mapTransform)),i.alphaMap&&(e.alphaMap.value=i.alphaMap,n(i.alphaMap,e.alphaMapTransform)),i.bumpMap&&(e.bumpMap.value=i.bumpMap,n(i.bumpMap,e.bumpMapTransform),e.bumpScale.value=i.bumpScale,i.side===r.hsX&&(e.bumpScale.value*=-1)),i.normalMap&&(e.normalMap.value=i.normalMap,n(i.normalMap,e.normalMapTransform),e.normalScale.value.copy(i.normalScale),i.side===r.hsX&&e.normalScale.value.negate()),i.displacementMap&&(e.displacementMap.value=i.displacementMap,n(i.displacementMap,e.displacementMapTransform),e.displacementScale.value=i.displacementScale,e.displacementBias.value=i.displacementBias),i.emissiveMap&&(e.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,e.emissiveMapTransform)),i.specularMap&&(e.specularMap.value=i.specularMap,n(i.specularMap,e.specularMapTransform)),i.alphaTest>0&&(e.alphaTest.value=i.alphaTest);let a=t.get(i),o=a.envMap,s=a.envMapRotation;o&&(e.envMap.value=o,tA.copy(s),tA.x*=-1,tA.y*=-1,tA.z*=-1,o.isCubeTexture&&!1===o.isRenderTargetTexture&&(tA.y*=-1,tA.z*=-1),e.envMapRotation.value.setFromMatrix4(tw.makeRotationFromEuler(tA)),e.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,e.reflectivity.value=i.reflectivity,e.ior.value=i.ior,e.refractionRatio.value=i.refractionRatio),i.lightMap&&(e.lightMap.value=i.lightMap,e.lightMapIntensity.value=i.lightMapIntensity,n(i.lightMap,e.lightMapTransform)),i.aoMap&&(e.aoMap.value=i.aoMap,e.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,(0,r._Ut)(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,a,o,s,l){a.isMeshBasicMaterial?i(e,a):a.isMeshLambertMaterial?i(e,a):a.isMeshToonMaterial?(i(e,a),a.gradientMap&&(e.gradientMap.value=a.gradientMap)):a.isMeshPhongMaterial?(i(e,a),e.specular.value.copy(a.specular),e.shininess.value=Math.max(a.shininess,1e-4)):a.isMeshStandardMaterial?(i(e,a),e.metalness.value=a.metalness,a.metalnessMap&&(e.metalnessMap.value=a.metalnessMap,n(a.metalnessMap,e.metalnessMapTransform)),e.roughness.value=a.roughness,a.roughnessMap&&(e.roughnessMap.value=a.roughnessMap,n(a.roughnessMap,e.roughnessMapTransform)),a.envMap&&(e.envMapIntensity.value=a.envMapIntensity),a.isMeshPhysicalMaterial&&(e.ior.value=a.ior,a.sheen>0&&(e.sheenColor.value.copy(a.sheenColor).multiplyScalar(a.sheen),e.sheenRoughness.value=a.sheenRoughness,a.sheenColorMap&&(e.sheenColorMap.value=a.sheenColorMap,n(a.sheenColorMap,e.sheenColorMapTransform)),a.sheenRoughnessMap&&(e.sheenRoughnessMap.value=a.sheenRoughnessMap,n(a.sheenRoughnessMap,e.sheenRoughnessMapTransform))),a.clearcoat>0&&(e.clearcoat.value=a.clearcoat,e.clearcoatRoughness.value=a.clearcoatRoughness,a.clearcoatMap&&(e.clearcoatMap.value=a.clearcoatMap,n(a.clearcoatMap,e.clearcoatMapTransform)),a.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=a.clearcoatRoughnessMap,n(a.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),a.clearcoatNormalMap&&(e.clearcoatNormalMap.value=a.clearcoatNormalMap,n(a.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(a.clearcoatNormalScale),a.side===r.hsX&&e.clearcoatNormalScale.value.negate())),a.dispersion>0&&(e.dispersion.value=a.dispersion),a.iridescence>0&&(e.iridescence.value=a.iridescence,e.iridescenceIOR.value=a.iridescenceIOR,e.iridescenceThicknessMinimum.value=a.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=a.iridescenceThicknessRange[1],a.iridescenceMap&&(e.iridescenceMap.value=a.iridescenceMap,n(a.iridescenceMap,e.iridescenceMapTransform)),a.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=a.iridescenceThicknessMap,n(a.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),a.transmission>0&&(e.transmission.value=a.transmission,e.transmissionSamplerMap.value=l.texture,e.transmissionSamplerSize.value.set(l.width,l.height),a.transmissionMap&&(e.transmissionMap.value=a.transmissionMap,n(a.transmissionMap,e.transmissionMapTransform)),e.thickness.value=a.thickness,a.thicknessMap&&(e.thicknessMap.value=a.thicknessMap,n(a.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=a.attenuationDistance,e.attenuationColor.value.copy(a.attenuationColor)),a.anisotropy>0&&(e.anisotropyVector.value.set(a.anisotropy*Math.cos(a.anisotropyRotation),a.anisotropy*Math.sin(a.anisotropyRotation)),a.anisotropyMap&&(e.anisotropyMap.value=a.anisotropyMap,n(a.anisotropyMap,e.anisotropyMapTransform))),e.specularIntensity.value=a.specularIntensity,e.specularColor.value.copy(a.specularColor),a.specularColorMap&&(e.specularColorMap.value=a.specularColorMap,n(a.specularColorMap,e.specularColorMapTransform)),a.specularIntensityMap&&(e.specularIntensityMap.value=a.specularIntensityMap,n(a.specularIntensityMap,e.specularIntensityMapTransform)))):a.isMeshMatcapMaterial?(i(e,a),a.matcap&&(e.matcap.value=a.matcap)):a.isMeshDepthMaterial?i(e,a):a.isMeshDistanceMaterial?(i(e,a),function(e,n){let r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,a)):a.isMeshNormalMaterial?i(e,a):a.isLineBasicMaterial?(e.diffuse.value.copy(a.color),e.opacity.value=a.opacity,a.map&&(e.map.value=a.map,n(a.map,e.mapTransform)),a.isLineDashedMaterial&&(e.dashSize.value=a.dashSize,e.totalSize.value=a.dashSize+a.gapSize,e.scale.value=a.scale)):a.isPointsMaterial?(e.diffuse.value.copy(a.color),e.opacity.value=a.opacity,e.size.value=a.size*o,e.scale.value=.5*s,a.map&&(e.map.value=a.map,n(a.map,e.uvTransform)),a.alphaMap&&(e.alphaMap.value=a.alphaMap,n(a.alphaMap,e.alphaMapTransform)),a.alphaTest>0&&(e.alphaTest.value=a.alphaTest)):a.isSpriteMaterial?(e.diffuse.value.copy(a.color),e.opacity.value=a.opacity,e.rotation.value=a.rotation,a.map&&(e.map.value=a.map,n(a.map,e.mapTransform)),a.alphaMap&&(e.alphaMap.value=a.alphaMap,n(a.alphaMap,e.alphaMapTransform)),a.alphaTest>0&&(e.alphaTest.value=a.alphaTest)):a.isShadowMaterial?(e.color.value.copy(a.color),e.opacity.value=a.opacity):a.isShaderMaterial&&(a.uniformsNeedUpdate=!1)}}}function tM(e,t,n,r){let i={},a={},o=[],s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e){let t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){let n=t.target;n.removeEventListener("dispose",u);let r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){let n=t.program;r.uniformBlockBinding(e,n)},update:function(n,c){let d=i[n.id];void 0===d&&(function(e){let t=e.uniforms,n=0;for(let e=0,r=t.length;e<r;e++){let r=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0,t=r.length;e<t;e++){let t=r[e],i=Array.isArray(t.value)?t.value:[t.value];for(let e=0,r=i.length;e<r;e++){let r=l(i[e]),a=n%16,o=a%r.boundary,s=a+o;n+=o,0!==s&&16-s<r.storage&&(n+=16-s),t.__data=new Float32Array(r.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,n+=r.storage}}}let r=n%16;r>0&&(n+=16-r),e.__size=n,e.__cache={}}(n),d=function(t){let n=function(){for(let e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;let r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",u));let h=c.program;r.updateUBOMapping(n,h);let f=t.render.frame;a[n.id]!==f&&(function(t){let n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=r.length;t<n;t++){let n=Array.isArray(r[t])?r[t]:[r[t]];for(let r=0,i=n.length;r<i;r++){let i=n[r];if(!0===function(e,t,n,r){let i=e.value,a=t+"_"+n;if(void 0===r[a])return"number"==typeof i||"boolean"==typeof i?r[a]=i:r[a]=i.clone(),!0;{let e=r[a];if("number"==typeof i||"boolean"==typeof i){if(e!==i)return r[a]=i,!0}else if(!1===e.equals(i))return e.copy(i),!0}return!1}(i,t,r,a)){let t=i.__offset,n=Array.isArray(i.value)?i.value:[i.value],r=0;for(let a=0;a<n.length;a++){let o=n[a],s=l(o);"number"==typeof o||"boolean"==typeof o?(i.__data[0]=o,e.bufferSubData(e.UNIFORM_BUFFER,t+r,i.__data)):o.isMatrix3?(i.__data[0]=o.elements[0],i.__data[1]=o.elements[1],i.__data[2]=o.elements[2],i.__data[3]=0,i.__data[4]=o.elements[3],i.__data[5]=o.elements[4],i.__data[6]=o.elements[5],i.__data[7]=0,i.__data[8]=o.elements[6],i.__data[9]=o.elements[7],i.__data[10]=o.elements[8],i.__data[11]=0):(o.toArray(i.__data,r),r+=s.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,i.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=f)},dispose:function(){for(let t in i)e.deleteBuffer(i[t]);o=[],i={},a={}}}}class tC{constructor(e={}){let t,n,o,s,l,u,c,d,y,b,x,_,S,A,w,E,M,C,T,R,P,I,B,L,D;let{canvas:G=(0,r.lPF)(),context:V=null,depth:j=!0,stencil:W=!1,alpha:X=!1,antialias:J=!1,premultipliedAlpha:Y=!0,preserveDrawingBuffer:K=!1,powerPreference:q="default",failIfMajorPerformanceCaveat:$=!1,reverseDepthBuffer:Q=!1}=e;if(this.isWebGLRenderer=!0,null!==V){if("undefined"!=typeof WebGLRenderingContext&&V instanceof WebGLRenderingContext)throw Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");t=V.getContextAttributes().alpha}else t=X;let Z=new Uint32Array(4),ee=new Int32Array(4),et=null,en=null,er=[],ei=[];this.domElement=G,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=r.er$,this.toneMapping=r.y_p,this.toneMappingExposure=1;let ea=this,eo=!1,es=0,el=0,eu=null,ec=-1,ed=null,eh=new r.IUQ,ef=new r.IUQ,ep=null,em=new r.Q1f(0),eg=0,ev=G.width,ey=G.height,eb=1,ex=null,e_=null,eS=new r.IUQ(0,0,ev,ey),eA=new r.IUQ(0,0,ev,ey),ew=!1,eE=new r.PPD,eM=!1,eC=!1;this.transmissionResolutionScale=1;let eT=new r.kn4,eR=new r.kn4,eP=new r.Pq0,eI=new r.IUQ,eB={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},eL=!1;function eD(){return null===eu?eb:1}let ek=V;function eO(e,t){return G.getContext(e,t)}try{if("setAttribute"in G&&G.setAttribute("data-engine",`three.js r${r.sPf}`),G.addEventListener("webglcontextlost",eU,!1),G.addEventListener("webglcontextrestored",ez,!1),G.addEventListener("webglcontextcreationerror",eH,!1),null===ek){let e="webgl2";if(ek=eO(e,{alpha:!0,depth:j,stencil:W,antialias:J,premultipliedAlpha:Y,preserveDrawingBuffer:K,powerPreference:q,failIfMajorPerformanceCaveat:$}),null===ek){if(eO(e))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}}}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function eN(){(n=new O(ek)).init(),B=new ty(ek,n),o=new m(ek,n,e,B),s=new tg(ek,n),o.reverseDepthBuffer&&Q&&s.buffers.depth.setReversed(!0),l=new U(ek),u=new tr,c=new tv(ek,n,s,u,o,B,l),d=new v(ea),y=new k(ea),b=new a(ek),L=new f(ek,b),x=new N(ek,b,l,L),_=new H(ek,x,b,l),R=new z(ek,o,c),M=new g(u),S=new tn(ea,d,y,n,o,L,M),A=new tE(ea,u),w=new ts,E=new tf(n),T=new h(ea,d,y,s,_,t,Y),C=new tp(ea,_,o),D=new tM(ek,l,o,s),P=new p(ek,n,l),I=new F(ek,n,l),l.programs=S.programs,ea.capabilities=o,ea.extensions=n,ea.properties=u,ea.renderLists=w,ea.shadowMap=C,ea.state=s,ea.info=l}eN();let eF=new tS(ea,ek);function eU(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),eo=!0}function ez(){console.log("THREE.WebGLRenderer: Context Restored."),eo=!1;let e=l.autoReset,t=C.enabled,n=C.autoUpdate,r=C.needsUpdate,i=C.type;eN(),l.autoReset=e,C.enabled=t,C.autoUpdate=n,C.needsUpdate=r,C.type=i}function eH(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function eG(e){let t=e.target;t.removeEventListener("dispose",eG),function(e){let t=u.get(e).programs;void 0!==t&&(t.forEach(function(e){S.releaseProgram(e)}),e.isShaderMaterial&&S.releaseShaderCache(e))}(t),u.remove(t)}function eV(e,t,n){!0===e.transparent&&e.side===r.$EB&&!1===e.forceSinglePass?(e.side=r.hsX,e.needsUpdate=!0,e0(e,t,n),e.side=r.hB5,e.needsUpdate=!0,e0(e,t,n),e.side=r.$EB):e0(e,t,n)}this.xr=eF,this.getContext=function(){return ek},this.getContextAttributes=function(){return ek.getContextAttributes()},this.forceContextLoss=function(){let e=n.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){let e=n.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return eb},this.setPixelRatio=function(e){void 0!==e&&(eb=e,this.setSize(ev,ey,!1))},this.getSize=function(e){return e.set(ev,ey)},this.setSize=function(e,t,n=!0){if(eF.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ev=e,ey=t,G.width=Math.floor(e*eb),G.height=Math.floor(t*eb),!0===n&&(G.style.width=e+"px",G.style.height=t+"px"),this.setViewport(0,0,e,t)},this.getDrawingBufferSize=function(e){return e.set(ev*eb,ey*eb).floor()},this.setDrawingBufferSize=function(e,t,n){ev=e,ey=t,eb=n,G.width=Math.floor(e*n),G.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(eh)},this.getViewport=function(e){return e.copy(eS)},this.setViewport=function(e,t,n,r){e.isVector4?eS.set(e.x,e.y,e.z,e.w):eS.set(e,t,n,r),s.viewport(eh.copy(eS).multiplyScalar(eb).round())},this.getScissor=function(e){return e.copy(eA)},this.setScissor=function(e,t,n,r){e.isVector4?eA.set(e.x,e.y,e.z,e.w):eA.set(e,t,n,r),s.scissor(ef.copy(eA).multiplyScalar(eb).round())},this.getScissorTest=function(){return ew},this.setScissorTest=function(e){s.setScissorTest(ew=e)},this.setOpaqueSort=function(e){ex=e},this.setTransparentSort=function(e){e_=e},this.getClearColor=function(e){return e.copy(T.getClearColor())},this.setClearColor=function(){T.setClearColor(...arguments)},this.getClearAlpha=function(){return T.getClearAlpha()},this.setClearAlpha=function(){T.setClearAlpha(...arguments)},this.clear=function(e=!0,t=!0,n=!0){let i=0;if(e){let e=!1;if(null!==eu){let t=eu.texture.format;e=t===r.c90||t===r.TkQ||t===r.ZQM}if(e){let e=eu.texture.type,t=e===r.OUM||e===r.bkx||e===r.cHt||e===r.V3x||e===r.Wew||e===r.gJ2,n=T.getClearColor(),i=T.getClearAlpha(),a=n.r,o=n.g,s=n.b;t?(Z[0]=a,Z[1]=o,Z[2]=s,Z[3]=i,ek.clearBufferuiv(ek.COLOR,0,Z)):(ee[0]=a,ee[1]=o,ee[2]=s,ee[3]=i,ek.clearBufferiv(ek.COLOR,0,ee))}else i|=ek.COLOR_BUFFER_BIT}t&&(i|=ek.DEPTH_BUFFER_BIT),n&&(i|=ek.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(0xffffffff)),ek.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){G.removeEventListener("webglcontextlost",eU,!1),G.removeEventListener("webglcontextrestored",ez,!1),G.removeEventListener("webglcontextcreationerror",eH,!1),T.dispose(),w.dispose(),E.dispose(),u.dispose(),d.dispose(),y.dispose(),_.dispose(),L.dispose(),D.dispose(),S.dispose(),eF.dispose(),eF.removeEventListener("sessionstart",eX),eF.removeEventListener("sessionend",eJ),eY.stop()},this.renderBufferDirect=function(e,t,i,a,l,h){let f;null===t&&(t=eB);let p=l.isMesh&&0>l.matrixWorld.determinant(),m=function(e,t,n,i,a){var l;!0!==t.isScene&&(t=eB),c.resetTextureUnits();let h=t.fog,f=i.isMeshStandardMaterial?t.environment:null,p=null===eu?ea.outputColorSpace:!0===eu.isXRRenderTarget?eu.texture.colorSpace:r.Zr2,m=(i.isMeshStandardMaterial?y:d).get(i.envMap||f),g=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,v=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),b=!!n.morphAttributes.position,x=!!n.morphAttributes.normal,_=!!n.morphAttributes.color,S=r.y_p;i.toneMapped&&(null===eu||!0===eu.isXRRenderTarget)&&(S=ea.toneMapping);let w=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,E=void 0!==w?w.length:0,C=u.get(i),T=en.state.lights;if(!0===eM&&(!0===eC||e!==ed)){let t=e===ed&&i.id===ec;M.setState(i,e,t)}let P=!1;i.version===C.__version?C.needsLights&&C.lightsStateVersion!==T.state.version?P=!0:C.outputColorSpace!==p?P=!0:a.isBatchedMesh&&!1===C.batching?P=!0:a.isBatchedMesh||!0!==C.batching?a.isBatchedMesh&&!0===C.batchingColor&&null===a.colorTexture?P=!0:a.isBatchedMesh&&!1===C.batchingColor&&null!==a.colorTexture?P=!0:a.isInstancedMesh&&!1===C.instancing?P=!0:a.isInstancedMesh||!0!==C.instancing?a.isSkinnedMesh&&!1===C.skinning?P=!0:a.isSkinnedMesh||!0!==C.skinning?a.isInstancedMesh&&!0===C.instancingColor&&null===a.instanceColor?P=!0:a.isInstancedMesh&&!1===C.instancingColor&&null!==a.instanceColor?P=!0:a.isInstancedMesh&&!0===C.instancingMorph&&null===a.morphTexture?P=!0:a.isInstancedMesh&&!1===C.instancingMorph&&null!==a.morphTexture?P=!0:C.envMap!==m?P=!0:!0===i.fog&&C.fog!==h?P=!0:void 0!==C.numClippingPlanes&&(C.numClippingPlanes!==M.numPlanes||C.numIntersection!==M.numIntersection)?P=!0:C.vertexAlphas!==g?P=!0:C.vertexTangents!==v?P=!0:C.morphTargets!==b?P=!0:C.morphNormals!==x?P=!0:C.morphColors!==_?P=!0:C.toneMapping!==S?P=!0:C.morphTargetsCount!==E&&(P=!0):P=!0:P=!0:P=!0:(P=!0,C.__version=i.version);let I=C.currentProgram;!0===P&&(I=e0(i,t,a));let B=!1,L=!1,k=!1,O=I.getUniforms(),N=C.uniforms;if(s.useProgram(I.program)&&(B=!0,L=!0,k=!0),i.id!==ec&&(ec=i.id,L=!0),B||ed!==e){s.buffers.depth.getReversed()?(eT.copy(e.projectionMatrix),(0,r.xiE)(eT),(0,r.Mmk)(eT),O.setValue(ek,"projectionMatrix",eT)):O.setValue(ek,"projectionMatrix",e.projectionMatrix),O.setValue(ek,"viewMatrix",e.matrixWorldInverse);let t=O.map.cameraPosition;void 0!==t&&t.setValue(ek,eP.setFromMatrixPosition(e.matrixWorld)),o.logarithmicDepthBuffer&&O.setValue(ek,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&O.setValue(ek,"isOrthographic",!0===e.isOrthographicCamera),ed!==e&&(ed=e,L=!0,k=!0)}if(a.isSkinnedMesh){O.setOptional(ek,a,"bindMatrix"),O.setOptional(ek,a,"bindMatrixInverse");let e=a.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),O.setValue(ek,"boneTexture",e.boneTexture,c))}a.isBatchedMesh&&(O.setOptional(ek,a,"batchingTexture"),O.setValue(ek,"batchingTexture",a._matricesTexture,c),O.setOptional(ek,a,"batchingIdTexture"),O.setValue(ek,"batchingIdTexture",a._indirectTexture,c),O.setOptional(ek,a,"batchingColorTexture"),null!==a._colorsTexture&&O.setValue(ek,"batchingColorTexture",a._colorsTexture,c));let F=n.morphAttributes;if((void 0!==F.position||void 0!==F.normal||void 0!==F.color)&&R.update(a,n,I),(L||C.receiveShadow!==a.receiveShadow)&&(C.receiveShadow=a.receiveShadow,O.setValue(ek,"receiveShadow",a.receiveShadow)),i.isMeshGouraudMaterial&&null!==i.envMap&&(N.envMap.value=m,N.flipEnvMap.value=m.isCubeTexture&&!1===m.isRenderTargetTexture?-1:1),i.isMeshStandardMaterial&&null===i.envMap&&null!==t.environment&&(N.envMapIntensity.value=t.environmentIntensity),L&&(O.setValue(ek,"toneMappingExposure",ea.toneMappingExposure),C.needsLights&&(l=k,N.ambientLightColor.needsUpdate=l,N.lightProbe.needsUpdate=l,N.directionalLights.needsUpdate=l,N.directionalLightShadows.needsUpdate=l,N.pointLights.needsUpdate=l,N.pointLightShadows.needsUpdate=l,N.spotLights.needsUpdate=l,N.spotLightShadows.needsUpdate=l,N.rectAreaLights.needsUpdate=l,N.hemisphereLights.needsUpdate=l),h&&!0===i.fog&&A.refreshFogUniforms(N,h),A.refreshMaterialUniforms(N,i,eb,ey,en.state.transmissionRenderTarget[e.id]),eW.upload(ek,e1(C),N,c)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(eW.upload(ek,e1(C),N,c),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&O.setValue(ek,"center",a.center),O.setValue(ek,"modelViewMatrix",a.modelViewMatrix),O.setValue(ek,"normalMatrix",a.normalMatrix),O.setValue(ek,"modelMatrix",a.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){let e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++){let n=e[t];D.update(n,I),D.bind(n,I)}}return I}(e,t,i,a,l);s.setMaterial(a,p);let g=i.index,v=1;if(!0===a.wireframe){if(void 0===(g=x.getWireframeAttribute(i)))return;v=2}let _=i.drawRange,S=i.attributes.position,w=_.start*v,E=(_.start+_.count)*v;null!==h&&(w=Math.max(w,h.start*v),E=Math.min(E,(h.start+h.count)*v)),null!==g?(w=Math.max(w,0),E=Math.min(E,g.count)):null!=S&&(w=Math.max(w,0),E=Math.min(E,S.count));let C=E-w;if(C<0||C===1/0)return;L.setup(l,a,m,i,g);let T=P;if(null!==g&&(f=b.get(g),(T=I).setIndex(f)),l.isMesh)!0===a.wireframe?(s.setLineWidth(a.wireframeLinewidth*eD()),T.setMode(ek.LINES)):T.setMode(ek.TRIANGLES);else if(l.isLine){let e=a.linewidth;void 0===e&&(e=1),s.setLineWidth(e*eD()),l.isLineSegments?T.setMode(ek.LINES):l.isLineLoop?T.setMode(ek.LINE_LOOP):T.setMode(ek.LINE_STRIP)}else l.isPoints?T.setMode(ek.POINTS):l.isSprite&&T.setMode(ek.TRIANGLES);if(l.isBatchedMesh){if(null!==l._multiDrawInstances)(0,r.mcG)("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),T.renderMultiDrawInstances(l._multiDrawStarts,l._multiDrawCounts,l._multiDrawCount,l._multiDrawInstances);else if(n.get("WEBGL_multi_draw"))T.renderMultiDraw(l._multiDrawStarts,l._multiDrawCounts,l._multiDrawCount);else{let e=l._multiDrawStarts,t=l._multiDrawCounts,n=l._multiDrawCount,r=g?b.get(g).bytesPerElement:1,i=u.get(a).currentProgram.getUniforms();for(let a=0;a<n;a++)i.setValue(ek,"_gl_DrawID",a),T.render(e[a]/r,t[a])}}else if(l.isInstancedMesh)T.renderInstances(w,C,l.count);else if(i.isInstancedBufferGeometry){let e=void 0!==i._maxInstanceCount?i._maxInstanceCount:1/0,t=Math.min(i.instanceCount,e);T.renderInstances(w,C,t)}else T.render(w,C)},this.compile=function(e,t,n=null){null===n&&(n=e),(en=E.get(n)).init(t),ei.push(en),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(en.pushLight(e),e.castShadow&&en.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(en.pushLight(e),e.castShadow&&en.pushShadow(e))}),en.setupLights();let r=new Set;return e.traverse(function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;let t=e.material;if(t){if(Array.isArray(t))for(let i=0;i<t.length;i++){let a=t[i];eV(a,n,e),r.add(a)}else eV(t,n,e),r.add(t)}}),en=ei.pop(),r},this.compileAsync=function(e,t,r=null){let i=this.compile(e,t,r);return new Promise(t=>{function r(){if(i.forEach(function(e){u.get(e).currentProgram.isReady()&&i.delete(e)}),0===i.size){t(e);return}setTimeout(r,10)}null!==n.get("KHR_parallel_shader_compile")?r():setTimeout(r,10)})};let ej=null;function eX(){eY.stop()}function eJ(){eY.start()}let eY=new i;function eK(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers)){if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)en.pushLight(e),e.castShadow&&en.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||eE.intersectsSprite(e)){r&&eI.setFromMatrixPosition(e.matrixWorld).applyMatrix4(eR);let t=_.update(e),i=e.material;i.visible&&et.push(e,t,i,n,eI.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||eE.intersectsObject(e))){let t=_.update(e),i=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),eI.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),eI.copy(t.boundingSphere.center)),eI.applyMatrix4(e.matrixWorld).applyMatrix4(eR)),Array.isArray(i)){let r=t.groups;for(let a=0,o=r.length;a<o;a++){let o=r[a],s=i[o.materialIndex];s&&s.visible&&et.push(e,t,s,n,eI.z,o)}}else i.visible&&et.push(e,t,i,n,eI.z,null)}}let i=e.children;for(let e=0,a=i.length;e<a;e++)eK(i[e],t,n,r)}function eq(e,t,n,r){let i=e.opaque,a=e.transmissive,o=e.transparent;en.setupLightsView(n),!0===eM&&M.setGlobalState(ea.clippingPlanes,n),r&&s.viewport(eh.copy(r)),i.length>0&&eQ(i,t,n),a.length>0&&eQ(a,t,n),o.length>0&&eQ(o,t,n),s.buffers.depth.setTest(!0),s.buffers.depth.setMask(!0),s.buffers.color.setMask(!0),s.setPolygonOffset(!1)}function e$(e,t,i,a){if(null!==(!0===i.isScene?i.overrideMaterial:null))return;void 0===en.state.transmissionRenderTarget[a.id]&&(en.state.transmissionRenderTarget[a.id]=new r.nWS(1,1,{generateMipmaps:!0,type:n.has("EXT_color_buffer_half_float")||n.has("EXT_color_buffer_float")?r.ix0:r.OUM,minFilter:r.$_I,samples:4,stencilBuffer:W,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:r.ppV.workingColorSpace}));let o=en.state.transmissionRenderTarget[a.id],s=a.viewport||eh;o.setSize(s.z*ea.transmissionResolutionScale,s.w*ea.transmissionResolutionScale);let l=ea.getRenderTarget();ea.setRenderTarget(o),ea.getClearColor(em),(eg=ea.getClearAlpha())<1&&ea.setClearColor(0xffffff,.5),ea.clear(),eL&&T.render(i);let u=ea.toneMapping;ea.toneMapping=r.y_p;let d=a.viewport;if(void 0!==a.viewport&&(a.viewport=void 0),en.setupLightsView(a),!0===eM&&M.setGlobalState(ea.clippingPlanes,a),eQ(e,i,a),c.updateMultisampleRenderTarget(o),c.updateRenderTargetMipmap(o),!1===n.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let n=0,o=t.length;n<o;n++){let o=t[n],s=o.object,l=o.geometry,u=o.material,c=o.group;if(u.side===r.$EB&&s.layers.test(a.layers)){let t=u.side;u.side=r.hsX,u.needsUpdate=!0,eZ(s,i,a,l,u,c),u.side=t,u.needsUpdate=!0,e=!0}}!0===e&&(c.updateMultisampleRenderTarget(o),c.updateRenderTargetMipmap(o))}ea.setRenderTarget(l),ea.setClearColor(em,eg),void 0!==d&&(a.viewport=d),ea.toneMapping=u}function eQ(e,t,n){let r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,a=e.length;i<a;i++){let a=e[i],o=a.object,s=a.geometry,l=null===r?a.material:r,u=a.group;o.layers.test(n.layers)&&eZ(o,t,n,s,l,u)}}function eZ(e,t,n,i,a,o){e.onBeforeRender(ea,t,n,i,a,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),a.onBeforeRender(ea,t,n,i,e,o),!0===a.transparent&&a.side===r.$EB&&!1===a.forceSinglePass?(a.side=r.hsX,a.needsUpdate=!0,ea.renderBufferDirect(n,t,i,a,e,o),a.side=r.hB5,a.needsUpdate=!0,ea.renderBufferDirect(n,t,i,a,e,o),a.side=r.$EB):ea.renderBufferDirect(n,t,i,a,e,o),e.onAfterRender(ea,t,n,i,a,o)}function e0(e,t,n){!0!==t.isScene&&(t=eB);let r=u.get(e),i=en.state.lights,a=en.state.shadowsArray,o=i.state.version,s=S.getParameters(e,i.state,a,t,n),l=S.getProgramCacheKey(s),c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?y:d).get(e.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===c&&(e.addEventListener("dispose",eG),c=new Map,r.programs=c);let h=c.get(l);if(void 0!==h){if(r.currentProgram===h&&r.lightsStateVersion===o)return e2(e,s),h}else s.uniforms=S.getUniforms(e),e.onBeforeCompile(s,ea),h=S.acquireProgram(s,l),c.set(l,h),r.uniforms=s.uniforms;let f=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(f.clippingPlanes=M.uniform),e2(e,s),r.needsLights=e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights,r.lightsStateVersion=o,r.needsLights&&(f.ambientLightColor.value=i.state.ambient,f.lightProbe.value=i.state.probe,f.directionalLights.value=i.state.directional,f.directionalLightShadows.value=i.state.directionalShadow,f.spotLights.value=i.state.spot,f.spotLightShadows.value=i.state.spotShadow,f.rectAreaLights.value=i.state.rectArea,f.ltc_1.value=i.state.rectAreaLTC1,f.ltc_2.value=i.state.rectAreaLTC2,f.pointLights.value=i.state.point,f.pointLightShadows.value=i.state.pointShadow,f.hemisphereLights.value=i.state.hemi,f.directionalShadowMap.value=i.state.directionalShadowMap,f.directionalShadowMatrix.value=i.state.directionalShadowMatrix,f.spotShadowMap.value=i.state.spotShadowMap,f.spotLightMatrix.value=i.state.spotLightMatrix,f.spotLightMap.value=i.state.spotLightMap,f.pointShadowMap.value=i.state.pointShadowMap,f.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=h,r.uniformsList=null,h}function e1(e){if(null===e.uniformsList){let t=e.currentProgram.getUniforms();e.uniformsList=eW.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function e2(e,t){let n=u.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}eY.setAnimationLoop(function(e){ej&&ej(e)}),"undefined"!=typeof self&&eY.setContext(self),this.setAnimationLoop=function(e){ej=e,eF.setAnimationLoop(e),null===e?eY.stop():eY.start()},eF.addEventListener("sessionstart",eX),eF.addEventListener("sessionend",eJ),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!0===eo)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===eF.enabled&&!0===eF.isPresenting&&(!0===eF.cameraAutoUpdate&&eF.updateCamera(t),t=eF.getCamera()),!0===e.isScene&&e.onBeforeRender(ea,e,t,eu),(en=E.get(e,ei.length)).init(t),ei.push(en),eR.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),eE.setFromProjectionMatrix(eR),eC=this.localClippingEnabled,eM=M.init(this.clippingPlanes,eC),(et=w.get(e,er.length)).init(),er.push(et),!0===eF.enabled&&!0===eF.isPresenting){let e=ea.xr.getDepthSensingMesh();null!==e&&eK(e,t,-1/0,ea.sortObjects)}eK(e,t,0,ea.sortObjects),et.finish(),!0===ea.sortObjects&&et.sort(ex,e_),(eL=!1===eF.enabled||!1===eF.isPresenting||!1===eF.hasDepthSensing())&&T.addToRenderList(et,e),this.info.render.frame++,!0===eM&&M.beginShadows();let n=en.state.shadowsArray;C.render(n,e,t),!0===eM&&M.endShadows(),!0===this.info.autoReset&&this.info.reset();let r=et.opaque,i=et.transmissive;if(en.setupLights(),t.isArrayCamera){let n=t.cameras;if(i.length>0)for(let t=0,a=n.length;t<a;t++)e$(r,i,e,n[t]);eL&&T.render(e);for(let t=0,r=n.length;t<r;t++){let r=n[t];eq(et,e,r,r.viewport)}}else i.length>0&&e$(r,i,e,t),eL&&T.render(e),eq(et,e,t);null!==eu&&0===el&&(c.updateMultisampleRenderTarget(eu),c.updateRenderTargetMipmap(eu)),!0===e.isScene&&e.onAfterRender(ea,e,t),L.resetDefaultState(),ec=-1,ed=null,ei.pop(),ei.length>0?(en=ei[ei.length-1],!0===eM&&M.setGlobalState(ea.clippingPlanes,en.state.camera)):en=null,er.pop(),et=er.length>0?er[er.length-1]:null},this.getActiveCubeFace=function(){return es},this.getActiveMipmapLevel=function(){return el},this.getRenderTarget=function(){return eu},this.setRenderTargetTextures=function(e,t,r){u.get(e.texture).__webglTexture=t,u.get(e.depthTexture).__webglTexture=r;let i=u.get(e);i.__hasExternalTextures=!0,i.__autoAllocateDepthBuffer=void 0===r,i.__autoAllocateDepthBuffer||!0!==n.has("WEBGL_multisampled_render_to_texture")||(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){let n=u.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t};let e3=ek.createFramebuffer();this.setRenderTarget=function(e,t=0,n=0){eu=e,es=t,el=n;let r=!0,i=null,a=!1,o=!1;if(e){let l=u.get(e);if(void 0!==l.__useDefaultFramebuffer)s.bindFramebuffer(ek.FRAMEBUFFER,null),r=!1;else if(void 0===l.__webglFramebuffer)c.setupRenderTarget(e);else if(l.__hasExternalTextures)c.rebindTextures(e,u.get(e.texture).__webglTexture,u.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){let t=e.depthTexture;if(l.__boundDepthTexture!==t){if(null!==t&&u.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");c.setupDepthRenderbuffer(e)}}let d=e.texture;(d.isData3DTexture||d.isDataArrayTexture||d.isCompressedArrayTexture)&&(o=!0);let h=u.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=Array.isArray(h[t])?h[t][n]:h[t],a=!0):i=e.samples>0&&!1===c.useMultisampledRTT(e)?u.get(e).__webglMultisampledFramebuffer:Array.isArray(h)?h[n]:h,eh.copy(e.viewport),ef.copy(e.scissor),ep=e.scissorTest}else eh.copy(eS).multiplyScalar(eb).floor(),ef.copy(eA).multiplyScalar(eb).floor(),ep=ew;if(0!==n&&(i=e3),s.bindFramebuffer(ek.FRAMEBUFFER,i)&&r&&s.drawBuffers(e,i),s.viewport(eh),s.scissor(ef),s.setScissorTest(ep),a){let r=u.get(e.texture);ek.framebufferTexture2D(ek.FRAMEBUFFER,ek.COLOR_ATTACHMENT0,ek.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(o){let r=u.get(e.texture);ek.framebufferTextureLayer(ek.FRAMEBUFFER,ek.COLOR_ATTACHMENT0,r.__webglTexture,n,t)}else if(null!==e&&0!==n){let t=u.get(e.texture);ek.framebufferTexture2D(ek.FRAMEBUFFER,ek.COLOR_ATTACHMENT0,ek.TEXTURE_2D,t.__webglTexture,n)}ec=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,l){if(!(e&&e.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let c=u.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==l&&(c=c[l]),c){s.bindFramebuffer(ek.FRAMEBUFFER,c);try{let s=e.texture,l=s.format,u=s.type;if(!o.textureFormatReadable(l)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!o.textureTypeReadable(u)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ek.readPixels(t,n,r,i,B.convert(l),B.convert(u),a)}finally{let e=null!==eu?u.get(eu).__webglFramebuffer:null;s.bindFramebuffer(ek.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,i,a,l,c){if(!(e&&e.isWebGLRenderTarget))throw Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let d=u.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==c&&(d=d[c]),d){let c=e.texture,h=c.format,f=c.type;if(!o.textureFormatReadable(h))throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!o.textureTypeReadable(f))throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(t>=0&&t<=e.width-i&&n>=0&&n<=e.height-a){s.bindFramebuffer(ek.FRAMEBUFFER,d);let e=ek.createBuffer();ek.bindBuffer(ek.PIXEL_PACK_BUFFER,e),ek.bufferData(ek.PIXEL_PACK_BUFFER,l.byteLength,ek.STREAM_READ),ek.readPixels(t,n,i,a,B.convert(h),B.convert(f),0);let o=null!==eu?u.get(eu).__webglFramebuffer:null;s.bindFramebuffer(ek.FRAMEBUFFER,o);let c=ek.fenceSync(ek.SYNC_GPU_COMMANDS_COMPLETE,0);return ek.flush(),await (0,r.jej)(ek,c,4),ek.bindBuffer(ek.PIXEL_PACK_BUFFER,e),ek.getBufferSubData(ek.PIXEL_PACK_BUFFER,0,l),ek.deleteBuffer(e),ek.deleteSync(c),l}throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e,t=null,n=0){!0!==e.isTexture&&((0,r.mcG)("WebGLRenderer: copyFramebufferToTexture function signature has changed."),t=arguments[0]||null,e=arguments[1]);let i=Math.pow(2,-n),a=Math.floor(e.image.width*i),o=Math.floor(e.image.height*i),l=null!==t?t.x:0,u=null!==t?t.y:0;c.setTexture2D(e,0),ek.copyTexSubImage2D(ek.TEXTURE_2D,n,0,0,l,u,a,o),s.unbindTexture()};let e4=ek.createFramebuffer(),e5=ek.createFramebuffer();this.copyTextureToTexture=function(e,t,n=null,i=null,a=0,o=null){let l,d,h,f,p,m,g,v,y,b;!0!==e.isTexture&&((0,r.mcG)("WebGLRenderer: copyTextureToTexture function signature has changed."),i=arguments[0]||null,e=arguments[1],t=arguments[2],o=arguments[3]||0,n=null),null===o&&(0!==a?((0,r.mcG)("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),o=a,a=0):o=0);let x=e.isCompressedTexture?e.mipmaps[o]:e.image;if(null!==n)l=n.max.x-n.min.x,d=n.max.y-n.min.y,h=n.isBox3?n.max.z-n.min.z:1,f=n.min.x,p=n.min.y,m=n.isBox3?n.min.z:0;else{let t=Math.pow(2,-a);l=Math.floor(x.width*t),d=Math.floor(x.height*t),h=e.isDataArrayTexture?x.depth:e.isData3DTexture?Math.floor(x.depth*t):1,f=0,p=0,m=0}null!==i?(g=i.x,v=i.y,y=i.z):(g=0,v=0,y=0);let _=B.convert(t.format),S=B.convert(t.type);t.isData3DTexture?(c.setTexture3D(t,0),b=ek.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(c.setTexture2DArray(t,0),b=ek.TEXTURE_2D_ARRAY):(c.setTexture2D(t,0),b=ek.TEXTURE_2D),ek.pixelStorei(ek.UNPACK_FLIP_Y_WEBGL,t.flipY),ek.pixelStorei(ek.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),ek.pixelStorei(ek.UNPACK_ALIGNMENT,t.unpackAlignment);let A=ek.getParameter(ek.UNPACK_ROW_LENGTH),w=ek.getParameter(ek.UNPACK_IMAGE_HEIGHT),E=ek.getParameter(ek.UNPACK_SKIP_PIXELS),M=ek.getParameter(ek.UNPACK_SKIP_ROWS),C=ek.getParameter(ek.UNPACK_SKIP_IMAGES);ek.pixelStorei(ek.UNPACK_ROW_LENGTH,x.width),ek.pixelStorei(ek.UNPACK_IMAGE_HEIGHT,x.height),ek.pixelStorei(ek.UNPACK_SKIP_PIXELS,f),ek.pixelStorei(ek.UNPACK_SKIP_ROWS,p),ek.pixelStorei(ek.UNPACK_SKIP_IMAGES,m);let T=e.isDataArrayTexture||e.isData3DTexture,R=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){let n=u.get(e),r=u.get(t),i=u.get(n.__renderTarget),c=u.get(r.__renderTarget);s.bindFramebuffer(ek.READ_FRAMEBUFFER,i.__webglFramebuffer),s.bindFramebuffer(ek.DRAW_FRAMEBUFFER,c.__webglFramebuffer);for(let n=0;n<h;n++)T&&(ek.framebufferTextureLayer(ek.READ_FRAMEBUFFER,ek.COLOR_ATTACHMENT0,u.get(e).__webglTexture,a,m+n),ek.framebufferTextureLayer(ek.DRAW_FRAMEBUFFER,ek.COLOR_ATTACHMENT0,u.get(t).__webglTexture,o,y+n)),ek.blitFramebuffer(f,p,l,d,g,v,l,d,ek.DEPTH_BUFFER_BIT,ek.NEAREST);s.bindFramebuffer(ek.READ_FRAMEBUFFER,null),s.bindFramebuffer(ek.DRAW_FRAMEBUFFER,null)}else if(0!==a||e.isRenderTargetTexture||u.has(e)){let n=u.get(e),r=u.get(t);s.bindFramebuffer(ek.READ_FRAMEBUFFER,e4),s.bindFramebuffer(ek.DRAW_FRAMEBUFFER,e5);for(let e=0;e<h;e++)T?ek.framebufferTextureLayer(ek.READ_FRAMEBUFFER,ek.COLOR_ATTACHMENT0,n.__webglTexture,a,m+e):ek.framebufferTexture2D(ek.READ_FRAMEBUFFER,ek.COLOR_ATTACHMENT0,ek.TEXTURE_2D,n.__webglTexture,a),R?ek.framebufferTextureLayer(ek.DRAW_FRAMEBUFFER,ek.COLOR_ATTACHMENT0,r.__webglTexture,o,y+e):ek.framebufferTexture2D(ek.DRAW_FRAMEBUFFER,ek.COLOR_ATTACHMENT0,ek.TEXTURE_2D,r.__webglTexture,o),0!==a?ek.blitFramebuffer(f,p,l,d,g,v,l,d,ek.COLOR_BUFFER_BIT,ek.NEAREST):R?ek.copyTexSubImage3D(b,o,g,v,y+e,f,p,l,d):ek.copyTexSubImage2D(b,o,g,v,f,p,l,d);s.bindFramebuffer(ek.READ_FRAMEBUFFER,null),s.bindFramebuffer(ek.DRAW_FRAMEBUFFER,null)}else R?e.isDataTexture||e.isData3DTexture?ek.texSubImage3D(b,o,g,v,y,l,d,h,_,S,x.data):t.isCompressedArrayTexture?ek.compressedTexSubImage3D(b,o,g,v,y,l,d,h,_,x.data):ek.texSubImage3D(b,o,g,v,y,l,d,h,_,S,x):e.isDataTexture?ek.texSubImage2D(ek.TEXTURE_2D,o,g,v,l,d,_,S,x.data):e.isCompressedTexture?ek.compressedTexSubImage2D(ek.TEXTURE_2D,o,g,v,x.width,x.height,_,x.data):ek.texSubImage2D(ek.TEXTURE_2D,o,g,v,l,d,_,S,x);ek.pixelStorei(ek.UNPACK_ROW_LENGTH,A),ek.pixelStorei(ek.UNPACK_IMAGE_HEIGHT,w),ek.pixelStorei(ek.UNPACK_SKIP_PIXELS,E),ek.pixelStorei(ek.UNPACK_SKIP_ROWS,M),ek.pixelStorei(ek.UNPACK_SKIP_IMAGES,C),0===o&&t.generateMipmaps&&ek.generateMipmap(b),s.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n=null,i=null,a=0){return!0!==e.isTexture&&((0,r.mcG)("WebGLRenderer: copyTextureToTexture3D function signature has changed."),n=arguments[0]||null,i=arguments[1]||null,e=arguments[2],t=arguments[3],a=arguments[4]||0),(0,r.mcG)('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(e,t,n,i,a)},this.initRenderTarget=function(e){void 0===u.get(e).__webglFramebuffer&&c.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?c.setTextureCube(e,0):e.isData3DTexture?c.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?c.setTexture2DArray(e,0):c.setTexture2D(e,0),s.unbindTexture()},this.resetState=function(){es=0,el=0,eu=null,s.reset(),L.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return r.TdN}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorspace=r.ppV._getDrawingBufferColorSpace(e),t.unpackColorSpace=r.ppV._getUnpackColorSpace()}}}};